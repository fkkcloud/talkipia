angular.module("app",["ngRoute","duScroll"]),angular.module("app").controller("ApplicationCtrl",["SessionSvc","$rootScope","$scope","$window","$http","$timeout",function(o,t,e,n,a,i){function s(){function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()}e.guid=s(),window.onbeforeunload=function(){o.remove(e.guid)};var l,r=document.location.hostname,g="192.168.0.4";l="localhost"==r?"ws://localhost:5000":r==g?"ws://192.168.0.4:5000":"wss://cloudtalk.herokuapp.com";var c=function(){connection=new WebSocket(l),connection.onopen=function(){function t(t){var n=t.coords,a=new google.maps.LatLng(n.latitude,n.longitude),i={lat:window.localStorage.latitude,lon:window.localStorage.longitude},s={lat:a.lat(),lon:a.lng()},l=JSON.stringify(i),r=JSON.stringify(s);console.log("setting watchloc",l),console.log("setting location",r);var g={guid:e.guid,location:r,watchloc:l};o.enter(g)}function n(o){console.warn("ERROR("+o.code+"): "+o.message)}navigator.geolocation.getCurrentPosition(t,n),console.log("WebSocket connected")},connection.onclose=function(){console.log("WebSocket closed. Reconecting..."),i(c,2e3)},connection.onmessage=function(o){console.log("broadcast msg from server:",o);var e=JSON.parse(o.data);t.$broadcast("ws:"+e.type,e.data)}};c(),e.isMobile=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1},e.pageId={post:0},e.navCollapsed=!0,e.collapse=function(){e.navCollapsed=!0},e.guidtgt="0",e.$on("set:guidtgt",function(o,t){console.log("setting guidtgt",t),e.guidtgt=t}),e.$on("ws:new_post",function(o,t){e.map.updateAndDrawPosts(),e.map.drawResponses()}),e.$on("ws:new_session",function(o,t){var n=angular.fromJson(t.location),a=new google.maps.LatLng(n.lat,n.lon);e.map.drawCurrLocationMarker(a)}),e.$on("ws:remove_post",function(o,t){console.log("remove_post : id",t),e.map.unDrawPost(t)}),e.$on("pagechange",function(o,t){e.currentPageId=t}),e.$on("loc",function(o,t){var n=t.lat(),a=t.lng();e.postLocation={lat:n,lon:a}}),e.$on("place",function(o,t){e.$apply(function(){e.postplace=t})}),e.$on("mapInit",function(o,t){e.map=t}),e.moveToCurrentLocation=function(){function o(o){if(e.currentPageId==e.pageId.post){var t=o.coords;window.localStorage.latitude=t.latitude,window.localStorage.longitude=t.longitude;var n=new google.maps.LatLng(t.latitude,t.longitude);e.map.drawCurrLocationMarker(n),e.map.drawXMarker(n),e.map.panTo(n),e.map.setZoom(15)}}function t(o){console.warn("ERROR("+o.code+"): "+o.message)}navigator.geolocation.getCurrentPosition(o,t),swal({title:"",text:"Moving to current location..",timer:1500,showConfirmButton:!1})},e.moveToPostLocation=function(){var o=0;if(e.isMobile()){var t=e.map.getBounds(),n=t.getNorthEast(),a=t.getSouthWest();current_map_nw=new google.maps.LatLng(n.lat(),a.lng()),current_map_se=new google.maps.LatLng(a.lat(),n.lng());var i=.5*Math.abs(e.postLocation.lat-current_map_nw.lat()),s=.5*Math.abs(e.postLocation.lat-current_map_se.lat());o=i>s?s:i}var l=new google.maps.LatLng(e.postLocation.lat+o,e.postLocation.lon);e.map.panTo(l)}}]),angular.module("app").config(["$routeProvider",function(o){o.when("/",{controller:"PostsCtrl",templateUrl:"/templates/posts.html"}).otherwise({redirectTo:"/"})}]),angular.module("app").service("UtilSvc",function(){var o=this;o.deg2rad=function(o){return o*(Math.PI/180)},o.getDistanceFromLatLonInKm=function(t,e,n,a){var i=6371,s=o.deg2rad(n-t),l=o.deg2rad(a-e),r=Math.sin(s/2)*Math.sin(s/2)+Math.cos(o.deg2rad(t))*Math.cos(o.deg2rad(n))*Math.sin(l/2)*Math.sin(l/2),g=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),c=i*g;return c}}),angular.module("app").directive("appMap",["PostsSvc","UtilSvc","SessionSvc","$compile",function(o,t,e,n){var a=function(t,a,i,s){function l(){window.localStorage.latitude=C.getCenter().lat(),window.localStorage.longitude=C.getCenter().lng()}function r(){var o=C.getBounds(),t=o.getNorthEast(),e=o.getSouthWest();I=new google.maps.LatLng(t.lat(),e.lng()),z=new google.maps.LatLng(e.lat(),t.lng())}function g(){var o={lat:C.getCenter().lat(),lon:C.getCenter().lng()},n=JSON.stringify(o),a={watchloc:n,guid:t.guid};e.update(a)}function c(){e.fetch().success(function(o){for(var e=0;e<o.length;e++){var n=o[e];if(n.guid!=t.guid){console.log(n.watchloc);var a=angular.fromJson(n.watchloc),i=new google.maps.LatLng(a.lat,a.lon);if(r(),i.lat()<I.lat()&&i.lat()>z.lat()&&i.lng()<z.lng()&&i.lng()>I.lng()){var s={position:i,map:C,title:"UserPin",icon:x,optimized:!1},l=new google.maps.Marker(s);setTimeout(function(o){return function(){o.setMap(null)}}(l),1800)}}}})}function u(){o.fetch().success(function(o){for(var e=0;e<o.length;e++){var a=o[e];console.log("udpateAndDrawPosts:",a);for(var i,s=0;i=D[s];s++)if(a._id==i.post._id){a=null;break}if(a&&a.hasOwnProperty("location")){var l=angular.fromJson(a.location),g=new google.maps.LatLng(l.lat,l.lon);if(r(),g.lat()<I.lat()&&g.lat()>z.lat()&&g.lng()<z.lng()&&g.lng()>I.lng()){var c=v(a.guid,a.guidtgt),u={position:g,map:C,title:"Bubble",icon:E},i=new google.maps.Marker(u),p=1e4;a.lifespan<p&&setTimeout(function(o,t){return function(){o.setMap(null);for(var e,n=0;e=D[n];n++)t._id==e.post._id&&D.splice(n,1)}}(i,a),a.lifespan),D.push({marker:i,post:a});var d=t,m=d.$new(!0),f=function(o,t,e,a){return function(){var i={pixelOffset:new google.maps.Size(-41.5,10),disableAutoPan:!0},s=new google.maps.InfoWindow(i),l="<div map-msg></div>",r=n(l)(t),g=new Date,c=g.getTime(),u=e.lifeend-c>=0?e.lifeend-c:0;t.msg=e.body,t.postlife=u,t.postguid=e.guid,t.postguidtgt=e.guidtgt,t.postcouplestatus=a,s.setContent(r[0]),s.open(C,o)}}(i,m,a,c);f()}}}})}function p(o){if(r(),o.lat()<I.lat()&&o.lat()>z.lat()&&o.lng()<z.lng()&&o.lng()>I.lng()){var t={position:o,map:C,animation:google.maps.Animation.DROP,title:"UserPin",icon:J},e=new google.maps.Marker(t);setTimeout(function(o){return function(){o.setMap(null)}}(e),2e3)}}function d(o){console.log("starting remove post");for(var t,e=0;t=D[e];e++)if(console.log(o),console.log(t.post._id),o==t.post._id){t.marker.setMap(null),D.splice(e,1);break}}function m(o){f(o),w(o)}function f(o){for(var t,e=0;t=B[e];e++)t.setMap(null);B=[];var t=new google.maps.Marker({position:o,map:C,icon:N});B.push(t)}function w(o){t.$emit("loc",o);var e=new google.maps.Geocoder;e.geocode({latLng:o},function(o,e){try{t.$emit("place",o[1].formatted_address)}catch(n){console.log(n),swal("","Location does not exists"),t.$emit("place","Location does not exists")}})}function v(o,e){var n=t.guidtgt==o,a=t.guid==e;return n&&a?4:n&&!a?1:!n&&a?2:0}function h(){var o=document.getElementById("btn-curr");C.controls[google.maps.ControlPosition.TOP_RIGHT].push(o)}function P(){var o=document.getElementById("posting");C.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(o)}function S(){var o=document.getElementById("btn-submit");C.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(o)}function L(){var o=document.getElementById("pac-input");C.controls[google.maps.ControlPosition.TOP_LEFT].push(o);var t=new google.maps.places.SearchBox(o);google.maps.event.addListener(t,"places_changed",function(){var o=t.getPlaces();if(0!=o.length){var e=o[0];m(e.geometry.location),window.localStorage.latitude=e.geometry.location.latitude,window.localStorage.longitude=e.geometry.location.longitude,C.panTo(e.geometry.location),C.setZoom(16)}})}function y(){google.maps.event.addListener(A,"click",function(o){m(o.latLng)})}function b(){google.maps.event.addListener(A,"center_changed",function(){l(),r()})}function M(){google.maps.event.addListener(A,"dragend",function(){g(),u()})}function _(){F=new google.maps.LatLng(34.05,-118.24),isNaN(window.localStorage.latitude)||isNaN(window.localStorage.longitude)||(F=new google.maps.LatLng(window.localStorage.latitude,window.localStorage.longitude)),w(F),O={center:F,zoom:15,scrollwheel:!0,streetViewControl:!1,mapTypeControl:!1,panControl:!1,zoomControl:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,R]},mapTypeId:R}}function T(){function o(o){console.log("Initializing map")}function t(o){google.maps.event.trigger(this,"drawXMarker",o)}function e(o){google.maps.event.trigger(this,"drawCurrLocationMarker",o)}function n(){google.maps.event.trigger(this,"updateAndDrawPosts")}function i(){google.maps.event.trigger(this,"drawResponses")}function s(o){google.maps.event.trigger(this,"unDrawPost",o)}A=new google.maps.Map(a[0],O),o.prototype=A,o.prototype.drawXMarker=t,o.prototype.drawCurrLocationMarker=e,o.prototype.updateAndDrawPosts=n,o.prototype.drawResponses=i,o.prototype.unDrawPost=s,C=new o,google.maps.event.addListener(C,"drawXMarker",function(o){m(o)}),google.maps.event.addListener(C,"drawCurrLocationMarker",function(o){p(o)}),google.maps.event.addListener(C,"updateAndDrawPosts",function(){u()}),google.maps.event.addListener(C,"drawResponses",function(){c()}),google.maps.event.addListener(C,"unDrawPost",function(o){d(o)})}function k(){var o=[{featureType:"landscape",stylers:[{hue:"#FFA800"},{saturation:0},{lightness:0},{gamma:1}]},{featureType:"road.highway",stylers:[{hue:"#53FF00"},{saturation:-73},{lightness:40},{gamma:1}]},{featureType:"road.arterial",stylers:[{hue:"#FBFF00"},{saturation:0},{lightness:0},{gamma:1}]},{featureType:"road.local",stylers:[{hue:"#00FFFD"},{saturation:0},{lightness:30},{gamma:1}]},{featureType:"water",stylers:[{hue:"#00BFFF"},{saturation:6},{lightness:8},{gamma:1}]},{featureType:"poi",stylers:[{hue:"#679714"},{saturation:33.4},{lightness:-25.4},{gamma:1}]}],t={name:"Custom Style"},e=new google.maps.StyledMapType(o,t);C.mapTypes.set(R,e)}function $(){void 0===C&&(_(),T(),k()),t.$emit("mapInit",C),L(),h(),P(),S(),y(),b(),M(),setTimeout(function(){l(),r(),g(),u()},100)}var C,A,I,z,O,F,R="custom_style",B=[],D=[],E={url:"https://catchme.ifyoucan.com/images/pictures/IYC_Icons/IYC_Location_Icon_Small.png",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(17,25)},N={url:"http://www.clker.com/cliparts/U/P/j/M/I/i/x-mark-yellow-md.png",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},J={url:"http://www.clker.com/cliparts/q/o/2/K/g/V/location-symbol-map-md.png",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(20,33)},x={url:"http://2.bp.blogspot.com/-djMa_n5nAEM/T1Gvx_-7-zI/AAAAAAAAAQ4/-1N6lleQvZc/s1600/blinking_dot.gif",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(17,17)};$()};return{restrict:"A",template:'<div id="map-canvas"></div>',replace:!0,link:a}}]),angular.module("app").directive("mapMsg",["$timeout",function(o){return{restrict:"A",templateUrl:"./templates/window.html",link:function(t,e,n){t.get_coupling=function(o){return 4==o?"bubblePost bubblePost_couple":1==o?"bubblePost bubblePost_ilikeyou":2==o?"bubblePost bubblePost_youlikei":"bubblePost bubblePost_none"},angular.element(document).ready(function(){var n=t.postguid,a=t.$parent.guid;e.parent().find("div div #bubbleClick").on("click",function(){console.log("window clicked."),n!=a&&(console.log("emit set:guidtgt",n),t.$emit("set:guidtgt",n))}),o(function(){{var o=t.postlife+"ms";e.parent().find("div div .postlifebar").css("animation-duration",o)}},100)})}}}]),angular.module("app").controller("PostsCtrl",["$rootScope","$scope","PostsSvc","$window","$document",function(o,t,e,n,a){t.$emit("pagechange",t.pageId.post),t.posts=[],t.$on("ws:new_post",function(o,e){t.requestFetch()}),t.moveToLoc=function(o){var e=t.posts[o],n=angular.fromJson(e.location),i=new google.maps.LatLng(n.lat,n.lon);t.map.panTo(i),t.map.setZoom(16);var s=0,l=480;a.scrollTop(s,l).then(function(){console&&console.log("You just scrolled to the top!")})},t.addPost=function(){var o=t.postplace,n=t.postLocation,a=JSON.stringify(n);e.create({body:t.content,location:a,place:o,guid:t.guid,guidtgt:t.guidtgt}).success(function(o){google.maps.event.trigger(t.map,"maptypeid_changed"),t.posts.unshift(o);var e=1e4;if(o.lifespan<e){var n=function(){for(var e=0;e<t.posts.length;++e)o._id==t.posts[e]._id&&t.posts.splice(e,1)};setTimeout(n,o.lifespan)}t.content=null}).error(function(o,t){swal("Post failed","Please complete the from correctly","error")})},t.requestFetch=function(){e.fetch().success(function(o){t.posts=o})},t.requestFetch()}]),angular.module("app").service("PostsSvc",["$http",function(o){this.fetch=function(){return o.get("/api/posts")},this.create=function(t){return o.post("/api/posts",t)},this.remove=function(t){return console.log("deleting posting"),console.log("post._id:",t._id),o.put("/api/posts",t)}}]),angular.module("app").service("SessionSvc",["$http",function(o){this.fetch=function(){return o.get("/api/sessions")},this.enter=function(t){return o.post("/api/sessions",t)},this.remove=function(t){console.log("deleting session"),console.log("session.guid:",t);var e={guid:t};return o.put("/api/sessions",e)},this.update=function(t){return console.log("updating watch location"),console.log("updatedsession:",t),o.post("/api/sessions/update",t)}}]),angular.module("app").run(["$rootScope","$timeout","SessionSvc",function(o,t,e){}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1dGlsLnN2Yy5qcyIsIm1hcHMvbWFwLmRpcmVjdGl2ZS5qcyIsIm1hcHMvbXNnLmRpcmVjdGl2ZS5qcyIsInBvc3RzL3Bvc3RzLmN0cmwuanMiLCJwb3N0cy9wb3N0cy5zdmMuanMiLCJzZXNzaW9ucy9zZXNzaW9ucy5zdmMuanMiLCJzb2NrZXRzL3dlYnNvY2tldHMuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCJTZXNzaW9uU3ZjIiwiJHJvb3RTY29wZSIsIiRzY29wZSIsIiR3aW5kb3ciLCIkaHR0cCIsIiR0aW1lb3V0IiwiZ3VpZCIsInM0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJ3aW5kb3ciLCJvbmJlZm9yZXVubG9hZCIsInJlbW92ZSIsInVybCIsImhvc3RuYW1lIiwiZG9jdW1lbnQiLCJsb2NhdGlvbiIsImRldmVsb3BtZW50SVAiLCJjb25uZWN0IiwiY29ubmVjdGlvbiIsIldlYlNvY2tldCIsIm9ub3BlbiIsImdldEN1cnJMb2NTdWNjZXNzIiwicG9zIiwiY3JkIiwiY29vcmRzIiwiZ29vZ2xlTG9jIiwiZ29vZ2xlIiwibWFwcyIsIkxhdExuZyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwid2F0Y2hsb2MiLCJsYXQiLCJsb2NhbFN0b3JhZ2UiLCJsb24iLCJsbmciLCJ3YXRjaGxvY0pTT04iLCJKU09OIiwic3RyaW5naWZ5IiwibG9jYXRpb25KU09OIiwiY29uc29sZSIsImxvZyIsInNlc3Npb24iLCJlbnRlciIsImdldEN1cnJMb2NFcnJvciIsImVyciIsIndhcm4iLCJjb2RlIiwibWVzc2FnZSIsIm5hdmlnYXRvciIsImdlb2xvY2F0aW9uIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwib25jbG9zZSIsIm9ubWVzc2FnZSIsImUiLCJwYXlsb2FkIiwicGFyc2UiLCJkYXRhIiwiJGJyb2FkY2FzdCIsInR5cGUiLCJpc01vYmlsZSIsInVzZXJBZ2VudCIsIm1hdGNoIiwicGFnZUlkIiwicG9zdCIsIm5hdkNvbGxhcHNlZCIsImNvbGxhcHNlIiwiZ3VpZHRndCIsIiRvbiIsIl8iLCJtYXAiLCJ1cGRhdGVBbmREcmF3UG9zdHMiLCJkcmF3UmVzcG9uc2VzIiwiZnJvbUpzb24iLCJkcmF3Q3VyckxvY2F0aW9uTWFya2VyIiwicG9zdGlkIiwidW5EcmF3UG9zdCIsImN1cnJlbnRQYWdlSWQiLCJwb3N0TG9jYXRpb24iLCJwbGFjZSIsIiRhcHBseSIsInBvc3RwbGFjZSIsIm1vdmVUb0N1cnJlbnRMb2NhdGlvbiIsImRyYXdYTWFya2VyIiwicGFuVG8iLCJzZXRab29tIiwic3dhbCIsInRpdGxlIiwidGV4dCIsInRpbWVyIiwic2hvd0NvbmZpcm1CdXR0b24iLCJtb3ZlVG9Qb3N0TG9jYXRpb24iLCJsYXREZWx0YSIsImJvdW5kcyIsImdldEJvdW5kcyIsIm5lIiwiZ2V0Tm9ydGhFYXN0Iiwic3ciLCJnZXRTb3V0aFdlc3QiLCJjdXJyZW50X21hcF9udyIsImN1cnJlbnRfbWFwX3NlIiwibGF0RGVsdGFfY2VudGVyMm5vcnRoIiwiYWJzIiwibGF0RGVsdGFfY2VudGVyMnNvdXRoIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwic2VydmljZSIsInN2YyIsInRoaXMiLCJkZWcycmFkIiwiZGVnIiwiUEkiLCJnZXREaXN0YW5jZUZyb21MYXRMb25JbkttIiwibGF0MSIsImxvbjEiLCJsYXQyIiwibG9uMiIsIlIiLCJkTGF0IiwiZExvbiIsImEiLCJzaW4iLCJjb3MiLCJjIiwiYXRhbjIiLCJzcXJ0IiwiZCIsImRpcmVjdGl2ZSIsIlBvc3RzU3ZjIiwiVXRpbFN2YyIsIiRjb21waWxlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwicm9vdFNjb3BlIiwidXBkYXRlRGVmYXVsdExvY2F0aW9uIiwiZ2V0Q2VudGVyIiwidXBkYXRlQm91bmRzIiwidXBkYXRlV2F0Y2hMb2NhdGlvbiIsInVwZGF0ZWRzZXNzaW9uIiwidXBkYXRlIiwiZmV0Y2giLCJzdWNjZXNzIiwic2Vzc2lvbnMiLCJpIiwibGVuZ3RoIiwibWFya2VyT3B0aW9ucyIsInBvc2l0aW9uIiwiaWNvbiIsImltYWdlTGlzdGVuZXIiLCJvcHRpbWl6ZWQiLCJtYXJrZXIiLCJNYXJrZXIiLCJzZXRUaW1lb3V0Iiwib2xkX21hcmtlciIsInNldE1hcCIsInBvc3RzIiwiaiIsIm1hcmtlcnMiLCJfaWQiLCJoYXNPd25Qcm9wZXJ0eSIsImNvdXBsaW5nX3N0YXR1cyIsImNhbGN1bGF0ZUNvdXBsaW5nIiwiaW1hZ2VQb3N0IiwibWF4SW5zdGFudExpZmVTcGFuIiwibGlmZXNwYW4iLCJvbGRfcG9zdCIsImsiLCJzcGxpY2UiLCJwdXNoIiwicGFyZW50IiwiY2hpbGQiLCIkbmV3Iiwib3BlbkluZm9XaW5kb3ciLCJjaGlsZF9zY29wZSIsImluZm9XaW5kb3dPcHRpb25zIiwicGl4ZWxPZmZzZXQiLCJTaXplIiwiZGlzYWJsZUF1dG9QYW4iLCJpbmZvV2luZG93IiwiSW5mb1dpbmRvdyIsImNvbnRlbnQiLCJjb21waWxlZCIsImN1cnJlbnREYXRlIiwiRGF0ZSIsImN1cnJlbnRUaW1lTWlsbGkiLCJnZXRUaW1lIiwicG9zdGxpZmUiLCJsaWZlZW5kIiwibXNnIiwiYm9keSIsInBvc3RndWlkIiwicG9zdGd1aWR0Z3QiLCJwb3N0Y291cGxlc3RhdHVzIiwic2V0Q29udGVudCIsIm9wZW4iLCJkcmF3RHJvcERvd24iLCJhbmltYXRpb24iLCJBbmltYXRpb24iLCJEUk9QIiwiaW1hZ2VVc2VyTG9naW4iLCJkcmF3QW5kU2V0UGxhY2UiLCJkcmF3SGVscGVyTWFya2VyIiwic2V0UGxhY2UiLCJoZWxwZXJNYXJrZXJzIiwiaW1hZ2VUYXJnZXQiLCIkZW1pdCIsImdlb2NvZGVyIiwiR2VvY29kZXIiLCJnZW9jb2RlIiwibGF0TG5nIiwicmVzdWx0cyIsInN0YXR1cyIsImZvcm1hdHRlZF9hZGRyZXNzIiwicG9zdF9ndWlkIiwicG9zdF9ndWlkdGd0IiwiaWxpa2V5b3UiLCJ5b3VsaWtlaSIsInNldFVJTW92ZVRvQ3VyckxvY0J0biIsImN1cnJMb2NCdG4iLCJnZXRFbGVtZW50QnlJZCIsImNvbnRyb2xzIiwiQ29udHJvbFBvc2l0aW9uIiwiVE9QX1JJR0hUIiwic2V0VUlQb3N0Rm9ybSIsInBvc3RGb3JtIiwiQk9UVE9NX0NFTlRFUiIsInNldFVJUG9zdEJ0biIsInBvc3RCdG4iLCJzZXRVSVNlYXJjaEJveCIsImlucHV0IiwiVE9QX0xFRlQiLCJzZWFyY2hCb3giLCJwbGFjZXMiLCJTZWFyY2hCb3giLCJldmVudCIsImFkZExpc3RlbmVyIiwiZ2V0UGxhY2VzIiwiZ2VvbWV0cnkiLCJzZXRFdmVudENsaWNrIiwibWFwX29yaWdpbiIsInNldEV2ZW50Q2VudGVyQ2hhbmdlZCIsInNldEV2ZW50RHJhZ0VuZCIsImluaXRpYWxNYXBEYXRhIiwiaW5pdGlhbE1hcENlbnRlciIsImlzTmFOIiwibWFwT3B0aW9ucyIsImNlbnRlciIsInpvb20iLCJzY3JvbGx3aGVlbCIsInN0cmVldFZpZXdDb250cm9sIiwibWFwVHlwZUNvbnRyb2wiLCJwYW5Db250cm9sIiwiem9vbUNvbnRyb2wiLCJtYXBUeXBlQ29udHJvbE9wdGlvbnMiLCJtYXBUeXBlSWRzIiwiTWFwVHlwZUlkIiwiUk9BRE1BUCIsIkNMT1VEX01BUF9JRCIsIm1hcFR5cGVJZCIsInNldE1hbnVhbEV2ZW50cyIsIkNsb3VkTWFwIiwib3B0aW9ucyIsImhhbmRsZURyYXdYTWFya2VyIiwidHJpZ2dlciIsImhhbmRsZURyYXdDdXJyTG9jYXRpb25NYXJrZXIiLCJoYW5kbGVVcGRhdGVBbmREcmF3UG9zdHMiLCJoYW5kbGVEcmF3UmVzcG9uc2VzIiwiaGFuZGxlVW5EcmF3UG9zdCIsIk1hcCIsInByb3RvdHlwZSIsInNldFN0eWxlRm9yTWFwIiwiZmVhdHVyZU9wdHMiLCJmZWF0dXJlVHlwZSIsInN0eWxlcnMiLCJodWUiLCJzYXR1cmF0aW9uIiwibGlnaHRuZXNzIiwiZ2FtbWEiLCJzdHlsZWRNYXBPcHRpb25zIiwibmFtZSIsImN1c3RvbU1hcFR5cGUiLCJTdHlsZWRNYXBUeXBlIiwibWFwVHlwZXMiLCJzZXQiLCJpbml0TWFwIiwic2l6ZSIsIm9yaWdpbiIsIlBvaW50IiwiYW5jaG9yIiwic2NhbGVkU2l6ZSIsInJlc3RyaWN0IiwidGVtcGxhdGUiLCJyZXBsYWNlIiwiZWxtIiwiZ2V0X2NvdXBsaW5nIiwicmVhZHkiLCJteWd1aWQiLCIkcGFyZW50IiwiZmluZCIsIm9uIiwiZHVyYXRpb24iLCJjc3MiLCIkZG9jdW1lbnQiLCJyZXF1ZXN0RmV0Y2giLCJtb3ZlVG9Mb2MiLCJpZCIsInRvcCIsInNjcm9sbFRvcCIsInRoZW4iLCJhZGRQb3N0IiwiY3JlYXRlIiwidW5zaGlmdCIsImZyb250RW5kUG9zdFJlbW92ZSIsImVycm9yIiwiZ2V0IiwicHV0IiwicnVuIl0sIm1hcHBpbmdzIjoiQUFDQUEsUUFBQUMsT0FBQSxPQUNBLFVBQ0EsYUNGQUQsUUFBQUMsT0FBQSxPQUNBQyxXQUFBLG1CQUFBLGFBQUEsYUFBQSxTQUFBLFVBQUEsUUFBQSxXQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBS0EsUUFBQUMsS0FDQSxRQUFBQyxLQUNBLE1BQUFDLE1BQUFDLE1BQUEsT0FBQSxFQUFBRCxLQUFBRSxXQUNBQyxTQUFBLElBQ0FDLFVBQUEsR0FFQSxNQUFBTCxLQUFBQSxJQUFBLElBQUFBLElBQUEsSUFBQUEsSUFBQSxJQUFBQSxJQUFBLElBQUFBLElBQUFBLElBQUFBLElBR0FMLEVBQUFJLEtBQUFBLElBSUFPLE9BQUFDLGVBQUEsV0FDQWQsRUFBQWUsT0FBQWIsRUFBQUksTUFNQSxJQUFBVSxHQUNBQyxFQUFBQyxTQUFBQyxTQUFBRixTQUNBRyxFQUFBLGFBR0FKLEdBREEsYUFBQUMsRUFDQSxzQkFFQUEsR0FBQUcsRUFDQSx3QkFHQSwrQkFNQSxJQUFBQyxHQUFB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QUFRQyxJQUFJLFlBQWF1QixFQUFLb0csS0FDMUJwSyxFQUFTaVUsSUFBQSxhQUFjalEsT0FHN0J2RSxRQUFFQyxPQUFhLE9BQ2RvSCxRQUFRLGNBQWUsUUFBUyxTQUFTOUcsR0FDekNnSCxLQUFLa0MsTUFBUSxXQUNkLE1BQVFsSixHQUFPZ1UsSUFBQSxrQkFHZGhOLEtBQUNyRSxNQUFPLFNBQVVELEdBQ2pCLE1BQU8xQyxHQUFNZ0UsS0FBSyxnQkFBaUJ0QixJQUdwQ3NFLEtBQUNyRyxPQUFhLFNBQUtULEdBQ2xCc0MsUUFBUUMsSUFBSSxvQkFDWkQsUUFBUUMsSUFBSSxnQkFBaUJ2QyxFQUM5QixJQUFLd0MsSUFBU3hDLEtBQUFBLEVBQ2IsT0FBQUYsR0FBWWlVLElBQUEsZ0JBQUF2UixJQUdic0UsS0FBQ2lDLE9BQWEsU0FBSUQsR0FHbEIsTUFGQ3hHLFNBQVFDLElBQUksMkJBQ1pELFFBQVFDLElBQUksa0JBQW1CdUcsR0FDM0JoSixFQUFTZ0UsS0FBQSx1QkFBd0JnRixPQUl2Q3ZKLFFBQVFDLE9BQU8sT0FDZHdVLEtBQUssYUFBYyxXQUFZLGFBQWMsU0FBU3JVLEVBQVlJLEVBQVVMIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcblx0J25nUm91dGUnLFxuXHQnZHVTY3JvbGwnXG5dKTtcbiIsIlxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24oU2Vzc2lvblN2YywgJHJvb3RTY29wZSwgJHNjb3BlLCAkd2luZG93LCAkaHR0cCwgJHRpbWVvdXQpe1xuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBJTklUSUFMXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBmdW5jdGlvbiBndWlkKCkge1xuXHRcdGZ1bmN0aW9uIHM0KCkge1xuXHRcdCAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcblx0XHQgICAgICAudG9TdHJpbmcoMTYpXG5cdFx0ICAgICAgLnN1YnN0cmluZygxKTtcblx0XHR9XG5cdCAgXHRyZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgczQoKSArIHM0KCk7XG5cdH1cblxuXHQkc2NvcGUuZ3VpZCA9IGd1aWQoKTtcblxuXG5cdC8vIOyciOuPhOyasOqwgCDri6vtnojroKTqs6Ag7ZWY66m0IOumrO2AmOyKpO2KuCDrs7Trgrjri6QhIOycoOyguCDshLjshZjsnYQg64ur7Jy865286rOgIVxuXHR3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbigpe1xuXHRcdFNlc3Npb25TdmMucmVtb3ZlKCRzY29wZS5ndWlkKTsgLy8g7ISc67KE7JeQ7IScIOycoOyggOqwgCDrgpjqsJDsnYQg7JWM66aw64ukXG5cdH1cblxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gU09DS0VUXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0dmFyIHVybDtcblx0dmFyIGhvc3RuYW1lID0gZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWU7XG5cdHZhciBkZXZlbG9wbWVudElQID0gXCIxOTIuMTY4LjAuNFwiO1xuXG5cdGlmIChob3N0bmFtZSA9PSBcImxvY2FsaG9zdFwiKXtcblx0XHR1cmwgPSBcIndzOi8vbG9jYWxob3N0OjUwMDBcIjtcblx0fVxuXHRlbHNlIGlmIChob3N0bmFtZSA9PSBkZXZlbG9wbWVudElQKSB7XG5cdFx0dXJsID0gJ3dzOi8vMTkyLjE2OC4wLjQ6NTAwMCc7IC8vIGRldmVsb3BtZXQgb24gc29ja2V0IGxvY2FsbHkgXG5cdH1cblx0ZWxzZSB7XG5cdFx0dXJsID0gJ3dzczovL2Nsb3VkdGFsay5oZXJva3VhcHAuY29tJzsgLy8gcHJvZHVjdGlvbiBkZXBsb3kgdmVyc2lvbiAtIHN0aWxsIGRlYnVnIG1vZGVcblx0fVxuXG5cdC8qIOqwnOuwnOqzvOygleydtCDrgZ3rgpjqs6Ag67Cw7Y+s7Iuc7JeQ64qUIOychOu2gOu2hOydhCDsp4DsmrDqs6Ag7JWE656YIOy9lOuTnOunjCDrgqjqsqjrj4Qg65Cc64ukLlxuXHR1cmwgPSAnd3NzOi8vZnJvemVuLWJhZGxhbmRzLTg2NDkuaGVyb2t1YXBwLmNvbSc7XG5cdCovXG5cdHZhciBjb25uZWN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Y29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXQodXJsKTtcblxuXHRcdGNvbm5lY3Rpb24ub25vcGVuID0gZnVuY3Rpb24oKXtcblx0XHRcdGZ1bmN0aW9uIGdldEN1cnJMb2NTdWNjZXNzKHBvcykge1xuXHRcdFx0XHQvLyDrp6jsspjsnYzsl5DripQg7Jyg7KCA7J2YIOyLpOygnCDsnITsuZgo7JWx7JeQIOyeheyepe2WiOydhOuVjOydmCDsnITsuZgp7JmAIOyEvO2EsCDtj6zsp4DshZjsnYQg6rCZ7J20IOuztOuCtOqzoCxcblx0XHRcdFx0Ly8g7IS87YSwIO2PrOyngOyFmOydgCDqs4Tsho0g7JeF642w7J207Yq4IOuQmOyWtOyVvCDtlZzri6QuXG5cdCAgICAgICAgICAgIHZhciBjcmQgPSBwb3MuY29vcmRzO1xuXG5cdCAgICAgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGNyZC5sYXRpdHVkZSwgY3JkLmxvbmdpdHVkZSk7XG5cblx0ICAgICAgICAgICAgdmFyIHdhdGNobG9jID0ge1xuXHQgICAgICAgICAgICBcdGxhdDp3aW5kb3cubG9jYWxTdG9yYWdlLmxhdGl0dWRlLFxuXHQgICAgICAgICAgICBcdGxvbjp3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZVxuXHQgICAgICAgIFx0fTtcblxuXHQgICAgICAgIFx0dmFyIGxvY2F0aW9uID0ge1xuXHQgICAgICAgIFx0XHRsYXQ6Z29vZ2xlTG9jLmxhdCgpLFxuXHQgICAgICAgIFx0XHRsb246Z29vZ2xlTG9jLmxuZygpXG5cdCAgICAgICAgXHR9O1xuXG5cdCAgICAgICAgXHR2YXIgd2F0Y2hsb2NKU09OID0gSlNPTi5zdHJpbmdpZnkod2F0Y2hsb2MpO1xuXHQgICAgICAgIFx0dmFyIGxvY2F0aW9uSlNPTiA9IEpTT04uc3RyaW5naWZ5KGxvY2F0aW9uKTtcblxuXHQgICAgICAgIFx0Y29uc29sZS5sb2coXCJzZXR0aW5nIHdhdGNobG9jXCIsIHdhdGNobG9jSlNPTik7XG5cdCAgICAgICAgXHRjb25zb2xlLmxvZyhcInNldHRpbmcgbG9jYXRpb25cIiwgbG9jYXRpb25KU09OKTtcblx0ICAgICAgICAgICAgXG5cdCAgICAgICAgICAgIC8v7Jes6riw7IScIOu5hOuPmeq4sOyggeycvOuhnCDsnKDsoIDsnZgg66Gc7LyA7J207IWY7J2EIOyWu+qzoCDshLjshZjsnYQg67O064K87IiYIOyeiOuLpC5cblx0XHRcdFx0dmFyIHNlc3Npb24gPSB7XG5cdFx0XHRcdFx0Z3VpZDogICAgICRzY29wZS5ndWlkLFxuXHRcdFx0XHRcdGxvY2F0aW9uOiBsb2NhdGlvbkpTT04sXG5cdFx0XHRcdFx0d2F0Y2hsb2M6IHdhdGNobG9jSlNPTlxuXHRcdFx0XHR9O1xuXHRcdFx0XHRTZXNzaW9uU3ZjLmVudGVyKHNlc3Npb24pOyAvLyDshJzrsoTsl5DshJwg7Jyg7KCA6rCAIOuTpOyWtOyYtOydhCDslYzrprDri6QuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgZnVuY3Rpb24gZ2V0Q3VyckxvY0Vycm9yKGVycikge1xuXHQgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0VSUk9SKCcgKyBlcnIuY29kZSArICcpOiAnICsgZXJyLm1lc3NhZ2UpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8qIGluaXQgbWFwIGFuZCBwbGFjZSBzb21lIG1hcmtlcnMsIHNvIGV2ZXJ5dGhpbmcgc3RhcnQgd2l0aCB0aGlzIGZ1bmN0aW9uLiAqL1xuXHQgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZ2V0Q3VyckxvY1N1Y2Nlc3MsIGdldEN1cnJMb2NFcnJvcik7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY29ubmVjdGVkJyk7XG5cdFx0fTtcblxuXHRcdGNvbm5lY3Rpb24ub25jbG9zZSA9IGZ1bmN0aW9uKCl7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY2xvc2VkLiBSZWNvbmVjdGluZy4uLicpO1xuXHRcdFx0JHRpbWVvdXQoY29ubmVjdCwgMjAwMCk7XG5cdFx0fTtcblxuXHRcdGNvbm5lY3Rpb24ub25tZXNzYWdlID0gZnVuY3Rpb24oZSl7XG5cdFx0XHRjb25zb2xlLmxvZygnYnJvYWRjYXN0IG1zZyBmcm9tIHNlcnZlcjonLCBlKTtcblx0XHRcdHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZShlLmRhdGEpO1xuXG5cdFx0XHQvKlxuXHRcdFx0XHR3czpuZXdfcG9zdCAgICAtIOyDiOuhnOyatCDtj6zsiqTtirjqsIAg7Jis65287JmU7J2E65WMIGZyb250LWVuZOyXkOyEnCDrp7XsnbQg64uk7IucIOyXheuNsOydtO2KuCDtlbTslbwg65Cc64uk6rOgIOyVjOugpOykgOuLpCFcblx0XHRcdFx0d3M6bmV3X3Nlc3Npb24gLSBzZXNzaW9u7J20IOyDiOuhnCDrk6TslrTsmKTrqbQg65Cc64uk6rOgIOyVjOugpOykgOuLpCFcblx0XHRcdFx066ek7Jqw7KSR7JqUISBcblx0XHRcdCovXG5cdFx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3dzOicgKyBwYXlsb2FkLnR5cGUsIHBheWxvYWQuZGF0YSk7XG5cdFx0fTtcblx0fTtcblx0Y29ubmVjdCgpO1xuXG5cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBUQkRcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBzZWUgaWYgaXRzIG1vYmlsZSBwaG9uZVxuXHQkc2NvcGUuaXNNb2JpbGUgPSBmdW5jdGlvbigpe1xuXHRcdGlmKCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL3dlYk9TL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQb2QvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9XaW5kb3dzIFBob25lL2kpXG5cdFx0ICl7XG5cdFx0ICAgIHJldHVybiB0cnVlO1xuXHRcdCAgfVxuXHRcdCBlbHNlIHtcblx0XHQgICAgcmV0dXJuIGZhbHNlO1xuXHRcdCAgfVxuXHR9O1xuXG5cblx0JHNjb3BlLnBhZ2VJZCA9IHsgXG5cdFx0cG9zdCA6IDAsXG5cdH07XG5cblx0JHNjb3BlLm5hdkNvbGxhcHNlZCA9IHRydWU7XG5cdCRzY29wZS5jb2xsYXBzZSA9IGZ1bmN0aW9uKCl7XG5cdFx0JHNjb3BlLm5hdkNvbGxhcHNlZCA9IHRydWU7XG5cdH07XG5cblx0JHNjb3BlLmd1aWR0Z3QgPSBcIjBcIjsgLy8g6riw67O46rCS7J2AIDDsnLzroZwg7ZW07IScIDDsnbTrqbQg6rSA7Ius7IOB64yAZ3VpZOqwgCDsl4bripQg7IOB7YOc7J2064ukLiBcblx0JHNjb3BlLiRvbignc2V0Omd1aWR0Z3QnLCBmdW5jdGlvbihfLCBndWlkdGd0KXtcblx0XHRjb25zb2xlLmxvZyhcInNldHRpbmcgZ3VpZHRndFwiLCBndWlkdGd0KTtcblx0XHQkc2NvcGUuZ3VpZHRndCA9IGd1aWR0Z3Q7XG5cdH0pO1xuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gU09DS0VUIEJST0FEQ0FTVCBSRUNFSVZFUlxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIGFzIHNlcnZlciBzb2NrZXQgc2VuZCAnd3M6bmV3X3Bvc3QnICwgd2UgY2FuIHVwZGF0ZSB0aGUgbWFwIVxuXHQkc2NvcGUuJG9uKCd3czpuZXdfcG9zdCcsIGZ1bmN0aW9uKF8sIHBvc3Qpe1xuXHRcdC8vIHVwZGF0ZSBwb3N0c1xuXHRcdCRzY29wZS5tYXAudXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG5cblx0XHQvLyBzaG93IHJlc3BvbnNpdmUgdXNlcnNcblx0XHQkc2NvcGUubWFwLmRyYXdSZXNwb25zZXMoKTtcblx0fSk7XG5cblx0Ly8gYXMgc2VydmVyIHNvY2tldCBzZW5kICd3czpuZXdfcG9zdCcgLCB3ZSBjYW4gdXBkYXRlIHRoZSBtYXAhXG5cdCRzY29wZS4kb24oJ3dzOm5ld19zZXNzaW9uJywgZnVuY3Rpb24oXywgc2Vzc2lvbil7XG5cblx0XHR2YXIgbG9jYXRpb24gPSBhbmd1bGFyLmZyb21Kc29uKHNlc3Npb24ubG9jYXRpb24pO1xuICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XG5cblx0XHQkc2NvcGUubWFwLmRyYXdDdXJyTG9jYXRpb25NYXJrZXIoZ29vZ2xlTG9jKTtcblx0fSk7XG5cblx0Ly8gd2hlbiBzZXJ2ZXIgcmVtb3ZlIHRoZSBwb3N0IGFmdGVyIHRpbWUgZm9yIGxvbmdlciBvbmVzLCBcblx0Ly8gdXBkYXRlIG1hcCB3aXRoIGNvcmVzcG9uZGluZyBpbmZvXG5cdCRzY29wZS4kb24oJ3dzOnJlbW92ZV9wb3N0JywgZnVuY3Rpb24oXywgcG9zdGlkKXtcblx0XHRjb25zb2xlLmxvZygncmVtb3ZlX3Bvc3QgOiBpZCcsIHBvc3RpZCk7XG5cdFx0JHNjb3BlLm1hcC51bkRyYXdQb3N0KHBvc3RpZCk7XG5cdH0pO1xuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gVEJEXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0JHNjb3BlLiRvbigncGFnZWNoYW5nZScsIGZ1bmN0aW9uKF8sIHBhZ2VJZCl7XG5cdFx0JHNjb3BlLmN1cnJlbnRQYWdlSWQgPSBwYWdlSWQ7XG5cdH0pO1xuXG5cdCRzY29wZS4kb24oJ2xvYycsIGZ1bmN0aW9uKF8sIGxvY2F0aW9uKXtcblx0XHR2YXIgbGF0ID0gbG9jYXRpb24ubGF0KCk7XG5cdFx0dmFyIGxvbiA9IGxvY2F0aW9uLmxuZygpO1xuXHRcdCRzY29wZS5wb3N0TG9jYXRpb24gPSB7XG5cdFx0XHRsYXQ6IGxhdCxcblx0XHRcdGxvbjogbG9uXG5cdFx0fTtcblx0fSk7XG5cblx0JHNjb3BlLiRvbigncGxhY2UnLCBmdW5jdGlvbihfLCBwbGFjZSl7XG5cdFx0Ly8gRm9yY2luZyB0aGUgdXBkYXRlIHdpdGggJGFwcGx5KCkgbWV0aG9kIG9uICRzY29wZVxuXHRcdC8vIHByb2JsZW0gcmVsYXRlZCBub3RlOiBodHRwOi8vd3d3LmplZmZyeWhvdXNlci5jb20vaW5kZXguY2ZtLzIwMTQvNi8yL0hvdy1kby1JLXJ1bi1jb2RlLXdoZW4tYS12YXJpYWJsZS1jaGFuZ2VzLXdpdGgtQW5ndWxhckpTXG5cdFx0JHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuXHRcdFx0XHQkc2NvcGUucG9zdHBsYWNlID0gcGxhY2U7XG5cdFx0XHR9XG5cdFx0KTtcblx0fSk7XG5cblx0JHNjb3BlLiRvbignbWFwSW5pdCcsIGZ1bmN0aW9uKF8sIG1hcCl7XG5cdFx0JHNjb3BlLm1hcCA9IG1hcDtcblx0fSk7XG5cblx0LyogbW92ZSB0byBjdXJyZW50IGxvY2F0aW9uICovXG5cdCRzY29wZS5tb3ZlVG9DdXJyZW50TG9jYXRpb24gPSBmdW5jdGlvbigpe1xuXHRcdGZ1bmN0aW9uIGdldEN1cnJMb2NTdWNjZXNzKHBvcykge1xuICAgICAgICAgICAgLyogbWFrZSBzdXJlIHRvIGNoZWNrIHdlIGFyZSBvbiBwb3N0IHBhZ2Ugd2l0aCBtYXAgZmlyc3QgKi9cbiAgICAgICAgICAgIGlmICgkc2NvcGUuY3VycmVudFBhZ2VJZCAhPSAkc2NvcGUucGFnZUlkLnBvc3QpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgY3JkID0gcG9zLmNvb3JkcztcblxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSA9IGNyZC5sYXRpdHVkZTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlID0gY3JkLmxvbmdpdHVkZTtcblxuICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoY3JkLmxhdGl0dWRlLCBjcmQubG9uZ2l0dWRlKTtcblxuICAgICAgICAgICAgLy8gZHJhdyBkcm9wIGRvd24gdXNlciBwb3NpdGlvblxuICAgICAgICAgICBcdCRzY29wZS5tYXAuZHJhd0N1cnJMb2NhdGlvbk1hcmtlcihnb29nbGVMb2MpO1xuXG4gICAgICAgICAgIFx0Ly8gZHJhdyB4IG1hcmtlclxuXHQgICAgICAgICRzY29wZS5tYXAuZHJhd1hNYXJrZXIoZ29vZ2xlTG9jKTtcblxuXHQgICAgICAgIC8vIG1vdmUgdG8gdGhlIGxvY2F0aW9uIGFuZCB6b29tIGludG8gcmlnaHQgYW1vdW50XG4gICAgICAgICAgICAkc2NvcGUubWFwLnBhblRvKGdvb2dsZUxvYylcbiAgICAgICAgICAgICRzY29wZS5tYXAuc2V0Wm9vbSgxNSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRDdXJyTG9jRXJyb3IoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0VSUk9SKCcgKyBlcnIuY29kZSArICcpOiAnICsgZXJyLm1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogaW5pdCBtYXAgYW5kIHBsYWNlIHNvbWUgbWFya2Vycywgc28gZXZlcnl0aGluZyBzdGFydCB3aXRoIHRoaXMgZnVuY3Rpb24uICovXG4gICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZ2V0Q3VyckxvY1N1Y2Nlc3MsIGdldEN1cnJMb2NFcnJvcik7XG5cbiAgICAgICAgc3dhbCh7ICAgdGl0bGU6IFwiXCIsICAgdGV4dDogXCJNb3ZpbmcgdG8gY3VycmVudCBsb2NhdGlvbi4uXCIsICAgdGltZXI6IDE1MDAsICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlIH0pO1xuXHR9O1xuXG5cdCRzY29wZS5tb3ZlVG9Qb3N0TG9jYXRpb24gPSBmdW5jdGlvbigpe1xuXHRcdHZhciBsYXREZWx0YSA9IDAuMDtcblxuXHRcdGlmICgkc2NvcGUuaXNNb2JpbGUoKSl7XG5cdFx0XHR2YXIgYm91bmRzID0gJHNjb3BlLm1hcC5nZXRCb3VuZHMoKTtcblx0ICAgICAgICB2YXIgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7IC8vIExhdExuZyBvZiB0aGUgbm9ydGgtZWFzdCBjb3JuZXJcblx0ICAgICAgICB2YXIgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCk7IC8vIExhdExuZyBvZiB0aGUgc291dGgtd2VzdCBjb3JkZXJcblx0ICAgICAgICBjdXJyZW50X21hcF9udyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobmUubGF0KCksIHN3LmxuZygpKTtcblx0ICAgICAgICBjdXJyZW50X21hcF9zZSA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoc3cubGF0KCksIG5lLmxuZygpKTtcblxuXHQgICAgICAgIHZhciBsYXREZWx0YV9jZW50ZXIybm9ydGggPSAwLjUgKiBNYXRoLmFicygkc2NvcGUucG9zdExvY2F0aW9uLmxhdCAtIGN1cnJlbnRfbWFwX253LmxhdCgpKTtcblx0ICAgICAgICB2YXIgbGF0RGVsdGFfY2VudGVyMnNvdXRoID0gMC41ICogTWF0aC5hYnMoJHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQgLSBjdXJyZW50X21hcF9zZS5sYXQoKSk7XG5cblx0ICAgICAgICBpZiAobGF0RGVsdGFfY2VudGVyMm5vcnRoID4gbGF0RGVsdGFfY2VudGVyMnNvdXRoKXtcblx0ICAgICAgICBcdGxhdERlbHRhID0gbGF0RGVsdGFfY2VudGVyMnNvdXRoO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICBcdGxhdERlbHRhID0gbGF0RGVsdGFfY2VudGVyMm5vcnRoO1xuXHQgICAgICAgIH1cblx0XHR9XG5cblx0XHR2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZygkc2NvcGUucG9zdExvY2F0aW9uLmxhdCArIGxhdERlbHRhLCAkc2NvcGUucG9zdExvY2F0aW9uLmxvbik7XG5cdFx0JHNjb3BlLm1hcC5wYW5Ubyhnb29nbGVMb2MpO1xuXHR9O1xuXG5cbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpe1xuXHQkcm91dGVQcm92aWRlclxuXHQud2hlbignLycsIFxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXI6ICdQb3N0c0N0cmwnLCBcblx0XHRcdHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9wb3N0cy5odG1sJ1xuXHRcdH0pXG5cdC8vIFJlZGlyZWN0IHRvIHRoZSByb290IHBhZ2UuXG5cdC5vdGhlcndpc2UoXG5cdFx0e1xuICAgXHRcdFx0cmVkaXJlY3RUbzogJy8nXG5cdFx0fSk7XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1V0aWxTdmMnLCBmdW5jdGlvbigpe1xuXHR2YXIgc3ZjID0gdGhpcztcblxuXHRzdmMuZGVnMnJhZCA9IGZ1bmN0aW9uKGRlZykge1xuXHQgIHJldHVybiBkZWcgKiAoTWF0aC5QSS8xODApO1xuXHR9O1xuXG5cdHN2Yy5nZXREaXN0YW5jZUZyb21MYXRMb25JbkttID0gZnVuY3Rpb24gKGxhdDEsbG9uMSxsYXQyLGxvbjIpIHtcblx0ICB2YXIgUiA9IDYzNzE7XG5cdCAgdmFyIGRMYXQgPSBzdmMuZGVnMnJhZChsYXQyLWxhdDEpO1xuXHQgIHZhciBkTG9uID0gc3ZjLmRlZzJyYWQobG9uMi1sb24xKTsgXG5cdCAgdmFyIGEgPSBcblx0ICAgIE1hdGguc2luKGRMYXQvMikgKiBNYXRoLnNpbihkTGF0LzIpICtcblx0ICAgIE1hdGguY29zKHN2Yy5kZWcycmFkKGxhdDEpKSAqIE1hdGguY29zKHN2Yy5kZWcycmFkKGxhdDIpKSAqIFxuXHQgICAgTWF0aC5zaW4oZExvbi8yKSAqIE1hdGguc2luKGRMb24vMilcblx0ICAgIDsgXG5cdCAgdmFyIGMgPSAyICogTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksIE1hdGguc3FydCgxLWEpKTsgXG5cdCAgdmFyIGQgPSBSICogYztcblx0ICByZXR1cm4gZDtcblx0fTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmRpcmVjdGl2ZSgnYXBwTWFwJywgZnVuY3Rpb24oUG9zdHNTdmMsIFV0aWxTdmMsIFNlc3Npb25TdmMsICRjb21waWxlKSB7XG4gICAgLy8gZGlyZWN0aXZlIGxpbmsgZnVuY3Rpb25cbiAgICB2YXIgbGluayA9IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgcm9vdFNjb3BlKSB7XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gR0xPQkFMIFZBUklBQkxFUyBJTiBMSU5LIEZVTkNUSU9OXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIHZhciBtYXA7IC8vIGV4cGFuZCBmcm9tIGdvb2dsZSBtYXAgZm9yIG1hbnVhbGx5IGNyZWF0ZWQgZXZlbnRzXG4gICAgICAgIHZhciBtYXBfb3JpZ2luOyAvLyBmb3Igb3JpZ2luYWwgZ29vZ2xlIG1hcCBldmVudCBmdW5jdGlvbiBsaW5rc1xuICAgICAgICB2YXIgY3VycmVudF9tYXBfbnc7XG4gICAgICAgIHZhciBjdXJyZW50X21hcF9zZTtcbiAgICAgICAgdmFyIG1hcE9wdGlvbnM7XG4gICAgICAgIHZhciBpbml0aWFsTWFwQ2VudGVyO1xuICAgICAgICB2YXIgQ0xPVURfTUFQX0lEID0gJ2N1c3RvbV9zdHlsZSc7IC8vIG1hcCBzdHlsZVxuICAgICAgICB2YXIgaGVscGVyTWFya2VycyA9IFtdO1xuICAgICAgICB2YXIgbWFya2VycyA9IFtdO1xuICAgICAgICB2YXIgaW1hZ2VQb3N0ID0ge1xuICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9jYXRjaG1lLmlmeW91Y2FuLmNvbS9pbWFnZXMvcGljdHVyZXMvSVlDX0ljb25zL0lZQ19Mb2NhdGlvbl9JY29uX1NtYWxsLnBuZycsXG4gICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICBvcmlnaW46IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDE3LCAzNCksXG4gICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxNywgMjUpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBpbWFnZVRhcmdldCA9IHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzL1UvUC9qL00vSS9pL3gtbWFyay15ZWxsb3ctbWQucG5nJyxcbiAgICAgICAgICAgIHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEwMCwgMTAwKSxcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTcsIDM0KSxcbiAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDI1LCAyNSlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGltYWdlVXNlckxvZ2luID0ge1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovL3d3dy5jbGtlci5jb20vY2xpcGFydHMvcS9vLzIvSy9nL1YvbG9jYXRpb24tc3ltYm9sLW1hcC1tZC5wbmcnLFxuICAgICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTAwLCAxMDApLFxuICAgICAgICAgICAgb3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgxNywgMzQpLFxuICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMjAsIDMzKVxuICAgICAgICB9O1xuICAgICAgICB2YXIgaW1hZ2VMaXN0ZW5lciA9IHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly8yLmJwLmJsb2dzcG90LmNvbS8tZGpNYV9uNW5BRU0vVDFHdnhfLTctekkvQUFBQUFBQUFBUTQvLTFONmxsZVF2WmMvczE2MDAvYmxpbmtpbmdfZG90LmdpZicsXG4gICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICBvcmlnaW46IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDE3LCAzNCksXG4gICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxNywgMTcpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gRVZFTlQgSEFORExFUlMgLSBVUERBVEVcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRGVmYXVsdExvY2F0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSA9IG1hcC5nZXRDZW50ZXIoKS5sYXQoKTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlID0gbWFwLmdldENlbnRlcigpLmxuZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQm91bmRzKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG1hcC5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIHZhciBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBub3J0aC1lYXN0IGNvcm5lclxuICAgICAgICAgICAgdmFyIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIHNvdXRoLXdlc3QgY29yZGVyXG4gICAgICAgICAgICAvL1lvdSBnZXQgbm9ydGgtd2VzdCBhbmQgc291dGgtZWFzdCBjb3JuZXJzIGZyb20gdGhlIHR3byBhYm92ZTpcblxuICAgICAgICAgICAgY3VycmVudF9tYXBfbncgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKG5lLmxhdCgpLCBzdy5sbmcoKSk7XG4gICAgICAgICAgICBjdXJyZW50X21hcF9zZSA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoc3cubGF0KCksIG5lLmxuZygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVdhdGNoTG9jYXRpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgd2F0Y2hsb2MgPSB7XG4gICAgICAgICAgICAgICAgbGF0OiBtYXAuZ2V0Q2VudGVyKCkubGF0KCksXG4gICAgICAgICAgICAgICAgbG9uOiBtYXAuZ2V0Q2VudGVyKCkubG5nKClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHdhdGNobG9jSlNPTiA9IEpTT04uc3RyaW5naWZ5KHdhdGNobG9jKTtcblxuICAgICAgICAgICAgdmFyIHVwZGF0ZWRzZXNzaW9uID0ge1xuICAgICAgICAgICAgICAgIHdhdGNobG9jOiB3YXRjaGxvY0pTT04sXG4gICAgICAgICAgICAgICAgZ3VpZDogc2NvcGUuZ3VpZFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gdXBkYXRlIHdhdGNobG9jIHdoZW4gY2VudGVyIGNoYW5nZWQuXG4gICAgICAgICAgICBTZXNzaW9uU3ZjLnVwZGF0ZSh1cGRhdGVkc2Vzc2lvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFVkVOVCBIQU5ETEVSUyAtIERSQVdcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gdXBkYXRlIHJlc3BvbnNlcyBzdWNoIGFzIHZpc3VhbGl6YXRpb24gb2YgbGlzdGVuZXJzXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdSZXNwb25zZXMoKXtcbiAgICAgICAgICAgIFNlc3Npb25TdmMuZmV0Y2goKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oc2Vzc2lvbnMpe1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXNzaW9ucy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXNzaW9uID0gc2Vzc2lvbnNbaV07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlc3Npb24uZ3VpZCA9PSBzY29wZS5ndWlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgIC8vIHNlc3Npb24ncyB3YXRjaCBsb2NhdGlvbiB3aWxsIGJlIGJvdW5jZWQhXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlc3Npb24ud2F0Y2hsb2MpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBhbmd1bGFyLmZyb21Kc29uKHNlc3Npb24ud2F0Y2hsb2MpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g67CU7Jq0642U66asIOyViOyXkCDsnojripTsp4DrtoDthLAg7LK07YGs66W8IO2VmOyepVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZ29vZ2xlTG9jLmxhdCgpIDwgY3VycmVudF9tYXBfbncubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sYXQoKSA+IGN1cnJlbnRfbWFwX3NlLmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShnb29nbGVMb2MubG5nKCkgPCBjdXJyZW50X21hcF9zZS5sbmcoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxuZygpID4gY3VycmVudF9tYXBfbncubG5nKCkpIClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBwb3N0IC0gbm8gbmVlZCB0byBkcmF3XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFya2VyIG9wdGlvbiBzZXR0aW5nXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXJPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGdvb2dsZUxvYyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogbWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9hbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5CT1VOQ0UsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJVc2VyUGluXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpbWFnZUxpc3RlbmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW1pemVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG1hcmtlck9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24ob2xkX21hcmtlcil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZF9tYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9KG1hcmtlcikpLCBcbiAgICAgICAgICAgICAgICAgICAgMTgwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVBbmREcmF3UG9zdHMoKXtcbiAgICAgICAgICAgIFBvc3RzU3ZjLmZldGNoKClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHBvc3RzKXtcblxuICAgICAgICAgICAgICAgIC8vIGRyYXcgbGF0ZXN0IHVwZGF0ZVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zdHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zdCA9IHBvc3RzW2ldO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndWRwYXRlQW5kRHJhd1Bvc3RzOicsIHBvc3QpO1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgbWFya2VycyBwb3N0IGlzIGV4aXNpdGluZyBvbmUsIHdlIGRvbid0IHdhbnQgdG8gZHJhdyBpdCBhZ2Fpbi5cbiAgICAgICAgICAgICAgICAgICAgLy8gb25seSBkcmF3IG5ldyBvbmVzIVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2pdOyBqKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3QuX2lkID09IG1hcmtlci5wb3N0Ll9pZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0ID0gbnVsbDsgLy8g7J2066+4IOq3uOugpOynhCDtj6zsiqTtirjrnbzrqbQsIG51bGzroZwuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIOydtCBsb29w7J2AIHBvc3QuX2lk66eMIOqygOyCrOyaqeyehOycvOuhnCwg66eM7JW9IOqyuey5mOuptCDrsJTroZwgbG9vcOydhCDrqYjstrDrj4Qg6rSc7LCu64ukLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gcG9zdOqwgCDsm5Drnpgg7J6I7JeH642Y6rKD7J2066m0IHBvc3TqsIAgbnVsbOuhnCDshYsg65CY7JeI7J2E6rKD7J206rOgLCBsb2NhdGlvbu2UhOuhnO2NvO2LsOuPhCDsnojripTsp4Ag7ZmV7J247ZWY7J6QXG4gICAgICAgICAgICAgICAgICAgIGlmICghcG9zdCB8fCAhcG9zdC5oYXNPd25Qcm9wZXJ0eSgnbG9jYXRpb24nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBza2lwIHRoaXMgcG9zdCAtIG5vIG5lZWQgdG8gZHJhd1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGFuZ3VsYXIuZnJvbUpzb24ocG9zdC5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG9uKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDrsJTsmrTrjZTrpqwg7JWI7JeQIOyeiOuKlOyngOu2gO2EsCDssrTtgazrpbwg7ZWY7J6lXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShnb29nbGVMb2MubGF0KCkgPCBjdXJyZW50X21hcF9udy5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxhdCgpID4gY3VycmVudF9tYXBfc2UubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA8IGN1cnJlbnRfbWFwX3NlLmxuZygpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShnb29nbGVMb2MubG5nKCkgPiBjdXJyZW50X21hcF9udy5sbmcoKSkgKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gc2tpcCB0aGlzIHBvc3QgLSBubyBuZWVkIHRvIGRyYXdcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VwbGluZ19zdGF0dXMgPSBjYWxjdWxhdGVDb3VwbGluZyhwb3N0Lmd1aWQsIHBvc3QuZ3VpZHRndCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBtYXJrZXIgb3B0aW9uIHNldHRpbmdcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlTG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJCdWJibGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlUG9zdFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcihtYXJrZXJPcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIDEw7LSI67O064ukIOq4tCDqsr3smrDsnZgg6rKD66eMIOyEnOuyhOqwgCDqs4TsgrDsnYQg7ZWY6rOgIOyEnOuyhOqwgCDrs7TrgrTspJjshJwgZnJvbnRlbmTsl5DshJwg7KeA7Jqw64+E66GdIOq0gOumrO2VtOykmOyVvCDtlZzri6QuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhJbnN0YW50TGlmZVNwYW4gPSAxMDAwMDtcblxuICAgICAgICAgICAgICAgICAgICAvLyDsnbjsiqTthLTtirgg66e1IOuplOyLnOyngOydvCDqsr3smrDrp4wg7ZSE66Gg7Yq47JeU65Oc7JmAIOyEnOuyhOqwgCDri6TrpbTqsowg7KeA7JuM7KO864+E66GdIO2VnOuLpC4gKOydvOuLqOydgCDsg4HtlZzshKDsnYAgMTDstIgpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3N0LmxpZmVzcGFuIDwgbWF4SW5zdGFudExpZmVTcGFuKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB1cCBzZWxmIHJlbW92ZSBmb3IgbWFya2VyIGl0c2VsZiBhbmQgZnJvbSBtYXJrZXJzIGNvbGxlY3Rpb24gYXQgZnJvbnQtZW5kXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihvbGRfbWFya2VyLCBvbGRfcG9zdCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkX21hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2tdOyBrKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRfcG9zdC5faWQgPT0gbWFya2VyLnBvc3QuX2lkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5zcGxpY2UoaywgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0obWFya2VyLCBwb3N0KSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdC5saWZlc3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgbWFya2VyIHRvIGFycmF5LCB0aGlzIG1lYW5zIHRoYXQgaXQgaGFzIGJlZW4gZHJhd24gdG8gbWFwXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcnMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXI6IG1hcmtlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0ICA6IHBvc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRFJBV0lORyBNRVNTQUdFIFdJTkRPVyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgaWQ9XCJidWJibGVQb3N0XCI+JyArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0LmJvZHkgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjxkaXYgaWQ9XCJidWJibGVMaWZlQmFyXCI+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgLy8g7Iqk7L2U7ZSE7JeQ7ISc67aA7YSwIOyDiOuhnOyatCDssKjsnbzrk5wg7Iqk7L2U7ZSE66W8IOunjOuTpOyWtCBlYWNoIGZvciBsb29w7JeQ7IScIOyCrOyaqe2VnOuLpC5cbiAgICAgICAgICAgICAgICAgICAgLy8gLS0+IO2VtOyVvCwg6rCBIERPTeydtCDqsIHqsIHsnZggc2NvcGXrpbwg6rCA7KC47IScIHBvc3QgbXNn6rCAIOyViCDqsrnsuZzri6QuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBzY29wZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gcGFyZW50LiRuZXcodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZW5JbmZvV2luZG93ID0gKGZ1bmN0aW9uKG1hcmtlciwgY2hpbGRfc2NvcGUsIHBvc3QsIGNvdXBsaW5nX3N0YXR1cyl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBuZXcgd2luZG93XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZm9XaW5kb3dPcHRpb25zID0geyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGl4ZWxPZmZzZXQ6IG5ldyBnb29nbGUubWFwcy5TaXplKC00MS41LCAxMC4wKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVBdXRvUGFuOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KGluZm9XaW5kb3dPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXBpbGUgaXQgYmVmb3JlIGxvYWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gJzxkaXYgbWFwLW1zZz48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21waWxlZCA9ICRjb21waWxlKGNvbnRlbnQpKGNoaWxkX3Njb3BlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBjdXJyZW50IHRpbWUgYW5kIHN1YnRyYWN0IGl0IGZyb20gcG9zdCdzIGVuZCB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgd2lsbCBiZSBhY2N1cmF0ZSBwb3N0IHRpbWUgZm9yIGluc3RhbnQgcG9zdHMgYW5kIGxvbmcgcG9zdHMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFRpbWVNaWxsaSA9IGN1cnJlbnREYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zdGxpZmUgPSAoKHBvc3QubGlmZWVuZCAtIGN1cnJlbnRUaW1lTWlsbGkpID49IDApID8gKHBvc3QubGlmZWVuZCAtIGN1cnJlbnRUaW1lTWlsbGkpIDogMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdG8gbWFrZSBkYXRhIGF2YWlsYWJsZSB0byB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLm1zZyA9IHBvc3QuYm9keTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0bGlmZSA9IHBvc3RsaWZlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3RndWlkID0gcG9zdC5ndWlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3RndWlkdGd0ID0gcG9zdC5ndWlkdGd0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3Rjb3VwbGVzdGF0dXMgPSBjb3VwbGluZ19zdGF0dXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvV2luZG93LnNldENvbnRlbnQoIGNvbXBpbGVkWzBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvdy5vcGVuKG1hcCAsIG1hcmtlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KShtYXJrZXIsIGNoaWxkLCBwb3N0LCBjb3VwbGluZ19zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgb3BlbkluZm9XaW5kb3coKTtcbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFTkQgb2YgRFJBV0lORyBNRVNTQUdFIFdJTkRPVyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgICAgICAgICB9IC8vIGVuZCBvZiBmb3ItbG9vcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkcmF3RHJvcERvd24oZ29vZ2xlTG9jKVxuICAgICAgICB7XG4gICAgICAgICAgICB1cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgIC8vIOuwlOyatOuNlOumrCDslYjsl5Ag7J6I64qU7KeA67aA7YSwIOyytO2BrOulvCDtlZjsnqVcbiAgICAgICAgICAgIGlmICghKGdvb2dsZUxvYy5sYXQoKSA8IGN1cnJlbnRfbWFwX253LmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxhdCgpID4gY3VycmVudF9tYXBfc2UubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgIShnb29nbGVMb2MubG5nKCkgPCBjdXJyZW50X21hcF9zZS5sbmcoKSkgfHxcbiAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA+IGN1cnJlbnRfbWFwX253LmxuZygpKSApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBza2lwIHRoaXMgcG9zdCAtIG5vIG5lZWQgdG8gZHJhd1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBtYXJrZXIgb3B0aW9uIHNldHRpbmdcbiAgICAgICAgICAgIHZhciBtYXJrZXJPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGVMb2MsXG4gICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uRFJPUCxcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJVc2VyUGluXCIsXG4gICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VVc2VyTG9naW5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG1hcmtlck9wdGlvbnMpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgIChmdW5jdGlvbihvbGRfbWFya2VyKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRfbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KG1hcmtlcikpLCBcbiAgICAgICAgICAgIDIwMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdW5EcmF3UG9zdChwb3N0aWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3RhcnRpbmcgcmVtb3ZlIHBvc3RcIik7XG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2tdOyBrKyspIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwb3N0aWQpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1hcmtlci5wb3N0Ll9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKHBvc3RpZCA9PSBtYXJrZXIucG9zdC5faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyLm1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcnMuc3BsaWNlKGssIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkcmF3QW5kU2V0UGxhY2UobG9jYXRpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRyYXdIZWxwZXJNYXJrZXIobG9jYXRpb24pO1xuICAgICAgICAgICAgc2V0UGxhY2UobG9jYXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZHJhdyBtYXAgd2l0aCBoZWxwZXIgbWFya2Vyc1xuICAgICAgICBmdW5jdGlvbiBkcmF3SGVscGVyTWFya2VyKGxvY2F0aW9uKXtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IGhlbHBlck1hcmtlcnNbaV07IGkrKykge1xuICAgICAgICAgICAgICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWxwZXJNYXJrZXJzID0gW107XG4gICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGxvY2F0aW9uLCBcbiAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICBpY29uOiBpbWFnZVRhcmdldFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoZWxwZXJNYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVuRHJhd0hlbHBlck1hcmtlcigpe1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gaGVscGVyTWFya2Vyc1tpXTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhlbHBlck1hcmtlcnMgPSBbXTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gVVRJTCAoc3R5bGUgYW5kIGNvdXBsaW5ncylcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gc2V0UGxhY2UobG9jYXRpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIGJyb2FkY2FzdCBsb2NhdGlvbiBpbmZvcihsb24sbGF0KVxuICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ2xvYycsIGxvY2F0aW9uKTtcblxuICAgICAgICAgICAgdmFyIGdlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XG5cbiAgICAgICAgICAgIC8vIGJyb2FkY2FzdCBwbGFjZSBmb3JtYXR0ZWRfYWRkcmVzcyBhbmQgZHJhdyBpY29uXG4gICAgICAgICAgICBnZW9jb2Rlci5nZW9jb2RlKCB7ICdsYXRMbmcnOiBsb2NhdGlvbiB9LCBmdW5jdGlvbihyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAvLyBhcyB1c2VyIGNsaWNrcyBvbiB0aGUgbWFwLFxuICAgICAgICAgICAgICAgIC8vIHdlIGhhdmUgdG8gc2F2ZSB0aGUgZm9ybWF0dGVkIGFkZHJlc3MgaW4gJHNjb3BlIGFuZFxuICAgICAgICAgICAgICAgIC8vIGl0IHdpbGwgYmUgdXNlZCB0aHJvdWdoIHBvc3RzLmN0cmxcbiAgICAgICAgICAgICAgICAvLyBlbWl0IGJyb2FkY2FzZSAncGxhY2UnIGFuZCBzZW5kIHRoaXMgdG8gYXBwbGljYXRpb24uY3RybFxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJyb2FkY2FzdCBmb3JtYXR0ZWRfYWRkcmVzc1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgncGxhY2UnLCByZXN1bHRzWzFdLmZvcm1hdHRlZF9hZGRyZXNzKTsgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICBzd2FsKFwiXCIsXCJMb2NhdGlvbiBkb2VzIG5vdCBleGlzdHNcIik7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdwbGFjZScsIFwiTG9jYXRpb24gZG9lcyBub3QgZXhpc3RzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlQ291cGxpbmcocG9zdF9ndWlkLCBwb3N0X2d1aWR0Z3QpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qIGNvdXBsaW5nIHN0YXR1c1xuICAgICAgICAgICAgICAgIDAgLSBubyBzdGF0dXNcbiAgICAgICAgICAgICAgICAxIC0gaSBsaWtlIHlvdVxuICAgICAgICAgICAgICAgIDIgLSB5b3UgbGlrZSBpXG4gICAgICAgICAgICAgICAgNCAtIHdlIGxpa2UgZWFjaCBvdGhlclxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBpbGlrZXlvdSA9IHNjb3BlLmd1aWR0Z3QgPT0gcG9zdF9ndWlkO1xuICAgICAgICAgICAgdmFyIHlvdWxpa2VpID0gc2NvcGUuZ3VpZCA9PSBwb3N0X2d1aWR0Z3Q7XG4gICAgICAgICAgICBpZiAoaWxpa2V5b3UgJiYgeW91bGlrZWkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbGlrZXlvdSAmJiAheW91bGlrZWkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghaWxpa2V5b3UgJiYgeW91bGlrZWkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBVSVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBzZXRVSU1vdmVUb0N1cnJMb2NCdG4oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgY3VyckxvY0J0biA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWN1cnInKSk7IFxuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5UT1BfUklHSFRdLnB1c2goY3VyckxvY0J0bik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVBvc3RGb3JtKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHBvc3RGb3JtID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3N0aW5nJykpOyBcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0NFTlRFUl0ucHVzaChwb3N0Rm9ybSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVBvc3RCdG4oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcG9zdEJ0biA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXN1Ym1pdCcpKTtcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0NFTlRFUl0ucHVzaChwb3N0QnRuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJU2VhcmNoQm94KClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBzZWFyY2ggYm94IGFuZCBsaW5rIGl0IHRvIHRoZSBVSSBlbGVtZW50LlxuICAgICAgICAgICAgdmFyIGlucHV0ID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWMtaW5wdXQnKSk7IC8vIEB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAgXG4gICAgICAgICAgICBtYXAuY29udHJvbHNbZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLlRPUF9MRUZUXS5wdXNoKGlucHV0KTtcblxuICAgICAgICAgICAgdmFyIHNlYXJjaEJveCA9IG5ldyBnb29nbGUubWFwcy5wbGFjZXMuU2VhcmNoQm94KChpbnB1dCkpOyAvLyBAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gXG5cbiAgICAgICAgICAgIC8vIExpc3RlbiBmb3IgdGhlIGV2ZW50IGZpcmVkIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhbiBpdGVtIGZyb20gdGhlXG4gICAgICAgICAgICAvLyBwaWNrIGxpc3QuIFJldHJpZXZlIHRoZSBtYXRjaGluZyBwbGFjZXMgZm9yIHRoYXQgaXRlbS5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHNlYXJjaEJveCwgJ3BsYWNlc19jaGFuZ2VkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBsYWNlcyA9IHNlYXJjaEJveC5nZXRQbGFjZXMoKTtcblxuICAgICAgICAgICAgICAgIGlmIChwbGFjZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyB0YWtlIG9ubHkgMSBzcG90XG4gICAgICAgICAgICAgICAgdmFyIHBsYWNlID0gcGxhY2VzWzBdO1xuXG4gICAgICAgICAgICAgICAgLy8gd2hlbiBzZWFyY2ggaGFwcGVucywgbG9jYXRpb24gd2lsbCBiZSB1cGRhdGVkIGFzIHdlbGwgZm9yIHBvc3RcbiAgICAgICAgICAgICAgICAvLyBzY29wZS4kZW1pdCgncGxhY2UnLCBwbGFjZS5mb3JtYXR0ZWRfYWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgZHJhd0FuZFNldFBsYWNlKHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uKTtcblxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUgPSBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXRpdHVkZTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSA9IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxvbmdpdHVkZTtcblxuICAgICAgICAgICAgICAgIG1hcC5wYW5UbyhwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgbWFwLnNldFpvb20oMTYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFVkVOVFxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudENsaWNrKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gY2xpY2sgZXZlbnQgb24gbWFwIHRvIGRyYXcgbWFya2VyXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGRyYXdBbmRTZXRQbGFjZShldmVudC5sYXRMbmcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudENlbnRlckNoYW5nZWQoKVxuICAgICAgICB7XG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnY2VudGVyX2NoYW5nZWQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gbWFwIGNlbnRlciBjaGFuZ2UsIHVwZGF0ZSBsYXN0IGxvY2F0aW9uIGluIG1lbW9yeSxcbiAgICAgICAgICAgICAgICAvLyBzbyBicm93c2VyIHdpbGwgcmVtZW1iZXIgaXQgbmV4dCB0aW1lIHlvdSBjb21lIVxuICAgICAgICAgICAgICAgIHVwZGF0ZURlZmF1bHRMb2NhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgLy8gd2hlbiBtYXAgY2VudGVyIGNoYW5nZSwgdXBkYXRlIGJvdW5kcyBpbmZvIGZvciBtYXBcbiAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudERyYWdFbmQoKVxuICAgICAgICB7XG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnZHJhZ2VuZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHdhdGNobG9jIHdoZW4gY2VudGVyIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG1hcCBhcyBkcmFnIGVuZFxuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIFNFVFVQIEZPUiBNQVBcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gbWFwIGluaXRpYWwgY29uZmlnc1xuICAgICAgICBmdW5jdGlvbiBpbml0aWFsTWFwRGF0YSgpe1xuICAgICAgICAgICAgaW5pdGlhbE1hcENlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoMzQuMDUsIC0xMTguMjQpO1xuICAgICAgICBcbiAgICAgICAgICAgIGlmICghaXNOYU4od2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSkgJiYgIWlzTmFOKHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsTWFwQ2VudGVyID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyh3aW5kb3cubG9jYWxTdG9yYWdlLmxhdGl0dWRlLCB3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldFBsYWNlKGluaXRpYWxNYXBDZW50ZXIpO1xuXG4gICAgICAgICAgICBtYXBPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXIgICAgICA6IGluaXRpYWxNYXBDZW50ZXIsXG4gICAgICAgICAgICAgICAgICAgIHpvb20gICAgICAgIDogMTUsXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbHdoZWVsIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3RyZWV0Vmlld0NvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlQ29udHJvbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHBhbkNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1hcFR5cGVDb250cm9sT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgIG1hcFR5cGVJZHM6IFtnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUCwgQ0xPVURfTUFQX0lEXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlSWQ6IENMT1VEX01BUF9JRFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldE1hbnVhbEV2ZW50cygpe1xuICAgICAgICAgICAgZnVuY3Rpb24gQ2xvdWRNYXAob3B0aW9ucyl7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW5pdGlhbGl6aW5nIG1hcFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaW5zdGFudGlhdGUgZ29vZ2xlIG1hcFxuICAgICAgICAgICAgbWFwX29yaWdpbiA9IG5ldyBnb29nbGUubWFwcy5NYXAoZWxlbWVudFswXSwgbWFwT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIC8vIHNldCBwcm90b3R5cGUgb2YgY3VzdG9tIG1hcCB3aXRoIG9yaWdpbiBtYXBcbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZSA9IG1hcF9vcmlnaW47XG5cbiAgICAgICAgICAgIC8vIGRyYXcgeCBtYXJrZXJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZURyYXdYTWFya2VyKGxvY2F0aW9uKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICdkcmF3WE1hcmtlcicsIGxvY2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS5kcmF3WE1hcmtlciA9IGhhbmRsZURyYXdYTWFya2VyO1xuXG4gICAgICAgICAgICAvLyBkcmF3IGN1cnJlbnQgbG9jYXRpb24gbWFya2VyXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVEcmF3Q3VyckxvY2F0aW9uTWFya2VyKGxvY2F0aW9uKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICdkcmF3Q3VyckxvY2F0aW9uTWFya2VyJywgbG9jYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLmRyYXdDdXJyTG9jYXRpb25NYXJrZXIgPSBoYW5kbGVEcmF3Q3VyckxvY2F0aW9uTWFya2VyO1xuXG4gICAgICAgICAgICAvLyBkcmF3IHBvc3RzXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVVcGRhdGVBbmREcmF3UG9zdHMoKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICd1cGRhdGVBbmREcmF3UG9zdHMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS51cGRhdGVBbmREcmF3UG9zdHMgPSBoYW5kbGVVcGRhdGVBbmREcmF3UG9zdHM7XG5cbiAgICAgICAgICAgIC8vIGRyYXcgcmVzcG9uc2VzXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVEcmF3UmVzcG9uc2VzKCl7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCAnZHJhd1Jlc3BvbnNlcycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLmRyYXdSZXNwb25zZXMgPSBoYW5kbGVEcmF3UmVzcG9uc2VzO1xuXG4gICAgICAgICAgICAvLyB1bmRyYXcgcG9zdHNcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVVuRHJhd1Bvc3QocG9zdGlkKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICd1bkRyYXdQb3N0JywgcG9zdGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS51bkRyYXdQb3N0ID0gaGFuZGxlVW5EcmF3UG9zdDtcblxuICAgICAgICAgICAgLy8gY3JlYXRlIGN1c3RvbSBtYXAgZm9yIGFwcFxuICAgICAgICAgICAgbWFwID0gbmV3IENsb3VkTWFwKCk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ2RyYXdYTWFya2VyJywgZnVuY3Rpb24obG9jYXRpb24pe1xuICAgICAgICAgICAgICAgIGRyYXdBbmRTZXRQbGFjZShsb2NhdGlvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnZHJhd0N1cnJMb2NhdGlvbk1hcmtlcicsIGZ1bmN0aW9uKGxvY2F0aW9uKXtcbiAgICAgICAgICAgICAgICBkcmF3RHJvcERvd24obG9jYXRpb24pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ3VwZGF0ZUFuZERyYXdQb3N0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnZHJhd1Jlc3BvbnNlcycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgZHJhd1Jlc3BvbnNlcygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ3VuRHJhd1Bvc3QnLCBmdW5jdGlvbihwb3N0aWQpe1xuICAgICAgICAgICAgICAgIHVuRHJhd1Bvc3QocG9zdGlkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0U3R5bGVGb3JNYXAoKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyDquZTrgZTsnbQgXG4gICAgICAgICAgICAvL3ZhciBmZWF0dXJlT3B0cyA9IFt7XCJmZWF0dXJlVHlwZVwiOlwiYWRtaW5pc3RyYXRpdmVcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMudGV4dC5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjNjE5NWEwXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2YyZjJmMlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmZmZmZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLnBhcmtcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZTZmM2Q2XCJ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjQ1fSx7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmNGQyYzVcIn0se1widmlzaWJpbGl0eVwiOlwic2ltcGxpZmllZFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMudGV4dFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzRlNGU0ZVwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2Y0ZjRmNFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLnRleHQuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzc4Nzg3OFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLmljb25cIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInRyYW5zaXRcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZWFmNmY4XCJ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2VhZjZmOFwifV19XTtcbiAgICAgICAgICAgIC8vIOyDge2BvOydtFxuICAgICAgICAgICAgLy92YXIgZmVhdHVyZU9wdHMgPSBbe1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZS5tYW5fbWFkZVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjdmMWRmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZS5uYXR1cmFsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNkMGUzYjRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlLm5hdHVyYWwudGVycmFpblwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2lcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5idXNpbmVzc1wiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLm1lZGljYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZiZDNkYVwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kucGFya1wiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjYmRlNmFiXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5zdHJva2VcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmZmUxNWZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuc3Ryb2tlXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZWZkMTUxXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmZmZmZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQubG9jYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCJibGFja1wifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ0cmFuc2l0LnN0YXRpb24uYWlycG9ydFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNjZmIyZGJcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2EyZGFmMlwifV19XTtcbiAgICAgICAgICAgIC8vIOuYkeuYkeydtFxuICAgICAgICAgICAgLy92YXIgZmVhdHVyZU9wdHMgPSBbe1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzdmYzhlZFwifSx7XCJzYXR1cmF0aW9uXCI6NTV9LHtcImxpZ2h0bmVzc1wiOi02fSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM3ZmM4ZWRcIn0se1wic2F0dXJhdGlvblwiOjU1fSx7XCJsaWdodG5lc3NcIjotNn0se1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5wYXJrXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjODNjZWFkXCJ9LHtcInNhdHVyYXRpb25cIjoxfSx7XCJsaWdodG5lc3NcIjotMTV9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2YzZjRmNFwifSx7XCJzYXR1cmF0aW9uXCI6LTg0fSx7XCJsaWdodG5lc3NcIjo1OX0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2ZmZmZmZlwifSx7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6MTAwfSx7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2ZmZmZmZlwifSx7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6MTAwfSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2JiYmJiYlwifSx7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6MjZ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmZmNjMDBcIn0se1wic2F0dXJhdGlvblwiOjEwMH0se1wibGlnaHRuZXNzXCI6LTM1fSx7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2ZmY2MwMFwifSx7XCJzYXR1cmF0aW9uXCI6MTAwfSx7XCJsaWdodG5lc3NcIjotMjJ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5zY2hvb2xcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZDdlNGU0XCJ9LHtcInNhdHVyYXRpb25cIjotNjB9LHtcImxpZ2h0bmVzc1wiOjIzfSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19XTtcbiAgICAgICAgICAgIC8vIOy0iOuhneydtFxuICAgICAgICAgICAgdmFyIGZlYXR1cmVPcHRzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjRkZBODAwXCJ9LHtcInNhdHVyYXRpb25cIjowfSx7XCJsaWdodG5lc3NcIjowfSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM1M0ZGMDBcIn0se1wic2F0dXJhdGlvblwiOi03M30se1wibGlnaHRuZXNzXCI6NDB9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNGQkZGMDBcIn0se1wic2F0dXJhdGlvblwiOjB9LHtcImxpZ2h0bmVzc1wiOjB9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5sb2NhbFwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiMwMEZGRkRcIn0se1wic2F0dXJhdGlvblwiOjB9LHtcImxpZ2h0bmVzc1wiOjMwfSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzAwQkZGRlwifSx7XCJzYXR1cmF0aW9uXCI6Nn0se1wibGlnaHRuZXNzXCI6OH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2lcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjNjc5NzE0XCJ9LHtcInNhdHVyYXRpb25cIjozMy40fSx7XCJsaWdodG5lc3NcIjotMjUuNH0se1wiZ2FtbWFcIjoxfV19XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHN0eWxlZE1hcE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ0N1c3RvbSBTdHlsZSdcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGN1c3RvbU1hcFR5cGUgPSBuZXcgZ29vZ2xlLm1hcHMuU3R5bGVkTWFwVHlwZShmZWF0dXJlT3B0cywgc3R5bGVkTWFwT3B0aW9ucyk7XG4gICAgICAgICAgICBtYXAubWFwVHlwZXMuc2V0KENMT1VEX01BUF9JRCwgY3VzdG9tTWFwVHlwZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpbml0IHRoZSBtYXBcbiAgICAgICAgZnVuY3Rpb24gaW5pdE1hcCgpIHtcbiAgICAgICAgICAgIGlmIChtYXAgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIGluaXRpYWxNYXBEYXRhKCk7XG5cbiAgICAgICAgICAgICAgICBzZXRNYW51YWxFdmVudHMoKTtcblxuICAgICAgICAgICAgICAgIHNldFN0eWxlRm9yTWFwKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGJyb2FkY2FzdCB0byBzZW5kIG1hcCB0byBhcHBsaWNhdGlvbiBjdHJsXG4gICAgICAgICAgICBzY29wZS4kZW1pdCgnbWFwSW5pdCcsIG1hcCk7XG5cblxuICAgICAgICAgICAgLy8gYWRkIFVJIGVsZW1lbnRzIHRvIG1hcFxuICAgICAgICAgICAgc2V0VUlTZWFyY2hCb3goKTtcbiAgICAgICAgICAgIHNldFVJTW92ZVRvQ3VyckxvY0J0bigpO1xuICAgICAgICAgICAgc2V0VUlQb3N0Rm9ybSgpO1xuICAgICAgICAgICAgc2V0VUlQb3N0QnRuKCk7XG5cbiAgICAgICAgICAgIC8vIGFkZCBvcmlnaW4gbmF0aXZlIEV2ZW50IGhhbmRsZXJzIHRvIG1hcFxuICAgICAgICAgICAgc2V0RXZlbnRDbGljaygpO1xuICAgICAgICAgICAgc2V0RXZlbnRDZW50ZXJDaGFuZ2VkKCk7XG4gICAgICAgICAgICBzZXRFdmVudERyYWdFbmQoKTtcblxuICAgICAgICAgICAgLy8gdXBkYXRlIHZlcnkgZmlyc3QgdGltZSBmb3IgYXBwXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGVmYXVsdExvY2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSBcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFWEVDVVRFXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGluaXRNYXAoKTtcbiAgICB9O1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHRlbXBsYXRlOiAnPGRpdiBpZD1cIm1hcC1jYW52YXNcIj48L2Rpdj4nLFxuICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICBsaW5rOiBsaW5rXG4gICAgfTtcbn0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5kaXJlY3RpdmUoJ21hcE1zZycsIGZ1bmN0aW9uICgkdGltZW91dCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3RlbXBsYXRlcy93aW5kb3cuaHRtbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0cnMpIHsgICAgICAgIFxuXG4gICAgICAgIC8qIGNvdXBsaW5nIHN0YXR1c1xuICAgICAgICAgIDAgLSBubyBzdGF0dXNcbiAgICAgICAgICAxIC0gaSBsaWtlIHlvdVxuICAgICAgICAgIDIgLSB5b3UgbGlrZSBpXG4gICAgICAgICAgNCAtIHdlIGxpa2UgZWFjaCBvdGhlclxuICAgICAgICAqL1xuICAgICAgICBzY29wZS5nZXRfY291cGxpbmcgPSBmdW5jdGlvbihjb3VwbGluZ19zdGF0dXMpe1xuICAgICAgICAgIGlmIChjb3VwbGluZ19zdGF0dXMgPT0gNCl7XG4gICAgICAgICAgICByZXR1cm4gXCJidWJibGVQb3N0IGJ1YmJsZVBvc3RfY291cGxlXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKGNvdXBsaW5nX3N0YXR1cyA9PSAxKXtcbiAgICAgICAgICAgIHJldHVybiBcImJ1YmJsZVBvc3QgYnViYmxlUG9zdF9pbGlrZXlvdVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChjb3VwbGluZ19zdGF0dXMgPT0gMil7XG4gICAgICAgICAgICByZXR1cm4gXCJidWJibGVQb3N0IGJ1YmJsZVBvc3RfeW91bGlrZWlcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJidWJibGVQb3N0IGJ1YmJsZVBvc3Rfbm9uZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBhcyB0aGUgZG9jdW1lbnQgZ2V0cyByZWFkeSwgc2V0IGNsaWNrIGV2ZW50IGFuZCBsaWZlYmFyIGFuaW1hdGlvbiBsZW5ndGhcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgcG9zdGd1aWQgPSBzY29wZS5wb3N0Z3VpZDtcbiAgICAgICAgICB2YXIgbXlndWlkID0gc2NvcGUuJHBhcmVudC5ndWlkO1xuICAgICAgICAgIGVsbS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2ICNidWJibGVDbGljaycpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3dpbmRvdyBjbGlja2VkLicpO1xuXG4gICAgICAgICAgICAvLyBjbGlja2luZyBpdHMgb3duIHBvc3Qgd2lsbCBkbyBub3RoaW5nXG4gICAgICAgICAgICBpZiAocG9zdGd1aWQgPT0gbXlndWlkKXtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL2VsbS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2ICNidWJibGVDbGljaycpLmFkZENsYXNzKFwiYnViYmxlUG9zdCBidWJibGVQb3N0X2lsaWtleW91XCIpO1xuICAgICAgICAgICAgLy9zY29wZS4kcGFyZW50LiRhcHBseSgpO1xuICAgICAgICAgICAgLy9zY29wZS4kcGFyZW50LiRwYXJlbnQucG9zdGNvdXBsZXN0YXR1cyA9IDE7IC8vIDEtIGlsaWtleW91ID8/XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlbWl0IHNldDpndWlkdGd0JywgcG9zdGd1aWQpO1xuICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3NldDpndWlkdGd0JywgcG9zdGd1aWQpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHNjb3BlLnBvc3RsaWZlICsgXCJtc1wiO1xuICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IGVsbS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2IC5wb3N0bGlmZWJhcicpLmNzcygnYW5pbWF0aW9uLWR1cmF0aW9uJywgZHVyYXRpb24pO1xuICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9LFxuICB9XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcci5jb250cm9sbGVyKCdQb3N0c0N0cmwnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlLCBQb3N0c1N2YywgJHdpbmRvdywgJGRvY3VtZW50KXtcclxyXHQvKiBlbWl0IGJyb2FkY2FzdCBmb3IgY3VycmVudCBwYWdlSWQgKi9cclx0JHNjb3BlLiRlbWl0KCdwYWdlY2hhbmdlJywgJHNjb3BlLnBhZ2VJZC5wb3N0KTtcclxyXHQkc2NvcGUucG9zdHMgPSBbXTtcclxyXHQvKiBhcyBzZXJ2ZXIgdGVsbHMgdGhlcmUgd2FzIG5ldyBwb3N0LCBsZXRzIHJlLWxvYWQgbGlzdCBkYXRhICovXHJcdCRzY29wZS4kb24oJ3dzOm5ld19wb3N0JywgZnVuY3Rpb24oXywgcG9zdCl7XHJcdFx0JHNjb3BlLnJlcXVlc3RGZXRjaCgpO1xyXHR9KTtcclxyXHQvKiBtb3ZlIHRvIHBvc3QncyBsb2NhdGlvbiAqL1xyXHQkc2NvcGUubW92ZVRvTG9jID0gZnVuY3Rpb24oaWQpe1xyXHRcdHZhciBwb3N0ID0gKCRzY29wZS5wb3N0c1tpZF0pO1xyXHJcdFx0dmFyIGxvY2F0aW9uID0gYW5ndWxhci5mcm9tSnNvbihwb3N0LmxvY2F0aW9uKTtcclx0XHR2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XHJcclx0XHQkc2NvcGUubWFwLnBhblRvKGdvb2dsZUxvYyk7XHJcdFx0JHNjb3BlLm1hcC5zZXRab29tKDE2KTtcclxyXHRcdC8qIHVzaW5nIGFuZ3VsYXItc2Nyb2xsIHRvIG1vdmUgdG8gdGhlIHRvcCBzbW9vdGhseSAqL1xyXHRcdHZhciB0b3AgPSAwO1xyICAgIFx0dmFyIGR1cmF0aW9uID0gNDgwO1xyICAgIFx0JGRvY3VtZW50LnNjcm9sbFRvcCh0b3AsIGR1cmF0aW9uKS50aGVuKGZ1bmN0aW9uKCkge1xyICAgICBcdFx0IGNvbnNvbGUgJiYgY29uc29sZS5sb2coJ1lvdSBqdXN0IHNjcm9sbGVkIHRvIHRoZSB0b3AhJyk7XHIgICAgXHR9KTtcclxyXHR9O1xyXHJcdCRzY29wZS5hZGRQb3N0ID0gZnVuY3Rpb24oKSB7XHJcdFx0LyogZ2V0IGF1dG9jb21wbGV0ZWQgcGxhY2UgYW5kIHJlc2V0KHNldCB0byB1bmRlZmluZWQpICovXHJcdFx0dmFyIHBsYWNlID0gJHNjb3BlLnBvc3RwbGFjZTtcclx0XHR2YXIgbG9jYXRpb24gPSAkc2NvcGUucG9zdExvY2F0aW9uO1xyXHJcdFx0dmFyIGxvY2F0aW9uSlNPTiA9IEpTT04uc3RyaW5naWZ5KGxvY2F0aW9uKTtcclxyXHRcdFBvc3RzU3ZjLmNyZWF0ZShcclx0XHR7XHJcdFx0XHRib2R5ICAgIDogICRzY29wZS5jb250ZW50LFxyXHRcdFx0bG9jYXRpb246ICBsb2NhdGlvbkpTT04sXHJcdFx0XHRwbGFjZSAgIDogIHBsYWNlLFxyXHRcdFx0Z3VpZCAgICA6ICAkc2NvcGUuZ3VpZCxcclx0XHRcdGd1aWR0Z3QgOiAgJHNjb3BlLmd1aWR0Z3Rcclx0XHR9KVxyXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHBvc3Qpe1xyXHRcdFx0LyogbWFudWFsbHkgcmVsb2FkIG1hcmtlcnMgXHJcdFx0XHR1c2luZyBtYXB0eXBlaWQgc2luY2UgaXRzIG1vc3QgbGVhc3QgdXNlZCBldmVudCwgLSBraW5kIG9mIGhhY2t5IHdheSB0byBkbyBpdFxyXHRcdFx0Ki9cclx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIoJHNjb3BlLm1hcCwgJ21hcHR5cGVpZF9jaGFuZ2VkJyk7XHJcclx0XHRcdCRzY29wZS5wb3N0cy51bnNoaWZ0KHBvc3QpO1xyXHJcdFx0XHQvKiAxMOy0iOuztOuLpCDquLQg6rK97Jqw7J2YIOqyg+unjCDshJzrsoTqsIAg6rOE7IKw7J2EIO2VmOqzoCDshJzrsoTqsIAg67O064K07KSY7IScIGZyb250ZW5k7JeQ7IScIOyngOyasOuPhOuhnSDqtIDrpqztlbTspJjslbwg7ZWc64ukLlxyXHRcdFx0IOumrOyKpO2KuOyduOuNsCDtmITsnqzripQg7JWI67O07J206rKMIO2VtOuRlCDsg4EgKi9cciAgICAgICAgICAgIHZhciBtYXhJbnN0YW50TGlmZVNwYW4gPSAxMDAwMDtcciAgICAgICAgICAgIGlmIChwb3N0LmxpZmVzcGFuIDwgbWF4SW5zdGFudExpZmVTcGFuKXtcciAgICAgICAgICAgIFx0LyogZnJvbnQgZW5kIHNpZGUgbGlzdCBwb3N0IHJlbW92ZSAqL1xyXHRcdFx0XHR2YXIgZnJvbnRFbmRQb3N0UmVtb3ZlID0gZnVuY3Rpb24oKXsgXHJcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucG9zdHMubGVuZ3RoOyArK2kpe1xyXHRcdFx0XHRcdFx0aWYgKHBvc3QuX2lkID09ICRzY29wZS5wb3N0c1tpXS5faWQpXHJcdFx0XHRcdFx0XHR7XHJcdFx0XHRcdFx0XHRcdCRzY29wZS5wb3N0cy5zcGxpY2UoaSwgMSk7XHJcdFx0XHRcdFx0XHR9XHJcdFx0XHRcdFx0fVxyXHRcdFx0XHR9O1xyXHRcdFx0XHRzZXRUaW1lb3V0KGZyb250RW5kUG9zdFJlbW92ZSwgcG9zdC5saWZlc3Bhbik7XHIgICAgICAgICAgICB9XHJcdFx0XHRcclxyXHRcdFx0LyogcmVzZXQgaW5wdXQgZm9ybXMgKi9cclx0XHRcdCRzY29wZS5jb250ZW50ICA9IG51bGw7XHJcdFx0fSlcclx0XHQuZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKXtcclx0XHRcdHN3YWwoXCJQb3N0IGZhaWxlZFwiLCBcIlBsZWFzZSBjb21wbGV0ZSB0aGUgZnJvbSBjb3JyZWN0bHlcIiwgXCJlcnJvclwiKTtcclx0XHR9KTtcclxyXHR9O1xyXHJcdC8qIGFzIHNlcnZlciB0ZWxscyB0aGVyZSB3YXMgbmV3IHBvc3QsIGxldHMgcmUtbG9hZCBsaXN0IGRhdGEgKi9cclx0JHNjb3BlLnJlcXVlc3RGZXRjaCA9IGZ1bmN0aW9uKCkge1xyXHRcdFBvc3RzU3ZjLmZldGNoKClcclx0XHQuc3VjY2VzcyhmdW5jdGlvbihwb3N0cyl7XHJcdFx0XHQkc2NvcGUucG9zdHMgPSBwb3N0cztcclx0XHR9KTtcclx0fTtcclxyXHQkc2NvcGUucmVxdWVzdEZldGNoKCk7XHJ9KTtcciIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1Bvc3RzU3ZjJywgZnVuY3Rpb24oJGh0dHApe1xuXHR0aGlzLmZldGNoID0gZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Bvc3RzJyk7XG5cdH07XG5cblx0dGhpcy5jcmVhdGUgPSBmdW5jdGlvbihwb3N0KXtcblx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wb3N0cycsIHBvc3QpO1xuXHR9O1xuXG5cdHRoaXMucmVtb3ZlID0gZnVuY3Rpb24ocG9zdCl7XG5cdFx0Y29uc29sZS5sb2coXCJkZWxldGluZyBwb3N0aW5nXCIpO1xuXHRcdGNvbnNvbGUubG9nKCdwb3N0Ll9pZDonLCBwb3N0Ll9pZCk7XG5cdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9wb3N0cycsIHBvc3QpO1xuXHR9O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnU2Vzc2lvblN2YycsIGZ1bmN0aW9uKCRodHRwKXtcblx0dGhpcy5mZXRjaCA9IGZ1bmN0aW9uKCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9zZXNzaW9ucycpO1xuXHR9O1xuXG5cdHRoaXMuZW50ZXIgPSBmdW5jdGlvbihzZXNzaW9uKXtcblx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zZXNzaW9ucycsIHNlc3Npb24pO1xuXHR9O1xuXG5cdHRoaXMucmVtb3ZlID0gZnVuY3Rpb24oZ3VpZCl7XG5cdFx0Y29uc29sZS5sb2coXCJkZWxldGluZyBzZXNzaW9uXCIpO1xuXHRcdGNvbnNvbGUubG9nKCdzZXNzaW9uLmd1aWQ6JywgZ3VpZCk7XG5cdFx0dmFyIHNlc3Npb24gPSB7Z3VpZDogZ3VpZH07XG5cdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9zZXNzaW9ucycsIHNlc3Npb24pO1xuXHR9O1xuXG5cdHRoaXMudXBkYXRlID0gZnVuY3Rpb24odXBkYXRlZHNlc3Npb24pe1xuXHRcdGNvbnNvbGUubG9nKFwidXBkYXRpbmcgd2F0Y2ggbG9jYXRpb25cIik7XG5cdFx0Y29uc29sZS5sb2coXCJ1cGRhdGVkc2Vzc2lvbjpcIiwgdXBkYXRlZHNlc3Npb24pO1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zL3VwZGF0ZScsIHVwZGF0ZWRzZXNzaW9uKTtcblx0fVxufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSwgJHRpbWVvdXQsIFNlc3Npb25TdmMpe1xuXG59KTsiLCJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG5cdCduZ1JvdXRlJyxcblx0J2R1U2Nyb2xsJ1xuXSk7XG5cblxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24oU2Vzc2lvblN2YywgJHJvb3RTY29wZSwgJHNjb3BlLCAkd2luZG93LCAkaHR0cCwgJHRpbWVvdXQpe1xuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBJTklUSUFMXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBmdW5jdGlvbiBndWlkKCkge1xuXHRcdGZ1bmN0aW9uIHM0KCkge1xuXHRcdCAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcblx0XHQgICAgICAudG9TdHJpbmcoMTYpXG5cdFx0ICAgICAgLnN1YnN0cmluZygxKTtcblx0XHR9XG5cdCAgXHRyZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgczQoKSArIHM0KCk7XG5cdH1cblxuXHQkc2NvcGUuZ3VpZCA9IGd1aWQoKTtcblxuXG5cdC8vIOyciOuPhOyasOqwgCDri6vtnojroKTqs6Ag7ZWY66m0IOumrO2AmOyKpO2KuCDrs7Trgrjri6QhIOycoOyguCDshLjshZjsnYQg64ur7Jy865286rOgIVxuXHR3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbigpe1xuXHRcdFNlc3Npb25TdmMucmVtb3ZlKCRzY29wZS5ndWlkKTsgLy8g7ISc67KE7JeQ7IScIOycoOyggOqwgCDrgpjqsJDsnYQg7JWM66aw64ukXG5cdH1cblxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gU09DS0VUXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0dmFyIHVybDtcblx0dmFyIGhvc3RuYW1lID0gZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWU7XG5cdHZhciBkZXZlbG9wbWVudElQID0gXCIxOTIuMTY4LjAuNFwiO1xuXG5cdGlmIChob3N0bmFtZSA9PSBcImxvY2FsaG9zdFwiKXtcblx0XHR1cmwgPSBcIndzOi8vbG9jYWxob3N0OjUwMDBcIjtcblx0fVxuXHRlbHNlIGlmIChob3N0bmFtZSA9PSBkZXZlbG9wbWVudElQKSB7XG5cdFx0dXJsID0gJ3dzOi8vMTkyLjE2OC4wLjQ6NTAwMCc7IC8vIGRldmVsb3BtZXQgb24gc29ja2V0IGxvY2FsbHkgXG5cdH1cblx0ZWxzZSB7XG5cdFx0dXJsID0gJ3dzczovL2Nsb3VkdGFsay5oZXJva3VhcHAuY29tJzsgLy8gcHJvZHVjdGlvbiBkZXBsb3kgdmVyc2lvbiAtIHN0aWxsIGRlYnVnIG1vZGVcblx0fVxuXG5cdC8qIOqwnOuwnOqzvOygleydtCDrgZ3rgpjqs6Ag67Cw7Y+s7Iuc7JeQ64qUIOychOu2gOu2hOydhCDsp4DsmrDqs6Ag7JWE656YIOy9lOuTnOunjCDrgqjqsqjrj4Qg65Cc64ukLlxuXHR1cmwgPSAnd3NzOi8vZnJvemVuLWJhZGxhbmRzLTg2NDkuaGVyb2t1YXBwLmNvbSc7XG5cdCovXG5cdHZhciBjb25uZWN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Y29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXQodXJsKTtcblxuXHRcdGNvbm5lY3Rpb24ub25vcGVuID0gZnVuY3Rpb24oKXtcblx0XHRcdGZ1bmN0aW9uIGdldEN1cnJMb2NTdWNjZXNzKHBvcykge1xuXHRcdFx0XHQvLyDrp6jsspjsnYzsl5DripQg7Jyg7KCA7J2YIOyLpOygnCDsnITsuZgo7JWx7JeQIOyeheyepe2WiOydhOuVjOydmCDsnITsuZgp7JmAIOyEvO2EsCDtj6zsp4DshZjsnYQg6rCZ7J20IOuztOuCtOqzoCxcblx0XHRcdFx0Ly8g7IS87YSwIO2PrOyngOyFmOydgCDqs4Tsho0g7JeF642w7J207Yq4IOuQmOyWtOyVvCDtlZzri6QuXG5cdCAgICAgICAgICAgIHZhciBjcmQgPSBwb3MuY29vcmRzO1xuXG5cdCAgICAgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGNyZC5sYXRpdHVkZSwgY3JkLmxvbmdpdHVkZSk7XG5cblx0ICAgICAgICAgICAgdmFyIHdhdGNobG9jID0ge1xuXHQgICAgICAgICAgICBcdGxhdDp3aW5kb3cubG9jYWxTdG9yYWdlLmxhdGl0dWRlLFxuXHQgICAgICAgICAgICBcdGxvbjp3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZVxuXHQgICAgICAgIFx0fTtcblxuXHQgICAgICAgIFx0dmFyIGxvY2F0aW9uID0ge1xuXHQgICAgICAgIFx0XHRsYXQ6Z29vZ2xlTG9jLmxhdCgpLFxuXHQgICAgICAgIFx0XHRsb246Z29vZ2xlTG9jLmxuZygpXG5cdCAgICAgICAgXHR9O1xuXG5cdCAgICAgICAgXHR2YXIgd2F0Y2hsb2NKU09OID0gSlNPTi5zdHJpbmdpZnkod2F0Y2hsb2MpO1xuXHQgICAgICAgIFx0dmFyIGxvY2F0aW9uSlNPTiA9IEpTT04uc3RyaW5naWZ5KGxvY2F0aW9uKTtcblxuXHQgICAgICAgIFx0Y29uc29sZS5sb2coXCJzZXR0aW5nIHdhdGNobG9jXCIsIHdhdGNobG9jSlNPTik7XG5cdCAgICAgICAgXHRjb25zb2xlLmxvZyhcInNldHRpbmcgbG9jYXRpb25cIiwgbG9jYXRpb25KU09OKTtcblx0ICAgICAgICAgICAgXG5cdCAgICAgICAgICAgIC8v7Jes6riw7IScIOu5hOuPmeq4sOyggeycvOuhnCDsnKDsoIDsnZgg66Gc7LyA7J207IWY7J2EIOyWu+qzoCDshLjshZjsnYQg67O064K87IiYIOyeiOuLpC5cblx0XHRcdFx0dmFyIHNlc3Npb24gPSB7XG5cdFx0XHRcdFx0Z3VpZDogICAgICRzY29wZS5ndWlkLFxuXHRcdFx0XHRcdGxvY2F0aW9uOiBsb2NhdGlvbkpTT04sXG5cdFx0XHRcdFx0d2F0Y2hsb2M6IHdhdGNobG9jSlNPTlxuXHRcdFx0XHR9O1xuXHRcdFx0XHRTZXNzaW9uU3ZjLmVudGVyKHNlc3Npb24pOyAvLyDshJzrsoTsl5DshJwg7Jyg7KCA6rCAIOuTpOyWtOyYtOydhCDslYzrprDri6QuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgZnVuY3Rpb24gZ2V0Q3VyckxvY0Vycm9yKGVycikge1xuXHQgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0VSUk9SKCcgKyBlcnIuY29kZSArICcpOiAnICsgZXJyLm1lc3NhZ2UpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8qIGluaXQgbWFwIGFuZCBwbGFjZSBzb21lIG1hcmtlcnMsIHNvIGV2ZXJ5dGhpbmcgc3RhcnQgd2l0aCB0aGlzIGZ1bmN0aW9uLiAqL1xuXHQgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZ2V0Q3VyckxvY1N1Y2Nlc3MsIGdldEN1cnJMb2NFcnJvcik7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY29ubmVjdGVkJyk7XG5cdFx0fTtcblxuXHRcdGNvbm5lY3Rpb24ub25jbG9zZSA9IGZ1bmN0aW9uKCl7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY2xvc2VkLiBSZWNvbmVjdGluZy4uLicpO1xuXHRcdFx0JHRpbWVvdXQoY29ubmVjdCwgMjAwMCk7XG5cdFx0fTtcblxuXHRcdGNvbm5lY3Rpb24ub25tZXNzYWdlID0gZnVuY3Rpb24oZSl7XG5cdFx0XHRjb25zb2xlLmxvZygnYnJvYWRjYXN0IG1zZyBmcm9tIHNlcnZlcjonLCBlKTtcblx0XHRcdHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZShlLmRhdGEpO1xuXG5cdFx0XHQvKlxuXHRcdFx0XHR3czpuZXdfcG9zdCAgICAtIOyDiOuhnOyatCDtj6zsiqTtirjqsIAg7Jis65287JmU7J2E65WMIGZyb250LWVuZOyXkOyEnCDrp7XsnbQg64uk7IucIOyXheuNsOydtO2KuCDtlbTslbwg65Cc64uk6rOgIOyVjOugpOykgOuLpCFcblx0XHRcdFx0d3M6bmV3X3Nlc3Npb24gLSBzZXNzaW9u7J20IOyDiOuhnCDrk6TslrTsmKTrqbQg65Cc64uk6rOgIOyVjOugpOykgOuLpCFcblx0XHRcdFx066ek7Jqw7KSR7JqUISBcblx0XHRcdCovXG5cdFx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3dzOicgKyBwYXlsb2FkLnR5cGUsIHBheWxvYWQuZGF0YSk7XG5cdFx0fTtcblx0fTtcblx0Y29ubmVjdCgpO1xuXG5cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBUQkRcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBzZWUgaWYgaXRzIG1vYmlsZSBwaG9uZVxuXHQkc2NvcGUuaXNNb2JpbGUgPSBmdW5jdGlvbigpe1xuXHRcdGlmKCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL3dlYk9TL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQb2QvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9XaW5kb3dzIFBob25lL2kpXG5cdFx0ICl7XG5cdFx0ICAgIHJldHVybiB0cnVlO1xuXHRcdCAgfVxuXHRcdCBlbHNlIHtcblx0XHQgICAgcmV0dXJuIGZhbHNlO1xuXHRcdCAgfVxuXHR9O1xuXG5cblx0JHNjb3BlLnBhZ2VJZCA9IHsgXG5cdFx0cG9zdCA6IDAsXG5cdH07XG5cblx0JHNjb3BlLm5hdkNvbGxhcHNlZCA9IHRydWU7XG5cdCRzY29wZS5jb2xsYXBzZSA9IGZ1bmN0aW9uKCl7XG5cdFx0JHNjb3BlLm5hdkNvbGxhcHNlZCA9IHRydWU7XG5cdH07XG5cblx0JHNjb3BlLmd1aWR0Z3QgPSBcIjBcIjsgLy8g6riw67O46rCS7J2AIDDsnLzroZwg7ZW07IScIDDsnbTrqbQg6rSA7Ius7IOB64yAZ3VpZOqwgCDsl4bripQg7IOB7YOc7J2064ukLiBcblx0JHNjb3BlLiRvbignc2V0Omd1aWR0Z3QnLCBmdW5jdGlvbihfLCBndWlkdGd0KXtcblx0XHRjb25zb2xlLmxvZyhcInNldHRpbmcgZ3VpZHRndFwiLCBndWlkdGd0KTtcblx0XHQkc2NvcGUuZ3VpZHRndCA9IGd1aWR0Z3Q7XG5cdH0pO1xuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gU09DS0VUIEJST0FEQ0FTVCBSRUNFSVZFUlxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIGFzIHNlcnZlciBzb2NrZXQgc2VuZCAnd3M6bmV3X3Bvc3QnICwgd2UgY2FuIHVwZGF0ZSB0aGUgbWFwIVxuXHQkc2NvcGUuJG9uKCd3czpuZXdfcG9zdCcsIGZ1bmN0aW9uKF8sIHBvc3Qpe1xuXHRcdC8vIHVwZGF0ZSBwb3N0c1xuXHRcdCRzY29wZS5tYXAudXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG5cblx0XHQvLyBzaG93IHJlc3BvbnNpdmUgdXNlcnNcblx0XHQkc2NvcGUubWFwLmRyYXdSZXNwb25zZXMoKTtcblx0fSk7XG5cblx0Ly8gYXMgc2VydmVyIHNvY2tldCBzZW5kICd3czpuZXdfcG9zdCcgLCB3ZSBjYW4gdXBkYXRlIHRoZSBtYXAhXG5cdCRzY29wZS4kb24oJ3dzOm5ld19zZXNzaW9uJywgZnVuY3Rpb24oXywgc2Vzc2lvbil7XG5cblx0XHR2YXIgbG9jYXRpb24gPSBhbmd1bGFyLmZyb21Kc29uKHNlc3Npb24ubG9jYXRpb24pO1xuICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XG5cblx0XHQkc2NvcGUubWFwLmRyYXdDdXJyTG9jYXRpb25NYXJrZXIoZ29vZ2xlTG9jKTtcblx0fSk7XG5cblx0Ly8gd2hlbiBzZXJ2ZXIgcmVtb3ZlIHRoZSBwb3N0IGFmdGVyIHRpbWUgZm9yIGxvbmdlciBvbmVzLCBcblx0Ly8gdXBkYXRlIG1hcCB3aXRoIGNvcmVzcG9uZGluZyBpbmZvXG5cdCRzY29wZS4kb24oJ3dzOnJlbW92ZV9wb3N0JywgZnVuY3Rpb24oXywgcG9zdGlkKXtcblx0XHRjb25zb2xlLmxvZygncmVtb3ZlX3Bvc3QgOiBpZCcsIHBvc3RpZCk7XG5cdFx0JHNjb3BlLm1hcC51bkRyYXdQb3N0KHBvc3RpZCk7XG5cdH0pO1xuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gVEJEXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0JHNjb3BlLiRvbigncGFnZWNoYW5nZScsIGZ1bmN0aW9uKF8sIHBhZ2VJZCl7XG5cdFx0JHNjb3BlLmN1cnJlbnRQYWdlSWQgPSBwYWdlSWQ7XG5cdH0pO1xuXG5cdCRzY29wZS4kb24oJ2xvYycsIGZ1bmN0aW9uKF8sIGxvY2F0aW9uKXtcblx0XHR2YXIgbGF0ID0gbG9jYXRpb24ubGF0KCk7XG5cdFx0dmFyIGxvbiA9IGxvY2F0aW9uLmxuZygpO1xuXHRcdCRzY29wZS5wb3N0TG9jYXRpb24gPSB7XG5cdFx0XHRsYXQ6IGxhdCxcblx0XHRcdGxvbjogbG9uXG5cdFx0fTtcblx0fSk7XG5cblx0JHNjb3BlLiRvbigncGxhY2UnLCBmdW5jdGlvbihfLCBwbGFjZSl7XG5cdFx0Ly8gRm9yY2luZyB0aGUgdXBkYXRlIHdpdGggJGFwcGx5KCkgbWV0aG9kIG9uICRzY29wZVxuXHRcdC8vIHByb2JsZW0gcmVsYXRlZCBub3RlOiBodHRwOi8vd3d3LmplZmZyeWhvdXNlci5jb20vaW5kZXguY2ZtLzIwMTQvNi8yL0hvdy1kby1JLXJ1bi1jb2RlLXdoZW4tYS12YXJpYWJsZS1jaGFuZ2VzLXdpdGgtQW5ndWxhckpTXG5cdFx0JHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuXHRcdFx0XHQkc2NvcGUucG9zdHBsYWNlID0gcGxhY2U7XG5cdFx0XHR9XG5cdFx0KTtcblx0fSk7XG5cblx0JHNjb3BlLiRvbignbWFwSW5pdCcsIGZ1bmN0aW9uKF8sIG1hcCl7XG5cdFx0JHNjb3BlLm1hcCA9IG1hcDtcblx0fSk7XG5cblx0LyogbW92ZSB0byBjdXJyZW50IGxvY2F0aW9uICovXG5cdCRzY29wZS5tb3ZlVG9DdXJyZW50TG9jYXRpb24gPSBmdW5jdGlvbigpe1xuXHRcdGZ1bmN0aW9uIGdldEN1cnJMb2NTdWNjZXNzKHBvcykge1xuICAgICAgICAgICAgLyogbWFrZSBzdXJlIHRvIGNoZWNrIHdlIGFyZSBvbiBwb3N0IHBhZ2Ugd2l0aCBtYXAgZmlyc3QgKi9cbiAgICAgICAgICAgIGlmICgkc2NvcGUuY3VycmVudFBhZ2VJZCAhPSAkc2NvcGUucGFnZUlkLnBvc3QpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgY3JkID0gcG9zLmNvb3JkcztcblxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSA9IGNyZC5sYXRpdHVkZTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlID0gY3JkLmxvbmdpdHVkZTtcblxuICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoY3JkLmxhdGl0dWRlLCBjcmQubG9uZ2l0dWRlKTtcblxuICAgICAgICAgICAgLy8gZHJhdyBkcm9wIGRvd24gdXNlciBwb3NpdGlvblxuICAgICAgICAgICBcdCRzY29wZS5tYXAuZHJhd0N1cnJMb2NhdGlvbk1hcmtlcihnb29nbGVMb2MpO1xuXG4gICAgICAgICAgIFx0Ly8gZHJhdyB4IG1hcmtlclxuXHQgICAgICAgICRzY29wZS5tYXAuZHJhd1hNYXJrZXIoZ29vZ2xlTG9jKTtcblxuXHQgICAgICAgIC8vIG1vdmUgdG8gdGhlIGxvY2F0aW9uIGFuZCB6b29tIGludG8gcmlnaHQgYW1vdW50XG4gICAgICAgICAgICAkc2NvcGUubWFwLnBhblRvKGdvb2dsZUxvYylcbiAgICAgICAgICAgICRzY29wZS5tYXAuc2V0Wm9vbSgxNSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRDdXJyTG9jRXJyb3IoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0VSUk9SKCcgKyBlcnIuY29kZSArICcpOiAnICsgZXJyLm1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogaW5pdCBtYXAgYW5kIHBsYWNlIHNvbWUgbWFya2Vycywgc28gZXZlcnl0aGluZyBzdGFydCB3aXRoIHRoaXMgZnVuY3Rpb24uICovXG4gICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZ2V0Q3VyckxvY1N1Y2Nlc3MsIGdldEN1cnJMb2NFcnJvcik7XG5cbiAgICAgICAgc3dhbCh7ICAgdGl0bGU6IFwiXCIsICAgdGV4dDogXCJNb3ZpbmcgdG8gY3VycmVudCBsb2NhdGlvbi4uXCIsICAgdGltZXI6IDE1MDAsICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlIH0pO1xuXHR9O1xuXG5cdCRzY29wZS5tb3ZlVG9Qb3N0TG9jYXRpb24gPSBmdW5jdGlvbigpe1xuXHRcdHZhciBsYXREZWx0YSA9IDAuMDtcblxuXHRcdGlmICgkc2NvcGUuaXNNb2JpbGUoKSl7XG5cdFx0XHR2YXIgYm91bmRzID0gJHNjb3BlLm1hcC5nZXRCb3VuZHMoKTtcblx0ICAgICAgICB2YXIgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7IC8vIExhdExuZyBvZiB0aGUgbm9ydGgtZWFzdCBjb3JuZXJcblx0ICAgICAgICB2YXIgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCk7IC8vIExhdExuZyBvZiB0aGUgc291dGgtd2VzdCBjb3JkZXJcblx0ICAgICAgICBjdXJyZW50X21hcF9udyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobmUubGF0KCksIHN3LmxuZygpKTtcblx0ICAgICAgICBjdXJyZW50X21hcF9zZSA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoc3cubGF0KCksIG5lLmxuZygpKTtcblxuXHQgICAgICAgIHZhciBsYXREZWx0YV9jZW50ZXIybm9ydGggPSAwLjUgKiBNYXRoLmFicygkc2NvcGUucG9zdExvY2F0aW9uLmxhdCAtIGN1cnJlbnRfbWFwX253LmxhdCgpKTtcblx0ICAgICAgICB2YXIgbGF0RGVsdGFfY2VudGVyMnNvdXRoID0gMC41ICogTWF0aC5hYnMoJHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQgLSBjdXJyZW50X21hcF9zZS5sYXQoKSk7XG5cblx0ICAgICAgICBpZiAobGF0RGVsdGFfY2VudGVyMm5vcnRoID4gbGF0RGVsdGFfY2VudGVyMnNvdXRoKXtcblx0ICAgICAgICBcdGxhdERlbHRhID0gbGF0RGVsdGFfY2VudGVyMnNvdXRoO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICBcdGxhdERlbHRhID0gbGF0RGVsdGFfY2VudGVyMm5vcnRoO1xuXHQgICAgICAgIH1cblx0XHR9XG5cblx0XHR2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZygkc2NvcGUucG9zdExvY2F0aW9uLmxhdCArIGxhdERlbHRhLCAkc2NvcGUucG9zdExvY2F0aW9uLmxvbik7XG5cdFx0JHNjb3BlLm1hcC5wYW5Ubyhnb29nbGVMb2MpO1xuXHR9O1xuXG5cbn0pO1xuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcil7XG5cdCRyb3V0ZVByb3ZpZGVyXG5cdC53aGVuKCcvJywgXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlcjogJ1Bvc3RzQ3RybCcsIFxuXHRcdFx0dGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3Bvc3RzLmh0bWwnXG5cdFx0fSlcblx0Ly8gUmVkaXJlY3QgdG8gdGhlIHJvb3QgcGFnZS5cblx0Lm90aGVyd2lzZShcblx0XHR7XG4gICBcdFx0XHRyZWRpcmVjdFRvOiAnLydcblx0XHR9KTtcbn0pO1xuXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdVdGlsU3ZjJywgZnVuY3Rpb24oKXtcblx0dmFyIHN2YyA9IHRoaXM7XG5cblx0c3ZjLmRlZzJyYWQgPSBmdW5jdGlvbihkZWcpIHtcblx0ICByZXR1cm4gZGVnICogKE1hdGguUEkvMTgwKTtcblx0fTtcblxuXHRzdmMuZ2V0RGlzdGFuY2VGcm9tTGF0TG9uSW5LbSA9IGZ1bmN0aW9uIChsYXQxLGxvbjEsbGF0Mixsb24yKSB7XG5cdCAgdmFyIFIgPSA2MzcxO1xuXHQgIHZhciBkTGF0ID0gc3ZjLmRlZzJyYWQobGF0Mi1sYXQxKTtcblx0ICB2YXIgZExvbiA9IHN2Yy5kZWcycmFkKGxvbjItbG9uMSk7IFxuXHQgIHZhciBhID0gXG5cdCAgICBNYXRoLnNpbihkTGF0LzIpICogTWF0aC5zaW4oZExhdC8yKSArXG5cdCAgICBNYXRoLmNvcyhzdmMuZGVnMnJhZChsYXQxKSkgKiBNYXRoLmNvcyhzdmMuZGVnMnJhZChsYXQyKSkgKiBcblx0ICAgIE1hdGguc2luKGRMb24vMikgKiBNYXRoLnNpbihkTG9uLzIpXG5cdCAgICA7IFxuXHQgIHZhciBjID0gMiAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMS1hKSk7IFxuXHQgIHZhciBkID0gUiAqIGM7XG5cdCAgcmV0dXJuIGQ7XG5cdH07XG59KTtcblxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZGlyZWN0aXZlKCdhcHBNYXAnLCBmdW5jdGlvbihQb3N0c1N2YywgVXRpbFN2YywgU2Vzc2lvblN2YywgJGNvbXBpbGUpIHtcbiAgICAvLyBkaXJlY3RpdmUgbGluayBmdW5jdGlvblxuICAgIHZhciBsaW5rID0gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCByb290U2NvcGUpIHtcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBHTE9CQUwgVkFSSUFCTEVTIElOIExJTksgRlVOQ1RJT05cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgdmFyIG1hcDsgLy8gZXhwYW5kIGZyb20gZ29vZ2xlIG1hcCBmb3IgbWFudWFsbHkgY3JlYXRlZCBldmVudHNcbiAgICAgICAgdmFyIG1hcF9vcmlnaW47IC8vIGZvciBvcmlnaW5hbCBnb29nbGUgbWFwIGV2ZW50IGZ1bmN0aW9uIGxpbmtzXG4gICAgICAgIHZhciBjdXJyZW50X21hcF9udztcbiAgICAgICAgdmFyIGN1cnJlbnRfbWFwX3NlO1xuICAgICAgICB2YXIgbWFwT3B0aW9ucztcbiAgICAgICAgdmFyIGluaXRpYWxNYXBDZW50ZXI7XG4gICAgICAgIHZhciBDTE9VRF9NQVBfSUQgPSAnY3VzdG9tX3N0eWxlJzsgLy8gbWFwIHN0eWxlXG4gICAgICAgIHZhciBoZWxwZXJNYXJrZXJzID0gW107XG4gICAgICAgIHZhciBtYXJrZXJzID0gW107XG4gICAgICAgIHZhciBpbWFnZVBvc3QgPSB7XG4gICAgICAgICAgICB1cmw6ICdodHRwczovL2NhdGNobWUuaWZ5b3VjYW4uY29tL2ltYWdlcy9waWN0dXJlcy9JWUNfSWNvbnMvSVlDX0xvY2F0aW9uX0ljb25fU21hbGwucG5nJyxcbiAgICAgICAgICAgIHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEwMCwgMTAwKSxcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTcsIDM0KSxcbiAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDE3LCAyNSlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGltYWdlVGFyZ2V0ID0ge1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovL3d3dy5jbGtlci5jb20vY2xpcGFydHMvVS9QL2ovTS9JL2kveC1tYXJrLXllbGxvdy1tZC5wbmcnLFxuICAgICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTAwLCAxMDApLFxuICAgICAgICAgICAgb3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgxNywgMzQpLFxuICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMjUsIDI1KVxuICAgICAgICB9O1xuICAgICAgICB2YXIgaW1hZ2VVc2VyTG9naW4gPSB7XG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vd3d3LmNsa2VyLmNvbS9jbGlwYXJ0cy9xL28vMi9LL2cvVi9sb2NhdGlvbi1zeW1ib2wtbWFwLW1kLnBuZycsXG4gICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICBvcmlnaW46IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDE3LCAzNCksXG4gICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgyMCwgMzMpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBpbWFnZUxpc3RlbmVyID0ge1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovLzIuYnAuYmxvZ3Nwb3QuY29tLy1kak1hX241bkFFTS9UMUd2eF8tNy16SS9BQUFBQUFBQUFRNC8tMU42bGxlUXZaYy9zMTYwMC9ibGlua2luZ19kb3QuZ2lmJyxcbiAgICAgICAgICAgIHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEwMCwgMTAwKSxcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTcsIDM0KSxcbiAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDE3LCAxNylcbiAgICAgICAgfTtcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFVkVOVCBIQU5ETEVSUyAtIFVQREFURVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVEZWZhdWx0TG9jYXRpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxhdGl0dWRlID0gbWFwLmdldENlbnRlcigpLmxhdCgpO1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sb25naXR1ZGUgPSBtYXAuZ2V0Q2VudGVyKCkubG5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVCb3VuZHMoKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gbWFwLmdldEJvdW5kcygpO1xuICAgICAgICAgICAgdmFyIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIG5vcnRoLWVhc3QgY29ybmVyXG4gICAgICAgICAgICB2YXIgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCk7IC8vIExhdExuZyBvZiB0aGUgc291dGgtd2VzdCBjb3JkZXJcbiAgICAgICAgICAgIC8vWW91IGdldCBub3J0aC13ZXN0IGFuZCBzb3V0aC1lYXN0IGNvcm5lcnMgZnJvbSB0aGUgdHdvIGFib3ZlOlxuXG4gICAgICAgICAgICBjdXJyZW50X21hcF9udyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobmUubGF0KCksIHN3LmxuZygpKTtcbiAgICAgICAgICAgIGN1cnJlbnRfbWFwX3NlID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhzdy5sYXQoKSwgbmUubG5nKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlV2F0Y2hMb2NhdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciB3YXRjaGxvYyA9IHtcbiAgICAgICAgICAgICAgICBsYXQ6IG1hcC5nZXRDZW50ZXIoKS5sYXQoKSxcbiAgICAgICAgICAgICAgICBsb246IG1hcC5nZXRDZW50ZXIoKS5sbmcoKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgd2F0Y2hsb2NKU09OID0gSlNPTi5zdHJpbmdpZnkod2F0Y2hsb2MpO1xuXG4gICAgICAgICAgICB2YXIgdXBkYXRlZHNlc3Npb24gPSB7XG4gICAgICAgICAgICAgICAgd2F0Y2hsb2M6IHdhdGNobG9jSlNPTixcbiAgICAgICAgICAgICAgICBndWlkOiBzY29wZS5ndWlkXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgICAgIFNlc3Npb25TdmMudXBkYXRlKHVwZGF0ZWRzZXNzaW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEVWRU5UIEhBTkRMRVJTIC0gRFJBV1xuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyB1cGRhdGUgcmVzcG9uc2VzIHN1Y2ggYXMgdmlzdWFsaXphdGlvbiBvZiBsaXN0ZW5lcnNcbiAgICAgICAgZnVuY3Rpb24gZHJhd1Jlc3BvbnNlcygpe1xuICAgICAgICAgICAgU2Vzc2lvblN2Yy5mZXRjaCgpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihzZXNzaW9ucyl7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlc3Npb25zLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlc3Npb24gPSBzZXNzaW9uc1tpXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5ndWlkID09IHNjb3BlLmd1aWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAgLy8gc2Vzc2lvbidzIHdhdGNoIGxvY2F0aW9uIHdpbGwgYmUgYm91bmNlZCFcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2Vzc2lvbi53YXRjaGxvYyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGFuZ3VsYXIuZnJvbUpzb24oc2Vzc2lvbi53YXRjaGxvYyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG9uKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDrsJTsmrTrjZTrpqwg7JWI7JeQIOyeiOuKlOyngOu2gO2EsCDssrTtgazrpbwg7ZWY7J6lXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShnb29nbGVMb2MubGF0KCkgPCBjdXJyZW50X21hcF9udy5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxhdCgpID4gY3VycmVudF9tYXBfc2UubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA8IGN1cnJlbnRfbWFwX3NlLmxuZygpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShnb29nbGVMb2MubG5nKCkgPiBjdXJyZW50X21hcF9udy5sbmcoKSkgKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gc2tpcCB0aGlzIHBvc3QgLSBubyBuZWVkIHRvIGRyYXdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBtYXJrZXIgb3B0aW9uIHNldHRpbmdcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlTG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkJPVU5DRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlVzZXJQaW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlTGlzdGVuZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWl6ZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIobWFya2VyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihvbGRfbWFya2VyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkX21hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0obWFya2VyKSksIFxuICAgICAgICAgICAgICAgICAgICAxODAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFuZERyYXdQb3N0cygpe1xuICAgICAgICAgICAgUG9zdHNTdmMuZmV0Y2goKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocG9zdHMpe1xuXG4gICAgICAgICAgICAgICAgLy8gZHJhdyBsYXRlc3QgdXBkYXRlXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3N0cy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3N0ID0gcG9zdHNbaV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1ZHBhdGVBbmREcmF3UG9zdHM6JywgcG9zdCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBtYXJrZXJzIHBvc3QgaXMgZXhpc2l0aW5nIG9uZSwgd2UgZG9uJ3Qgd2FudCB0byBkcmF3IGl0IGFnYWluLlxuICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGRyYXcgbmV3IG9uZXMhXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNbal07IGorKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zdC5faWQgPT0gbWFya2VyLnBvc3QuX2lkKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QgPSBudWxsOyAvLyDsnbTrr7gg6re466Ck7KeEIO2PrOyKpO2KuOudvOuptCwgbnVsbOuhnC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8g7J20IGxvb3DsnYAgcG9zdC5faWTrp4wg6rKA7IKs7Jqp7J6E7Jy866GcLCDrp4zslb0g6rK57LmY66m0IOuwlOuhnCBsb29w7J2EIOupiOy2sOuPhCDqtJzssK7ri6QuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBwb3N06rCAIOybkOuemCDsnojsl4frjZjqsoPsnbTrqbQgcG9zdOqwgCBudWxs66GcIOyFiyDrkJjsl4jsnYTqsoPsnbTqs6AsIGxvY2F0aW9u7ZSE66Gc7Y287Yuw64+EIOyeiOuKlOyngCDtmZXsnbjtlZjsnpBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwb3N0IHx8ICFwb3N0Lmhhc093blByb3BlcnR5KCdsb2NhdGlvbicpKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBwb3N0IC0gbm8gbmVlZCB0byBkcmF3XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gYW5ndWxhci5mcm9tSnNvbihwb3N0LmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobG9jYXRpb24ubGF0LCBsb2NhdGlvbi5sb24pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOuwlOyatOuNlOumrCDslYjsl5Ag7J6I64qU7KeA67aA7YSwIOyytO2BrOulvCDtlZjsnqVcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGdvb2dsZUxvYy5sYXQoKSA8IGN1cnJlbnRfbWFwX253LmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShnb29nbGVMb2MubGF0KCkgPiBjdXJyZW50X21hcF9zZS5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxuZygpIDwgY3VycmVudF9tYXBfc2UubG5nKCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA+IGN1cnJlbnRfbWFwX253LmxuZygpKSApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBza2lwIHRoaXMgcG9zdCAtIG5vIG5lZWQgdG8gZHJhd1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdXBsaW5nX3N0YXR1cyA9IGNhbGN1bGF0ZUNvdXBsaW5nKHBvc3QuZ3VpZCwgcG9zdC5ndWlkdGd0KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmtlciBvcHRpb24gc2V0dGluZ1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGVMb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkJ1YmJsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQb3N0XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG1hcmtlck9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gMTDstIjrs7Tri6Qg6ri0IOqyveyasOydmCDqsoPrp4wg7ISc67KE6rCAIOqzhOyCsOydhCDtlZjqs6Ag7ISc67KE6rCAIOuztOuCtOykmOyEnCBmcm9udGVuZOyXkOyEnCDsp4DsmrDrj4TroZ0g6rSA66as7ZW07KSY7JW8IO2VnOuLpC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heEluc3RhbnRMaWZlU3BhbiA9IDEwMDAwO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOyduOyKpO2EtO2KuCDrp7Ug66mU7Iuc7KeA7J28IOqyveyasOunjCDtlITroaDtirjsl5Trk5zsmYAg7ISc67KE6rCAIOuLpOultOqyjCDsp4Dsm4zso7zrj4TroZ0g7ZWc64ukLiAo7J2864uo7J2AIOyDge2VnOyEoOydgCAxMOy0iClcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3QubGlmZXNwYW4gPCBtYXhJbnN0YW50TGlmZVNwYW4pe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHVwIHNlbGYgcmVtb3ZlIGZvciBtYXJrZXIgaXRzZWxmIGFuZCBmcm9tIG1hcmtlcnMgY29sbGVjdGlvbiBhdCBmcm9udC1lbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKG9sZF9tYXJrZXIsIG9sZF9wb3N0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRfbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNba107IGsrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZF9wb3N0Ll9pZCA9PSBtYXJrZXIucG9zdC5faWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnNwbGljZShrLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfShtYXJrZXIsIHBvc3QpKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3N0LmxpZmVzcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBtYXJrZXIgdG8gYXJyYXksIHRoaXMgbWVhbnMgdGhhdCBpdCBoYXMgYmVlbiBkcmF3biB0byBtYXBcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcjogbWFya2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QgIDogcG9zdFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBEUkFXSU5HIE1FU1NBR0UgV0lORE9XIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGRpdiBpZD1cImJ1YmJsZVBvc3RcIj4nICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QuYm9keSArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PGRpdiBpZD1cImJ1YmJsZUxpZmVCYXJcIj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAvLyDsiqTsvZTtlITsl5DshJzrtoDthLAg7IOI66Gc7Jq0IOywqOydvOuTnCDsiqTsvZTtlITrpbwg66eM65Ok7Ja0IGVhY2ggZm9yIGxvb3Dsl5DshJwg7IKs7Jqp7ZWc64ukLlxuICAgICAgICAgICAgICAgICAgICAvLyAtLT4g7ZW07JW8LCDqsIEgRE9N7J20IOqwgeqwgeydmCBzY29wZeulvCDqsIDsoLjshJwgcG9zdCBtc2fqsIAg7JWIIOqyuey5nOuLpC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHNjb3BlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBwYXJlbnQuJG5ldyh0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgb3BlbkluZm9XaW5kb3cgPSAoZnVuY3Rpb24obWFya2VyLCBjaGlsZF9zY29wZSwgcG9zdCwgY291cGxpbmdfc3RhdHVzKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyB3aW5kb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mb1dpbmRvd09wdGlvbnMgPSB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXhlbE9mZnNldDogbmV3IGdvb2dsZS5tYXBzLlNpemUoLTQxLjUsIDEwLjApLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUF1dG9QYW46IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coaW5mb1dpbmRvd09wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcGlsZSBpdCBiZWZvcmUgbG9hZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSAnPGRpdiBtYXAtbXNnPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBpbGVkID0gJGNvbXBpbGUoY29udGVudCkoY2hpbGRfc2NvcGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGN1cnJlbnQgdGltZSBhbmQgc3VidHJhY3QgaXQgZnJvbSBwb3N0J3MgZW5kIHRpbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB3aWxsIGJlIGFjY3VyYXRlIHBvc3QgdGltZSBmb3IgaW5zdGFudCBwb3N0cyBhbmQgbG9uZyBwb3N0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VGltZU1pbGxpID0gY3VycmVudERhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3N0bGlmZSA9ICgocG9zdC5saWZlZW5kIC0gY3VycmVudFRpbWVNaWxsaSkgPj0gMCkgPyAocG9zdC5saWZlZW5kIC0gY3VycmVudFRpbWVNaWxsaSkgOiAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90byBtYWtlIGRhdGEgYXZhaWxhYmxlIHRvIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUubXNnID0gcG9zdC5ib2R5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3RsaWZlID0gcG9zdGxpZmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGd1aWQgPSBwb3N0Lmd1aWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGd1aWR0Z3QgPSBwb3N0Lmd1aWR0Z3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGNvdXBsZXN0YXR1cyA9IGNvdXBsaW5nX3N0YXR1cztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9XaW5kb3cuc2V0Q29udGVudCggY29tcGlsZWRbMF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvV2luZG93Lm9wZW4obWFwICwgbWFya2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pKG1hcmtlciwgY2hpbGQsIHBvc3QsIGNvdXBsaW5nX3N0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBvcGVuSW5mb1dpbmRvdygpO1xuICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEVORCBvZiBEUkFXSU5HIE1FU1NBR0UgV0lORE9XIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICAgICAgICAgIH0gLy8gZW5kIG9mIGZvci1sb29wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdEcm9wRG93bihnb29nbGVMb2MpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgLy8g67CU7Jq0642U66asIOyViOyXkCDsnojripTsp4DrtoDthLAg7LK07YGs66W8IO2VmOyepVxuICAgICAgICAgICAgaWYgKCEoZ29vZ2xlTG9jLmxhdCgpIDwgY3VycmVudF9tYXBfbncubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgIShnb29nbGVMb2MubGF0KCkgPiBjdXJyZW50X21hcF9zZS5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA8IGN1cnJlbnRfbWFwX3NlLmxuZygpKSB8fFxuICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxuZygpID4gY3VycmVudF9tYXBfbncubG5nKCkpIClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIHNraXAgdGhpcyBwb3N0IC0gbm8gbmVlZCB0byBkcmF3XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG1hcmtlciBvcHRpb24gc2V0dGluZ1xuICAgICAgICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGdvb2dsZUxvYyxcbiAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlVzZXJQaW5cIixcbiAgICAgICAgICAgICAgICBpY29uOiBpbWFnZVVzZXJMb2dpblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIobWFya2VyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uKG9sZF9tYXJrZXIpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZF9tYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0obWFya2VyKSksIFxuICAgICAgICAgICAgMjAwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1bkRyYXdQb3N0KHBvc3RpZClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdGFydGluZyByZW1vdmUgcG9zdFwiKTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNba107IGsrKykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBvc3RpZCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWFya2VyLnBvc3QuX2lkKTtcbiAgICAgICAgICAgICAgICBpZiAocG9zdGlkID09IG1hcmtlci5wb3N0Ll9pZCkge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXIubWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5zcGxpY2UoaywgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdBbmRTZXRQbGFjZShsb2NhdGlvbilcbiAgICAgICAge1xuICAgICAgICAgICAgZHJhd0hlbHBlck1hcmtlcihsb2NhdGlvbik7XG4gICAgICAgICAgICBzZXRQbGFjZShsb2NhdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkcmF3IG1hcCB3aXRoIGhlbHBlciBtYXJrZXJzXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdIZWxwZXJNYXJrZXIobG9jYXRpb24pe1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gaGVscGVyTWFya2Vyc1tpXTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhlbHBlck1hcmtlcnMgPSBbXTtcbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbG9jYXRpb24sIFxuICAgICAgICAgICAgICAgIG1hcDogbWFwLFxuICAgICAgICAgICAgICAgIGljb246IGltYWdlVGFyZ2V0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhlbHBlck1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdW5EcmF3SGVscGVyTWFya2VyKCl7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBoZWxwZXJNYXJrZXJzW2ldOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVscGVyTWFya2VycyA9IFtdO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBVVElMIChzdHlsZSBhbmQgY291cGxpbmdzKVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBzZXRQbGFjZShsb2NhdGlvbilcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gYnJvYWRjYXN0IGxvY2F0aW9uIGluZm9yKGxvbixsYXQpXG4gICAgICAgICAgICBzY29wZS4kZW1pdCgnbG9jJywgbG9jYXRpb24pO1xuXG4gICAgICAgICAgICB2YXIgZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcblxuICAgICAgICAgICAgLy8gYnJvYWRjYXN0IHBsYWNlIGZvcm1hdHRlZF9hZGRyZXNzIGFuZCBkcmF3IGljb25cbiAgICAgICAgICAgIGdlb2NvZGVyLmdlb2NvZGUoIHsgJ2xhdExuZyc6IGxvY2F0aW9uIH0sIGZ1bmN0aW9uKHJlc3VsdHMsIHN0YXR1cykge1xuICAgICAgICAgICAgICAgIC8vIGFzIHVzZXIgY2xpY2tzIG9uIHRoZSBtYXAsXG4gICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSB0byBzYXZlIHRoZSBmb3JtYXR0ZWQgYWRkcmVzcyBpbiAkc2NvcGUgYW5kXG4gICAgICAgICAgICAgICAgLy8gaXQgd2lsbCBiZSB1c2VkIHRocm91Z2ggcG9zdHMuY3RybFxuICAgICAgICAgICAgICAgIC8vIGVtaXQgYnJvYWRjYXNlICdwbGFjZScgYW5kIHNlbmQgdGhpcyB0byBhcHBsaWNhdGlvbi5jdHJsXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYnJvYWRjYXN0IGZvcm1hdHRlZF9hZGRyZXNzXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdwbGFjZScsIHJlc3VsdHNbMV0uZm9ybWF0dGVkX2FkZHJlc3MpOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2goZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHN3YWwoXCJcIixcIkxvY2F0aW9uIGRvZXMgbm90IGV4aXN0c1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3BsYWNlJywgXCJMb2NhdGlvbiBkb2VzIG5vdCBleGlzdHNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVDb3VwbGluZyhwb3N0X2d1aWQsIHBvc3RfZ3VpZHRndClcbiAgICAgICAge1xuICAgICAgICAgICAgLyogY291cGxpbmcgc3RhdHVzXG4gICAgICAgICAgICAgICAgMCAtIG5vIHN0YXR1c1xuICAgICAgICAgICAgICAgIDEgLSBpIGxpa2UgeW91XG4gICAgICAgICAgICAgICAgMiAtIHlvdSBsaWtlIGlcbiAgICAgICAgICAgICAgICA0IC0gd2UgbGlrZSBlYWNoIG90aGVyXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFyIGlsaWtleW91ID0gc2NvcGUuZ3VpZHRndCA9PSBwb3N0X2d1aWQ7XG4gICAgICAgICAgICB2YXIgeW91bGlrZWkgPSBzY29wZS5ndWlkID09IHBvc3RfZ3VpZHRndDtcbiAgICAgICAgICAgIGlmIChpbGlrZXlvdSAmJiB5b3VsaWtlaSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlsaWtleW91ICYmICF5b3VsaWtlaSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFpbGlrZXlvdSAmJiB5b3VsaWtlaSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIFVJXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJTW92ZVRvQ3VyckxvY0J0bigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBjdXJyTG9jQnRuID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tY3VycicpKTsgXG4gICAgICAgICAgICBtYXAuY29udHJvbHNbZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLlRPUF9SSUdIVF0ucHVzaChjdXJyTG9jQnRuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJUG9zdEZvcm0oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcG9zdEZvcm0gPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bvc3RpbmcnKSk7IFxuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5CT1RUT01fQ0VOVEVSXS5wdXNoKHBvc3RGb3JtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJUG9zdEJ0bigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBwb3N0QnRuID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tc3VibWl0JykpO1xuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5CT1RUT01fQ0VOVEVSXS5wdXNoKHBvc3RCdG4pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VUlTZWFyY2hCb3goKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHNlYXJjaCBib3ggYW5kIGxpbmsgaXQgdG8gdGhlIFVJIGVsZW1lbnQuXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhYy1pbnB1dCcpKTsgLy8gQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9ICBcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uVE9QX0xFRlRdLnB1c2goaW5wdXQpO1xuXG4gICAgICAgICAgICB2YXIgc2VhcmNoQm94ID0gbmV3IGdvb2dsZS5tYXBzLnBsYWNlcy5TZWFyY2hCb3goKGlucHV0KSk7IC8vIEB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSBcblxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciB0aGUgZXZlbnQgZmlyZWQgd2hlbiB0aGUgdXNlciBzZWxlY3RzIGFuIGl0ZW0gZnJvbSB0aGVcbiAgICAgICAgICAgIC8vIHBpY2sgbGlzdC4gUmV0cmlldmUgdGhlIG1hdGNoaW5nIHBsYWNlcyBmb3IgdGhhdCBpdGVtLlxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIoc2VhcmNoQm94LCAncGxhY2VzX2NoYW5nZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGxhY2VzID0gc2VhcmNoQm94LmdldFBsYWNlcygpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHRha2Ugb25seSAxIHNwb3RcbiAgICAgICAgICAgICAgICB2YXIgcGxhY2UgPSBwbGFjZXNbMF07XG5cbiAgICAgICAgICAgICAgICAvLyB3aGVuIHNlYXJjaCBoYXBwZW5zLCBsb2NhdGlvbiB3aWxsIGJlIHVwZGF0ZWQgYXMgd2VsbCBmb3IgcG9zdFxuICAgICAgICAgICAgICAgIC8vIHNjb3BlLiRlbWl0KCdwbGFjZScsIHBsYWNlLmZvcm1hdHRlZF9hZGRyZXNzKTtcbiAgICAgICAgICAgICAgICBkcmF3QW5kU2V0UGxhY2UocGxhY2UuZ2VvbWV0cnkubG9jYXRpb24pO1xuXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSA9IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxhdGl0dWRlO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlID0gcGxhY2UuZ2VvbWV0cnkubG9jYXRpb24ubG9uZ2l0dWRlO1xuXG4gICAgICAgICAgICAgICAgbWFwLnBhblRvKHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICBtYXAuc2V0Wm9vbSgxNik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEVWRU5UXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50Q2xpY2soKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBjbGljayBldmVudCBvbiBtYXAgdG8gZHJhdyBtYXJrZXJcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcF9vcmlnaW4sICdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZHJhd0FuZFNldFBsYWNlKGV2ZW50LmxhdExuZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50Q2VudGVyQ2hhbmdlZCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcF9vcmlnaW4sICdjZW50ZXJfY2hhbmdlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy8gd2hlbiBtYXAgY2VudGVyIGNoYW5nZSwgdXBkYXRlIGxhc3QgbG9jYXRpb24gaW4gbWVtb3J5LFxuICAgICAgICAgICAgICAgIC8vIHNvIGJyb3dzZXIgd2lsbCByZW1lbWJlciBpdCBuZXh0IHRpbWUgeW91IGNvbWUhXG4gICAgICAgICAgICAgICAgdXBkYXRlRGVmYXVsdExvY2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAvLyB3aGVuIG1hcCBjZW50ZXIgY2hhbmdlLCB1cGRhdGUgYm91bmRzIGluZm8gZm9yIG1hcFxuICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50RHJhZ0VuZCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcF9vcmlnaW4sICdkcmFnZW5kJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICB1cGRhdGVXYXRjaExvY2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbWFwIGFzIGRyYWcgZW5kXG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gU0VUVVAgRk9SIE1BUFxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBtYXAgaW5pdGlhbCBjb25maWdzXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxNYXBEYXRhKCl7XG4gICAgICAgICAgICBpbml0aWFsTWFwQ2VudGVyID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZygzNC4wNSwgLTExOC4yNCk7XG4gICAgICAgIFxuICAgICAgICAgICAgaWYgKCFpc05hTih3aW5kb3cubG9jYWxTdG9yYWdlLmxhdGl0dWRlKSAmJiAhaXNOYU4od2luZG93LmxvY2FsU3RvcmFnZS5sb25naXR1ZGUpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluaXRpYWxNYXBDZW50ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUsIHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0UGxhY2UoaW5pdGlhbE1hcENlbnRlcik7XG5cbiAgICAgICAgICAgIG1hcE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNlbnRlciAgICAgIDogaW5pdGlhbE1hcENlbnRlcixcbiAgICAgICAgICAgICAgICAgICAgem9vbSAgICAgICAgOiAxNSxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsd2hlZWwgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzdHJlZXRWaWV3Q29udHJvbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1hcFR5cGVDb250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcGFuQ29udHJvbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHpvb21Db250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUNvbnRyb2xPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUlkczogW2dvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQLCBDTE9VRF9NQVBfSURdXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG1hcFR5cGVJZDogQ0xPVURfTUFQX0lEXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0TWFudWFsRXZlbnRzKCl7XG4gICAgICAgICAgICBmdW5jdGlvbiBDbG91ZE1hcChvcHRpb25zKXtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJbml0aWFsaXppbmcgbWFwXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpbnN0YW50aWF0ZSBnb29nbGUgbWFwXG4gICAgICAgICAgICBtYXBfb3JpZ2luID0gbmV3IGdvb2dsZS5tYXBzLk1hcChlbGVtZW50WzBdLCBtYXBPcHRpb25zKTtcblxuICAgICAgICAgICAgLy8gc2V0IHByb3RvdHlwZSBvZiBjdXN0b20gbWFwIHdpdGggb3JpZ2luIG1hcFxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlID0gbWFwX29yaWdpbjtcblxuICAgICAgICAgICAgLy8gZHJhdyB4IG1hcmtlclxuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRHJhd1hNYXJrZXIobG9jYXRpb24pe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ2RyYXdYTWFya2VyJywgbG9jYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLmRyYXdYTWFya2VyID0gaGFuZGxlRHJhd1hNYXJrZXI7XG5cbiAgICAgICAgICAgIC8vIGRyYXcgY3VycmVudCBsb2NhdGlvbiBtYXJrZXJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZURyYXdDdXJyTG9jYXRpb25NYXJrZXIobG9jYXRpb24pe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ2RyYXdDdXJyTG9jYXRpb25NYXJrZXInLCBsb2NhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUuZHJhd0N1cnJMb2NhdGlvbk1hcmtlciA9IGhhbmRsZURyYXdDdXJyTG9jYXRpb25NYXJrZXI7XG5cbiAgICAgICAgICAgIC8vIGRyYXcgcG9zdHNcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZUFuZERyYXdQb3N0cygpe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ3VwZGF0ZUFuZERyYXdQb3N0cycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLnVwZGF0ZUFuZERyYXdQb3N0cyA9IGhhbmRsZVVwZGF0ZUFuZERyYXdQb3N0cztcblxuICAgICAgICAgICAgLy8gZHJhdyByZXNwb25zZXNcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZURyYXdSZXNwb25zZXMoKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICdkcmF3UmVzcG9uc2VzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUuZHJhd1Jlc3BvbnNlcyA9IGhhbmRsZURyYXdSZXNwb25zZXM7XG5cbiAgICAgICAgICAgIC8vIHVuZHJhdyBwb3N0c1xuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlVW5EcmF3UG9zdChwb3N0aWQpe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ3VuRHJhd1Bvc3QnLCBwb3N0aWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLnVuRHJhd1Bvc3QgPSBoYW5kbGVVbkRyYXdQb3N0O1xuXG4gICAgICAgICAgICAvLyBjcmVhdGUgY3VzdG9tIG1hcCBmb3IgYXBwXG4gICAgICAgICAgICBtYXAgPSBuZXcgQ2xvdWRNYXAoKTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnZHJhd1hNYXJrZXInLCBmdW5jdGlvbihsb2NhdGlvbil7XG4gICAgICAgICAgICAgICAgZHJhd0FuZFNldFBsYWNlKGxvY2F0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICdkcmF3Q3VyckxvY2F0aW9uTWFya2VyJywgZnVuY3Rpb24obG9jYXRpb24pe1xuICAgICAgICAgICAgICAgIGRyYXdEcm9wRG93bihsb2NhdGlvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAndXBkYXRlQW5kRHJhd1Bvc3RzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB1cGRhdGVBbmREcmF3UG9zdHMoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICdkcmF3UmVzcG9uc2VzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBkcmF3UmVzcG9uc2VzKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAndW5EcmF3UG9zdCcsIGZ1bmN0aW9uKHBvc3RpZCl7XG4gICAgICAgICAgICAgICAgdW5EcmF3UG9zdChwb3N0aWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRTdHlsZUZvck1hcCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIOq5lOuBlOydtCBcbiAgICAgICAgICAgIC8vdmFyIGZlYXR1cmVPcHRzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJhZG1pbmlzdHJhdGl2ZVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy50ZXh0LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiM2MTk1YTBcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjJmMmYyXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmZmZmZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kucGFya1wiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNlNmYzZDZcIn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6NDV9LHtcInZpc2liaWxpdHlcIjpcInNpbXBsaWZpZWRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcInNpbXBsaWZpZWRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2Y0ZDJjNVwifSx7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy50ZXh0XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjNGU0ZTRlXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjRmNGY0XCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMudGV4dC5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjNzg3ODc4XCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMuaWNvblwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwidHJhbnNpdFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNlYWY2ZjhcIn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZWFmNmY4XCJ9XX1dO1xuICAgICAgICAgICAgLy8g7IOB7YG87J20XG4gICAgICAgICAgICAvL3ZhciBmZWF0dXJlT3B0cyA9IFt7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlLm1hbl9tYWRlXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmN2YxZGZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlLm5hdHVyYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2QwZTNiNFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGUubmF0dXJhbC50ZXJyYWluXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLmJ1c2luZXNzXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kubWVkaWNhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmJkM2RhXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5wYXJrXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNiZGU2YWJcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LnN0cm9rZVwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZmZTE1ZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5zdHJva2VcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNlZmQxNTFcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmZmZmZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5sb2NhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcImJsYWNrXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInRyYW5zaXQuc3RhdGlvbi5haXJwb3J0XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2NmYjJkYlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjYTJkYWYyXCJ9XX1dO1xuICAgICAgICAgICAgLy8g65iR65iR7J20XG4gICAgICAgICAgICAvL3ZhciBmZWF0dXJlT3B0cyA9IFt7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjN2ZjOGVkXCJ9LHtcInNhdHVyYXRpb25cIjo1NX0se1wibGlnaHRuZXNzXCI6LTZ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzdmYzhlZFwifSx7XCJzYXR1cmF0aW9uXCI6NTV9LHtcImxpZ2h0bmVzc1wiOi02fSx7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLnBhcmtcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM4M2NlYWRcIn0se1wic2F0dXJhdGlvblwiOjF9LHtcImxpZ2h0bmVzc1wiOi0xNX0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZjNmNGY0XCJ9LHtcInNhdHVyYXRpb25cIjotODR9LHtcImxpZ2h0bmVzc1wiOjU5fSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZmZmZmZmXCJ9LHtcInNhdHVyYXRpb25cIjotMTAwfSx7XCJsaWdodG5lc3NcIjoxMDB9LHtcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZmZmZmZmXCJ9LHtcInNhdHVyYXRpb25cIjotMTAwfSx7XCJsaWdodG5lc3NcIjoxMDB9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjYmJiYmJiXCJ9LHtcInNhdHVyYXRpb25cIjotMTAwfSx7XCJsaWdodG5lc3NcIjoyNn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2ZmY2MwMFwifSx7XCJzYXR1cmF0aW9uXCI6MTAwfSx7XCJsaWdodG5lc3NcIjotMzV9LHtcInZpc2liaWxpdHlcIjpcInNpbXBsaWZpZWRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZmZjYzAwXCJ9LHtcInNhdHVyYXRpb25cIjoxMDB9LHtcImxpZ2h0bmVzc1wiOi0yMn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLnNjaG9vbFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNkN2U0ZTRcIn0se1wic2F0dXJhdGlvblwiOi02MH0se1wibGlnaHRuZXNzXCI6MjN9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX1dO1xuICAgICAgICAgICAgLy8g7LSI66Gd7J20XG4gICAgICAgICAgICB2YXIgZmVhdHVyZU9wdHMgPSBbe1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNGRkE4MDBcIn0se1wic2F0dXJhdGlvblwiOjB9LHtcImxpZ2h0bmVzc1wiOjB9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzUzRkYwMFwifSx7XCJzYXR1cmF0aW9uXCI6LTczfSx7XCJsaWdodG5lc3NcIjo0MH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI0ZCRkYwMFwifSx7XCJzYXR1cmF0aW9uXCI6MH0se1wibGlnaHRuZXNzXCI6MH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmxvY2FsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzAwRkZGRFwifSx7XCJzYXR1cmF0aW9uXCI6MH0se1wibGlnaHRuZXNzXCI6MzB9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjMDBCRkZGXCJ9LHtcInNhdHVyYXRpb25cIjo2fSx7XCJsaWdodG5lc3NcIjo4fSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM2Nzk3MTRcIn0se1wic2F0dXJhdGlvblwiOjMzLjR9LHtcImxpZ2h0bmVzc1wiOi0yNS40fSx7XCJnYW1tYVwiOjF9XX1dO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgc3R5bGVkTWFwT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnQ3VzdG9tIFN0eWxlJ1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgY3VzdG9tTWFwVHlwZSA9IG5ldyBnb29nbGUubWFwcy5TdHlsZWRNYXBUeXBlKGZlYXR1cmVPcHRzLCBzdHlsZWRNYXBPcHRpb25zKTtcbiAgICAgICAgICAgIG1hcC5tYXBUeXBlcy5zZXQoQ0xPVURfTUFQX0lELCBjdXN0b21NYXBUeXBlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGluaXQgdGhlIG1hcFxuICAgICAgICBmdW5jdGlvbiBpbml0TWFwKCkge1xuICAgICAgICAgICAgaWYgKG1hcCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbE1hcERhdGEoKTtcblxuICAgICAgICAgICAgICAgIHNldE1hbnVhbEV2ZW50cygpO1xuXG4gICAgICAgICAgICAgICAgc2V0U3R5bGVGb3JNYXAoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYnJvYWRjYXN0IHRvIHNlbmQgbWFwIHRvIGFwcGxpY2F0aW9uIGN0cmxcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdtYXBJbml0JywgbWFwKTtcblxuXG4gICAgICAgICAgICAvLyBhZGQgVUkgZWxlbWVudHMgdG8gbWFwXG4gICAgICAgICAgICBzZXRVSVNlYXJjaEJveCgpO1xuICAgICAgICAgICAgc2V0VUlNb3ZlVG9DdXJyTG9jQnRuKCk7XG4gICAgICAgICAgICBzZXRVSVBvc3RGb3JtKCk7XG4gICAgICAgICAgICBzZXRVSVBvc3RCdG4oKTtcblxuICAgICAgICAgICAgLy8gYWRkIG9yaWdpbiBuYXRpdmUgRXZlbnQgaGFuZGxlcnMgdG8gbWFwXG4gICAgICAgICAgICBzZXRFdmVudENsaWNrKCk7XG4gICAgICAgICAgICBzZXRFdmVudENlbnRlckNoYW5nZWQoKTtcbiAgICAgICAgICAgIHNldEV2ZW50RHJhZ0VuZCgpO1xuXG4gICAgICAgICAgICAvLyB1cGRhdGUgdmVyeSBmaXJzdCB0aW1lIGZvciBhcHBcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB1cGRhdGVEZWZhdWx0TG9jYXRpb24oKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVXYXRjaExvY2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG4gICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9IFxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEVYRUNVVEVcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgaW5pdE1hcCgpO1xuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGlkPVwibWFwLWNhbnZhc1wiPjwvZGl2PicsXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgIGxpbms6IGxpbmtcbiAgICB9O1xufSk7XG5cblxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZGlyZWN0aXZlKCdtYXBNc2cnLCBmdW5jdGlvbiAoJHRpbWVvdXQpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi90ZW1wbGF0ZXMvd2luZG93Lmh0bWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHJzKSB7ICAgICAgICBcblxuICAgICAgICAvKiBjb3VwbGluZyBzdGF0dXNcbiAgICAgICAgICAwIC0gbm8gc3RhdHVzXG4gICAgICAgICAgMSAtIGkgbGlrZSB5b3VcbiAgICAgICAgICAyIC0geW91IGxpa2UgaVxuICAgICAgICAgIDQgLSB3ZSBsaWtlIGVhY2ggb3RoZXJcbiAgICAgICAgKi9cbiAgICAgICAgc2NvcGUuZ2V0X2NvdXBsaW5nID0gZnVuY3Rpb24oY291cGxpbmdfc3RhdHVzKXtcbiAgICAgICAgICBpZiAoY291cGxpbmdfc3RhdHVzID09IDQpe1xuICAgICAgICAgICAgcmV0dXJuIFwiYnViYmxlUG9zdCBidWJibGVQb3N0X2NvdXBsZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChjb3VwbGluZ19zdGF0dXMgPT0gMSl7XG4gICAgICAgICAgICByZXR1cm4gXCJidWJibGVQb3N0IGJ1YmJsZVBvc3RfaWxpa2V5b3VcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoY291cGxpbmdfc3RhdHVzID09IDIpe1xuICAgICAgICAgICAgcmV0dXJuIFwiYnViYmxlUG9zdCBidWJibGVQb3N0X3lvdWxpa2VpXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiYnViYmxlUG9zdCBidWJibGVQb3N0X25vbmVcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gYXMgdGhlIGRvY3VtZW50IGdldHMgcmVhZHksIHNldCBjbGljayBldmVudCBhbmQgbGlmZWJhciBhbmltYXRpb24gbGVuZ3RoXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHBvc3RndWlkID0gc2NvcGUucG9zdGd1aWQ7XG4gICAgICAgICAgdmFyIG15Z3VpZCA9IHNjb3BlLiRwYXJlbnQuZ3VpZDtcbiAgICAgICAgICBlbG0ucGFyZW50KCkuZmluZCgnZGl2IGRpdiAjYnViYmxlQ2xpY2snKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3aW5kb3cgY2xpY2tlZC4nKTtcblxuICAgICAgICAgICAgLy8gY2xpY2tpbmcgaXRzIG93biBwb3N0IHdpbGwgZG8gbm90aGluZ1xuICAgICAgICAgICAgaWYgKHBvc3RndWlkID09IG15Z3VpZCl7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9lbG0ucGFyZW50KCkuZmluZCgnZGl2IGRpdiAjYnViYmxlQ2xpY2snKS5hZGRDbGFzcyhcImJ1YmJsZVBvc3QgYnViYmxlUG9zdF9pbGlrZXlvdVwiKTtcbiAgICAgICAgICAgIC8vc2NvcGUuJHBhcmVudC4kYXBwbHkoKTtcbiAgICAgICAgICAgIC8vc2NvcGUuJHBhcmVudC4kcGFyZW50LnBvc3Rjb3VwbGVzdGF0dXMgPSAxOyAvLyAxLSBpbGlrZXlvdSA/P1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZW1pdCBzZXQ6Z3VpZHRndCcsIHBvc3RndWlkKTtcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdzZXQ6Z3VpZHRndCcsIHBvc3RndWlkKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBzY29wZS5wb3N0bGlmZSArIFwibXNcIjtcbiAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBlbG0ucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJ2FuaW1hdGlvbi1kdXJhdGlvbicsIGR1cmF0aW9uKTtcbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgfSxcbiAgfVxufSk7XG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcci5jb250cm9sbGVyKCdQb3N0c0N0cmwnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlLCBQb3N0c1N2YywgJHdpbmRvdywgJGRvY3VtZW50KXtcclxyXHQvKiBlbWl0IGJyb2FkY2FzdCBmb3IgY3VycmVudCBwYWdlSWQgKi9cclx0JHNjb3BlLiRlbWl0KCdwYWdlY2hhbmdlJywgJHNjb3BlLnBhZ2VJZC5wb3N0KTtcclxyXHQkc2NvcGUucG9zdHMgPSBbXTtcclxyXHQvKiBhcyBzZXJ2ZXIgdGVsbHMgdGhlcmUgd2FzIG5ldyBwb3N0LCBsZXRzIHJlLWxvYWQgbGlzdCBkYXRhICovXHJcdCRzY29wZS4kb24oJ3dzOm5ld19wb3N0JywgZnVuY3Rpb24oXywgcG9zdCl7XHJcdFx0JHNjb3BlLnJlcXVlc3RGZXRjaCgpO1xyXHR9KTtcclxyXHQvKiBtb3ZlIHRvIHBvc3QncyBsb2NhdGlvbiAqL1xyXHQkc2NvcGUubW92ZVRvTG9jID0gZnVuY3Rpb24oaWQpe1xyXHRcdHZhciBwb3N0ID0gKCRzY29wZS5wb3N0c1tpZF0pO1xyXHJcdFx0dmFyIGxvY2F0aW9uID0gYW5ndWxhci5mcm9tSnNvbihwb3N0LmxvY2F0aW9uKTtcclx0XHR2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XHJcclx0XHQkc2NvcGUubWFwLnBhblRvKGdvb2dsZUxvYyk7XHJcdFx0JHNjb3BlLm1hcC5zZXRab29tKDE2KTtcclxyXHRcdC8qIHVzaW5nIGFuZ3VsYXItc2Nyb2xsIHRvIG1vdmUgdG8gdGhlIHRvcCBzbW9vdGhseSAqL1xyXHRcdHZhciB0b3AgPSAwO1xyICAgIFx0dmFyIGR1cmF0aW9uID0gNDgwO1xyICAgIFx0JGRvY3VtZW50LnNjcm9sbFRvcCh0b3AsIGR1cmF0aW9uKS50aGVuKGZ1bmN0aW9uKCkge1xyICAgICBcdFx0IGNvbnNvbGUgJiYgY29uc29sZS5sb2coJ1lvdSBqdXN0IHNjcm9sbGVkIHRvIHRoZSB0b3AhJyk7XHIgICAgXHR9KTtcclxyXHR9O1xyXHJcdCRzY29wZS5hZGRQb3N0ID0gZnVuY3Rpb24oKSB7XHJcdFx0LyogZ2V0IGF1dG9jb21wbGV0ZWQgcGxhY2UgYW5kIHJlc2V0KHNldCB0byB1bmRlZmluZWQpICovXHJcdFx0dmFyIHBsYWNlID0gJHNjb3BlLnBvc3RwbGFjZTtcclx0XHR2YXIgbG9jYXRpb24gPSAkc2NvcGUucG9zdExvY2F0aW9uO1xyXHJcdFx0dmFyIGxvY2F0aW9uSlNPTiA9IEpTT04uc3RyaW5naWZ5KGxvY2F0aW9uKTtcclxyXHRcdFBvc3RzU3ZjLmNyZWF0ZShcclx0XHR7XHJcdFx0XHRib2R5ICAgIDogICRzY29wZS5jb250ZW50LFxyXHRcdFx0bG9jYXRpb246ICBsb2NhdGlvbkpTT04sXHJcdFx0XHRwbGFjZSAgIDogIHBsYWNlLFxyXHRcdFx0Z3VpZCAgICA6ICAkc2NvcGUuZ3VpZCxcclx0XHRcdGd1aWR0Z3QgOiAgJHNjb3BlLmd1aWR0Z3Rcclx0XHR9KVxyXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHBvc3Qpe1xyXHRcdFx0LyogbWFudWFsbHkgcmVsb2FkIG1hcmtlcnMgXHJcdFx0XHR1c2luZyBtYXB0eXBlaWQgc2luY2UgaXRzIG1vc3QgbGVhc3QgdXNlZCBldmVudCwgLSBraW5kIG9mIGhhY2t5IHdheSB0byBkbyBpdFxyXHRcdFx0Ki9cclx0XHRcdGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIoJHNjb3BlLm1hcCwgJ21hcHR5cGVpZF9jaGFuZ2VkJyk7XHJcclx0XHRcdCRzY29wZS5wb3N0cy51bnNoaWZ0KHBvc3QpO1xyXHJcdFx0XHQvKiAxMOy0iOuztOuLpCDquLQg6rK97Jqw7J2YIOqyg+unjCDshJzrsoTqsIAg6rOE7IKw7J2EIO2VmOqzoCDshJzrsoTqsIAg67O064K07KSY7IScIGZyb250ZW5k7JeQ7IScIOyngOyasOuPhOuhnSDqtIDrpqztlbTspJjslbwg7ZWc64ukLlxyXHRcdFx0IOumrOyKpO2KuOyduOuNsCDtmITsnqzripQg7JWI67O07J206rKMIO2VtOuRlCDsg4EgKi9cciAgICAgICAgICAgIHZhciBtYXhJbnN0YW50TGlmZVNwYW4gPSAxMDAwMDtcciAgICAgICAgICAgIGlmIChwb3N0LmxpZmVzcGFuIDwgbWF4SW5zdGFudExpZmVTcGFuKXtcciAgICAgICAgICAgIFx0LyogZnJvbnQgZW5kIHNpZGUgbGlzdCBwb3N0IHJlbW92ZSAqL1xyXHRcdFx0XHR2YXIgZnJvbnRFbmRQb3N0UmVtb3ZlID0gZnVuY3Rpb24oKXsgXHJcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucG9zdHMubGVuZ3RoOyArK2kpe1xyXHRcdFx0XHRcdFx0aWYgKHBvc3QuX2lkID09ICRzY29wZS5wb3N0c1tpXS5faWQpXHJcdFx0XHRcdFx0XHR7XHJcdFx0XHRcdFx0XHRcdCRzY29wZS5wb3N0cy5zcGxpY2UoaSwgMSk7XHJcdFx0XHRcdFx0XHR9XHJcdFx0XHRcdFx0fVxyXHRcdFx0XHR9O1xyXHRcdFx0XHRzZXRUaW1lb3V0KGZyb250RW5kUG9zdFJlbW92ZSwgcG9zdC5saWZlc3Bhbik7XHIgICAgICAgICAgICB9XHJcdFx0XHRcclxyXHRcdFx0LyogcmVzZXQgaW5wdXQgZm9ybXMgKi9cclx0XHRcdCRzY29wZS5jb250ZW50ICA9IG51bGw7XHJcdFx0fSlcclx0XHQuZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKXtcclx0XHRcdHN3YWwoXCJQb3N0IGZhaWxlZFwiLCBcIlBsZWFzZSBjb21wbGV0ZSB0aGUgZnJvbSBjb3JyZWN0bHlcIiwgXCJlcnJvclwiKTtcclx0XHR9KTtcclxyXHR9O1xyXHJcdC8qIGFzIHNlcnZlciB0ZWxscyB0aGVyZSB3YXMgbmV3IHBvc3QsIGxldHMgcmUtbG9hZCBsaXN0IGRhdGEgKi9cclx0JHNjb3BlLnJlcXVlc3RGZXRjaCA9IGZ1bmN0aW9uKCkge1xyXHRcdFBvc3RzU3ZjLmZldGNoKClcclx0XHQuc3VjY2VzcyhmdW5jdGlvbihwb3N0cyl7XHJcdFx0XHQkc2NvcGUucG9zdHMgPSBwb3N0cztcclx0XHR9KTtcclx0fTtcclxyXHQkc2NvcGUucmVxdWVzdEZldGNoKCk7XHJ9KTtcclxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnUG9zdHNTdmMnLCBmdW5jdGlvbigkaHR0cCl7XG5cdHRoaXMuZmV0Y2ggPSBmdW5jdGlvbigpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnKTtcblx0fTtcblxuXHR0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKHBvc3Qpe1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Bvc3RzJywgcG9zdCk7XG5cdH07XG5cblx0dGhpcy5yZW1vdmUgPSBmdW5jdGlvbihwb3N0KXtcblx0XHRjb25zb2xlLmxvZyhcImRlbGV0aW5nIHBvc3RpbmdcIik7XG5cdFx0Y29uc29sZS5sb2coJ3Bvc3QuX2lkOicsIHBvc3QuX2lkKTtcblx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL3Bvc3RzJywgcG9zdCk7XG5cdH07XG59KTtcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1Nlc3Npb25TdmMnLCBmdW5jdGlvbigkaHR0cCl7XG5cdHRoaXMuZmV0Y2ggPSBmdW5jdGlvbigpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc2Vzc2lvbnMnKTtcblx0fTtcblxuXHR0aGlzLmVudGVyID0gZnVuY3Rpb24oc2Vzc2lvbil7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLCBzZXNzaW9uKTtcblx0fTtcblxuXHR0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKGd1aWQpe1xuXHRcdGNvbnNvbGUubG9nKFwiZGVsZXRpbmcgc2Vzc2lvblwiKTtcblx0XHRjb25zb2xlLmxvZygnc2Vzc2lvbi5ndWlkOicsIGd1aWQpO1xuXHRcdHZhciBzZXNzaW9uID0ge2d1aWQ6IGd1aWR9O1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvc2Vzc2lvbnMnLCBzZXNzaW9uKTtcblx0fTtcblxuXHR0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKHVwZGF0ZWRzZXNzaW9uKXtcblx0XHRjb25zb2xlLmxvZyhcInVwZGF0aW5nIHdhdGNoIGxvY2F0aW9uXCIpO1xuXHRcdGNvbnNvbGUubG9nKFwidXBkYXRlZHNlc3Npb246XCIsIHVwZGF0ZWRzZXNzaW9uKTtcblx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zZXNzaW9ucy91cGRhdGUnLCB1cGRhdGVkc2Vzc2lvbik7XG5cdH1cbn0pO1xuXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSwgJHRpbWVvdXQsIFNlc3Npb25TdmMpe1xuXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=