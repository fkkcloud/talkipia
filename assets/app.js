angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["SessionSvc","$rootScope","$scope","$window","$http","$timeout",function(o,t,e,n,a,i){function l(){function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()}e.guid=l(),e.pageId={post:0},e.sliderOptions={from:1,to:3e5,step:5e3,dimension:" km",vertical:!1,limits:!1,css:{background:{"background-color":"yellow"},before:{"background-color":"purple"},"default":{"background-color":"white"},after:{"background-color":"green"},pointer:{"background-color":"red"}}},e.navCollapsed=!0,e.guidtgt="0",window.onbeforeunload=function(){o.remove(e.guid)};var s,r=document.location.hostname,g="192.168.0.4";s="localhost"==r?"ws://localhost:5000":r==g?"ws://192.168.0.4:5000":"wss://cloudtalk.herokuapp.com";var c=function(){connection=new WebSocket(s),connection.onopen=function(){function t(t){var n=t.coords,a=new google.maps.LatLng(n.latitude,n.longitude),i={lat:a.lat(),lon:a.lng()},l=JSON.stringify(i);console.log("setting location",l);var s=e.map.getBounds(),r=s.getNorthEast(),g=s.getSouthWest(),c={lat:r.lat(),lon:g.lng()},u={lat:g.lat(),lon:r.lng()},p={lat:window.localStorage.latitude,lon:window.localStorage.longitude},d={nw_lat:c.lat,nw_lon:c.lon,se_lat:u.lat,se_lon:u.lon,center_lat:p.lat,center_lon:p.lon},m=JSON.stringify(d);console.log("setting watchloc",m);var f={guid:e.guid,location:l,watchloc:m};o.enter(f)}function n(o){console.warn("ERROR("+o.code+"): "+o.message)}navigator.geolocation.getCurrentPosition(t,n),console.log("WebSocket connected")},connection.onclose=function(){console.log("WebSocket closed. Reconecting..."),i(c,2e3)},connection.onmessage=function(o){console.log("broadcast msg from server:",o);var e=JSON.parse(o.data);t.$broadcast("ws:"+e.type,e.data)}};c(),e.$on("ws:new_post",function(o,t){e.map.updateAndDrawPosts(),t.guid==e.guid&&(console.log("start drawing responses.."),e.map.drawResponses(t))}),e.$on("ws:new_session",function(o,t){var n=angular.fromJson(t.location);e.map.drawCurrLocationMarker(n)}),e.$on("ws:remove_post",function(o,t){e.map.unDrawPost(t)}),e.isMobile=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1},e.moveToCurrentLocation=function(){function o(o){if(e.currentPageId==e.pageId.post){var t=o.coords;window.localStorage.latitude=t.latitude,window.localStorage.longitude=t.longitude;var n={lat:t.latitude,lon:t.longitude};e.map.drawCurrLocationMarker(n),e.map.drawXMarker(n);var a=new google.maps.LatLng(n.lat,n.lon);e.map.panTo(a),e.map.setZoom(15)}}function t(o){swal("","Need to turn on location service for proper use."),console.warn("ERROR("+o.code+"): "+o.message)}navigator.geolocation.getCurrentPosition(o,t),swal({title:"",text:"Moving to current location..",timer:1500,showConfirmButton:!1})},e.moveToPostLocation=function(){var o=0;if(e.isMobile()){var t=e.map.getBounds(),n=t.getNorthEast(),a=t.getSouthWest();current_map_nw=new google.maps.LatLng(n.lat(),a.lng()),current_map_se=new google.maps.LatLng(a.lat(),n.lng());var i=.5*Math.abs(e.postLocation.lat-current_map_nw.lat()),l=.5*Math.abs(e.postLocation.lat-current_map_se.lat());o=i>l?l:i}var s=new google.maps.LatLng(e.postLocation.lat+o,e.postLocation.lon);e.map.panTo(s)},e.collapse=function(){e.navCollapsed=!0},e.$on("mapInit",function(o,t){e.map=t}),e.$on("set:guidtgt",function(o,t){e.guidtgt=t}),e.$on("pagechange",function(o,t){e.currentPageId=t}),e.$on("loc",function(o,t){var n=t.lat(),a=t.lng();e.postLocation={lat:n,lon:a}}),e.$on("place",function(o,t){e.$apply(function(){e.postplace=t})})}]),angular.module("app").config(["$routeProvider",function(o){o.when("/",{controller:"PostsCtrl",templateUrl:"/templates/posts.html"}).otherwise({redirectTo:"/"})}]),angular.module("app").service("UtilSvc",function(){var o=this;o.deg2rad=function(o){return o*(Math.PI/180)},o.getDistanceFromLatLonInKm=function(t,e,n,a){var i=6371,l=o.deg2rad(n-t),s=o.deg2rad(a-e),r=Math.sin(l/2)*Math.sin(l/2)+Math.cos(o.deg2rad(t))*Math.cos(o.deg2rad(n))*Math.sin(s/2)*Math.sin(s/2),g=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),c=i*g;return c}}),angular.module("app").run(["$rootScope","$timeout","SessionSvc",function(o,t,e){}]),angular.module("app").directive("appMap",["PostsSvc","UtilSvc","SessionSvc","$compile",function(o,t,e,n){var a=function(t,a,i,l){function s(){window.localStorage.latitude=O.getCenter().lat(),window.localStorage.longitude=O.getCenter().lng()}function r(){var o=O.getBounds(),t=o.getNorthEast(),e=o.getSouthWest();B=new google.maps.LatLng(t.lat(),e.lng()),N=new google.maps.LatLng(e.lat(),t.lng())}function g(){var o=O.getBounds(),n=o.getNorthEast(),a=o.getSouthWest();B={lat:n.lat(),lon:a.lng()},N={lat:a.lat(),lon:n.lng()};var i;i=t.postLocation.lat<B.lat&&t.postLocation.lat>N.lat&&t.postLocation.lon<N.lon&&t.postLocation.lon>B.lon?{lat:t.postLocation.lat,lon:t.postLocation.lon}:{lat:O.getCenter().lat(),lon:O.getCenter().lng()},e.updateWatchLocation(B,N,i,t.guid)}function c(o){console.log("reference post:",o),e.fetch().success(function(e){for(var n=0;n<e.length;n++){var a=e[n];if(a.guid!=t.guid){console.log("session watch location:",a.watchloc),console.log("post location:",o.location);var i=angular.fromJson(a.watchloc),l=angular.fromJson(o.location);if(console.log(N,B),r(),i.center_lat<B.lat()&&i.center_lat>N.lat()&&i.center_lon<N.lng()&&i.center_lon>B.lng()&&l.lat<i.nw_lat&&l.lat>i.se_lat&&l.lon<i.se_lon&&l.lon>i.nw_lon){var s=new google.maps.LatLng(i.center_lat,i.center_lon),g={position:s,map:O,title:"UserPin",icon:X,optimized:!1},c=new google.maps.Marker(g);setTimeout(function(o){return function(){o.setMap(null)}}(c),1800)}}}})}function u(){o.fetch().success(function(o){for(var e=0;e<o.length;e++){for(var a,i=o[e],l=0;a=W[l];l++)if(i._id==a.post._id){i=null;break}if(i&&i.hasOwnProperty("location")){var s=angular.fromJson(i.location),g=new google.maps.LatLng(s.lat,s.lon);if(r(),g.lat()<B.lat()&&g.lat()>N.lat()&&g.lng()<N.lng()&&g.lng()>B.lng()){var c=v(i.guid,i.guidtgt),u={position:g,map:O,title:"Bubble",icon:J},a=new google.maps.Marker(u),p=1e4;i.lifespan<p&&setTimeout(function(o,t){return function(){o.setMap(null);for(var e,n=0;e=W[n];n++)t._id==e.post._id&&W.splice(n,1)}}(a,i),i.lifespan),W.push({marker:a,post:i});var d=t,m=d.$new(!0),f=function(o,t,e,a){return function(){var i={pixelOffset:new google.maps.Size(-41.5,10),disableAutoPan:!0},l=new google.maps.InfoWindow(i),s=new Date,r=s.getTime(),g=e.lifeend-r>=0?e.lifeend-r:0,c=(g/e.lifespan).toFixed(2);console.log("Life %:",c),t.msg=e.body,t.postlife=g,t.postguid=e.guid,t.postguidtgt=e.guidtgt,t.postcouplestatus=a,t.postlifepercentage=c,t.$on("set:coupling",function(o,e){t.postcouplestatus=e});var u="<div map-msg></div>",p=n(u)(t);l.setContent(p[0]),l.open(O,o)}}(a,m,i,c);f()}}}})}function p(o){var t=new google.maps.LatLng(o.lat,o.lon);if(r(),t.lat()<B.lat()&&t.lat()>N.lat()&&t.lng()<N.lng()&&t.lng()>B.lng()){var e={position:t,map:O,animation:google.maps.Animation.DROP,title:"UserPin",icon:U},n=new google.maps.Marker(e);setTimeout(function(o){return function(){o.setMap(null)}}(n),2e3)}}function d(o){console.log("starting remove post");for(var t,e=0;t=W[e];e++)if(console.log(o),console.log(t.post._id),o==t.post._id){t.marker.setMap(null),W.splice(e,1);break}}function m(o){var t=new google.maps.LatLng(o.lat,o.lon);f(t),w(t),g()}function f(o){for(var t,e=0;t=D[e];e++)t.setMap(null);D=[];var t=new google.maps.Marker({position:o,map:O,icon:x});D.push(t)}function w(o){t.$emit("loc",o);var e=new google.maps.Geocoder;e.geocode({latLng:o},function(o,e){try{t.$emit("place",o[1].formatted_address)}catch(n){console.log(n),swal("","Location does not exists"),t.$emit("place","Location does not exists")}})}function v(o,e){var n=t.guidtgt==o,a=t.guid==e;return n&&a?4:n&&!a?1:!n&&a?2:0}function h(){var o=document.getElementById("btn-curr");O.controls[google.maps.ControlPosition.TOP_RIGHT].push(o)}function _(){var o=document.getElementById("posting");O.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(o)}function b(){var o=document.getElementById("btn-submit");O.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(o)}function L(){}function y(){var o=document.getElementById("pac-input");O.controls[google.maps.ControlPosition.TOP_LEFT].push(o);var t=new google.maps.places.SearchBox(o);google.maps.event.addListener(t,"places_changed",function(){var o=t.getPlaces();if(0!=o.length){var e=o[0],n={lat:e.geometry.location.lat(),lon:e.geometry.location.lng()};m(n),window.localStorage.latitude=e.geometry.location.latitude,window.localStorage.longitude=e.geometry.location.longitude,O.panTo(e.geometry.location),O.setZoom(16)}})}function S(){google.maps.event.addListener(F,"click",function(o){var t={lat:o.latLng.lat(),lon:o.latLng.lng()};m(t)})}function P(){google.maps.event.addListener(F,"center_changed",function(){s()})}function k(){google.maps.event.addListener(F,"bounds_changed",function(){r()})}function M(){google.maps.event.addListener(F,"dragend",function(){u(),g()})}function $(){google.maps.event.addListener(F,"resize",function(){u(),g()})}function T(){google.maps.event.addListener(F,"zoom_changed",function(){u(),g()})}function C(){E=new google.maps.LatLng(34.05,-118.24),isNaN(window.localStorage.latitude)||isNaN(window.localStorage.longitude)||(E=new google.maps.LatLng(window.localStorage.latitude,window.localStorage.longitude)),w(E),R={center:E,zoom:15,scrollwheel:!0,streetViewControl:!1,mapTypeControl:!1,panControl:!1,zoomControl:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,q]},mapTypeId:q}}function A(){function o(o){console.log("Initializing map")}function t(o){google.maps.event.trigger(this,"drawXMarker",o)}function e(o){google.maps.event.trigger(this,"drawCurrLocationMarker",o)}function n(){google.maps.event.trigger(this,"updateAndDrawPosts")}function i(o){google.maps.event.trigger(this,"drawResponses",o)}function l(o){google.maps.event.trigger(this,"unDrawPost",o)}F=new google.maps.Map(a[0],R),o.prototype=F,o.prototype.drawXMarker=t,o.prototype.drawCurrLocationMarker=e,o.prototype.updateAndDrawPosts=n,o.prototype.drawResponses=i,o.prototype.unDrawPost=l,O=new o,google.maps.event.addListener(O,"drawXMarker",function(o){m(o)}),google.maps.event.addListener(O,"drawCurrLocationMarker",function(o){p(o)}),google.maps.event.addListener(O,"updateAndDrawPosts",function(){u()}),google.maps.event.addListener(O,"drawResponses",function(o){c(o)}),google.maps.event.addListener(O,"unDrawPost",function(o){d(o)})}function I(){var o=[{featureType:"landscape",stylers:[{hue:"#FFA800"},{saturation:0},{lightness:0},{gamma:1}]},{featureType:"road.highway",stylers:[{hue:"#53FF00"},{saturation:-73},{lightness:40},{gamma:1}]},{featureType:"road.arterial",stylers:[{hue:"#FBFF00"},{saturation:0},{lightness:0},{gamma:1}]},{featureType:"road.local",stylers:[{hue:"#00FFFD"},{saturation:0},{lightness:30},{gamma:1}]},{featureType:"water",stylers:[{hue:"#00BFFF"},{saturation:6},{lightness:8},{gamma:1}]},{featureType:"poi",stylers:[{hue:"#679714"},{saturation:33.4},{lightness:-25.4},{gamma:1}]}],t={name:"Custom Style"},e=new google.maps.StyledMapType(o,t);O.mapTypes.set(q,e)}function z(){void 0===O&&(C(),A(),I()),t.$emit("mapInit",O),y(),h(),_(),b(),L(),S(),P(),M(),$(),T(),k(),setTimeout(function(){s(),r(),g(),u()},800)}var O,F,B,N,R,E,q="custom_style",D=[],W=[],J={url:"https://catchme.ifyoucan.com/images/pictures/IYC_Icons/IYC_Location_Icon_Small.png",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(1,1)},x={url:"http://www.clker.com/cliparts/U/P/j/M/I/i/x-mark-yellow-md.png",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},U={url:"http://www.clker.com/cliparts/q/o/2/K/g/V/location-symbol-map-md.png",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(20,33)},X={url:"http://2.bp.blogspot.com/-djMa_n5nAEM/T1Gvx_-7-zI/AAAAAAAAAQ4/-1N6lleQvZc/s1600/blinking_dot.gif",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(17,17)};z()};return{restrict:"A",template:'<div id="map-canvas"></div>',replace:!0,link:a}}]),angular.module("app").directive("mapMsg",["$timeout",function(o){var t=function(t,e,n){function a(){var o=t.postguid,n=t.$parent.guid;angular.element(e).parent().find("div div #bubbleClick").on("click",function(){o!=n&&(0==t.$parent.guidtgt?(t.$emit("set:coupling",1),t.$emit("set:guidtgt",o),t.$apply()):1==t.postcouplestatus&&0!=t.$parent.guidtgt&&(t.$emit("set:coupling",0),t.$emit("set:guidtgt",0),t.$apply()))})}function i(){console.log("Life %:",t.postlifepercentage),o(function(){{var o=t.postlife+"ms";angular.element(e).parent().find("div div .postlifebar").css("-webkit-animation-duration",o)}if(t.postlifepercentage>.75){angular.element(e).parent().find("div div .postlifebar").css("-webkit-animation-name","postlifeanim_q_four"),angular.element(e).parent().find("div div .postlifebar").css("animation-name","postlifeanim_q_four")}else if(t.postlifepercentage<=.75&&t.postlifepercentage>.5){angular.element(e).parent().find("div div .postlifebar").css("-webkit-animation-name","postlifeanim_q_three"),angular.element(e).parent().find("div div .postlifebar").css("animation-name","postlifeanim_q_three")}else if(t.postlifepercentage<=.5&&t.postlifepercentage>.2){angular.element(e).parent().find("div div .postlifebar").css("-webkit-animation-name","postlifeanim_q_two"),angular.element(e).parent().find("div div .postlifebar").css("animation-name","postlifeanim_q_two")}else{angular.element(e).parent().find("div div .postlifebar").css("-webkit-animation-name","postlifeanim_q_one"),angular.element(e).parent().find("div div .postlifebar").css("animation-name","postlifeanim_q_one")}},100)}t.get_coupling=function(o){return 4==o?"bubblePost bubblePost_couple":1==o?"bubblePost bubblePost_ilikeyou":2==o?"bubblePost bubblePost_youlikei":"bubblePost bubblePost_none"};angular.element(document).ready(function(){a(),i()})};return{restrict:"A",templateUrl:"./templates/window.html",link:t}}]),angular.module("app").controller("PostsCtrl",["$rootScope","$scope","PostsSvc","$window","$document",function(o,t,e,n,a){t.$emit("pagechange",t.pageId.post),t.posts=[],t.$on("ws:new_post",function(o,e){t.requestFetch()}),t.addPost=function(){var o=t.postplace,n=t.postLocation,a=JSON.stringify(n);e.create({body:t.content,location:a,place:o,guid:t.guid,guidtgt:t.guidtgt}).success(function(o){google.maps.event.trigger(t.map,"maptypeid_changed"),t.posts.unshift(o);var e=1e4;if(o.lifespan<e){var n=function(){for(var e=0;e<t.posts.length;++e)o._id==t.posts[e]._id&&t.posts.splice(e,1)};setTimeout(n,o.lifespan)}t.content=null}).error(function(o,t){swal("Post failed","Please complete the from correctly","error")})},t.requestFetch=function(){e.fetch().success(function(o){t.posts=o})},t.requestFetch()}]),angular.module("app").service("PostsSvc",["$http",function(o){this.fetch=function(){return o.get("/api/posts")},this.create=function(t){return o.post("/api/posts",t)},this.remove=function(t){return console.log("deleting posting"),console.log("post._id:",t._id),o.put("/api/posts",t)}}]),angular.module("app").service("SessionSvc",["$http",function(o){this.fetch=function(){return o.get("/api/sessions")},this.enter=function(t){return o.post("/api/sessions",t)},this.remove=function(t){console.log("deleting session"),console.log("session.guid:",t);var e={guid:t};return o.put("/api/sessions",e)},this.updateWatchLocation=function(t,e,n,a){var i={nw_lat:t.lat,nw_lon:t.lon,se_lat:e.lat,se_lon:e.lon,center_lat:n.lat,center_lon:n.lon},l=JSON.stringify(i),s={watchloc:l,guid:a};return console.log("updating watch location"),console.log("updatedsession:",s),o.post("/api/sessions/update",s)}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1dGlsLnN2Yy5qcyIsImdlbmVyYWwvbWFpbi5qcyIsIm1hcHMvbWFwLmRpcmVjdGl2ZS5qcyIsIm1hcHMvbXNnLmRpcmVjdGl2ZS5qcyIsInBvc3RzL3Bvc3RzLmN0cmwuanMiLCJwb3N0cy9wb3N0cy5zdmMuanMiLCJzZXNzaW9ucy9zZXNzaW9ucy5zdmMuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCJTZXNzaW9uU3ZjIiwiJHJvb3RTY29wZSIsIiRzY29wZSIsIiR3aW5kb3ciLCIkaHR0cCIsIiR0aW1lb3V0IiwiZ3VpZCIsInM0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJwYWdlSWQiLCJwb3N0Iiwic2xpZGVyT3B0aW9ucyIsImZyb20iLCJ0byIsInN0ZXAiLCJkaW1lbnNpb24iLCJ2ZXJ0aWNhbCIsImxpbWl0cyIsImNzcyIsImJhY2tncm91bmQiLCJiYWNrZ3JvdW5kLWNvbG9yIiwiYmVmb3JlIiwiZGVmYXVsdCIsImFmdGVyIiwicG9pbnRlciIsIm5hdkNvbGxhcHNlZCIsImd1aWR0Z3QiLCJ3aW5kb3ciLCJvbmJlZm9yZXVubG9hZCIsInJlbW92ZSIsInVybCIsImhvc3RuYW1lIiwiZG9jdW1lbnQiLCJsb2NhdGlvbiIsImRldmVsb3BtZW50SVAiLCJjb25uZWN0IiwiY29ubmVjdGlvbiIsIldlYlNvY2tldCIsIm9ub3BlbiIsImdldEN1cnJMb2NTdWNjZXNzIiwicG9zIiwiY3JkIiwiY29vcmRzIiwiZ29vZ2xlTG9jIiwiZ29vZ2xlIiwibWFwcyIsIkxhdExuZyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwibGF0IiwibG9uIiwibG5nIiwibG9jYXRpb25KU09OIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJsb2ciLCJib3VuZHMiLCJtYXAiLCJnZXRCb3VuZHMiLCJuZSIsImdldE5vcnRoRWFzdCIsInN3IiwiZ2V0U291dGhXZXN0IiwiY3VycmVudF9tYXBfbnciLCJjdXJyZW50X21hcF9zZSIsImN1cnJlbnRfbWFwX2NlbnRlciIsImxvY2FsU3RvcmFnZSIsIndhdGNobG9jIiwibndfbGF0IiwibndfbG9uIiwic2VfbGF0Iiwic2VfbG9uIiwiY2VudGVyX2xhdCIsImNlbnRlcl9sb24iLCJ3YXRjaGxvY0pTT04iLCJzZXNzaW9uIiwiZW50ZXIiLCJnZXRDdXJyTG9jRXJyb3IiLCJlcnIiLCJ3YXJuIiwiY29kZSIsIm1lc3NhZ2UiLCJuYXZpZ2F0b3IiLCJnZW9sb2NhdGlvbiIsImdldEN1cnJlbnRQb3NpdGlvbiIsIm9uY2xvc2UiLCJvbm1lc3NhZ2UiLCJlIiwicGF5bG9hZCIsInBhcnNlIiwiZGF0YSIsIiRicm9hZGNhc3QiLCJ0eXBlIiwiJG9uIiwiXyIsInVwZGF0ZUFuZERyYXdQb3N0cyIsImRyYXdSZXNwb25zZXMiLCJmcm9tSnNvbiIsImRyYXdDdXJyTG9jYXRpb25NYXJrZXIiLCJwb3N0aWQiLCJ1bkRyYXdQb3N0IiwiaXNNb2JpbGUiLCJ1c2VyQWdlbnQiLCJtYXRjaCIsIm1vdmVUb0N1cnJlbnRMb2NhdGlvbiIsImN1cnJlbnRQYWdlSWQiLCJkcmF3WE1hcmtlciIsInBhblRvIiwic2V0Wm9vbSIsInN3YWwiLCJ0aXRsZSIsInRleHQiLCJ0aW1lciIsInNob3dDb25maXJtQnV0dG9uIiwibW92ZVRvUG9zdExvY2F0aW9uIiwibGF0RGVsdGEiLCJsYXREZWx0YV9jZW50ZXIybm9ydGgiLCJhYnMiLCJwb3N0TG9jYXRpb24iLCJsYXREZWx0YV9jZW50ZXIyc291dGgiLCJjb2xsYXBzZSIsInBsYWNlIiwiJGFwcGx5IiwicG9zdHBsYWNlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwic2VydmljZSIsInN2YyIsInRoaXMiLCJkZWcycmFkIiwiZGVnIiwiUEkiLCJnZXREaXN0YW5jZUZyb21MYXRMb25JbkttIiwibGF0MSIsImxvbjEiLCJsYXQyIiwibG9uMiIsIlIiLCJkTGF0IiwiZExvbiIsImEiLCJzaW4iLCJjb3MiLCJjIiwiYXRhbjIiLCJzcXJ0IiwiZCIsInJ1biIsImRpcmVjdGl2ZSIsIlBvc3RzU3ZjIiwiVXRpbFN2YyIsIiRjb21waWxlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwicm9vdFNjb3BlIiwidXBkYXRlRGVmYXVsdExvY2F0aW9uIiwiZ2V0Q2VudGVyIiwidXBkYXRlQm91bmRzIiwidXBkYXRlV2F0Y2hMb2NhdGlvbiIsImZldGNoIiwic3VjY2VzcyIsInNlc3Npb25zIiwiaSIsImxlbmd0aCIsIndhdGNoX2xvY2F0aW9uIiwicG9zdF9sb2NhdGlvbiIsIm1hcmtlck9wdGlvbnMiLCJwb3NpdGlvbiIsImljb24iLCJpbWFnZUxpc3RlbmVyIiwib3B0aW1pemVkIiwibWFya2VyIiwiTWFya2VyIiwic2V0VGltZW91dCIsIm9sZF9tYXJrZXIiLCJzZXRNYXAiLCJwb3N0cyIsImoiLCJtYXJrZXJzIiwiX2lkIiwiaGFzT3duUHJvcGVydHkiLCJjb3VwbGluZ19zdGF0dXMiLCJjYWxjdWxhdGVDb3VwbGluZyIsImltYWdlUG9zdCIsIm1heEluc3RhbnRMaWZlU3BhbiIsImxpZmVzcGFuIiwib2xkX3Bvc3QiLCJrIiwic3BsaWNlIiwicHVzaCIsInBhcmVudCIsImNoaWxkIiwiJG5ldyIsIm9wZW5JbmZvV2luZG93IiwiY2hpbGRfc2NvcGUiLCJpbmZvV2luZG93T3B0aW9ucyIsInBpeGVsT2Zmc2V0IiwiU2l6ZSIsImRpc2FibGVBdXRvUGFuIiwiaW5mb1dpbmRvdyIsIkluZm9XaW5kb3ciLCJjdXJyZW50RGF0ZSIsIkRhdGUiLCJjdXJyZW50VGltZU1pbGxpIiwiZ2V0VGltZSIsInBvc3RsaWZlIiwibGlmZWVuZCIsImxpZmVwZXJjZW50YWdlIiwidG9GaXhlZCIsIm1zZyIsImJvZHkiLCJwb3N0Z3VpZCIsInBvc3RndWlkdGd0IiwicG9zdGNvdXBsZXN0YXR1cyIsInBvc3RsaWZlcGVyY2VudGFnZSIsImNvdXBsaW5nX3VwZGF0ZSIsImNvbnRlbnQiLCJjb21waWxlZCIsInNldENvbnRlbnQiLCJvcGVuIiwiZHJhd0Ryb3BEb3duIiwiYW5pbWF0aW9uIiwiQW5pbWF0aW9uIiwiRFJPUCIsImltYWdlVXNlckxvZ2luIiwiZHJhd0FuZFNldFBsYWNlIiwiZHJhd0hlbHBlck1hcmtlciIsInNldFBsYWNlIiwiaGVscGVyTWFya2VycyIsImltYWdlVGFyZ2V0IiwiJGVtaXQiLCJnZW9jb2RlciIsIkdlb2NvZGVyIiwiZ2VvY29kZSIsImxhdExuZyIsInJlc3VsdHMiLCJzdGF0dXMiLCJmb3JtYXR0ZWRfYWRkcmVzcyIsInBvc3RfZ3VpZCIsInBvc3RfZ3VpZHRndCIsImlsaWtleW91IiwieW91bGlrZWkiLCJzZXRVSU1vdmVUb0N1cnJMb2NCdG4iLCJjdXJyTG9jQnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250cm9scyIsIkNvbnRyb2xQb3NpdGlvbiIsIlRPUF9SSUdIVCIsInNldFVJUG9zdEZvcm0iLCJwb3N0Rm9ybSIsIkJPVFRPTV9DRU5URVIiLCJzZXRVSVBvc3RCdG4iLCJwb3N0QnRuIiwic2V0VUlUaW1lU2xpZGVyIiwic2V0VUlTZWFyY2hCb3giLCJpbnB1dCIsIlRPUF9MRUZUIiwic2VhcmNoQm94IiwicGxhY2VzIiwiU2VhcmNoQm94IiwiZXZlbnQiLCJhZGRMaXN0ZW5lciIsImdldFBsYWNlcyIsImdlb21ldHJ5Iiwic2V0RXZlbnRDbGljayIsIm1hcF9vcmlnaW4iLCJzZXRFdmVudENlbnRlckNoYW5nZWQiLCJzZXRFdmVudEJvdW5kc0NoYW5nZWQiLCJzZXRFdmVudERyYWdFbmQiLCJzZXRFdmVudFJlc2l6ZSIsInNldEV2ZW50Wm9vbUNoYW5nZWQiLCJpbml0aWFsTWFwRGF0YSIsImluaXRpYWxNYXBDZW50ZXIiLCJpc05hTiIsIm1hcE9wdGlvbnMiLCJjZW50ZXIiLCJ6b29tIiwic2Nyb2xsd2hlZWwiLCJzdHJlZXRWaWV3Q29udHJvbCIsIm1hcFR5cGVDb250cm9sIiwicGFuQ29udHJvbCIsInpvb21Db250cm9sIiwibWFwVHlwZUNvbnRyb2xPcHRpb25zIiwibWFwVHlwZUlkcyIsIk1hcFR5cGVJZCIsIlJPQURNQVAiLCJDTE9VRF9NQVBfSUQiLCJtYXBUeXBlSWQiLCJzZXRNYW51YWxFdmVudHMiLCJDbG91ZE1hcCIsIm9wdGlvbnMiLCJoYW5kbGVEcmF3WE1hcmtlciIsInRyaWdnZXIiLCJoYW5kbGVEcmF3Q3VyckxvY2F0aW9uTWFya2VyIiwiaGFuZGxlVXBkYXRlQW5kRHJhd1Bvc3RzIiwiaGFuZGxlRHJhd1Jlc3BvbnNlcyIsImhhbmRsZVVuRHJhd1Bvc3QiLCJNYXAiLCJwcm90b3R5cGUiLCJzZXRTdHlsZUZvck1hcCIsImZlYXR1cmVPcHRzIiwiZmVhdHVyZVR5cGUiLCJzdHlsZXJzIiwiaHVlIiwic2F0dXJhdGlvbiIsImxpZ2h0bmVzcyIsImdhbW1hIiwic3R5bGVkTWFwT3B0aW9ucyIsIm5hbWUiLCJjdXN0b21NYXBUeXBlIiwiU3R5bGVkTWFwVHlwZSIsIm1hcFR5cGVzIiwic2V0IiwiaW5pdE1hcCIsInNpemUiLCJvcmlnaW4iLCJQb2ludCIsImFuY2hvciIsInNjYWxlZFNpemUiLCJyZXN0cmljdCIsInRlbXBsYXRlIiwicmVwbGFjZSIsInVwZGF0ZUd1aWRUYXJnZXQiLCJteWd1aWQiLCIkcGFyZW50IiwiZmluZCIsIm9uIiwidXBkYXRlUG9zdFRpbWVyIiwiZHVyYXRpb24iLCJnZXRfY291cGxpbmciLCJyZWFkeSIsIiRkb2N1bWVudCIsInJlcXVlc3RGZXRjaCIsImFkZFBvc3QiLCJjcmVhdGUiLCJ1bnNoaWZ0IiwiZnJvbnRFbmRQb3N0UmVtb3ZlIiwiZXJyb3IiLCJnZXQiLCJwdXQiLCJ1cGRhdGVkc2Vzc2lvbiJdLCJtYXBwaW5ncyI6IkFBQ0FBLFFBQUFDLE9BQUEsT0FDQSxZQ0RBRCxRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsbUJBQUEsYUFBQSxhQUFBLFNBQUEsVUFBQSxR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Y2hWLE9BRzdCakIsUUFBRUMsT0FBYSxPQUNkeUksUUFBUSxjQUFlLFFBQVMsU0FBU25JLEdBQ3pDcUksS0FBS2lDLE1BQVEsV0FDZCxNQUFRdEssR0FBT3lWLElBQUEsa0JBR2RwTixLQUFDeEQsTUFBTyxTQUFVRCxHQUNqQixNQUFPNUUsR0FBTVUsS0FBSyxnQkFBaUJrRSxJQUdwQ3lELEtBQUN4RyxPQUFhLFNBQUszQixHQUNsQnFELFFBQVFDLElBQUksb0JBQ1pELFFBQVFDLElBQUksZ0JBQWlCdEQsRUFDOUIsSUFBSzBFLElBQVMxRSxLQUFBQSxFQUNiLE9BQUFGLEdBQVkwVixJQUFBLGdCQUFBOVEsSUFHYnlELEtBQUNnQyxvQkFBaUIsU0FBaUJyRyxFQUFBQyxFQUFBQyxFQUFBaEUsR0FDbEMsR0FBSWtFLElBQ01DLE9BQVlMLEVBQWVmLElBQ2pDcUIsT0FBQU4sRUFBK0JkLElBQy9CcUIsT0FBV04sRUFBQWhCLElBQ0x1QixPQUFBUCxFQUFZZixJQUNadUIsV0FBWVAsRUFBZWpCLElBQzNCeUIsV0FBWVIsRUFBZWhCLEtBRzNCeUIsRUFBWXRCLEtBQUFDLFVBQUFjLEdBRVp1UixHQUNBdlIsU0FBQU8sRUFDQXpFLEtBQU1BLEVBTWhCLE9BRk1xRCxTQUFRQyxJQUFJLDJCQUNsQkQsUUFBUUMsSUFBSSxrQkFBbUJtUyxHQUN4QjNWLEVBQU1VLEtBQUssdUJBQXdCaVYiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5hbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuXHQnbmdSb3V0ZScsXG5dKTtcbiIsIlxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24oU2Vzc2lvblN2YywgJHJvb3RTY29wZSwgJHNjb3BlLCAkd2luZG93LCAkaHR0cCwgJHRpbWVvdXQpe1xuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBJTklUSUFMXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBmdW5jdGlvbiBndWlkKCkge1xuXHRcdGZ1bmN0aW9uIHM0KCkge1xuXHRcdCAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcblx0XHQgICAgICAudG9TdHJpbmcoMTYpXG5cdFx0ICAgICAgLnN1YnN0cmluZygxKTtcblx0XHR9XG5cdCAgXHRyZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgczQoKSArIHM0KCk7XG5cdH1cblxuXHQkc2NvcGUuZ3VpZCA9IGd1aWQoKTtcblxuXHQkc2NvcGUucGFnZUlkID0geyBcblx0XHRwb3N0IDogMCxcblx0fTtcblxuXHQkc2NvcGUuc2xpZGVyT3B0aW9ucyA9IHtcbiAgICAgICAgZnJvbTogMSxcbiAgICAgICAgdG86IDMwMDAwMCxcbiAgICAgICAgc3RlcDogNTAwMCxcbiAgICAgICAgZGltZW5zaW9uOiAnIGttJyxcbiAgICAgICAgdmVydGljYWw6IGZhbHNlLFxuICAgICAgICBsaW1pdHM6IGZhbHNlLFxuICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHsnYmFja2dyb3VuZC1jb2xvcic6ICd5ZWxsb3cnfSxcbiAgICAgICAgICAgIGJlZm9yZTogeydiYWNrZ3JvdW5kLWNvbG9yJzogJ3B1cnBsZSd9LFxuICAgICAgICAgICAgZGVmYXVsdDogeydiYWNrZ3JvdW5kLWNvbG9yJzogJ3doaXRlJ30sXG4gICAgICAgICAgICBhZnRlcjogeydiYWNrZ3JvdW5kLWNvbG9yJzogJ2dyZWVuJ30sXG4gICAgICAgICAgICBwb2ludGVyOiB7J2JhY2tncm91bmQtY29sb3InOiAncmVkJ31cbiAgICAgICAgfSxcbiAgICB9O1xuXG5cdCRzY29wZS5uYXZDb2xsYXBzZWQgPSB0cnVlO1xuXG5cdCRzY29wZS5ndWlkdGd0ID0gXCIwXCI7IC8vIOq4sOuzuOqwkuydgCAw7Jy866GcIO2VtOyEnCAw7J2066m0IOq0gOyLrOyDgeuMgGd1aWTqsIAg7JeG64qUIOyDge2DnOydtOuLpC4gXG5cblx0Lypcblx0Ly8g7JyI64+E7Jqw6rCAIOuLq+2eiOugpOqzoCDtlZjrqbQg66as7YCY7Iqk7Yq4IOuztOuCuOuLpCEg7Jyg7KC4IOyEuOyFmOydhCDri6vsnLzrnbzqs6AhXG5cdHdpbmRvdy5vbnVubG9hZCA9IGZ1bmN0aW9uICgpe1xuXHRcdFNlc3Npb25TdmMucmVtb3ZlKCRzY29wZS5ndWlkKTsgLy8g7ISc67KE7JeQ7IScIOycoOyggOqwgCDrgpjqsJDsnYQg7JWM66aw64ukXG5cdH07XG5cdCovXG5cdC8qXG5cdHdpbmRvdy51bmxvYWQgPSBvbmNoYW5nZTtcblxuXHRkb2N1bWVudC51bmxvYWQgPSBvbmNoYW5nZTtcblxuXHRmdW5jdGlvbiBvbmNoYW5nZSAoZXZ0KSB7XG5cdCAgICBhbGVydChcIlNlc3Npb24gZGVsZXRlXCIpO1xuXHQgICAgU2Vzc2lvblN2Yy5yZW1vdmUoJHNjb3BlLmd1aWQpO1xuXHQgIH1cblx0Ki9cblxuXHR3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbigpe1xuXHRcdFNlc3Npb25TdmMucmVtb3ZlKCRzY29wZS5ndWlkKTtcblx0fTtcblxuXHQvKlxuXHR3aW5kb3cucGFnZWhpZGUgPSBmdW5jdGlvbigpe1xuXHRcdCAvLyDshJzrsoTsl5DshJwg7Jyg7KCA6rCAIOuCmOqwkOydhCDslYzrprDri6Rcblx0XHRhbGVydChcIm9uIGJlZm9yZSB1bmxvYWRcIik7XG5cdH1cblx0Ki9cblx0XG5cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIFNPQ0tFVFxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdHZhciB1cmw7XG5cdHZhciBob3N0bmFtZSA9IGRvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lO1xuXHR2YXIgZGV2ZWxvcG1lbnRJUCA9IFwiMTkyLjE2OC4wLjRcIjtcblxuXHRpZiAoaG9zdG5hbWUgPT0gXCJsb2NhbGhvc3RcIil7XG5cdFx0dXJsID0gXCJ3czovL2xvY2FsaG9zdDo1MDAwXCI7XG5cdH1cblx0ZWxzZSBpZiAoaG9zdG5hbWUgPT0gZGV2ZWxvcG1lbnRJUCkge1xuXHRcdHVybCA9ICd3czovLzE5Mi4xNjguMC40OjUwMDAnOyAvLyBkZXZlbG9wbWV0IG9uIHNvY2tldCBsb2NhbGx5IFxuXHR9XG5cdGVsc2Uge1xuXHRcdHVybCA9ICd3c3M6Ly9jbG91ZHRhbGsuaGVyb2t1YXBwLmNvbSc7IC8vIHByb2R1Y3Rpb24gZGVwbG95IHZlcnNpb24gLSBzdGlsbCBkZWJ1ZyBtb2RlXG5cdH1cblxuXHQvKiDqsJzrsJzqs7zsoJXsnbQg64Gd64KY6rOgIOuwsO2PrOyLnOyXkOuKlCDsnITrtoDrtoTsnYQg7KeA7Jqw6rOgIOyVhOuemCDsvZTrk5zrp4wg64Ko6rKo64+EIOuQnOuLpC5cblx0dXJsID0gJ3dzczovL2Zyb3plbi1iYWRsYW5kcy04NjQ5Lmhlcm9rdWFwcC5jb20nO1xuXHQqL1xuXHR2YXIgY29ubmVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KHVybCk7XG5cblx0XHRjb25uZWN0aW9uLm9ub3BlbiA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRmdW5jdGlvbiBnZXRDdXJyTG9jU3VjY2Vzcyhwb3MpIHtcblx0XHRcdFx0XG5cdFx0XHRcdC8vLy8vLy8vLy8vLy8vLy8vLyBQSFlTSUNBTCBMT0NBVElPTlxuXHRcdFx0XHQvLyDrp6jsspjsnYzsl5DripQg7Jyg7KCA7J2YIOyLpOygnCDsnITsuZgo7JWx7JeQIOyeheyepe2WiOydhOuVjOydmCDsnITsuZgp7JmAIOyEvO2EsCDtj6zsp4DshZjsnYQg6rCZ7J20IOuztOuCtOqzoCxcblx0XHRcdFx0Ly8g7IS87YSwIO2PrOyngOyFmOydgCDqs4Tsho0g7JeF642w7J207Yq4IOuQmOyWtOyVvCDtlZzri6QuXG5cdCAgICAgICAgICAgIHZhciBjcmQgPSBwb3MuY29vcmRzO1xuXG5cdCAgICAgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGNyZC5sYXRpdHVkZSwgY3JkLmxvbmdpdHVkZSk7XG5cblx0ICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0ge1xuXHQgICAgICAgIFx0XHRsYXQ6Z29vZ2xlTG9jLmxhdCgpLFxuXHQgICAgICAgIFx0XHRsb246Z29vZ2xlTG9jLmxuZygpXG5cdCAgICAgICAgXHR9O1xuXHQgICAgICAgIFx0dmFyIGxvY2F0aW9uSlNPTiA9IEpTT04uc3RyaW5naWZ5KGxvY2F0aW9uKTtcblx0ICAgICAgICBcdGNvbnNvbGUubG9nKFwic2V0dGluZyBsb2NhdGlvblwiLCBsb2NhdGlvbkpTT04pO1xuXG5cdCAgICAgICAgXHQvLy8vLy8vLy8vLy8vLy8vLy8gV0FUQ0ggTE9DQVRJT05cblx0ICAgICAgICBcdHZhciBib3VuZHMgPSAkc2NvcGUubWFwLmdldEJvdW5kcygpO1xuXHQgICAgICAgICAgICB2YXIgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7IC8vIExhdExuZyBvZiB0aGUgbm9ydGgtZWFzdCBjb3JuZXJcblx0ICAgICAgICAgICAgdmFyIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIHNvdXRoLXdlc3QgY29yZGVyXG5cdCAgICAgICAgICAgIC8vWW91IGdldCBub3J0aC13ZXN0IGFuZCBzb3V0aC1lYXN0IGNvcm5lcnMgZnJvbSB0aGUgdHdvIGFib3ZlOlxuXG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50X21hcF9udyA9IHsgXG5cdCAgICAgICAgICAgICAgICBsYXQ6IG5lLmxhdCgpLCBcblx0ICAgICAgICAgICAgICAgIGxvbjogc3cubG5nKClcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgdmFyIGN1cnJlbnRfbWFwX3NlID0ge1xuXHQgICAgICAgICAgICAgICAgbGF0OiBzdy5sYXQoKSwgXG5cdCAgICAgICAgICAgICAgICBsb246IG5lLmxuZygpXG5cdCAgICAgICAgICAgIH07XG5cblx0ICAgICAgICAgICAgdmFyIGN1cnJlbnRfbWFwX2NlbnRlciA9IHtcblx0ICAgICAgICAgICAgXHRsYXQ6d2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSxcblx0ICAgICAgICAgICAgXHRsb246d2luZG93LmxvY2FsU3RvcmFnZS5sb25naXR1ZGVcblx0ICAgICAgICBcdH07XG5cblx0ICAgICAgICAgICAgdmFyIHdhdGNobG9jID0ge1xuXHRcdCAgICAgICAgICAgIG53X2xhdCAgICA6IGN1cnJlbnRfbWFwX253LmxhdCxcblx0XHQgICAgICAgICAgICBud19sb24gICAgOiBjdXJyZW50X21hcF9udy5sb24sXG5cdFx0ICAgICAgICAgICAgc2VfbGF0ICAgIDogY3VycmVudF9tYXBfc2UubGF0LFxuXHRcdCAgICAgICAgICAgIHNlX2xvblx0ICA6IGN1cnJlbnRfbWFwX3NlLmxvbixcblx0XHQgICAgICAgICAgICBjZW50ZXJfbGF0OiBjdXJyZW50X21hcF9jZW50ZXIubGF0LFxuXHRcdCAgICAgICAgICAgIGNlbnRlcl9sb246IGN1cnJlbnRfbWFwX2NlbnRlci5sb25cblx0XHQgICAgICAgIH1cblxuXHQgICAgICAgIFx0dmFyIHdhdGNobG9jSlNPTiA9IEpTT04uc3RyaW5naWZ5KHdhdGNobG9jKTtcblx0ICAgICAgICBcdGNvbnNvbGUubG9nKFwic2V0dGluZyB3YXRjaGxvY1wiLCB3YXRjaGxvY0pTT04pO1xuXHQgICAgICAgICAgICBcblx0ICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vIExPQ0FUSU9OIFVQREFURSBXSVRIIFNFU1NJT04gRU5URVJcblx0ICAgICAgICAgICAgLy/sl6zquLDshJwg67mE64+Z6riw7KCB7Jy866GcIOycoOyggOydmCDroZzsvIDsnbTshZjsnYQg7Ja76rOgIOyEuOyFmOydhCDrs7TrgrzsiJgg7J6I64ukLlxuXHRcdFx0XHR2YXIgc2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRndWlkOiAgICAgJHNjb3BlLmd1aWQsXG5cdFx0XHRcdFx0bG9jYXRpb246IGxvY2F0aW9uSlNPTixcblx0XHRcdFx0XHR3YXRjaGxvYzogd2F0Y2hsb2NKU09OXG5cdFx0XHRcdH07XG5cdFx0XHRcdFNlc3Npb25TdmMuZW50ZXIoc2Vzc2lvbik7IC8vIOyEnOuyhOyXkOyEnCDsnKDsoIDqsIAg65Ok7Ja07Ji07J2EIOyVjOumsOuLpC5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICBmdW5jdGlvbiBnZXRDdXJyTG9jRXJyb3IoZXJyKSB7XG5cdCAgICAgICAgICAgIGNvbnNvbGUud2FybignRVJST1IoJyArIGVyci5jb2RlICsgJyk6ICcgKyBlcnIubWVzc2FnZSk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgLyogaW5pdCBtYXAgYW5kIHBsYWNlIHNvbWUgbWFya2Vycywgc28gZXZlcnl0aGluZyBzdGFydCB3aXRoIHRoaXMgZnVuY3Rpb24uICovXG5cdCAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihnZXRDdXJyTG9jU3VjY2VzcywgZ2V0Q3VyckxvY0Vycm9yKTtcblxuXHRcdFx0Y29uc29sZS5sb2coJ1dlYlNvY2tldCBjb25uZWN0ZWQnKTtcblx0XHR9O1xuXG5cdFx0Y29ubmVjdGlvbi5vbmNsb3NlID0gZnVuY3Rpb24oKXtcblxuXHRcdFx0Y29uc29sZS5sb2coJ1dlYlNvY2tldCBjbG9zZWQuIFJlY29uZWN0aW5nLi4uJyk7XG5cdFx0XHQkdGltZW91dChjb25uZWN0LCAyMDAwKTtcblx0XHR9O1xuXG5cdFx0Y29ubmVjdGlvbi5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKXtcblx0XHRcdGNvbnNvbGUubG9nKCdicm9hZGNhc3QgbXNnIGZyb20gc2VydmVyOicsIGUpO1xuXHRcdFx0dmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKGUuZGF0YSk7XG5cblx0XHRcdC8qXG5cdFx0XHRcdHdzOm5ld19wb3N0ICAgIC0g7IOI66Gc7Jq0IO2PrOyKpO2KuOqwgCDsmKzrnbzsmZTsnYTrlYwgZnJvbnQtZW5k7JeQ7IScIOunteydtCDri6Tsi5wg7JeF642w7J207Yq4IO2VtOyVvCDrkJzri6Tqs6Ag7JWM66Ck7KSA64ukIVxuXHRcdFx0XHR3czpuZXdfc2Vzc2lvbiAtIHNlc3Npb27snbQg7IOI66GcIOuTpOyWtOyYpOuptCDrkJzri6Tqs6Ag7JWM66Ck7KSA64ukIVxuXHRcdFx0XHR3czpyZW1vdmVfcG9zdCAtIO2PrOyKpO2KuOqwgCDsi5zqsITsnbQg64ukIOuQmOyWtOyEnCDsgqzrnbzsp4jrlYwhXG5cdFx0XHRcdOunpOyasOykkeyalCEgXG5cdFx0XHQqL1xuXHRcdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCd3czonICsgcGF5bG9hZC50eXBlLCBwYXlsb2FkLmRhdGEpO1xuXHRcdH07XG5cdH07XG5cdGNvbm5lY3QoKTtcblxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIFNPQ0tFVCBCUk9BRENBU1QgUkVDRUlWRVJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBhcyBzZXJ2ZXIgc29ja2V0IHNlbmQgJ3dzOm5ld19wb3N0JyAsIHdlIGNhbiB1cGRhdGUgdGhlIG1hcCFcblx0JHNjb3BlLiRvbignd3M6bmV3X3Bvc3QnLCBmdW5jdGlvbihfLCBwb3N0KXtcblx0XHQvLyB1cGRhdGUgcG9zdHNcblx0XHQkc2NvcGUubWFwLnVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXG5cdFx0Ly8gc2hvdyByZXNwb25zaXZlIHVzZXJzIG9ubHkgdG8gdGhlIHVzZXIgd2hvIHdyb3RlIHRoaXMgcG9zdFxuXHRcdGlmIChwb3N0Lmd1aWQgPT0gJHNjb3BlLmd1aWQpXG5cdFx0e1xuXHRcdFx0Y29uc29sZS5sb2coJ3N0YXJ0IGRyYXdpbmcgcmVzcG9uc2VzLi4nKTtcblx0XHRcdCRzY29wZS5tYXAuZHJhd1Jlc3BvbnNlcyhwb3N0KTtcblx0XHR9XG5cdH0pO1xuXG5cdC8vIGFzIHNlcnZlciBzb2NrZXQgc2VuZCAnd3M6bmV3X3Bvc3QnICwgd2UgY2FuIHVwZGF0ZSB0aGUgbWFwIVxuXHQkc2NvcGUuJG9uKCd3czpuZXdfc2Vzc2lvbicsIGZ1bmN0aW9uKF8sIHNlc3Npb24pe1xuXG5cdFx0dmFyIGxvY2F0aW9uID0gYW5ndWxhci5mcm9tSnNvbihzZXNzaW9uLmxvY2F0aW9uKTtcblx0XHQkc2NvcGUubWFwLmRyYXdDdXJyTG9jYXRpb25NYXJrZXIobG9jYXRpb24pO1xuXG5cdH0pO1xuXG5cdC8vIHdoZW4gc2VydmVyIHJlbW92ZSB0aGUgcG9zdCBhZnRlciB0aW1lIGZvciBsb25nZXIgb25lcywgXG5cdC8vIHVwZGF0ZSBtYXAgd2l0aCBjb3Jlc3BvbmRpbmcgaW5mb1xuXHQkc2NvcGUuJG9uKCd3czpyZW1vdmVfcG9zdCcsIGZ1bmN0aW9uKF8sIHBvc3RpZCl7XG5cdFx0JHNjb3BlLm1hcC51bkRyYXdQb3N0KHBvc3RpZCk7XG5cdH0pO1xuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gQVBQTElDQVRJT04gTEVWRUwgRlVOQ1RJT05TXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gc2VlIGlmIGl0cyBtb2JpbGUgcGhvbmVcblx0JHNjb3BlLmlzTW9iaWxlID0gZnVuY3Rpb24oKXtcblx0XHRpZiggbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZC9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC93ZWJPUy9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmUvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBhZC9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUG9kL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0JsYWNrQmVycnkvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvV2luZG93cyBQaG9uZS9pKVxuXHRcdCApe1xuXHRcdCAgICByZXR1cm4gdHJ1ZTtcblx0XHQgIH1cblx0XHQgZWxzZSB7XG5cdFx0ICAgIHJldHVybiBmYWxzZTtcblx0XHQgIH1cblx0fTtcblxuXHQvKiBtb3ZlIHRvIGN1cnJlbnQgbG9jYXRpb24gKi9cblx0JHNjb3BlLm1vdmVUb0N1cnJlbnRMb2NhdGlvbiA9IGZ1bmN0aW9uKCl7XG5cdFx0ZnVuY3Rpb24gZ2V0Q3VyckxvY1N1Y2Nlc3MocG9zKSB7XG4gICAgICAgICAgICAvKiBtYWtlIHN1cmUgdG8gY2hlY2sgd2UgYXJlIG9uIHBvc3QgcGFnZSB3aXRoIG1hcCBmaXJzdCAqL1xuICAgICAgICAgICAgaWYgKCRzY29wZS5jdXJyZW50UGFnZUlkICE9ICRzY29wZS5wYWdlSWQucG9zdClcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciBjcmQgPSBwb3MuY29vcmRzO1xuXG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxhdGl0dWRlID0gY3JkLmxhdGl0dWRlO1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sb25naXR1ZGUgPSBjcmQubG9uZ2l0dWRlO1xuXG4gICAgICAgICAgICB2YXIgbG9jYXRpb24gPSB7XG4gICAgICAgICAgICBcdGxhdDogY3JkLmxhdGl0dWRlLCBcbiAgICAgICAgICAgIFx0bG9uOiBjcmQubG9uZ2l0dWRlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBkcmF3IGRyb3AgZG93biB1c2VyIHBvc2l0aW9uXG4gICAgICAgICAgIFx0JHNjb3BlLm1hcC5kcmF3Q3VyckxvY2F0aW9uTWFya2VyKGxvY2F0aW9uKTtcblxuICAgICAgICAgICBcdC8vIGRyYXcgeCBtYXJrZXJcblx0ICAgICAgICAkc2NvcGUubWFwLmRyYXdYTWFya2VyKGxvY2F0aW9uKTtcblxuXHQgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG9uKTtcblxuXHQgICAgICAgIC8vIG1vdmUgdG8gdGhlIGxvY2F0aW9uIGFuZCB6b29tIGludG8gcmlnaHQgYW1vdW50XG4gICAgICAgICAgICAkc2NvcGUubWFwLnBhblRvKGdvb2dsZUxvYylcbiAgICAgICAgICAgICRzY29wZS5tYXAuc2V0Wm9vbSgxNSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRDdXJyTG9jRXJyb3IoZXJyKSB7XG4gICAgICAgIFx0c3dhbChcIlwiLCBcIk5lZWQgdG8gdHVybiBvbiBsb2NhdGlvbiBzZXJ2aWNlIGZvciBwcm9wZXIgdXNlLlwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRVJST1IoJyArIGVyci5jb2RlICsgJyk6ICcgKyBlcnIubWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBpbml0IG1hcCBhbmQgcGxhY2Ugc29tZSBtYXJrZXJzLCBzbyBldmVyeXRoaW5nIHN0YXJ0IHdpdGggdGhpcyBmdW5jdGlvbi4gKi9cbiAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihnZXRDdXJyTG9jU3VjY2VzcywgZ2V0Q3VyckxvY0Vycm9yKTtcblxuICAgICAgICBzd2FsKHsgICB0aXRsZTogXCJcIiwgICB0ZXh0OiBcIk1vdmluZyB0byBjdXJyZW50IGxvY2F0aW9uLi5cIiwgICB0aW1lcjogMTUwMCwgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UgfSk7XG5cdH07XG5cblx0JHNjb3BlLm1vdmVUb1Bvc3RMb2NhdGlvbiA9IGZ1bmN0aW9uKCl7XG5cdFx0dmFyIGxhdERlbHRhID0gMC4wO1xuXG5cdFx0aWYgKCRzY29wZS5pc01vYmlsZSgpKXtcblx0XHRcdHZhciBib3VuZHMgPSAkc2NvcGUubWFwLmdldEJvdW5kcygpO1xuXHQgICAgICAgIHZhciBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBub3J0aC1lYXN0IGNvcm5lclxuXHQgICAgICAgIHZhciBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBzb3V0aC13ZXN0IGNvcmRlclxuXHQgICAgICAgIGN1cnJlbnRfbWFwX253ID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhuZS5sYXQoKSwgc3cubG5nKCkpO1xuXHQgICAgICAgIGN1cnJlbnRfbWFwX3NlID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhzdy5sYXQoKSwgbmUubG5nKCkpO1xuXG5cdCAgICAgICAgdmFyIGxhdERlbHRhX2NlbnRlcjJub3J0aCA9IDAuNSAqIE1hdGguYWJzKCRzY29wZS5wb3N0TG9jYXRpb24ubGF0IC0gY3VycmVudF9tYXBfbncubGF0KCkpO1xuXHQgICAgICAgIHZhciBsYXREZWx0YV9jZW50ZXIyc291dGggPSAwLjUgKiBNYXRoLmFicygkc2NvcGUucG9zdExvY2F0aW9uLmxhdCAtIGN1cnJlbnRfbWFwX3NlLmxhdCgpKTtcblxuXHQgICAgICAgIGlmIChsYXREZWx0YV9jZW50ZXIybm9ydGggPiBsYXREZWx0YV9jZW50ZXIyc291dGgpe1xuXHQgICAgICAgIFx0bGF0RGVsdGEgPSBsYXREZWx0YV9jZW50ZXIyc291dGg7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgIFx0bGF0RGVsdGEgPSBsYXREZWx0YV9jZW50ZXIybm9ydGg7XG5cdCAgICAgICAgfVxuXHRcdH1cblxuXHRcdHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKCRzY29wZS5wb3N0TG9jYXRpb24ubGF0ICsgbGF0RGVsdGEsICRzY29wZS5wb3N0TG9jYXRpb24ubG9uKTtcblx0XHQkc2NvcGUubWFwLnBhblRvKGdvb2dsZUxvYyk7XG5cdH07XG5cblx0JHNjb3BlLmNvbGxhcHNlID0gZnVuY3Rpb24oKXtcblx0XHQkc2NvcGUubmF2Q29sbGFwc2VkID0gdHJ1ZTtcblx0fTtcblxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIEdFTkVSQUwgQlJPQURDQVNUIFJFQ0VJVkVSXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAkc2NvcGUuJG9uKCdtYXBJbml0JywgZnVuY3Rpb24oXywgbWFwKXtcblx0XHQkc2NvcGUubWFwID0gbWFwO1xuXHR9KTtcblxuICAgICRzY29wZS4kb24oJ3NldDpndWlkdGd0JywgZnVuY3Rpb24oXywgZ3VpZHRndCl7XG5cdFx0JHNjb3BlLmd1aWR0Z3QgPSBndWlkdGd0O1xuXHR9KTtcblxuXHQkc2NvcGUuJG9uKCdwYWdlY2hhbmdlJywgZnVuY3Rpb24oXywgcGFnZUlkKXtcblx0XHQkc2NvcGUuY3VycmVudFBhZ2VJZCA9IHBhZ2VJZDtcblx0fSk7XG5cblx0JHNjb3BlLiRvbignbG9jJywgZnVuY3Rpb24oXywgbG9jYXRpb24pe1xuXHRcdHZhciBsYXQgPSBsb2NhdGlvbi5sYXQoKTtcblx0XHR2YXIgbG9uID0gbG9jYXRpb24ubG5nKCk7XG5cdFx0JHNjb3BlLnBvc3RMb2NhdGlvbiA9IHtcblx0XHRcdGxhdDogbGF0LFxuXHRcdFx0bG9uOiBsb25cblx0XHR9O1xuXHR9KTtcblxuXHQkc2NvcGUuJG9uKCdwbGFjZScsIGZ1bmN0aW9uKF8sIHBsYWNlKXtcblx0XHQvLyBGb3JjaW5nIHRoZSB1cGRhdGUgd2l0aCAkYXBwbHkoKSBtZXRob2Qgb24gJHNjb3BlXG5cdFx0Ly8gcHJvYmxlbSByZWxhdGVkIG5vdGU6IGh0dHA6Ly93d3cuamVmZnJ5aG91c2VyLmNvbS9pbmRleC5jZm0vMjAxNC82LzIvSG93LWRvLUktcnVuLWNvZGUtd2hlbi1hLXZhcmlhYmxlLWNoYW5nZXMtd2l0aC1Bbmd1bGFySlNcblx0XHQkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCRzY29wZS5wb3N0cGxhY2UgPSBwbGFjZTtcblx0XHRcdH1cblx0XHQpO1xuXHR9KTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpe1xuXHQkcm91dGVQcm92aWRlclxuXHQud2hlbignLycsIFxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXI6ICdQb3N0c0N0cmwnLCBcblx0XHRcdHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9wb3N0cy5odG1sJ1xuXHRcdH0pXG5cdC8vIFJlZGlyZWN0IHRvIHRoZSByb290IHBhZ2UuXG5cdC5vdGhlcndpc2UoXG5cdFx0e1xuICAgXHRcdFx0cmVkaXJlY3RUbzogJy8nXG5cdFx0fSk7XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1V0aWxTdmMnLCBmdW5jdGlvbigpe1xuXHR2YXIgc3ZjID0gdGhpcztcblxuXHRzdmMuZGVnMnJhZCA9IGZ1bmN0aW9uKGRlZykge1xuXHQgIHJldHVybiBkZWcgKiAoTWF0aC5QSS8xODApO1xuXHR9O1xuXG5cdHN2Yy5nZXREaXN0YW5jZUZyb21MYXRMb25JbkttID0gZnVuY3Rpb24gKGxhdDEsbG9uMSxsYXQyLGxvbjIpIHtcblx0ICB2YXIgUiA9IDYzNzE7XG5cdCAgdmFyIGRMYXQgPSBzdmMuZGVnMnJhZChsYXQyLWxhdDEpO1xuXHQgIHZhciBkTG9uID0gc3ZjLmRlZzJyYWQobG9uMi1sb24xKTsgXG5cdCAgdmFyIGEgPSBcblx0ICAgIE1hdGguc2luKGRMYXQvMikgKiBNYXRoLnNpbihkTGF0LzIpICtcblx0ICAgIE1hdGguY29zKHN2Yy5kZWcycmFkKGxhdDEpKSAqIE1hdGguY29zKHN2Yy5kZWcycmFkKGxhdDIpKSAqIFxuXHQgICAgTWF0aC5zaW4oZExvbi8yKSAqIE1hdGguc2luKGRMb24vMilcblx0ICAgIDsgXG5cdCAgdmFyIGMgPSAyICogTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksIE1hdGguc3FydCgxLWEpKTsgXG5cdCAgdmFyIGQgPSBSICogYztcblx0ICByZXR1cm4gZDtcblx0fTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlLCAkdGltZW91dCwgU2Vzc2lvblN2Yyl7XG5cblxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZGlyZWN0aXZlKCdhcHBNYXAnLCBmdW5jdGlvbihQb3N0c1N2YywgVXRpbFN2YywgU2Vzc2lvblN2YywgJGNvbXBpbGUpIHtcbiAgICAvLyBkaXJlY3RpdmUgbGluayBmdW5jdGlvblxuICAgIHZhciBsaW5rID0gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCByb290U2NvcGUpIHtcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBHTE9CQUwgVkFSSUFCTEVTIElOIExJTksgRlVOQ1RJT05cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgdmFyIG1hcDsgLy8gZXhwYW5kIGZyb20gZ29vZ2xlIG1hcCBmb3IgbWFudWFsbHkgY3JlYXRlZCBldmVudHNcbiAgICAgICAgdmFyIG1hcF9vcmlnaW47IC8vIGZvciBvcmlnaW5hbCBnb29nbGUgbWFwIGV2ZW50IGZ1bmN0aW9uIGxpbmtzXG4gICAgICAgIHZhciBjdXJyZW50X21hcF9udztcbiAgICAgICAgdmFyIGN1cnJlbnRfbWFwX3NlO1xuICAgICAgICB2YXIgbWFwT3B0aW9ucztcbiAgICAgICAgdmFyIGluaXRpYWxNYXBDZW50ZXI7XG4gICAgICAgIHZhciBDTE9VRF9NQVBfSUQgPSAnY3VzdG9tX3N0eWxlJzsgLy8gbWFwIHN0eWxlXG4gICAgICAgIHZhciBoZWxwZXJNYXJrZXJzID0gW107XG4gICAgICAgIHZhciBtYXJrZXJzID0gW107XG4gICAgICAgIHZhciBpbWFnZVBvc3QgPSB7XG4gICAgICAgICAgICB1cmw6ICdodHRwczovL2NhdGNobWUuaWZ5b3VjYW4uY29tL2ltYWdlcy9waWN0dXJlcy9JWUNfSWNvbnMvSVlDX0xvY2F0aW9uX0ljb25fU21hbGwucG5nJyxcbiAgICAgICAgICAgIHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEwMCwgMTAwKSxcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTcsIDM0KSxcbiAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEsIDEpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBpbWFnZVRhcmdldCA9IHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzL1UvUC9qL00vSS9pL3gtbWFyay15ZWxsb3ctbWQucG5nJyxcbiAgICAgICAgICAgIHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEwMCwgMTAwKSxcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTcsIDM0KSxcbiAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDI1LCAyNSlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGltYWdlVXNlckxvZ2luID0ge1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovL3d3dy5jbGtlci5jb20vY2xpcGFydHMvcS9vLzIvSy9nL1YvbG9jYXRpb24tc3ltYm9sLW1hcC1tZC5wbmcnLFxuICAgICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTAwLCAxMDApLFxuICAgICAgICAgICAgb3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgxNywgMzQpLFxuICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMjAsIDMzKVxuICAgICAgICB9O1xuICAgICAgICB2YXIgaW1hZ2VMaXN0ZW5lciA9IHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly8yLmJwLmJsb2dzcG90LmNvbS8tZGpNYV9uNW5BRU0vVDFHdnhfLTctekkvQUFBQUFBQUFBUTQvLTFONmxsZVF2WmMvczE2MDAvYmxpbmtpbmdfZG90LmdpZicsXG4gICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICBvcmlnaW46IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDE3LCAzNCksXG4gICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxNywgMTcpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gRVZFTlQgSEFORExFUlMgLSBVUERBVEVcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRGVmYXVsdExvY2F0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSA9IG1hcC5nZXRDZW50ZXIoKS5sYXQoKTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlID0gbWFwLmdldENlbnRlcigpLmxuZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQm91bmRzKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG1hcC5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIHZhciBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBub3J0aC1lYXN0IGNvcm5lclxuICAgICAgICAgICAgdmFyIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIHNvdXRoLXdlc3QgY29yZGVyXG4gICAgICAgICAgICAvL1lvdSBnZXQgbm9ydGgtd2VzdCBhbmQgc291dGgtZWFzdCBjb3JuZXJzIGZyb20gdGhlIHR3byBhYm92ZTpcblxuICAgICAgICAgICAgY3VycmVudF9tYXBfbncgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKG5lLmxhdCgpLCBzdy5sbmcoKSk7XG4gICAgICAgICAgICBjdXJyZW50X21hcF9zZSA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoc3cubGF0KCksIG5lLmxuZygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVdhdGNoTG9jYXRpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gbWFwLmdldEJvdW5kcygpO1xuICAgICAgICAgICAgdmFyIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIG5vcnRoLWVhc3QgY29ybmVyXG4gICAgICAgICAgICB2YXIgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCk7IC8vIExhdExuZyBvZiB0aGUgc291dGgtd2VzdCBjb3JkZXJcbiAgICAgICAgICAgIC8vWW91IGdldCBub3J0aC13ZXN0IGFuZCBzb3V0aC1lYXN0IGNvcm5lcnMgZnJvbSB0aGUgdHdvIGFib3ZlOlxuXG4gICAgICAgICAgICBjdXJyZW50X21hcF9udyA9IHsgXG4gICAgICAgICAgICAgICAgbGF0OiBuZS5sYXQoKSwgXG4gICAgICAgICAgICAgICAgbG9uOiBzdy5sbmcoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGN1cnJlbnRfbWFwX3NlID0ge1xuICAgICAgICAgICAgICAgIGxhdDogc3cubGF0KCksIFxuICAgICAgICAgICAgICAgIGxvbjogbmUubG5nKClcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50X21hcF9jZW50ZXIgO1xuXG4gICAgICAgICAgICAvLyBzZWUgaWYgdGhlIGxhdGVzdCB4IG1hcmtlciBvciBwb3N0IGxvY2F0aW9uIGlzIHdpdGhpbiB1c2VyJ3Mgdmlld1xuICAgICAgICAgICAgaWYgKCEoc2NvcGUucG9zdExvY2F0aW9uLmxhdCA8IGN1cnJlbnRfbWFwX253LmxhdCkgfHxcbiAgICAgICAgICAgICAgICAhKHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQgPiBjdXJyZW50X21hcF9zZS5sYXQpIHx8XG4gICAgICAgICAgICAgICAgIShzY29wZS5wb3N0TG9jYXRpb24ubG9uIDwgY3VycmVudF9tYXBfc2UubG9uKSB8fFxuICAgICAgICAgICAgICAgICEoc2NvcGUucG9zdExvY2F0aW9uLmxvbiA+IGN1cnJlbnRfbWFwX253LmxvbikgKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIGlmIGl0IGlzIG5vdCB3aXRoaW4gdXNlcidzIHZpZXcsIHRoZW4ganVzdCB1c2UgbWFwIGNlbnRlclxuICAgICAgICAgICAgICAgIGN1cnJlbnRfbWFwX2NlbnRlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBtYXAuZ2V0Q2VudGVyKCkubGF0KCksXG4gICAgICAgICAgICAgICAgICAgIGxvbjogbWFwLmdldENlbnRlcigpLmxuZygpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBpdCBpcyB3aXRoaW4gdXNlcidzIHZpZXcsIHVzZSB4IG1hcmtlciBsb2NhdGlvbiBhLmsuYSBwb3N0IGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgY3VycmVudF9tYXBfY2VudGVyID0ge1xuICAgICAgICAgICAgICAgICAgICBsYXQ6IHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQsXG4gICAgICAgICAgICAgICAgICAgIGxvbjogc2NvcGUucG9zdExvY2F0aW9uLmxvblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBTZXNzaW9uU3ZjLnVwZGF0ZVdhdGNoTG9jYXRpb24oY3VycmVudF9tYXBfbncsIGN1cnJlbnRfbWFwX3NlLCBjdXJyZW50X21hcF9jZW50ZXIsIHNjb3BlLmd1aWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gRVZFTlQgSEFORExFUlMgLSBEUkFXXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIHVwZGF0ZSByZXNwb25zZXMgc3VjaCBhcyB2aXN1YWxpemF0aW9uIG9mIGxpc3RlbmVyc1xuICAgICAgICBmdW5jdGlvbiBkcmF3UmVzcG9uc2VzKHBvc3Qpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlZmVyZW5jZSBwb3N0OicsIHBvc3QpO1xuXG4gICAgICAgICAgICBTZXNzaW9uU3ZjLmZldGNoKClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHNlc3Npb25zKXtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2Vzc2lvbnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2Vzc2lvbiA9IHNlc3Npb25zW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNraXAgbXkgc2Vzc2lvbiAtIG5vIG5lZWQgdG8gZHJhdyDrgrQg7J6Q7Iug7J2YIOyEuOyFmOydgCDqt7jrprTtlYTsmpTqsIAg7JeG64ukLlxuICAgICAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5ndWlkID09IHNjb3BlLmd1aWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAgLy8gc2Vzc2lvbidzIHdhdGNoIGxvY2F0aW9uIHdpbGwgYmUgYm91bmNlZCFcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nlc3Npb24gd2F0Y2ggbG9jYXRpb246Jywgc2Vzc2lvbi53YXRjaGxvYyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwb3N0IGxvY2F0aW9uOicsIHBvc3QubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgd2F0Y2hfbG9jYXRpb24gPSBhbmd1bGFyLmZyb21Kc29uKHNlc3Npb24ud2F0Y2hsb2MpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zdF9sb2NhdGlvbiA9IGFuZ3VsYXIuZnJvbUpzb24ocG9zdC5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyDsnKDsoIDqsIAg67O06rOgIOyeiOuKlCDrsJTsmrTrjZTrpqwg7JWI7JeQIOq3uCBzZXNzaW9uKOuLpOuluOycoOyggCkg7LK07YKBXG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY3VycmVudF9tYXBfc2UsIGN1cnJlbnRfbWFwX253KTtcblxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEod2F0Y2hfbG9jYXRpb24uY2VudGVyX2xhdCA8IGN1cnJlbnRfbWFwX253LmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgISh3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbGF0ID4gY3VycmVudF9tYXBfc2UubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKHdhdGNoX2xvY2F0aW9uLmNlbnRlcl9sb24gPCBjdXJyZW50X21hcF9zZS5sbmcoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEod2F0Y2hfbG9jYXRpb24uY2VudGVyX2xvbiA+IGN1cnJlbnRfbWFwX253LmxuZygpKSApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2Vzc2lvbijri6TrpbjsnKDsoIAp65Ok7J20IOq3uCDtj6zsiqTtirjrpbwg67O06rOgIOyeiOyngCDslYrsnLzrqbQg7Iqk7YK1LlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShwb3N0X2xvY2F0aW9uLmxhdCA8IHdhdGNoX2xvY2F0aW9uLm53X2xhdCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEocG9zdF9sb2NhdGlvbi5sYXQgPiB3YXRjaF9sb2NhdGlvbi5zZV9sYXQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKHBvc3RfbG9jYXRpb24ubG9uIDwgd2F0Y2hfbG9jYXRpb24uc2VfbG9uKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShwb3N0X2xvY2F0aW9uLmxvbiA+IHdhdGNoX2xvY2F0aW9uLm53X2xvbikgKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyh3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbGF0LCB3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbG9uKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBtYXJrZXIgb3B0aW9uIHNldHRpbmdcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlTG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkJPVU5DRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlVzZXJQaW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlTGlzdGVuZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWl6ZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIobWFya2VyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihvbGRfbWFya2VyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkX21hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0obWFya2VyKSksIFxuICAgICAgICAgICAgICAgICAgICAxODAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFuZERyYXdQb3N0cygpe1xuICAgICAgICAgICAgUG9zdHNTdmMuZmV0Y2goKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocG9zdHMpe1xuXG4gICAgICAgICAgICAgICAgLy8gZHJhdyBsYXRlc3QgdXBkYXRlXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3N0cy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3N0ID0gcG9zdHNbaV07XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBtYXJrZXJzIHBvc3QgaXMgZXhpc2l0aW5nIG9uZSwgd2UgZG9uJ3Qgd2FudCB0byBkcmF3IGl0IGFnYWluLlxuICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGRyYXcgbmV3IG9uZXMhXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNbal07IGorKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zdC5faWQgPT0gbWFya2VyLnBvc3QuX2lkKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QgPSBudWxsOyAvLyDsnbTrr7gg6re466Ck7KeEIO2PrOyKpO2KuOudvOuptCwgbnVsbOuhnC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8g7J20IGxvb3DsnYAgcG9zdC5faWTrp4wg6rKA7IKs7Jqp7J6E7Jy866GcLCDrp4zslb0g6rK57LmY66m0IOuwlOuhnCBsb29w7J2EIOupiOy2sOuPhCDqtJzssK7ri6QuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBwb3N06rCAIOybkOuemCDsnojsl4frjZjqsoPsnbTrqbQgcG9zdOqwgCBudWxs66GcIOyFiyDrkJjsl4jsnYTqsoPsnbTqs6AsIGxvY2F0aW9u7ZSE66Gc7Y287Yuw64+EIOyeiOuKlOyngCDtmZXsnbjtlZjsnpBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwb3N0IHx8ICFwb3N0Lmhhc093blByb3BlcnR5KCdsb2NhdGlvbicpKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBwb3N0IC0gbm8gbmVlZCB0byBkcmF3XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gYW5ndWxhci5mcm9tSnNvbihwb3N0LmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobG9jYXRpb24ubGF0LCBsb2NhdGlvbi5sb24pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOuwlOyatOuNlOumrCDslYjsl5Ag7J6I64qU7KeA67aA7YSwIOyytO2BrOulvCDtlZjsnqVcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGdvb2dsZUxvYy5sYXQoKSA8IGN1cnJlbnRfbWFwX253LmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShnb29nbGVMb2MubGF0KCkgPiBjdXJyZW50X21hcF9zZS5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxuZygpIDwgY3VycmVudF9tYXBfc2UubG5nKCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA+IGN1cnJlbnRfbWFwX253LmxuZygpKSApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBza2lwIHRoaXMgcG9zdCAtIG5vIG5lZWQgdG8gZHJhd1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdXBsaW5nX3N0YXR1cyA9IGNhbGN1bGF0ZUNvdXBsaW5nKHBvc3QuZ3VpZCwgcG9zdC5ndWlkdGd0KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmtlciBvcHRpb24gc2V0dGluZ1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGVMb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkJ1YmJsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQb3N0XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG1hcmtlck9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gMTDstIjrs7Tri6Qg6ri0IOqyveyasOydmCDqsoPrp4wg7ISc67KE6rCAIOqzhOyCsOydhCDtlZjqs6Ag7ISc67KE6rCAIOuztOuCtOykmOyEnCBmcm9udGVuZOyXkOyEnCDsp4DsmrDrj4TroZ0g6rSA66as7ZW07KSY7JW8IO2VnOuLpC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heEluc3RhbnRMaWZlU3BhbiA9IDEwMDAwO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOyduOyKpO2EtO2KuCDrp7Ug66mU7Iuc7KeA7J28IOqyveyasOunjCDtlITroaDtirjsl5Trk5zsmYAg7ISc67KE6rCAIOuLpOultOqyjCDsp4Dsm4zso7zrj4TroZ0g7ZWc64ukLiAo7J2864uo7J2AIOyDge2VnOyEoOydgCAxMOy0iClcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3QubGlmZXNwYW4gPCBtYXhJbnN0YW50TGlmZVNwYW4pe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHVwIHNlbGYgcmVtb3ZlIGZvciBtYXJrZXIgaXRzZWxmIGFuZCBmcm9tIG1hcmtlcnMgY29sbGVjdGlvbiBhdCBmcm9udC1lbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKG9sZF9tYXJrZXIsIG9sZF9wb3N0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRfbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNba107IGsrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZF9wb3N0Ll9pZCA9PSBtYXJrZXIucG9zdC5faWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnNwbGljZShrLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfShtYXJrZXIsIHBvc3QpKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3N0LmxpZmVzcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBtYXJrZXIgdG8gYXJyYXksIHRoaXMgbWVhbnMgdGhhdCBpdCBoYXMgYmVlbiBkcmF3biB0byBtYXBcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcjogbWFya2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QgIDogcG9zdFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBEUkFXSU5HIE1FU1NBR0UgV0lORE9XIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGRpdiBpZD1cImJ1YmJsZVBvc3RcIj4nICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QuYm9keSArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PGRpdiBpZD1cImJ1YmJsZUxpZmVCYXJcIj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAvLyDsiqTsvZTtlITsl5DshJzrtoDthLAg7IOI66Gc7Jq0IOywqOydvOuTnCDsiqTsvZTtlITrpbwg66eM65Ok7Ja0IGVhY2ggZm9yIGxvb3Dsl5DshJwg7IKs7Jqp7ZWc64ukLlxuICAgICAgICAgICAgICAgICAgICAvLyAtLT4g7ZW07JW8LCDqsIEgRE9N7J20IOqwgeqwgeydmCBzY29wZeulvCDqsIDsoLjshJwgcG9zdCBtc2fqsIAg7JWIIOqyuey5nOuLpC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHNjb3BlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBwYXJlbnQuJG5ldyh0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgb3BlbkluZm9XaW5kb3cgPSAoZnVuY3Rpb24obWFya2VyLCBjaGlsZF9zY29wZSwgcG9zdCwgY291cGxpbmdfc3RhdHVzKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyB3aW5kb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mb1dpbmRvd09wdGlvbnMgPSB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXhlbE9mZnNldDogbmV3IGdvb2dsZS5tYXBzLlNpemUoLTQxLjUsIDEwLjApLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUF1dG9QYW46IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coaW5mb1dpbmRvd09wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGN1cnJlbnQgdGltZSBhbmQgc3VidHJhY3QgaXQgZnJvbSBwb3N0J3MgZW5kIHRpbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB3aWxsIGJlIGFjY3VyYXRlIHBvc3QgdGltZSBmb3IgaW5zdGFudCBwb3N0cyBhbmQgbG9uZyBwb3N0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VGltZU1pbGxpID0gY3VycmVudERhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3N0bGlmZSA9ICgocG9zdC5saWZlZW5kIC0gY3VycmVudFRpbWVNaWxsaSkgPj0gMCkgPyAocG9zdC5saWZlZW5kIC0gY3VycmVudFRpbWVNaWxsaSkgOiAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpZmVwZXJjZW50YWdlID0gKHBvc3RsaWZlIC8gcG9zdC5saWZlc3BhbikudG9GaXhlZCgyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTGlmZSAlOlwiLCBsaWZlcGVyY2VudGFnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvIG1ha2UgZGF0YSBhdmFpbGFibGUgdG8gdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5tc2cgPSBwb3N0LmJvZHk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGxpZmUgPSBwb3N0bGlmZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0Z3VpZCA9IHBvc3QuZ3VpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0Z3VpZHRndCA9IHBvc3QuZ3VpZHRndDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0Y291cGxlc3RhdHVzID0gY291cGxpbmdfc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA9IGxpZmVwZXJjZW50YWdlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUuJG9uKCdzZXQ6Y291cGxpbmcnLCBmdW5jdGlvbihfLCBjb3VwbGluZ191cGRhdGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0Y291cGxlc3RhdHVzID0gY291cGxpbmdfdXBkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcGlsZSBpdCBiZWZvcmUgbG9hZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSAnPGRpdiBtYXAtbXNnPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBpbGVkID0gJGNvbXBpbGUoY29udGVudCkoY2hpbGRfc2NvcGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvdy5zZXRDb250ZW50KCBjb21waWxlZFswXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9XaW5kb3cub3BlbihtYXAgLCBtYXJrZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSkobWFya2VyLCBjaGlsZCwgcG9zdCwgY291cGxpbmdfc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIG9wZW5JbmZvV2luZG93KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRU5EIG9mIERSQVdJTkcgTUVTU0FHRSBXSU5ET1cgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAgICAgfSAvLyBlbmQgb2YgZm9yLWxvb3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhd0Ryb3BEb3duKGxvY2F0aW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XG5cbiAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgLy8g67CU7Jq0642U66asIOyViOyXkCDsnojripTsp4DrtoDthLAg7LK07YGs66W8IO2VmOyepVxuICAgICAgICAgICAgaWYgKCEoZ29vZ2xlTG9jLmxhdCgpIDwgY3VycmVudF9tYXBfbncubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgIShnb29nbGVMb2MubGF0KCkgPiBjdXJyZW50X21hcF9zZS5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA8IGN1cnJlbnRfbWFwX3NlLmxuZygpKSB8fFxuICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxuZygpID4gY3VycmVudF9tYXBfbncubG5nKCkpIClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIHNraXAgdGhpcyBwb3N0IC0gbm8gbmVlZCB0byBkcmF3XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG1hcmtlciBvcHRpb24gc2V0dGluZ1xuICAgICAgICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGdvb2dsZUxvYyxcbiAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlVzZXJQaW5cIixcbiAgICAgICAgICAgICAgICBpY29uOiBpbWFnZVVzZXJMb2dpblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIobWFya2VyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uKG9sZF9tYXJrZXIpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZF9tYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0obWFya2VyKSksIFxuICAgICAgICAgICAgMjAwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1bkRyYXdQb3N0KHBvc3RpZClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdGFydGluZyByZW1vdmUgcG9zdFwiKTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNba107IGsrKykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBvc3RpZCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWFya2VyLnBvc3QuX2lkKTtcbiAgICAgICAgICAgICAgICBpZiAocG9zdGlkID09IG1hcmtlci5wb3N0Ll9pZCkge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXIubWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5zcGxpY2UoaywgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdBbmRTZXRQbGFjZShsb2NhdGlvbilcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobG9jYXRpb24ubGF0LCBsb2NhdGlvbi5sb24pO1xuICAgICAgICAgICAgZHJhd0hlbHBlck1hcmtlcihnb29nbGVMb2MpO1xuICAgICAgICAgICAgc2V0UGxhY2UoZ29vZ2xlTG9jKTtcblxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHNlcnZlciBnZXRzIHVwZGF0ZWQgd2hlbmV2ZXIgc2V0dGluZyBuZXcgcGxhY2Ugd2l0aCBtYXJrZXJcbiAgICAgICAgICAgIHVwZGF0ZVdhdGNoTG9jYXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRyYXcgbWFwIHdpdGggaGVscGVyIG1hcmtlcnNcbiAgICAgICAgZnVuY3Rpb24gZHJhd0hlbHBlck1hcmtlcihsb2NhdGlvbil7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBoZWxwZXJNYXJrZXJzW2ldOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVscGVyTWFya2VycyA9IFtdO1xuICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBsb2NhdGlvbiwgXG4gICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VUYXJnZXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGVscGVyTWFya2Vycy5wdXNoKG1hcmtlcik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1bkRyYXdIZWxwZXJNYXJrZXIoKXtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IGhlbHBlck1hcmtlcnNbaV07IGkrKykge1xuICAgICAgICAgICAgICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWxwZXJNYXJrZXJzID0gW107XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIFVUSUxcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gc2V0UGxhY2UobG9jYXRpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIGJyb2FkY2FzdCBsb2NhdGlvbiBpbmZvcihsb24sbGF0KVxuICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ2xvYycsIGxvY2F0aW9uKTtcblxuICAgICAgICAgICAgdmFyIGdlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XG5cbiAgICAgICAgICAgIC8vIGJyb2FkY2FzdCBwbGFjZSBmb3JtYXR0ZWRfYWRkcmVzcyBhbmQgZHJhdyBpY29uXG4gICAgICAgICAgICBnZW9jb2Rlci5nZW9jb2RlKCB7ICdsYXRMbmcnOiBsb2NhdGlvbiB9LCBmdW5jdGlvbihyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAvLyBhcyB1c2VyIGNsaWNrcyBvbiB0aGUgbWFwLFxuICAgICAgICAgICAgICAgIC8vIHdlIGhhdmUgdG8gc2F2ZSB0aGUgZm9ybWF0dGVkIGFkZHJlc3MgaW4gJHNjb3BlIGFuZFxuICAgICAgICAgICAgICAgIC8vIGl0IHdpbGwgYmUgdXNlZCB0aHJvdWdoIHBvc3RzLmN0cmxcbiAgICAgICAgICAgICAgICAvLyBlbWl0IGJyb2FkY2FzZSAncGxhY2UnIGFuZCBzZW5kIHRoaXMgdG8gYXBwbGljYXRpb24uY3RybFxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJyb2FkY2FzdCBmb3JtYXR0ZWRfYWRkcmVzc1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgncGxhY2UnLCByZXN1bHRzWzFdLmZvcm1hdHRlZF9hZGRyZXNzKTsgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICBzd2FsKFwiXCIsXCJMb2NhdGlvbiBkb2VzIG5vdCBleGlzdHNcIik7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdwbGFjZScsIFwiTG9jYXRpb24gZG9lcyBub3QgZXhpc3RzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlQ291cGxpbmcocG9zdF9ndWlkLCBwb3N0X2d1aWR0Z3QpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qIGNvdXBsaW5nIHN0YXR1c1xuICAgICAgICAgICAgICAgIDAgLSBubyBzdGF0dXNcbiAgICAgICAgICAgICAgICAxIC0gaSBsaWtlIHlvdVxuICAgICAgICAgICAgICAgIDIgLSB5b3UgbGlrZSBpXG4gICAgICAgICAgICAgICAgNCAtIHdlIGxpa2UgZWFjaCBvdGhlclxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBpbGlrZXlvdSA9IHNjb3BlLmd1aWR0Z3QgPT0gcG9zdF9ndWlkO1xuICAgICAgICAgICAgdmFyIHlvdWxpa2VpID0gc2NvcGUuZ3VpZCA9PSBwb3N0X2d1aWR0Z3Q7XG4gICAgICAgICAgICBpZiAoaWxpa2V5b3UgJiYgeW91bGlrZWkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbGlrZXlvdSAmJiAheW91bGlrZWkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghaWxpa2V5b3UgJiYgeW91bGlrZWkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBVSVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBzZXRVSU1vdmVUb0N1cnJMb2NCdG4oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgY3VyckxvY0J0biA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWN1cnInKSk7IFxuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5UT1BfUklHSFRdLnB1c2goY3VyckxvY0J0bik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVBvc3RGb3JtKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHBvc3RGb3JtID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3N0aW5nJykpOyBcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0NFTlRFUl0ucHVzaChwb3N0Rm9ybSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVBvc3RCdG4oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcG9zdEJ0biA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXN1Ym1pdCcpKTtcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0NFTlRFUl0ucHVzaChwb3N0QnRuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJVGltZVNsaWRlcigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICB2YXIgdGltZVNsaWRlciA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZVNsaWRlcicpKTtcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0NFTlRFUl0ucHVzaCh0aW1lU2xpZGVyKTtcbiAgICAgICAgICAgICovXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVNlYXJjaEJveCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgc2VhcmNoIGJveCBhbmQgbGluayBpdCB0byB0aGUgVUkgZWxlbWVudC5cbiAgICAgICAgICAgIHZhciBpbnB1dCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFjLWlucHV0JykpOyAvLyBAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gIFxuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5UT1BfTEVGVF0ucHVzaChpbnB1dCk7XG5cbiAgICAgICAgICAgIHZhciBzZWFyY2hCb3ggPSBuZXcgZ29vZ2xlLm1hcHMucGxhY2VzLlNlYXJjaEJveCgoaW5wdXQpKTsgLy8gQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9IFxuXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIHRoZSBldmVudCBmaXJlZCB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYW4gaXRlbSBmcm9tIHRoZVxuICAgICAgICAgICAgLy8gcGljayBsaXN0LiBSZXRyaWV2ZSB0aGUgbWF0Y2hpbmcgcGxhY2VzIGZvciB0aGF0IGl0ZW0uXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihzZWFyY2hCb3gsICdwbGFjZXNfY2hhbmdlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBwbGFjZXMgPSBzZWFyY2hCb3guZ2V0UGxhY2VzKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGxhY2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gdGFrZSBvbmx5IDEgc3BvdFxuICAgICAgICAgICAgICAgIHZhciBwbGFjZSA9IHBsYWNlc1swXTtcblxuICAgICAgICAgICAgICAgIC8vIHdoZW4gc2VhcmNoIGhhcHBlbnMsIGxvY2F0aW9uIHdpbGwgYmUgdXBkYXRlZCBhcyB3ZWxsIGZvciBwb3N0XG4gICAgICAgICAgICAgICAgLy8gc2NvcGUuJGVtaXQoJ3BsYWNlJywgcGxhY2UuZm9ybWF0dGVkX2FkZHJlc3MpO1xuICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQoKSxcbiAgICAgICAgICAgICAgICAgICAgbG9uOiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZHJhd0FuZFNldFBsYWNlKGxvY2F0aW9uKTtcblxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUgPSBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXRpdHVkZTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSA9IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxvbmdpdHVkZTtcblxuICAgICAgICAgICAgICAgIG1hcC5wYW5UbyhwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgbWFwLnNldFpvb20oMTYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFVkVOVFxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudENsaWNrKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gY2xpY2sgZXZlbnQgb24gbWFwIHRvIGRyYXcgbWFya2VyXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBldmVudC5sYXRMbmcubGF0KCksXG4gICAgICAgICAgICAgICAgICAgIGxvbjogZXZlbnQubGF0TG5nLmxuZygpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkcmF3QW5kU2V0UGxhY2UobG9jYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudENlbnRlckNoYW5nZWQoKVxuICAgICAgICB7XG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnY2VudGVyX2NoYW5nZWQnLCBmdW5jdGlvbigpeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyB3aGVuIG1hcCBjZW50ZXIgY2hhbmdlLCB1cGRhdGUgbGFzdCBsb2NhdGlvbiBpbiBtZW1vcnksXG4gICAgICAgICAgICAgICAgLy8gc28gYnJvd3NlciB3aWxsIHJlbWVtYmVyIGl0IG5leHQgdGltZSB5b3UgY29tZSFcbiAgICAgICAgICAgICAgICB1cGRhdGVEZWZhdWx0TG9jYXRpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0RXZlbnRCb3VuZHNDaGFuZ2VkKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ2JvdW5kc19jaGFuZ2VkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIG1hcCBjZW50ZXIgY2hhbmdlLCB1cGRhdGUgYm91bmRzIGluZm8gZm9yIG1hcFxuICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpOyAgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50RHJhZ0VuZCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcF9vcmlnaW4sICdkcmFnZW5kJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbWFwIGFzIGRyYWcgZW5kXG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICB1cGRhdGVXYXRjaExvY2F0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50UmVzaXplKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ3Jlc2l6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG1hcCBhcyBkcmFnIGVuZFxuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHdhdGNobG9jIHdoZW4gY2VudGVyIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudFpvb21DaGFuZ2VkKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ3pvb21fY2hhbmdlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG1hcCBhcyBkcmFnIGVuZFxuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHdhdGNobG9jIHdoZW4gY2VudGVyIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBTRVRVUCBGT1IgTUFQXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIG1hcCBpbml0aWFsIGNvbmZpZ3NcbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbE1hcERhdGEoKXtcbiAgICAgICAgICAgIGluaXRpYWxNYXBDZW50ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKDM0LjA1LCAtMTE4LjI0KTtcbiAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWlzTmFOKHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUpICYmICFpc05hTih3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbE1hcENlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcod2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSwgd2luZG93LmxvY2FsU3RvcmFnZS5sb25naXR1ZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRQbGFjZShpbml0aWFsTWFwQ2VudGVyKTtcblxuICAgICAgICAgICAgbWFwT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyICAgICAgOiBpbml0aWFsTWFwQ2VudGVyLFxuICAgICAgICAgICAgICAgICAgICB6b29tICAgICAgICA6IDE1LFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGx3aGVlbCA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHN0cmVldFZpZXdDb250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBwYW5Db250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgem9vbUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlQ29udHJvbE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICBtYXBUeXBlSWRzOiBbZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVAsIENMT1VEX01BUF9JRF1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUlkOiBDTE9VRF9NQVBfSURcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRNYW51YWxFdmVudHMoKXtcbiAgICAgICAgICAgIGZ1bmN0aW9uIENsb3VkTWFwKG9wdGlvbnMpe1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkluaXRpYWxpemluZyBtYXBcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGluc3RhbnRpYXRlIGdvb2dsZSBtYXBcbiAgICAgICAgICAgIG1hcF9vcmlnaW4gPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGVsZW1lbnRbMF0sIG1hcE9wdGlvbnMpO1xuXG4gICAgICAgICAgICAvLyBzZXQgcHJvdG90eXBlIG9mIGN1c3RvbSBtYXAgd2l0aCBvcmlnaW4gbWFwXG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUgPSBtYXBfb3JpZ2luO1xuXG4gICAgICAgICAgICAvLyBkcmF3IHggbWFya2VyXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVEcmF3WE1hcmtlcihsb2NhdGlvbil7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCAnZHJhd1hNYXJrZXInLCBsb2NhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUuZHJhd1hNYXJrZXIgPSBoYW5kbGVEcmF3WE1hcmtlcjtcblxuICAgICAgICAgICAgLy8gZHJhdyBjdXJyZW50IGxvY2F0aW9uIG1hcmtlclxuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRHJhd0N1cnJMb2NhdGlvbk1hcmtlcihsb2NhdGlvbil7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCAnZHJhd0N1cnJMb2NhdGlvbk1hcmtlcicsIGxvY2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS5kcmF3Q3VyckxvY2F0aW9uTWFya2VyID0gaGFuZGxlRHJhd0N1cnJMb2NhdGlvbk1hcmtlcjtcblxuICAgICAgICAgICAgLy8gZHJhdyBwb3N0c1xuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlVXBkYXRlQW5kRHJhd1Bvc3RzKCl7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCAndXBkYXRlQW5kRHJhd1Bvc3RzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUudXBkYXRlQW5kRHJhd1Bvc3RzID0gaGFuZGxlVXBkYXRlQW5kRHJhd1Bvc3RzO1xuXG4gICAgICAgICAgICAvLyBkcmF3IHJlc3BvbnNlc1xuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRHJhd1Jlc3BvbnNlcyhwb3N0KXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICdkcmF3UmVzcG9uc2VzJywgcG9zdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUuZHJhd1Jlc3BvbnNlcyA9IGhhbmRsZURyYXdSZXNwb25zZXM7XG5cbiAgICAgICAgICAgIC8vIHVuZHJhdyBwb3N0c1xuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlVW5EcmF3UG9zdChwb3N0aWQpe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ3VuRHJhd1Bvc3QnLCBwb3N0aWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLnVuRHJhd1Bvc3QgPSBoYW5kbGVVbkRyYXdQb3N0O1xuXG4gICAgICAgICAgICAvLyBjcmVhdGUgY3VzdG9tIG1hcCBmb3IgYXBwXG4gICAgICAgICAgICBtYXAgPSBuZXcgQ2xvdWRNYXAoKTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnZHJhd1hNYXJrZXInLCBmdW5jdGlvbihsb2NhdGlvbil7XG4gICAgICAgICAgICAgICAgZHJhd0FuZFNldFBsYWNlKGxvY2F0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICdkcmF3Q3VyckxvY2F0aW9uTWFya2VyJywgZnVuY3Rpb24obG9jYXRpb24pe1xuICAgICAgICAgICAgICAgIGRyYXdEcm9wRG93bihsb2NhdGlvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAndXBkYXRlQW5kRHJhd1Bvc3RzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB1cGRhdGVBbmREcmF3UG9zdHMoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICdkcmF3UmVzcG9uc2VzJywgZnVuY3Rpb24ocG9zdCl7XG4gICAgICAgICAgICAgICAgZHJhd1Jlc3BvbnNlcyhwb3N0KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICd1bkRyYXdQb3N0JywgZnVuY3Rpb24ocG9zdGlkKXtcbiAgICAgICAgICAgICAgICB1bkRyYXdQb3N0KHBvc3RpZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFN0eWxlRm9yTWFwKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8g6rmU64GU7J20IFxuICAgICAgICAgICAgLy92YXIgZmVhdHVyZU9wdHMgPSBbe1wiZmVhdHVyZVR5cGVcIjpcImFkbWluaXN0cmF0aXZlXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLnRleHQuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzYxOTVhMFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmMmYyZjJcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZmZmZmZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2lcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5wYXJrXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2U2ZjNkNlwifSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInNhdHVyYXRpb25cIjotMTAwfSx7XCJsaWdodG5lc3NcIjo0NX0se1widmlzaWJpbGl0eVwiOlwic2ltcGxpZmllZFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwic2ltcGxpZmllZFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjRkMmM1XCJ9LHtcInZpc2liaWxpdHlcIjpcInNpbXBsaWZpZWRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLnRleHRcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiM0ZTRlNGVcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmNGY0ZjRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy50ZXh0LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiM3ODc4NzhcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy5pY29uXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ0cmFuc2l0XCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2VhZjZmOFwifSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNlYWY2ZjhcIn1dfV07XG4gICAgICAgICAgICAvLyDsg4HtgbzsnbRcbiAgICAgICAgICAgIC8vdmFyIGZlYXR1cmVPcHRzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGUubWFuX21hZGVcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2Y3ZjFkZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGUubmF0dXJhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZDBlM2I0XCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZS5uYXR1cmFsLnRlcnJhaW5cIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kuYnVzaW5lc3NcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5tZWRpY2FsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmYmQzZGFcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLnBhcmtcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2JkZTZhYlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuc3Ryb2tlXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmZlMTVmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LnN0cm9rZVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2VmZDE1MVwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZmZmZmZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmxvY2FsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiYmxhY2tcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwidHJhbnNpdC5zdGF0aW9uLmFpcnBvcnRcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjY2ZiMmRiXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNhMmRhZjJcIn1dfV07XG4gICAgICAgICAgICAvLyDrmJHrmJHsnbRcbiAgICAgICAgICAgIC8vdmFyIGZlYXR1cmVPcHRzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM3ZmM4ZWRcIn0se1wic2F0dXJhdGlvblwiOjU1fSx7XCJsaWdodG5lc3NcIjotNn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjN2ZjOGVkXCJ9LHtcInNhdHVyYXRpb25cIjo1NX0se1wibGlnaHRuZXNzXCI6LTZ9LHtcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kucGFya1wiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzgzY2VhZFwifSx7XCJzYXR1cmF0aW9uXCI6MX0se1wibGlnaHRuZXNzXCI6LTE1fSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmM2Y0ZjRcIn0se1wic2F0dXJhdGlvblwiOi04NH0se1wibGlnaHRuZXNzXCI6NTl9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmZmZmZmZcIn0se1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjEwMH0se1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmZmZmZmZcIn0se1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjEwMH0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNiYmJiYmJcIn0se1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjI2fSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZmZjYzAwXCJ9LHtcInNhdHVyYXRpb25cIjoxMDB9LHtcImxpZ2h0bmVzc1wiOi0zNX0se1widmlzaWJpbGl0eVwiOlwic2ltcGxpZmllZFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmZmNjMDBcIn0se1wic2F0dXJhdGlvblwiOjEwMH0se1wibGlnaHRuZXNzXCI6LTIyfSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kuc2Nob29sXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2Q3ZTRlNFwifSx7XCJzYXR1cmF0aW9uXCI6LTYwfSx7XCJsaWdodG5lc3NcIjoyM30se1widmlzaWJpbGl0eVwiOlwib25cIn1dfV07XG4gICAgICAgICAgICAvLyDstIjroZ3snbRcbiAgICAgICAgICAgIHZhciBmZWF0dXJlT3B0cyA9IFt7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI0ZGQTgwMFwifSx7XCJzYXR1cmF0aW9uXCI6MH0se1wibGlnaHRuZXNzXCI6MH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjNTNGRjAwXCJ9LHtcInNhdHVyYXRpb25cIjotNzN9LHtcImxpZ2h0bmVzc1wiOjQwfSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjRkJGRjAwXCJ9LHtcInNhdHVyYXRpb25cIjowfSx7XCJsaWdodG5lc3NcIjowfSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQubG9jYWxcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjMDBGRkZEXCJ9LHtcInNhdHVyYXRpb25cIjowfSx7XCJsaWdodG5lc3NcIjozMH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiMwMEJGRkZcIn0se1wic2F0dXJhdGlvblwiOjZ9LHtcImxpZ2h0bmVzc1wiOjh9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzY3OTcxNFwifSx7XCJzYXR1cmF0aW9uXCI6MzMuNH0se1wibGlnaHRuZXNzXCI6LTI1LjR9LHtcImdhbW1hXCI6MX1dfV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBzdHlsZWRNYXBPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdDdXN0b20gU3R5bGUnXG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBjdXN0b21NYXBUeXBlID0gbmV3IGdvb2dsZS5tYXBzLlN0eWxlZE1hcFR5cGUoZmVhdHVyZU9wdHMsIHN0eWxlZE1hcE9wdGlvbnMpO1xuICAgICAgICAgICAgbWFwLm1hcFR5cGVzLnNldChDTE9VRF9NQVBfSUQsIGN1c3RvbU1hcFR5cGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW5pdCB0aGUgbWFwXG4gICAgICAgIGZ1bmN0aW9uIGluaXRNYXAoKSB7XG4gICAgICAgICAgICBpZiAobWFwID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsTWFwRGF0YSgpO1xuXG4gICAgICAgICAgICAgICAgc2V0TWFudWFsRXZlbnRzKCk7XG5cbiAgICAgICAgICAgICAgICBzZXRTdHlsZUZvck1hcCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBicm9hZGNhc3QgdG8gc2VuZCBtYXAgdG8gYXBwbGljYXRpb24gY3RybFxuICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ21hcEluaXQnLCBtYXApO1xuXG4gICAgICAgICAgICAvLyBhZGQgVUkgZWxlbWVudHMgdG8gbWFwXG4gICAgICAgICAgICBzZXRVSVNlYXJjaEJveCgpO1xuICAgICAgICAgICAgc2V0VUlNb3ZlVG9DdXJyTG9jQnRuKCk7XG4gICAgICAgICAgICBzZXRVSVBvc3RGb3JtKCk7XG4gICAgICAgICAgICBzZXRVSVBvc3RCdG4oKTtcbiAgICAgICAgICAgIHNldFVJVGltZVNsaWRlcigpO1xuXG4gICAgICAgICAgICAvLyBhZGQgb3JpZ2luIG5hdGl2ZSBFdmVudCBoYW5kbGVycyB0byBtYXBcbiAgICAgICAgICAgIHNldEV2ZW50Q2xpY2soKTtcbiAgICAgICAgICAgIHNldEV2ZW50Q2VudGVyQ2hhbmdlZCgpO1xuICAgICAgICAgICAgc2V0RXZlbnREcmFnRW5kKCk7XG4gICAgICAgICAgICBzZXRFdmVudFJlc2l6ZSgpO1xuICAgICAgICAgICAgc2V0RXZlbnRab29tQ2hhbmdlZCgpO1xuICAgICAgICAgICAgc2V0RXZlbnRCb3VuZHNDaGFuZ2VkKCk7XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSB2ZXJ5IGZpcnN0IHRpbWUgZm9yIGFwcFxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHVwZGF0ZURlZmF1bHRMb2NhdGlvbigpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVdhdGNoTG9jYXRpb24oKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVBbmREcmF3UG9zdHMoKTtcbiAgICAgICAgICAgIH0sIDgwMCk7XG4gICAgICAgIH0gXG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gRVhFQ1VURVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBpbml0TWFwKCk7XG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgaWQ9XCJtYXAtY2FudmFzXCI+PC9kaXY+JyxcbiAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgbGluazogbGlua1xuICAgIH07XG59KTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZGlyZWN0aXZlKCdtYXBNc2cnLCBmdW5jdGlvbiAoJHRpbWVvdXQpIHtcblxuICAgIHZhciBsaW5rID0gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7ICAgICAgICBcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBDT1VQTElORyBDTEFTU1xuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvKiBjb3VwbGluZyBzdGF0dXNcbiAgICAgICAgICAwIC0gbm8gc3RhdHVzXG4gICAgICAgICAgMSAtIGkgbGlrZSB5b3VcbiAgICAgICAgICAyIC0geW91IGxpa2UgaVxuICAgICAgICAgIDQgLSB3ZSBsaWtlIGVhY2ggb3RoZXJcbiAgICAgICAgKi9cbiAgICAgICAgc2NvcGUuZ2V0X2NvdXBsaW5nID0gZnVuY3Rpb24oY291cGxpbmdfc3RhdHVzKXtcbiAgICAgICAgICBpZiAoY291cGxpbmdfc3RhdHVzID09IDQpe1xuICAgICAgICAgICAgcmV0dXJuIFwiYnViYmxlUG9zdCBidWJibGVQb3N0X2NvdXBsZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChjb3VwbGluZ19zdGF0dXMgPT0gMSl7XG4gICAgICAgICAgICByZXR1cm4gXCJidWJibGVQb3N0IGJ1YmJsZVBvc3RfaWxpa2V5b3VcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoY291cGxpbmdfc3RhdHVzID09IDIpe1xuICAgICAgICAgICAgcmV0dXJuIFwiYnViYmxlUG9zdCBidWJibGVQb3N0X3lvdWxpa2VpXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiYnViYmxlUG9zdCBidWJibGVQb3N0X25vbmVcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gRE9DVU1FTlQgUkVBRFlcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gYXMgdGhlIGRvY3VtZW50IGdldHMgcmVhZHksIHNldCBjbGljayBldmVudCBhbmQgbGlmZWJhciBhbmltYXRpb24gbGVuZ3RoXG4gICAgICAgIHZhciBtYW51YWxDbGljayA9IGZhbHNlO1xuXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICB1cGRhdGVHdWlkVGFyZ2V0KCk7XG5cbiAgICAgICAgICB1cGRhdGVQb3N0VGltZXIoKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVHdWlkVGFyZ2V0KCl7XG4gICAgICAgICAgLy8gdXBkYXRlIHN0YXR1cyBmb3IgZ3VpZCB0YXJnZXRcbiAgICAgICAgICB2YXIgcG9zdGd1aWQgPSBzY29wZS5wb3N0Z3VpZDtcbiAgICAgICAgICB2YXIgbXlndWlkID0gc2NvcGUuJHBhcmVudC5ndWlkO1xuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2ICNidWJibGVDbGljaycpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vIGNsaWNraW5nIGl0cyBvd24gcG9zdCB3aWxsIGRvIG5vdGhpbmdcbiAgICAgICAgICAgIGlmIChwb3N0Z3VpZCA9PSBteWd1aWQpe1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHRoaXMgaGF2ZSB0byBiZSB1cGRhdGUgdG8gYmUgY29tbXVuaWNhdGVkIHRocm91Z2ggdGhlIHNlcnZlclxuXG4gICAgICAgICAgICBpZiAoc2NvcGUuJHBhcmVudC5ndWlkdGd0ID09IDApe1xuICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0OmNvdXBsaW5nJywgMSk7IC8vIHByb3BhZ2F0ZSB0byB1cHBlciBzY29wZSBmb3IgY291cGxpbmcgdXBkYXRlXG4gICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdzZXQ6Z3VpZHRndCcsIHBvc3RndWlkKTsgLy8gcHJvcGFnYXRlIHRvIHVwcGVyIHNjb3BlIGZvciBndWlkdGd0IHVwZGF0ZVxuICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTsgLy8gZm9yY2UgdG8gdXBkYXRlIERPTVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcGUucG9zdGNvdXBsZXN0YXR1cyA9PSAxICYmIHNjb3BlLiRwYXJlbnQuZ3VpZHRndCAhPSAwKXtcbiAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3NldDpjb3VwbGluZycsIDApOyAvLyBwcm9wYWdhdGUgdG8gdXBwZXIgc2NvcGUgZm9yIGNvdXBsaW5nIHVwZGF0ZVxuICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0Omd1aWR0Z3QnLCAwKTsgLy8gcHJvcGFnYXRlIHRvIHVwcGVyIHNjb3BlIGZvciBndWlkdGd0IHVwZGF0ZVxuICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTsgLy8gZm9yY2UgdG8gdXBkYXRlIERPTVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVQb3N0VGltZXIoKXtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkxpZmUgJTpcIiwgc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlKTtcblxuICAgICAgICAgIC8vIHNldCB0aW1lciBmb3IgcG9zdCBsaWZlIGJhclxuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBzY29wZS5wb3N0bGlmZSArIFwibXNcIjtcbiAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uJywgZHVyYXRpb24pO1xuXG4gICAgICAgICAgICBpZiAoc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID4gMC43NSl7XG4gICAgICAgICAgICAgIC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqL1xuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgLnBvc3RsaWZlYmFyJykuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9xX2ZvdXInKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9xX2ZvdXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA8PSAwLjc1ICYmIHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA+IDAuNSl7XG4gICAgICAgICAgICAgIC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqL1xuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgLnBvc3RsaWZlYmFyJykuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9xX3RocmVlJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgLnBvc3RsaWZlYmFyJykuY3NzKCdhbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fcV90aHJlZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlIDw9IDAuNSAmJiBzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPiAwLjIwKXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX3FfdHdvJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgLnBvc3RsaWZlYmFyJykuY3NzKCdhbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fcV90d28nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqL1xuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgLnBvc3RsaWZlYmFyJykuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9xX29uZScpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2IC5wb3N0bGlmZWJhcicpLmNzcygnYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX3Ffb25lJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy4vdGVtcGxhdGVzL3dpbmRvdy5odG1sJyxcbiAgICAgICAgbGluazogbGlua1xuICAgIH07XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcci5jb250cm9sbGVyKCdQb3N0c0N0cmwnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlLCBQb3N0c1N2YywgJHdpbmRvdywgJGRvY3VtZW50KXtcclxyXHQvKiBlbWl0IGJyb2FkY2FzdCBmb3IgY3VycmVudCBwYWdlSWQgKi9cclx0JHNjb3BlLiRlbWl0KCdwYWdlY2hhbmdlJywgJHNjb3BlLnBhZ2VJZC5wb3N0KTtcclxyXHQkc2NvcGUucG9zdHMgPSBbXTtcclxyXHQvKiBhcyBzZXJ2ZXIgdGVsbHMgdGhlcmUgd2FzIG5ldyBwb3N0LCBsZXRzIHJlLWxvYWQgbGlzdCBkYXRhICovXHJcdCRzY29wZS4kb24oJ3dzOm5ld19wb3N0JywgZnVuY3Rpb24oXywgcG9zdCl7XHJcdFx0JHNjb3BlLnJlcXVlc3RGZXRjaCgpO1xyXHR9KTtcclxyXHQkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uKCkge1xyXHRcdC8qIGdldCBhdXRvY29tcGxldGVkIHBsYWNlIGFuZCByZXNldChzZXQgdG8gdW5kZWZpbmVkKSAqL1xyXHRcdHZhciBwbGFjZSA9ICRzY29wZS5wb3N0cGxhY2U7XHJcdFx0dmFyIGxvY2F0aW9uID0gJHNjb3BlLnBvc3RMb2NhdGlvbjtcclxyXHRcdHZhciBsb2NhdGlvbkpTT04gPSBKU09OLnN0cmluZ2lmeShsb2NhdGlvbik7XHJcclx0XHRQb3N0c1N2Yy5jcmVhdGUoXHJcdFx0e1xyXHRcdFx0Ym9keSAgICA6ICAkc2NvcGUuY29udGVudCxcclx0XHRcdGxvY2F0aW9uOiAgbG9jYXRpb25KU09OLFxyXHRcdFx0cGxhY2UgICA6ICBwbGFjZSxcclx0XHRcdGd1aWQgICAgOiAgJHNjb3BlLmd1aWQsXHJcdFx0XHRndWlkdGd0IDogICRzY29wZS5ndWlkdGd0XHJcdFx0fSlcclx0XHQuc3VjY2VzcyhmdW5jdGlvbihwb3N0KXtcclx0XHRcdC8qIG1hbnVhbGx5IHJlbG9hZCBtYXJrZXJzIFxyXHRcdFx0dXNpbmcgbWFwdHlwZWlkIHNpbmNlIGl0cyBtb3N0IGxlYXN0IHVzZWQgZXZlbnQsIC0ga2luZCBvZiBoYWNreSB3YXkgdG8gZG8gaXRcclx0XHRcdCovXHJcdFx0XHRnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKCRzY29wZS5tYXAsICdtYXB0eXBlaWRfY2hhbmdlZCcpO1xyXHJcdFx0XHQkc2NvcGUucG9zdHMudW5zaGlmdChwb3N0KTtcclxyXHRcdFx0LyogMTDstIjrs7Tri6Qg6ri0IOqyveyasOydmCDqsoPrp4wg7ISc67KE6rCAIOqzhOyCsOydhCDtlZjqs6Ag7ISc67KE6rCAIOuztOuCtOykmOyEnCBmcm9udGVuZOyXkOyEnCDsp4DsmrDrj4TroZ0g6rSA66as7ZW07KSY7JW8IO2VnOuLpC5cclx0XHRcdCDrpqzsiqTtirjsnbjrjbAg7ZiE7J6s64qUIOyViOuztOydtOqyjCDtlbTrkZQg7IOBICovXHIgICAgICAgICAgICB2YXIgbWF4SW5zdGFudExpZmVTcGFuID0gMTAwMDA7XHIgICAgICAgICAgICBpZiAocG9zdC5saWZlc3BhbiA8IG1heEluc3RhbnRMaWZlU3Bhbil7XHIgICAgICAgICAgICBcdC8qIGZyb250IGVuZCBzaWRlIGxpc3QgcG9zdCByZW1vdmUgKi9cclx0XHRcdFx0dmFyIGZyb250RW5kUG9zdFJlbW92ZSA9IGZ1bmN0aW9uKCl7IFxyXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLnBvc3RzLmxlbmd0aDsgKytpKXtcclx0XHRcdFx0XHRcdGlmIChwb3N0Ll9pZCA9PSAkc2NvcGUucG9zdHNbaV0uX2lkKVxyXHRcdFx0XHRcdFx0e1xyXHRcdFx0XHRcdFx0XHQkc2NvcGUucG9zdHMuc3BsaWNlKGksIDEpO1xyXHRcdFx0XHRcdFx0fVxyXHRcdFx0XHRcdH1cclx0XHRcdFx0fTtcclx0XHRcdFx0c2V0VGltZW91dChmcm9udEVuZFBvc3RSZW1vdmUsIHBvc3QubGlmZXNwYW4pO1xyICAgICAgICAgICAgfVxyXHRcdFx0XHJcclx0XHRcdC8qIHJlc2V0IGlucHV0IGZvcm1zICovXHJcdFx0XHQkc2NvcGUuY29udGVudCAgPSBudWxsO1xyXHRcdH0pXHJcdFx0LmVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cyl7XHJcdFx0XHRzd2FsKFwiUG9zdCBmYWlsZWRcIiwgXCJQbGVhc2UgY29tcGxldGUgdGhlIGZyb20gY29ycmVjdGx5XCIsIFwiZXJyb3JcIik7XHJcdFx0fSk7XHJcclx0fTtcclxyXHQvKiBhcyBzZXJ2ZXIgdGVsbHMgdGhlcmUgd2FzIG5ldyBwb3N0LCBsZXRzIHJlLWxvYWQgbGlzdCBkYXRhICovXHJcdCRzY29wZS5yZXF1ZXN0RmV0Y2ggPSBmdW5jdGlvbigpIHtcclx0XHRQb3N0c1N2Yy5mZXRjaCgpXHJcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocG9zdHMpe1xyXHRcdFx0JHNjb3BlLnBvc3RzID0gcG9zdHM7XHJcdFx0fSk7XHJcdH07XHJcclx0JHNjb3BlLnJlcXVlc3RGZXRjaCgpO1xyfSk7XHIiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdQb3N0c1N2YycsIGZ1bmN0aW9uKCRodHRwKXtcblx0dGhpcy5mZXRjaCA9IGZ1bmN0aW9uKCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9wb3N0cycpO1xuXHR9O1xuXG5cdHRoaXMuY3JlYXRlID0gZnVuY3Rpb24ocG9zdCl7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcG9zdHMnLCBwb3N0KTtcblx0fTtcblxuXHR0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKHBvc3Qpe1xuXHRcdGNvbnNvbGUubG9nKFwiZGVsZXRpbmcgcG9zdGluZ1wiKTtcblx0XHRjb25zb2xlLmxvZygncG9zdC5faWQ6JywgcG9zdC5faWQpO1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvcG9zdHMnLCBwb3N0KTtcblx0fTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1Nlc3Npb25TdmMnLCBmdW5jdGlvbigkaHR0cCl7XG5cdHRoaXMuZmV0Y2ggPSBmdW5jdGlvbigpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc2Vzc2lvbnMnKTtcblx0fTtcblxuXHR0aGlzLmVudGVyID0gZnVuY3Rpb24oc2Vzc2lvbil7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLCBzZXNzaW9uKTtcblx0fTtcblxuXHR0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKGd1aWQpe1xuXHRcdGNvbnNvbGUubG9nKFwiZGVsZXRpbmcgc2Vzc2lvblwiKTtcblx0XHRjb25zb2xlLmxvZygnc2Vzc2lvbi5ndWlkOicsIGd1aWQpO1xuXHRcdHZhciBzZXNzaW9uID0ge2d1aWQ6IGd1aWR9O1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvc2Vzc2lvbnMnLCBzZXNzaW9uKTtcblx0fTtcblxuXHR0aGlzLnVwZGF0ZVdhdGNoTG9jYXRpb24gPSBmdW5jdGlvbihjdXJyZW50X21hcF9udywgY3VycmVudF9tYXBfc2UsIGN1cnJlbnRfbWFwX2NlbnRlciwgZ3VpZCl7XG5cdFx0dmFyIHdhdGNobG9jID0ge1xuICAgICAgICAgICAgbndfbGF0ICAgIDogY3VycmVudF9tYXBfbncubGF0LFxuICAgICAgICAgICAgbndfbG9uICAgIDogY3VycmVudF9tYXBfbncubG9uLFxuICAgICAgICAgICAgc2VfbGF0ICAgIDogY3VycmVudF9tYXBfc2UubGF0LFxuICAgICAgICAgICAgc2VfbG9uXHQgIDogY3VycmVudF9tYXBfc2UubG9uLFxuICAgICAgICAgICAgY2VudGVyX2xhdDogY3VycmVudF9tYXBfY2VudGVyLmxhdCxcbiAgICAgICAgICAgIGNlbnRlcl9sb246IGN1cnJlbnRfbWFwX2NlbnRlci5sb25cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB3YXRjaGxvY0pTT04gPSBKU09OLnN0cmluZ2lmeSh3YXRjaGxvYyk7XG5cbiAgICAgICAgdmFyIHVwZGF0ZWRzZXNzaW9uID0ge1xuICAgICAgICAgICAgd2F0Y2hsb2M6IHdhdGNobG9jSlNPTixcbiAgICAgICAgICAgIGd1aWQ6IGd1aWRcbiAgICAgICAgfTtcblxuICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgY29uc29sZS5sb2coXCJ1cGRhdGluZyB3YXRjaCBsb2NhdGlvblwiKTtcblx0XHRjb25zb2xlLmxvZyhcInVwZGF0ZWRzZXNzaW9uOlwiLCB1cGRhdGVkc2Vzc2lvbik7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMvdXBkYXRlJywgdXBkYXRlZHNlc3Npb24pO1xuXHR9O1xufSk7XG4iLCJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG5cdCduZ1JvdXRlJyxcbl0pO1xuXG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ3RybCcsIGZ1bmN0aW9uKFNlc3Npb25TdmMsICRyb290U2NvcGUsICRzY29wZSwgJHdpbmRvdywgJGh0dHAsICR0aW1lb3V0KXtcblxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gSU5JVElBTFxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgZnVuY3Rpb24gZ3VpZCgpIHtcblx0XHRmdW5jdGlvbiBzNCgpIHtcblx0XHQgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXG5cdFx0ICAgICAgLnRvU3RyaW5nKDE2KVxuXHRcdCAgICAgIC5zdWJzdHJpbmcoMSk7XG5cdFx0fVxuXHQgIFx0cmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpO1xuXHR9XG5cblx0JHNjb3BlLmd1aWQgPSBndWlkKCk7XG5cblx0JHNjb3BlLnBhZ2VJZCA9IHsgXG5cdFx0cG9zdCA6IDAsXG5cdH07XG5cblx0JHNjb3BlLnNsaWRlck9wdGlvbnMgPSB7XG4gICAgICAgIGZyb206IDEsXG4gICAgICAgIHRvOiAzMDAwMDAsXG4gICAgICAgIHN0ZXA6IDUwMDAsXG4gICAgICAgIGRpbWVuc2lvbjogJyBrbScsXG4gICAgICAgIHZlcnRpY2FsOiBmYWxzZSxcbiAgICAgICAgbGltaXRzOiBmYWxzZSxcbiAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB7J2JhY2tncm91bmQtY29sb3InOiAneWVsbG93J30sXG4gICAgICAgICAgICBiZWZvcmU6IHsnYmFja2dyb3VuZC1jb2xvcic6ICdwdXJwbGUnfSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IHsnYmFja2dyb3VuZC1jb2xvcic6ICd3aGl0ZSd9LFxuICAgICAgICAgICAgYWZ0ZXI6IHsnYmFja2dyb3VuZC1jb2xvcic6ICdncmVlbid9LFxuICAgICAgICAgICAgcG9pbnRlcjogeydiYWNrZ3JvdW5kLWNvbG9yJzogJ3JlZCd9XG4gICAgICAgIH0sXG4gICAgfTtcblxuXHQkc2NvcGUubmF2Q29sbGFwc2VkID0gdHJ1ZTtcblxuXHQkc2NvcGUuZ3VpZHRndCA9IFwiMFwiOyAvLyDquLDrs7jqsJLsnYAgMOycvOuhnCDtlbTshJwgMOydtOuptCDqtIDsi6zsg4HrjIBndWlk6rCAIOyXhuuKlCDsg4Htg5zsnbTri6QuIFxuXG5cdC8qXG5cdC8vIOyciOuPhOyasOqwgCDri6vtnojroKTqs6Ag7ZWY66m0IOumrO2AmOyKpO2KuCDrs7Trgrjri6QhIOycoOyguCDshLjshZjsnYQg64ur7Jy865286rOgIVxuXHR3aW5kb3cub251bmxvYWQgPSBmdW5jdGlvbiAoKXtcblx0XHRTZXNzaW9uU3ZjLnJlbW92ZSgkc2NvcGUuZ3VpZCk7IC8vIOyEnOuyhOyXkOyEnCDsnKDsoIDqsIAg64KY6rCQ7J2EIOyVjOumsOuLpFxuXHR9O1xuXHQqL1xuXHQvKlxuXHR3aW5kb3cudW5sb2FkID0gb25jaGFuZ2U7XG5cblx0ZG9jdW1lbnQudW5sb2FkID0gb25jaGFuZ2U7XG5cblx0ZnVuY3Rpb24gb25jaGFuZ2UgKGV2dCkge1xuXHQgICAgYWxlcnQoXCJTZXNzaW9uIGRlbGV0ZVwiKTtcblx0ICAgIFNlc3Npb25TdmMucmVtb3ZlKCRzY29wZS5ndWlkKTtcblx0ICB9XG5cdCovXG5cblx0d2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24oKXtcblx0XHRTZXNzaW9uU3ZjLnJlbW92ZSgkc2NvcGUuZ3VpZCk7XG5cdH07XG5cblx0Lypcblx0d2luZG93LnBhZ2VoaWRlID0gZnVuY3Rpb24oKXtcblx0XHQgLy8g7ISc67KE7JeQ7IScIOycoOyggOqwgCDrgpjqsJDsnYQg7JWM66aw64ukXG5cdFx0YWxlcnQoXCJvbiBiZWZvcmUgdW5sb2FkXCIpO1xuXHR9XG5cdCovXG5cdFxuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBTT0NLRVRcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHR2YXIgdXJsO1xuXHR2YXIgaG9zdG5hbWUgPSBkb2N1bWVudC5sb2NhdGlvbi5ob3N0bmFtZTtcblx0dmFyIGRldmVsb3BtZW50SVAgPSBcIjE5Mi4xNjguMC40XCI7XG5cblx0aWYgKGhvc3RuYW1lID09IFwibG9jYWxob3N0XCIpe1xuXHRcdHVybCA9IFwid3M6Ly9sb2NhbGhvc3Q6NTAwMFwiO1xuXHR9XG5cdGVsc2UgaWYgKGhvc3RuYW1lID09IGRldmVsb3BtZW50SVApIHtcblx0XHR1cmwgPSAnd3M6Ly8xOTIuMTY4LjAuNDo1MDAwJzsgLy8gZGV2ZWxvcG1ldCBvbiBzb2NrZXQgbG9jYWxseSBcblx0fVxuXHRlbHNlIHtcblx0XHR1cmwgPSAnd3NzOi8vY2xvdWR0YWxrLmhlcm9rdWFwcC5jb20nOyAvLyBwcm9kdWN0aW9uIGRlcGxveSB2ZXJzaW9uIC0gc3RpbGwgZGVidWcgbW9kZVxuXHR9XG5cblx0Lyog6rCc67Cc6rO87KCV7J20IOuBneuCmOqzoCDrsLDtj6zsi5zsl5DripQg7JyE67aA67aE7J2EIOyngOyasOqzoCDslYTrnpgg7L2U65Oc66eMIOuCqOqyqOuPhCDrkJzri6QuXG5cdHVybCA9ICd3c3M6Ly9mcm96ZW4tYmFkbGFuZHMtODY0OS5oZXJva3VhcHAuY29tJztcblx0Ki9cblx0dmFyIGNvbm5lY3QgPSBmdW5jdGlvbigpIHtcblx0XHRjb25uZWN0aW9uID0gbmV3IFdlYlNvY2tldCh1cmwpO1xuXG5cdFx0Y29ubmVjdGlvbi5vbm9wZW4gPSBmdW5jdGlvbigpe1xuXHRcdFx0ZnVuY3Rpb24gZ2V0Q3VyckxvY1N1Y2Nlc3MocG9zKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLy8vLy8vLy8vLy8vLy8vLy8gUEhZU0lDQUwgTE9DQVRJT05cblx0XHRcdFx0Ly8g66eo7LKY7J2M7JeQ64qUIOycoOyggOydmCDsi6TsoJwg7JyE7LmYKOyVseyXkCDsnoXsnqXtlojsnYTrlYzsnZgg7JyE7LmYKeyZgCDshLzthLAg7Y+s7KeA7IWY7J2EIOqwmeydtCDrs7TrgrTqs6AsXG5cdFx0XHRcdC8vIOyEvO2EsCDtj6zsp4DshZjsnYAg6rOE7IaNIOyXheuNsOydtO2KuCDrkJjslrTslbwg7ZWc64ukLlxuXHQgICAgICAgICAgICB2YXIgY3JkID0gcG9zLmNvb3JkcztcblxuXHQgICAgICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhjcmQubGF0aXR1ZGUsIGNyZC5sb25naXR1ZGUpO1xuXG5cdCAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHtcblx0ICAgICAgICBcdFx0bGF0Omdvb2dsZUxvYy5sYXQoKSxcblx0ICAgICAgICBcdFx0bG9uOmdvb2dsZUxvYy5sbmcoKVxuXHQgICAgICAgIFx0fTtcblx0ICAgICAgICBcdHZhciBsb2NhdGlvbkpTT04gPSBKU09OLnN0cmluZ2lmeShsb2NhdGlvbik7XG5cdCAgICAgICAgXHRjb25zb2xlLmxvZyhcInNldHRpbmcgbG9jYXRpb25cIiwgbG9jYXRpb25KU09OKTtcblxuXHQgICAgICAgIFx0Ly8vLy8vLy8vLy8vLy8vLy8vIFdBVENIIExPQ0FUSU9OXG5cdCAgICAgICAgXHR2YXIgYm91bmRzID0gJHNjb3BlLm1hcC5nZXRCb3VuZHMoKTtcblx0ICAgICAgICAgICAgdmFyIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIG5vcnRoLWVhc3QgY29ybmVyXG5cdCAgICAgICAgICAgIHZhciBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBzb3V0aC13ZXN0IGNvcmRlclxuXHQgICAgICAgICAgICAvL1lvdSBnZXQgbm9ydGgtd2VzdCBhbmQgc291dGgtZWFzdCBjb3JuZXJzIGZyb20gdGhlIHR3byBhYm92ZTpcblxuXHQgICAgICAgICAgICB2YXIgY3VycmVudF9tYXBfbncgPSB7IFxuXHQgICAgICAgICAgICAgICAgbGF0OiBuZS5sYXQoKSwgXG5cdCAgICAgICAgICAgICAgICBsb246IHN3LmxuZygpXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50X21hcF9zZSA9IHtcblx0ICAgICAgICAgICAgICAgIGxhdDogc3cubGF0KCksIFxuXHQgICAgICAgICAgICAgICAgbG9uOiBuZS5sbmcoKVxuXHQgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50X21hcF9jZW50ZXIgPSB7XG5cdCAgICAgICAgICAgIFx0bGF0OndpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUsXG5cdCAgICAgICAgICAgIFx0bG9uOndpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlXG5cdCAgICAgICAgXHR9O1xuXG5cdCAgICAgICAgICAgIHZhciB3YXRjaGxvYyA9IHtcblx0XHQgICAgICAgICAgICBud19sYXQgICAgOiBjdXJyZW50X21hcF9udy5sYXQsXG5cdFx0ICAgICAgICAgICAgbndfbG9uICAgIDogY3VycmVudF9tYXBfbncubG9uLFxuXHRcdCAgICAgICAgICAgIHNlX2xhdCAgICA6IGN1cnJlbnRfbWFwX3NlLmxhdCxcblx0XHQgICAgICAgICAgICBzZV9sb25cdCAgOiBjdXJyZW50X21hcF9zZS5sb24sXG5cdFx0ICAgICAgICAgICAgY2VudGVyX2xhdDogY3VycmVudF9tYXBfY2VudGVyLmxhdCxcblx0XHQgICAgICAgICAgICBjZW50ZXJfbG9uOiBjdXJyZW50X21hcF9jZW50ZXIubG9uXG5cdFx0ICAgICAgICB9XG5cblx0ICAgICAgICBcdHZhciB3YXRjaGxvY0pTT04gPSBKU09OLnN0cmluZ2lmeSh3YXRjaGxvYyk7XG5cdCAgICAgICAgXHRjb25zb2xlLmxvZyhcInNldHRpbmcgd2F0Y2hsb2NcIiwgd2F0Y2hsb2NKU09OKTtcblx0ICAgICAgICAgICAgXG5cdCAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLyBMT0NBVElPTiBVUERBVEUgV0lUSCBTRVNTSU9OIEVOVEVSXG5cdCAgICAgICAgICAgIC8v7Jes6riw7IScIOu5hOuPmeq4sOyggeycvOuhnCDsnKDsoIDsnZgg66Gc7LyA7J207IWY7J2EIOyWu+qzoCDshLjshZjsnYQg67O064K87IiYIOyeiOuLpC5cblx0XHRcdFx0dmFyIHNlc3Npb24gPSB7XG5cdFx0XHRcdFx0Z3VpZDogICAgICRzY29wZS5ndWlkLFxuXHRcdFx0XHRcdGxvY2F0aW9uOiBsb2NhdGlvbkpTT04sXG5cdFx0XHRcdFx0d2F0Y2hsb2M6IHdhdGNobG9jSlNPTlxuXHRcdFx0XHR9O1xuXHRcdFx0XHRTZXNzaW9uU3ZjLmVudGVyKHNlc3Npb24pOyAvLyDshJzrsoTsl5DshJwg7Jyg7KCA6rCAIOuTpOyWtOyYtOydhCDslYzrprDri6QuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgZnVuY3Rpb24gZ2V0Q3VyckxvY0Vycm9yKGVycikge1xuXHQgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0VSUk9SKCcgKyBlcnIuY29kZSArICcpOiAnICsgZXJyLm1lc3NhZ2UpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8qIGluaXQgbWFwIGFuZCBwbGFjZSBzb21lIG1hcmtlcnMsIHNvIGV2ZXJ5dGhpbmcgc3RhcnQgd2l0aCB0aGlzIGZ1bmN0aW9uLiAqL1xuXHQgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZ2V0Q3VyckxvY1N1Y2Nlc3MsIGdldEN1cnJMb2NFcnJvcik7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY29ubmVjdGVkJyk7XG5cdFx0fTtcblxuXHRcdGNvbm5lY3Rpb24ub25jbG9zZSA9IGZ1bmN0aW9uKCl7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY2xvc2VkLiBSZWNvbmVjdGluZy4uLicpO1xuXHRcdFx0JHRpbWVvdXQoY29ubmVjdCwgMjAwMCk7XG5cdFx0fTtcblxuXHRcdGNvbm5lY3Rpb24ub25tZXNzYWdlID0gZnVuY3Rpb24oZSl7XG5cdFx0XHRjb25zb2xlLmxvZygnYnJvYWRjYXN0IG1zZyBmcm9tIHNlcnZlcjonLCBlKTtcblx0XHRcdHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZShlLmRhdGEpO1xuXG5cdFx0XHQvKlxuXHRcdFx0XHR3czpuZXdfcG9zdCAgICAtIOyDiOuhnOyatCDtj6zsiqTtirjqsIAg7Jis65287JmU7J2E65WMIGZyb250LWVuZOyXkOyEnCDrp7XsnbQg64uk7IucIOyXheuNsOydtO2KuCDtlbTslbwg65Cc64uk6rOgIOyVjOugpOykgOuLpCFcblx0XHRcdFx0d3M6bmV3X3Nlc3Npb24gLSBzZXNzaW9u7J20IOyDiOuhnCDrk6TslrTsmKTrqbQg65Cc64uk6rOgIOyVjOugpOykgOuLpCFcblx0XHRcdFx0d3M6cmVtb3ZlX3Bvc3QgLSDtj6zsiqTtirjqsIAg7Iuc6rCE7J20IOuLpCDrkJjslrTshJwg7IKs65287KeI65WMIVxuXHRcdFx0XHTrp6TsmrDspJHsmpQhIFxuXHRcdFx0Ki9cblx0XHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnd3M6JyArIHBheWxvYWQudHlwZSwgcGF5bG9hZC5kYXRhKTtcblx0XHR9O1xuXHR9O1xuXHRjb25uZWN0KCk7XG5cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBTT0NLRVQgQlJPQURDQVNUIFJFQ0VJVkVSXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gYXMgc2VydmVyIHNvY2tldCBzZW5kICd3czpuZXdfcG9zdCcgLCB3ZSBjYW4gdXBkYXRlIHRoZSBtYXAhXG5cdCRzY29wZS4kb24oJ3dzOm5ld19wb3N0JywgZnVuY3Rpb24oXywgcG9zdCl7XG5cdFx0Ly8gdXBkYXRlIHBvc3RzXG5cdFx0JHNjb3BlLm1hcC51cGRhdGVBbmREcmF3UG9zdHMoKTtcblxuXHRcdC8vIHNob3cgcmVzcG9uc2l2ZSB1c2VycyBvbmx5IHRvIHRoZSB1c2VyIHdobyB3cm90ZSB0aGlzIHBvc3Rcblx0XHRpZiAocG9zdC5ndWlkID09ICRzY29wZS5ndWlkKVxuXHRcdHtcblx0XHRcdGNvbnNvbGUubG9nKCdzdGFydCBkcmF3aW5nIHJlc3BvbnNlcy4uJyk7XG5cdFx0XHQkc2NvcGUubWFwLmRyYXdSZXNwb25zZXMocG9zdCk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBhcyBzZXJ2ZXIgc29ja2V0IHNlbmQgJ3dzOm5ld19wb3N0JyAsIHdlIGNhbiB1cGRhdGUgdGhlIG1hcCFcblx0JHNjb3BlLiRvbignd3M6bmV3X3Nlc3Npb24nLCBmdW5jdGlvbihfLCBzZXNzaW9uKXtcblxuXHRcdHZhciBsb2NhdGlvbiA9IGFuZ3VsYXIuZnJvbUpzb24oc2Vzc2lvbi5sb2NhdGlvbik7XG5cdFx0JHNjb3BlLm1hcC5kcmF3Q3VyckxvY2F0aW9uTWFya2VyKGxvY2F0aW9uKTtcblxuXHR9KTtcblxuXHQvLyB3aGVuIHNlcnZlciByZW1vdmUgdGhlIHBvc3QgYWZ0ZXIgdGltZSBmb3IgbG9uZ2VyIG9uZXMsIFxuXHQvLyB1cGRhdGUgbWFwIHdpdGggY29yZXNwb25kaW5nIGluZm9cblx0JHNjb3BlLiRvbignd3M6cmVtb3ZlX3Bvc3QnLCBmdW5jdGlvbihfLCBwb3N0aWQpe1xuXHRcdCRzY29wZS5tYXAudW5EcmF3UG9zdChwb3N0aWQpO1xuXHR9KTtcblxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIEFQUExJQ0FUSU9OIExFVkVMIEZVTkNUSU9OU1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIHNlZSBpZiBpdHMgbW9iaWxlIHBob25lXG5cdCRzY29wZS5pc01vYmlsZSA9IGZ1bmN0aW9uKCl7XG5cdFx0aWYoIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvd2ViT1MvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBob25lL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQYWQvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBvZC9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9CbGFja0JlcnJ5L2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1dpbmRvd3MgUGhvbmUvaSlcblx0XHQgKXtcblx0XHQgICAgcmV0dXJuIHRydWU7XG5cdFx0ICB9XG5cdFx0IGVsc2Uge1xuXHRcdCAgICByZXR1cm4gZmFsc2U7XG5cdFx0ICB9XG5cdH07XG5cblx0LyogbW92ZSB0byBjdXJyZW50IGxvY2F0aW9uICovXG5cdCRzY29wZS5tb3ZlVG9DdXJyZW50TG9jYXRpb24gPSBmdW5jdGlvbigpe1xuXHRcdGZ1bmN0aW9uIGdldEN1cnJMb2NTdWNjZXNzKHBvcykge1xuICAgICAgICAgICAgLyogbWFrZSBzdXJlIHRvIGNoZWNrIHdlIGFyZSBvbiBwb3N0IHBhZ2Ugd2l0aCBtYXAgZmlyc3QgKi9cbiAgICAgICAgICAgIGlmICgkc2NvcGUuY3VycmVudFBhZ2VJZCAhPSAkc2NvcGUucGFnZUlkLnBvc3QpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgY3JkID0gcG9zLmNvb3JkcztcblxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSA9IGNyZC5sYXRpdHVkZTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlID0gY3JkLmxvbmdpdHVkZTtcblxuICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0ge1xuICAgICAgICAgICAgXHRsYXQ6IGNyZC5sYXRpdHVkZSwgXG4gICAgICAgICAgICBcdGxvbjogY3JkLmxvbmdpdHVkZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gZHJhdyBkcm9wIGRvd24gdXNlciBwb3NpdGlvblxuICAgICAgICAgICBcdCRzY29wZS5tYXAuZHJhd0N1cnJMb2NhdGlvbk1hcmtlcihsb2NhdGlvbik7XG5cbiAgICAgICAgICAgXHQvLyBkcmF3IHggbWFya2VyXG5cdCAgICAgICAgJHNjb3BlLm1hcC5kcmF3WE1hcmtlcihsb2NhdGlvbik7XG5cblx0ICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XG5cblx0ICAgICAgICAvLyBtb3ZlIHRvIHRoZSBsb2NhdGlvbiBhbmQgem9vbSBpbnRvIHJpZ2h0IGFtb3VudFxuICAgICAgICAgICAgJHNjb3BlLm1hcC5wYW5Ubyhnb29nbGVMb2MpXG4gICAgICAgICAgICAkc2NvcGUubWFwLnNldFpvb20oMTUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q3VyckxvY0Vycm9yKGVycikge1xuICAgICAgICBcdHN3YWwoXCJcIiwgXCJOZWVkIHRvIHR1cm4gb24gbG9jYXRpb24gc2VydmljZSBmb3IgcHJvcGVyIHVzZS5cIik7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0VSUk9SKCcgKyBlcnIuY29kZSArICcpOiAnICsgZXJyLm1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogaW5pdCBtYXAgYW5kIHBsYWNlIHNvbWUgbWFya2Vycywgc28gZXZlcnl0aGluZyBzdGFydCB3aXRoIHRoaXMgZnVuY3Rpb24uICovXG4gICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZ2V0Q3VyckxvY1N1Y2Nlc3MsIGdldEN1cnJMb2NFcnJvcik7XG5cbiAgICAgICAgc3dhbCh7ICAgdGl0bGU6IFwiXCIsICAgdGV4dDogXCJNb3ZpbmcgdG8gY3VycmVudCBsb2NhdGlvbi4uXCIsICAgdGltZXI6IDE1MDAsICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlIH0pO1xuXHR9O1xuXG5cdCRzY29wZS5tb3ZlVG9Qb3N0TG9jYXRpb24gPSBmdW5jdGlvbigpe1xuXHRcdHZhciBsYXREZWx0YSA9IDAuMDtcblxuXHRcdGlmICgkc2NvcGUuaXNNb2JpbGUoKSl7XG5cdFx0XHR2YXIgYm91bmRzID0gJHNjb3BlLm1hcC5nZXRCb3VuZHMoKTtcblx0ICAgICAgICB2YXIgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7IC8vIExhdExuZyBvZiB0aGUgbm9ydGgtZWFzdCBjb3JuZXJcblx0ICAgICAgICB2YXIgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCk7IC8vIExhdExuZyBvZiB0aGUgc291dGgtd2VzdCBjb3JkZXJcblx0ICAgICAgICBjdXJyZW50X21hcF9udyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobmUubGF0KCksIHN3LmxuZygpKTtcblx0ICAgICAgICBjdXJyZW50X21hcF9zZSA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoc3cubGF0KCksIG5lLmxuZygpKTtcblxuXHQgICAgICAgIHZhciBsYXREZWx0YV9jZW50ZXIybm9ydGggPSAwLjUgKiBNYXRoLmFicygkc2NvcGUucG9zdExvY2F0aW9uLmxhdCAtIGN1cnJlbnRfbWFwX253LmxhdCgpKTtcblx0ICAgICAgICB2YXIgbGF0RGVsdGFfY2VudGVyMnNvdXRoID0gMC41ICogTWF0aC5hYnMoJHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQgLSBjdXJyZW50X21hcF9zZS5sYXQoKSk7XG5cblx0ICAgICAgICBpZiAobGF0RGVsdGFfY2VudGVyMm5vcnRoID4gbGF0RGVsdGFfY2VudGVyMnNvdXRoKXtcblx0ICAgICAgICBcdGxhdERlbHRhID0gbGF0RGVsdGFfY2VudGVyMnNvdXRoO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICBcdGxhdERlbHRhID0gbGF0RGVsdGFfY2VudGVyMm5vcnRoO1xuXHQgICAgICAgIH1cblx0XHR9XG5cblx0XHR2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZygkc2NvcGUucG9zdExvY2F0aW9uLmxhdCArIGxhdERlbHRhLCAkc2NvcGUucG9zdExvY2F0aW9uLmxvbik7XG5cdFx0JHNjb3BlLm1hcC5wYW5Ubyhnb29nbGVMb2MpO1xuXHR9O1xuXG5cdCRzY29wZS5jb2xsYXBzZSA9IGZ1bmN0aW9uKCl7XG5cdFx0JHNjb3BlLm5hdkNvbGxhcHNlZCA9IHRydWU7XG5cdH07XG5cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBHRU5FUkFMIEJST0FEQ0FTVCBSRUNFSVZFUlxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgJHNjb3BlLiRvbignbWFwSW5pdCcsIGZ1bmN0aW9uKF8sIG1hcCl7XG5cdFx0JHNjb3BlLm1hcCA9IG1hcDtcblx0fSk7XG5cbiAgICAkc2NvcGUuJG9uKCdzZXQ6Z3VpZHRndCcsIGZ1bmN0aW9uKF8sIGd1aWR0Z3Qpe1xuXHRcdCRzY29wZS5ndWlkdGd0ID0gZ3VpZHRndDtcblx0fSk7XG5cblx0JHNjb3BlLiRvbigncGFnZWNoYW5nZScsIGZ1bmN0aW9uKF8sIHBhZ2VJZCl7XG5cdFx0JHNjb3BlLmN1cnJlbnRQYWdlSWQgPSBwYWdlSWQ7XG5cdH0pO1xuXG5cdCRzY29wZS4kb24oJ2xvYycsIGZ1bmN0aW9uKF8sIGxvY2F0aW9uKXtcblx0XHR2YXIgbGF0ID0gbG9jYXRpb24ubGF0KCk7XG5cdFx0dmFyIGxvbiA9IGxvY2F0aW9uLmxuZygpO1xuXHRcdCRzY29wZS5wb3N0TG9jYXRpb24gPSB7XG5cdFx0XHRsYXQ6IGxhdCxcblx0XHRcdGxvbjogbG9uXG5cdFx0fTtcblx0fSk7XG5cblx0JHNjb3BlLiRvbigncGxhY2UnLCBmdW5jdGlvbihfLCBwbGFjZSl7XG5cdFx0Ly8gRm9yY2luZyB0aGUgdXBkYXRlIHdpdGggJGFwcGx5KCkgbWV0aG9kIG9uICRzY29wZVxuXHRcdC8vIHByb2JsZW0gcmVsYXRlZCBub3RlOiBodHRwOi8vd3d3LmplZmZyeWhvdXNlci5jb20vaW5kZXguY2ZtLzIwMTQvNi8yL0hvdy1kby1JLXJ1bi1jb2RlLXdoZW4tYS12YXJpYWJsZS1jaGFuZ2VzLXdpdGgtQW5ndWxhckpTXG5cdFx0JHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuXHRcdFx0XHQkc2NvcGUucG9zdHBsYWNlID0gcGxhY2U7XG5cdFx0XHR9XG5cdFx0KTtcblx0fSk7XG59KTtcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpe1xuXHQkcm91dGVQcm92aWRlclxuXHQud2hlbignLycsIFxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXI6ICdQb3N0c0N0cmwnLCBcblx0XHRcdHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9wb3N0cy5odG1sJ1xuXHRcdH0pXG5cdC8vIFJlZGlyZWN0IHRvIHRoZSByb290IHBhZ2UuXG5cdC5vdGhlcndpc2UoXG5cdFx0e1xuICAgXHRcdFx0cmVkaXJlY3RUbzogJy8nXG5cdFx0fSk7XG59KTtcblxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnVXRpbFN2YycsIGZ1bmN0aW9uKCl7XG5cdHZhciBzdmMgPSB0aGlzO1xuXG5cdHN2Yy5kZWcycmFkID0gZnVuY3Rpb24oZGVnKSB7XG5cdCAgcmV0dXJuIGRlZyAqIChNYXRoLlBJLzE4MCk7XG5cdH07XG5cblx0c3ZjLmdldERpc3RhbmNlRnJvbUxhdExvbkluS20gPSBmdW5jdGlvbiAobGF0MSxsb24xLGxhdDIsbG9uMikge1xuXHQgIHZhciBSID0gNjM3MTtcblx0ICB2YXIgZExhdCA9IHN2Yy5kZWcycmFkKGxhdDItbGF0MSk7XG5cdCAgdmFyIGRMb24gPSBzdmMuZGVnMnJhZChsb24yLWxvbjEpOyBcblx0ICB2YXIgYSA9IFxuXHQgICAgTWF0aC5zaW4oZExhdC8yKSAqIE1hdGguc2luKGRMYXQvMikgK1xuXHQgICAgTWF0aC5jb3Moc3ZjLmRlZzJyYWQobGF0MSkpICogTWF0aC5jb3Moc3ZjLmRlZzJyYWQobGF0MikpICogXG5cdCAgICBNYXRoLnNpbihkTG9uLzIpICogTWF0aC5zaW4oZExvbi8yKVxuXHQgICAgOyBcblx0ICB2YXIgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEtYSkpOyBcblx0ICB2YXIgZCA9IFIgKiBjO1xuXHQgIHJldHVybiBkO1xuXHR9O1xufSk7XG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSwgJHRpbWVvdXQsIFNlc3Npb25TdmMpe1xuXG5cbn0pO1xuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZGlyZWN0aXZlKCdhcHBNYXAnLCBmdW5jdGlvbihQb3N0c1N2YywgVXRpbFN2YywgU2Vzc2lvblN2YywgJGNvbXBpbGUpIHtcbiAgICAvLyBkaXJlY3RpdmUgbGluayBmdW5jdGlvblxuICAgIHZhciBsaW5rID0gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCByb290U2NvcGUpIHtcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBHTE9CQUwgVkFSSUFCTEVTIElOIExJTksgRlVOQ1RJT05cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgdmFyIG1hcDsgLy8gZXhwYW5kIGZyb20gZ29vZ2xlIG1hcCBmb3IgbWFudWFsbHkgY3JlYXRlZCBldmVudHNcbiAgICAgICAgdmFyIG1hcF9vcmlnaW47IC8vIGZvciBvcmlnaW5hbCBnb29nbGUgbWFwIGV2ZW50IGZ1bmN0aW9uIGxpbmtzXG4gICAgICAgIHZhciBjdXJyZW50X21hcF9udztcbiAgICAgICAgdmFyIGN1cnJlbnRfbWFwX3NlO1xuICAgICAgICB2YXIgbWFwT3B0aW9ucztcbiAgICAgICAgdmFyIGluaXRpYWxNYXBDZW50ZXI7XG4gICAgICAgIHZhciBDTE9VRF9NQVBfSUQgPSAnY3VzdG9tX3N0eWxlJzsgLy8gbWFwIHN0eWxlXG4gICAgICAgIHZhciBoZWxwZXJNYXJrZXJzID0gW107XG4gICAgICAgIHZhciBtYXJrZXJzID0gW107XG4gICAgICAgIHZhciBpbWFnZVBvc3QgPSB7XG4gICAgICAgICAgICB1cmw6ICdodHRwczovL2NhdGNobWUuaWZ5b3VjYW4uY29tL2ltYWdlcy9waWN0dXJlcy9JWUNfSWNvbnMvSVlDX0xvY2F0aW9uX0ljb25fU21hbGwucG5nJyxcbiAgICAgICAgICAgIHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEwMCwgMTAwKSxcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTcsIDM0KSxcbiAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEsIDEpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBpbWFnZVRhcmdldCA9IHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzL1UvUC9qL00vSS9pL3gtbWFyay15ZWxsb3ctbWQucG5nJyxcbiAgICAgICAgICAgIHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEwMCwgMTAwKSxcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTcsIDM0KSxcbiAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDI1LCAyNSlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGltYWdlVXNlckxvZ2luID0ge1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovL3d3dy5jbGtlci5jb20vY2xpcGFydHMvcS9vLzIvSy9nL1YvbG9jYXRpb24tc3ltYm9sLW1hcC1tZC5wbmcnLFxuICAgICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTAwLCAxMDApLFxuICAgICAgICAgICAgb3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgxNywgMzQpLFxuICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMjAsIDMzKVxuICAgICAgICB9O1xuICAgICAgICB2YXIgaW1hZ2VMaXN0ZW5lciA9IHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly8yLmJwLmJsb2dzcG90LmNvbS8tZGpNYV9uNW5BRU0vVDFHdnhfLTctekkvQUFBQUFBQUFBUTQvLTFONmxsZVF2WmMvczE2MDAvYmxpbmtpbmdfZG90LmdpZicsXG4gICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICBvcmlnaW46IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDE3LCAzNCksXG4gICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxNywgMTcpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gRVZFTlQgSEFORExFUlMgLSBVUERBVEVcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRGVmYXVsdExvY2F0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSA9IG1hcC5nZXRDZW50ZXIoKS5sYXQoKTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlID0gbWFwLmdldENlbnRlcigpLmxuZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQm91bmRzKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG1hcC5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIHZhciBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBub3J0aC1lYXN0IGNvcm5lclxuICAgICAgICAgICAgdmFyIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIHNvdXRoLXdlc3QgY29yZGVyXG4gICAgICAgICAgICAvL1lvdSBnZXQgbm9ydGgtd2VzdCBhbmQgc291dGgtZWFzdCBjb3JuZXJzIGZyb20gdGhlIHR3byBhYm92ZTpcblxuICAgICAgICAgICAgY3VycmVudF9tYXBfbncgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKG5lLmxhdCgpLCBzdy5sbmcoKSk7XG4gICAgICAgICAgICBjdXJyZW50X21hcF9zZSA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoc3cubGF0KCksIG5lLmxuZygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVdhdGNoTG9jYXRpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gbWFwLmdldEJvdW5kcygpO1xuICAgICAgICAgICAgdmFyIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIG5vcnRoLWVhc3QgY29ybmVyXG4gICAgICAgICAgICB2YXIgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCk7IC8vIExhdExuZyBvZiB0aGUgc291dGgtd2VzdCBjb3JkZXJcbiAgICAgICAgICAgIC8vWW91IGdldCBub3J0aC13ZXN0IGFuZCBzb3V0aC1lYXN0IGNvcm5lcnMgZnJvbSB0aGUgdHdvIGFib3ZlOlxuXG4gICAgICAgICAgICBjdXJyZW50X21hcF9udyA9IHsgXG4gICAgICAgICAgICAgICAgbGF0OiBuZS5sYXQoKSwgXG4gICAgICAgICAgICAgICAgbG9uOiBzdy5sbmcoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGN1cnJlbnRfbWFwX3NlID0ge1xuICAgICAgICAgICAgICAgIGxhdDogc3cubGF0KCksIFxuICAgICAgICAgICAgICAgIGxvbjogbmUubG5nKClcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50X21hcF9jZW50ZXIgO1xuXG4gICAgICAgICAgICAvLyBzZWUgaWYgdGhlIGxhdGVzdCB4IG1hcmtlciBvciBwb3N0IGxvY2F0aW9uIGlzIHdpdGhpbiB1c2VyJ3Mgdmlld1xuICAgICAgICAgICAgaWYgKCEoc2NvcGUucG9zdExvY2F0aW9uLmxhdCA8IGN1cnJlbnRfbWFwX253LmxhdCkgfHxcbiAgICAgICAgICAgICAgICAhKHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQgPiBjdXJyZW50X21hcF9zZS5sYXQpIHx8XG4gICAgICAgICAgICAgICAgIShzY29wZS5wb3N0TG9jYXRpb24ubG9uIDwgY3VycmVudF9tYXBfc2UubG9uKSB8fFxuICAgICAgICAgICAgICAgICEoc2NvcGUucG9zdExvY2F0aW9uLmxvbiA+IGN1cnJlbnRfbWFwX253LmxvbikgKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIGlmIGl0IGlzIG5vdCB3aXRoaW4gdXNlcidzIHZpZXcsIHRoZW4ganVzdCB1c2UgbWFwIGNlbnRlclxuICAgICAgICAgICAgICAgIGN1cnJlbnRfbWFwX2NlbnRlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBtYXAuZ2V0Q2VudGVyKCkubGF0KCksXG4gICAgICAgICAgICAgICAgICAgIGxvbjogbWFwLmdldENlbnRlcigpLmxuZygpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBpdCBpcyB3aXRoaW4gdXNlcidzIHZpZXcsIHVzZSB4IG1hcmtlciBsb2NhdGlvbiBhLmsuYSBwb3N0IGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgY3VycmVudF9tYXBfY2VudGVyID0ge1xuICAgICAgICAgICAgICAgICAgICBsYXQ6IHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQsXG4gICAgICAgICAgICAgICAgICAgIGxvbjogc2NvcGUucG9zdExvY2F0aW9uLmxvblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBTZXNzaW9uU3ZjLnVwZGF0ZVdhdGNoTG9jYXRpb24oY3VycmVudF9tYXBfbncsIGN1cnJlbnRfbWFwX3NlLCBjdXJyZW50X21hcF9jZW50ZXIsIHNjb3BlLmd1aWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gRVZFTlQgSEFORExFUlMgLSBEUkFXXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIHVwZGF0ZSByZXNwb25zZXMgc3VjaCBhcyB2aXN1YWxpemF0aW9uIG9mIGxpc3RlbmVyc1xuICAgICAgICBmdW5jdGlvbiBkcmF3UmVzcG9uc2VzKHBvc3Qpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlZmVyZW5jZSBwb3N0OicsIHBvc3QpO1xuXG4gICAgICAgICAgICBTZXNzaW9uU3ZjLmZldGNoKClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHNlc3Npb25zKXtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2Vzc2lvbnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2Vzc2lvbiA9IHNlc3Npb25zW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNraXAgbXkgc2Vzc2lvbiAtIG5vIG5lZWQgdG8gZHJhdyDrgrQg7J6Q7Iug7J2YIOyEuOyFmOydgCDqt7jrprTtlYTsmpTqsIAg7JeG64ukLlxuICAgICAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5ndWlkID09IHNjb3BlLmd1aWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAgLy8gc2Vzc2lvbidzIHdhdGNoIGxvY2F0aW9uIHdpbGwgYmUgYm91bmNlZCFcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nlc3Npb24gd2F0Y2ggbG9jYXRpb246Jywgc2Vzc2lvbi53YXRjaGxvYyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwb3N0IGxvY2F0aW9uOicsIHBvc3QubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgd2F0Y2hfbG9jYXRpb24gPSBhbmd1bGFyLmZyb21Kc29uKHNlc3Npb24ud2F0Y2hsb2MpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zdF9sb2NhdGlvbiA9IGFuZ3VsYXIuZnJvbUpzb24ocG9zdC5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyDsnKDsoIDqsIAg67O06rOgIOyeiOuKlCDrsJTsmrTrjZTrpqwg7JWI7JeQIOq3uCBzZXNzaW9uKOuLpOuluOycoOyggCkg7LK07YKBXG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY3VycmVudF9tYXBfc2UsIGN1cnJlbnRfbWFwX253KTtcblxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEod2F0Y2hfbG9jYXRpb24uY2VudGVyX2xhdCA8IGN1cnJlbnRfbWFwX253LmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgISh3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbGF0ID4gY3VycmVudF9tYXBfc2UubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKHdhdGNoX2xvY2F0aW9uLmNlbnRlcl9sb24gPCBjdXJyZW50X21hcF9zZS5sbmcoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEod2F0Y2hfbG9jYXRpb24uY2VudGVyX2xvbiA+IGN1cnJlbnRfbWFwX253LmxuZygpKSApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2Vzc2lvbijri6TrpbjsnKDsoIAp65Ok7J20IOq3uCDtj6zsiqTtirjrpbwg67O06rOgIOyeiOyngCDslYrsnLzrqbQg7Iqk7YK1LlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShwb3N0X2xvY2F0aW9uLmxhdCA8IHdhdGNoX2xvY2F0aW9uLm53X2xhdCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEocG9zdF9sb2NhdGlvbi5sYXQgPiB3YXRjaF9sb2NhdGlvbi5zZV9sYXQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKHBvc3RfbG9jYXRpb24ubG9uIDwgd2F0Y2hfbG9jYXRpb24uc2VfbG9uKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShwb3N0X2xvY2F0aW9uLmxvbiA+IHdhdGNoX2xvY2F0aW9uLm53X2xvbikgKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyh3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbGF0LCB3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbG9uKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBtYXJrZXIgb3B0aW9uIHNldHRpbmdcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlTG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkJPVU5DRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlVzZXJQaW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlTGlzdGVuZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWl6ZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIobWFya2VyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihvbGRfbWFya2VyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkX21hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0obWFya2VyKSksIFxuICAgICAgICAgICAgICAgICAgICAxODAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFuZERyYXdQb3N0cygpe1xuICAgICAgICAgICAgUG9zdHNTdmMuZmV0Y2goKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocG9zdHMpe1xuXG4gICAgICAgICAgICAgICAgLy8gZHJhdyBsYXRlc3QgdXBkYXRlXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3N0cy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3N0ID0gcG9zdHNbaV07XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBtYXJrZXJzIHBvc3QgaXMgZXhpc2l0aW5nIG9uZSwgd2UgZG9uJ3Qgd2FudCB0byBkcmF3IGl0IGFnYWluLlxuICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGRyYXcgbmV3IG9uZXMhXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNbal07IGorKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zdC5faWQgPT0gbWFya2VyLnBvc3QuX2lkKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QgPSBudWxsOyAvLyDsnbTrr7gg6re466Ck7KeEIO2PrOyKpO2KuOudvOuptCwgbnVsbOuhnC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8g7J20IGxvb3DsnYAgcG9zdC5faWTrp4wg6rKA7IKs7Jqp7J6E7Jy866GcLCDrp4zslb0g6rK57LmY66m0IOuwlOuhnCBsb29w7J2EIOupiOy2sOuPhCDqtJzssK7ri6QuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBwb3N06rCAIOybkOuemCDsnojsl4frjZjqsoPsnbTrqbQgcG9zdOqwgCBudWxs66GcIOyFiyDrkJjsl4jsnYTqsoPsnbTqs6AsIGxvY2F0aW9u7ZSE66Gc7Y287Yuw64+EIOyeiOuKlOyngCDtmZXsnbjtlZjsnpBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwb3N0IHx8ICFwb3N0Lmhhc093blByb3BlcnR5KCdsb2NhdGlvbicpKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBwb3N0IC0gbm8gbmVlZCB0byBkcmF3XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gYW5ndWxhci5mcm9tSnNvbihwb3N0LmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobG9jYXRpb24ubGF0LCBsb2NhdGlvbi5sb24pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOuwlOyatOuNlOumrCDslYjsl5Ag7J6I64qU7KeA67aA7YSwIOyytO2BrOulvCDtlZjsnqVcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGdvb2dsZUxvYy5sYXQoKSA8IGN1cnJlbnRfbWFwX253LmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShnb29nbGVMb2MubGF0KCkgPiBjdXJyZW50X21hcF9zZS5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxuZygpIDwgY3VycmVudF9tYXBfc2UubG5nKCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA+IGN1cnJlbnRfbWFwX253LmxuZygpKSApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBza2lwIHRoaXMgcG9zdCAtIG5vIG5lZWQgdG8gZHJhd1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdXBsaW5nX3N0YXR1cyA9IGNhbGN1bGF0ZUNvdXBsaW5nKHBvc3QuZ3VpZCwgcG9zdC5ndWlkdGd0KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmtlciBvcHRpb24gc2V0dGluZ1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGVMb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkJ1YmJsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQb3N0XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG1hcmtlck9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gMTDstIjrs7Tri6Qg6ri0IOqyveyasOydmCDqsoPrp4wg7ISc67KE6rCAIOqzhOyCsOydhCDtlZjqs6Ag7ISc67KE6rCAIOuztOuCtOykmOyEnCBmcm9udGVuZOyXkOyEnCDsp4DsmrDrj4TroZ0g6rSA66as7ZW07KSY7JW8IO2VnOuLpC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heEluc3RhbnRMaWZlU3BhbiA9IDEwMDAwO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOyduOyKpO2EtO2KuCDrp7Ug66mU7Iuc7KeA7J28IOqyveyasOunjCDtlITroaDtirjsl5Trk5zsmYAg7ISc67KE6rCAIOuLpOultOqyjCDsp4Dsm4zso7zrj4TroZ0g7ZWc64ukLiAo7J2864uo7J2AIOyDge2VnOyEoOydgCAxMOy0iClcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3QubGlmZXNwYW4gPCBtYXhJbnN0YW50TGlmZVNwYW4pe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHVwIHNlbGYgcmVtb3ZlIGZvciBtYXJrZXIgaXRzZWxmIGFuZCBmcm9tIG1hcmtlcnMgY29sbGVjdGlvbiBhdCBmcm9udC1lbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKG9sZF9tYXJrZXIsIG9sZF9wb3N0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRfbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNba107IGsrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZF9wb3N0Ll9pZCA9PSBtYXJrZXIucG9zdC5faWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnNwbGljZShrLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfShtYXJrZXIsIHBvc3QpKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3N0LmxpZmVzcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBtYXJrZXIgdG8gYXJyYXksIHRoaXMgbWVhbnMgdGhhdCBpdCBoYXMgYmVlbiBkcmF3biB0byBtYXBcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcjogbWFya2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QgIDogcG9zdFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBEUkFXSU5HIE1FU1NBR0UgV0lORE9XIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGRpdiBpZD1cImJ1YmJsZVBvc3RcIj4nICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QuYm9keSArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PGRpdiBpZD1cImJ1YmJsZUxpZmVCYXJcIj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAvLyDsiqTsvZTtlITsl5DshJzrtoDthLAg7IOI66Gc7Jq0IOywqOydvOuTnCDsiqTsvZTtlITrpbwg66eM65Ok7Ja0IGVhY2ggZm9yIGxvb3Dsl5DshJwg7IKs7Jqp7ZWc64ukLlxuICAgICAgICAgICAgICAgICAgICAvLyAtLT4g7ZW07JW8LCDqsIEgRE9N7J20IOqwgeqwgeydmCBzY29wZeulvCDqsIDsoLjshJwgcG9zdCBtc2fqsIAg7JWIIOqyuey5nOuLpC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHNjb3BlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBwYXJlbnQuJG5ldyh0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgb3BlbkluZm9XaW5kb3cgPSAoZnVuY3Rpb24obWFya2VyLCBjaGlsZF9zY29wZSwgcG9zdCwgY291cGxpbmdfc3RhdHVzKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyB3aW5kb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mb1dpbmRvd09wdGlvbnMgPSB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXhlbE9mZnNldDogbmV3IGdvb2dsZS5tYXBzLlNpemUoLTQxLjUsIDEwLjApLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUF1dG9QYW46IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coaW5mb1dpbmRvd09wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGN1cnJlbnQgdGltZSBhbmQgc3VidHJhY3QgaXQgZnJvbSBwb3N0J3MgZW5kIHRpbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB3aWxsIGJlIGFjY3VyYXRlIHBvc3QgdGltZSBmb3IgaW5zdGFudCBwb3N0cyBhbmQgbG9uZyBwb3N0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VGltZU1pbGxpID0gY3VycmVudERhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3N0bGlmZSA9ICgocG9zdC5saWZlZW5kIC0gY3VycmVudFRpbWVNaWxsaSkgPj0gMCkgPyAocG9zdC5saWZlZW5kIC0gY3VycmVudFRpbWVNaWxsaSkgOiAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpZmVwZXJjZW50YWdlID0gKHBvc3RsaWZlIC8gcG9zdC5saWZlc3BhbikudG9GaXhlZCgyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTGlmZSAlOlwiLCBsaWZlcGVyY2VudGFnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvIG1ha2UgZGF0YSBhdmFpbGFibGUgdG8gdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5tc2cgPSBwb3N0LmJvZHk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGxpZmUgPSBwb3N0bGlmZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0Z3VpZCA9IHBvc3QuZ3VpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0Z3VpZHRndCA9IHBvc3QuZ3VpZHRndDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0Y291cGxlc3RhdHVzID0gY291cGxpbmdfc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA9IGxpZmVwZXJjZW50YWdlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUuJG9uKCdzZXQ6Y291cGxpbmcnLCBmdW5jdGlvbihfLCBjb3VwbGluZ191cGRhdGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0Y291cGxlc3RhdHVzID0gY291cGxpbmdfdXBkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcGlsZSBpdCBiZWZvcmUgbG9hZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSAnPGRpdiBtYXAtbXNnPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBpbGVkID0gJGNvbXBpbGUoY29udGVudCkoY2hpbGRfc2NvcGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvdy5zZXRDb250ZW50KCBjb21waWxlZFswXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9XaW5kb3cub3BlbihtYXAgLCBtYXJrZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSkobWFya2VyLCBjaGlsZCwgcG9zdCwgY291cGxpbmdfc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIG9wZW5JbmZvV2luZG93KCk7XG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRU5EIG9mIERSQVdJTkcgTUVTU0FHRSBXSU5ET1cgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAgICAgfSAvLyBlbmQgb2YgZm9yLWxvb3BcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhd0Ryb3BEb3duKGxvY2F0aW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XG5cbiAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgLy8g67CU7Jq0642U66asIOyViOyXkCDsnojripTsp4DrtoDthLAg7LK07YGs66W8IO2VmOyepVxuICAgICAgICAgICAgaWYgKCEoZ29vZ2xlTG9jLmxhdCgpIDwgY3VycmVudF9tYXBfbncubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgIShnb29nbGVMb2MubGF0KCkgPiBjdXJyZW50X21hcF9zZS5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA8IGN1cnJlbnRfbWFwX3NlLmxuZygpKSB8fFxuICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxuZygpID4gY3VycmVudF9tYXBfbncubG5nKCkpIClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIHNraXAgdGhpcyBwb3N0IC0gbm8gbmVlZCB0byBkcmF3XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG1hcmtlciBvcHRpb24gc2V0dGluZ1xuICAgICAgICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGdvb2dsZUxvYyxcbiAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlVzZXJQaW5cIixcbiAgICAgICAgICAgICAgICBpY29uOiBpbWFnZVVzZXJMb2dpblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIobWFya2VyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uKG9sZF9tYXJrZXIpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZF9tYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0obWFya2VyKSksIFxuICAgICAgICAgICAgMjAwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1bkRyYXdQb3N0KHBvc3RpZClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdGFydGluZyByZW1vdmUgcG9zdFwiKTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNba107IGsrKykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBvc3RpZCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWFya2VyLnBvc3QuX2lkKTtcbiAgICAgICAgICAgICAgICBpZiAocG9zdGlkID09IG1hcmtlci5wb3N0Ll9pZCkge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXIubWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5zcGxpY2UoaywgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdBbmRTZXRQbGFjZShsb2NhdGlvbilcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobG9jYXRpb24ubGF0LCBsb2NhdGlvbi5sb24pO1xuICAgICAgICAgICAgZHJhd0hlbHBlck1hcmtlcihnb29nbGVMb2MpO1xuICAgICAgICAgICAgc2V0UGxhY2UoZ29vZ2xlTG9jKTtcblxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHNlcnZlciBnZXRzIHVwZGF0ZWQgd2hlbmV2ZXIgc2V0dGluZyBuZXcgcGxhY2Ugd2l0aCBtYXJrZXJcbiAgICAgICAgICAgIHVwZGF0ZVdhdGNoTG9jYXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRyYXcgbWFwIHdpdGggaGVscGVyIG1hcmtlcnNcbiAgICAgICAgZnVuY3Rpb24gZHJhd0hlbHBlck1hcmtlcihsb2NhdGlvbil7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBoZWxwZXJNYXJrZXJzW2ldOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVscGVyTWFya2VycyA9IFtdO1xuICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBsb2NhdGlvbiwgXG4gICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VUYXJnZXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGVscGVyTWFya2Vycy5wdXNoKG1hcmtlcik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1bkRyYXdIZWxwZXJNYXJrZXIoKXtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IGhlbHBlck1hcmtlcnNbaV07IGkrKykge1xuICAgICAgICAgICAgICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWxwZXJNYXJrZXJzID0gW107XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIFVUSUxcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gc2V0UGxhY2UobG9jYXRpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIGJyb2FkY2FzdCBsb2NhdGlvbiBpbmZvcihsb24sbGF0KVxuICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ2xvYycsIGxvY2F0aW9uKTtcblxuICAgICAgICAgICAgdmFyIGdlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XG5cbiAgICAgICAgICAgIC8vIGJyb2FkY2FzdCBwbGFjZSBmb3JtYXR0ZWRfYWRkcmVzcyBhbmQgZHJhdyBpY29uXG4gICAgICAgICAgICBnZW9jb2Rlci5nZW9jb2RlKCB7ICdsYXRMbmcnOiBsb2NhdGlvbiB9LCBmdW5jdGlvbihyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAvLyBhcyB1c2VyIGNsaWNrcyBvbiB0aGUgbWFwLFxuICAgICAgICAgICAgICAgIC8vIHdlIGhhdmUgdG8gc2F2ZSB0aGUgZm9ybWF0dGVkIGFkZHJlc3MgaW4gJHNjb3BlIGFuZFxuICAgICAgICAgICAgICAgIC8vIGl0IHdpbGwgYmUgdXNlZCB0aHJvdWdoIHBvc3RzLmN0cmxcbiAgICAgICAgICAgICAgICAvLyBlbWl0IGJyb2FkY2FzZSAncGxhY2UnIGFuZCBzZW5kIHRoaXMgdG8gYXBwbGljYXRpb24uY3RybFxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJyb2FkY2FzdCBmb3JtYXR0ZWRfYWRkcmVzc1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgncGxhY2UnLCByZXN1bHRzWzFdLmZvcm1hdHRlZF9hZGRyZXNzKTsgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICBzd2FsKFwiXCIsXCJMb2NhdGlvbiBkb2VzIG5vdCBleGlzdHNcIik7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdwbGFjZScsIFwiTG9jYXRpb24gZG9lcyBub3QgZXhpc3RzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlQ291cGxpbmcocG9zdF9ndWlkLCBwb3N0X2d1aWR0Z3QpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qIGNvdXBsaW5nIHN0YXR1c1xuICAgICAgICAgICAgICAgIDAgLSBubyBzdGF0dXNcbiAgICAgICAgICAgICAgICAxIC0gaSBsaWtlIHlvdVxuICAgICAgICAgICAgICAgIDIgLSB5b3UgbGlrZSBpXG4gICAgICAgICAgICAgICAgNCAtIHdlIGxpa2UgZWFjaCBvdGhlclxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBpbGlrZXlvdSA9IHNjb3BlLmd1aWR0Z3QgPT0gcG9zdF9ndWlkO1xuICAgICAgICAgICAgdmFyIHlvdWxpa2VpID0gc2NvcGUuZ3VpZCA9PSBwb3N0X2d1aWR0Z3Q7XG4gICAgICAgICAgICBpZiAoaWxpa2V5b3UgJiYgeW91bGlrZWkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbGlrZXlvdSAmJiAheW91bGlrZWkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghaWxpa2V5b3UgJiYgeW91bGlrZWkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBVSVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBzZXRVSU1vdmVUb0N1cnJMb2NCdG4oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgY3VyckxvY0J0biA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWN1cnInKSk7IFxuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5UT1BfUklHSFRdLnB1c2goY3VyckxvY0J0bik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVBvc3RGb3JtKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHBvc3RGb3JtID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3N0aW5nJykpOyBcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0NFTlRFUl0ucHVzaChwb3N0Rm9ybSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVBvc3RCdG4oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcG9zdEJ0biA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXN1Ym1pdCcpKTtcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0NFTlRFUl0ucHVzaChwb3N0QnRuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJVGltZVNsaWRlcigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICB2YXIgdGltZVNsaWRlciA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZVNsaWRlcicpKTtcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0NFTlRFUl0ucHVzaCh0aW1lU2xpZGVyKTtcbiAgICAgICAgICAgICovXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVNlYXJjaEJveCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgc2VhcmNoIGJveCBhbmQgbGluayBpdCB0byB0aGUgVUkgZWxlbWVudC5cbiAgICAgICAgICAgIHZhciBpbnB1dCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFjLWlucHV0JykpOyAvLyBAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gIFxuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5UT1BfTEVGVF0ucHVzaChpbnB1dCk7XG5cbiAgICAgICAgICAgIHZhciBzZWFyY2hCb3ggPSBuZXcgZ29vZ2xlLm1hcHMucGxhY2VzLlNlYXJjaEJveCgoaW5wdXQpKTsgLy8gQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9IFxuXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIHRoZSBldmVudCBmaXJlZCB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYW4gaXRlbSBmcm9tIHRoZVxuICAgICAgICAgICAgLy8gcGljayBsaXN0LiBSZXRyaWV2ZSB0aGUgbWF0Y2hpbmcgcGxhY2VzIGZvciB0aGF0IGl0ZW0uXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihzZWFyY2hCb3gsICdwbGFjZXNfY2hhbmdlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBwbGFjZXMgPSBzZWFyY2hCb3guZ2V0UGxhY2VzKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGxhY2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gdGFrZSBvbmx5IDEgc3BvdFxuICAgICAgICAgICAgICAgIHZhciBwbGFjZSA9IHBsYWNlc1swXTtcblxuICAgICAgICAgICAgICAgIC8vIHdoZW4gc2VhcmNoIGhhcHBlbnMsIGxvY2F0aW9uIHdpbGwgYmUgdXBkYXRlZCBhcyB3ZWxsIGZvciBwb3N0XG4gICAgICAgICAgICAgICAgLy8gc2NvcGUuJGVtaXQoJ3BsYWNlJywgcGxhY2UuZm9ybWF0dGVkX2FkZHJlc3MpO1xuICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQoKSxcbiAgICAgICAgICAgICAgICAgICAgbG9uOiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZHJhd0FuZFNldFBsYWNlKGxvY2F0aW9uKTtcblxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUgPSBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXRpdHVkZTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSA9IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxvbmdpdHVkZTtcblxuICAgICAgICAgICAgICAgIG1hcC5wYW5UbyhwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgbWFwLnNldFpvb20oMTYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFVkVOVFxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudENsaWNrKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gY2xpY2sgZXZlbnQgb24gbWFwIHRvIGRyYXcgbWFya2VyXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBldmVudC5sYXRMbmcubGF0KCksXG4gICAgICAgICAgICAgICAgICAgIGxvbjogZXZlbnQubGF0TG5nLmxuZygpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkcmF3QW5kU2V0UGxhY2UobG9jYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudENlbnRlckNoYW5nZWQoKVxuICAgICAgICB7XG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnY2VudGVyX2NoYW5nZWQnLCBmdW5jdGlvbigpeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyB3aGVuIG1hcCBjZW50ZXIgY2hhbmdlLCB1cGRhdGUgbGFzdCBsb2NhdGlvbiBpbiBtZW1vcnksXG4gICAgICAgICAgICAgICAgLy8gc28gYnJvd3NlciB3aWxsIHJlbWVtYmVyIGl0IG5leHQgdGltZSB5b3UgY29tZSFcbiAgICAgICAgICAgICAgICB1cGRhdGVEZWZhdWx0TG9jYXRpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0RXZlbnRCb3VuZHNDaGFuZ2VkKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ2JvdW5kc19jaGFuZ2VkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIG1hcCBjZW50ZXIgY2hhbmdlLCB1cGRhdGUgYm91bmRzIGluZm8gZm9yIG1hcFxuICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpOyAgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50RHJhZ0VuZCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcF9vcmlnaW4sICdkcmFnZW5kJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbWFwIGFzIGRyYWcgZW5kXG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICB1cGRhdGVXYXRjaExvY2F0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50UmVzaXplKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ3Jlc2l6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG1hcCBhcyBkcmFnIGVuZFxuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHdhdGNobG9jIHdoZW4gY2VudGVyIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudFpvb21DaGFuZ2VkKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ3pvb21fY2hhbmdlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG1hcCBhcyBkcmFnIGVuZFxuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHdhdGNobG9jIHdoZW4gY2VudGVyIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBTRVRVUCBGT1IgTUFQXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIG1hcCBpbml0aWFsIGNvbmZpZ3NcbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbE1hcERhdGEoKXtcbiAgICAgICAgICAgIGluaXRpYWxNYXBDZW50ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKDM0LjA1LCAtMTE4LjI0KTtcbiAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWlzTmFOKHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUpICYmICFpc05hTih3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbE1hcENlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcod2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSwgd2luZG93LmxvY2FsU3RvcmFnZS5sb25naXR1ZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRQbGFjZShpbml0aWFsTWFwQ2VudGVyKTtcblxuICAgICAgICAgICAgbWFwT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyICAgICAgOiBpbml0aWFsTWFwQ2VudGVyLFxuICAgICAgICAgICAgICAgICAgICB6b29tICAgICAgICA6IDE1LFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGx3aGVlbCA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHN0cmVldFZpZXdDb250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBwYW5Db250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgem9vbUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlQ29udHJvbE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICBtYXBUeXBlSWRzOiBbZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVAsIENMT1VEX01BUF9JRF1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUlkOiBDTE9VRF9NQVBfSURcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRNYW51YWxFdmVudHMoKXtcbiAgICAgICAgICAgIGZ1bmN0aW9uIENsb3VkTWFwKG9wdGlvbnMpe1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkluaXRpYWxpemluZyBtYXBcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGluc3RhbnRpYXRlIGdvb2dsZSBtYXBcbiAgICAgICAgICAgIG1hcF9vcmlnaW4gPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGVsZW1lbnRbMF0sIG1hcE9wdGlvbnMpO1xuXG4gICAgICAgICAgICAvLyBzZXQgcHJvdG90eXBlIG9mIGN1c3RvbSBtYXAgd2l0aCBvcmlnaW4gbWFwXG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUgPSBtYXBfb3JpZ2luO1xuXG4gICAgICAgICAgICAvLyBkcmF3IHggbWFya2VyXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVEcmF3WE1hcmtlcihsb2NhdGlvbil7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCAnZHJhd1hNYXJrZXInLCBsb2NhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUuZHJhd1hNYXJrZXIgPSBoYW5kbGVEcmF3WE1hcmtlcjtcblxuICAgICAgICAgICAgLy8gZHJhdyBjdXJyZW50IGxvY2F0aW9uIG1hcmtlclxuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRHJhd0N1cnJMb2NhdGlvbk1hcmtlcihsb2NhdGlvbil7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCAnZHJhd0N1cnJMb2NhdGlvbk1hcmtlcicsIGxvY2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS5kcmF3Q3VyckxvY2F0aW9uTWFya2VyID0gaGFuZGxlRHJhd0N1cnJMb2NhdGlvbk1hcmtlcjtcblxuICAgICAgICAgICAgLy8gZHJhdyBwb3N0c1xuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlVXBkYXRlQW5kRHJhd1Bvc3RzKCl7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCAndXBkYXRlQW5kRHJhd1Bvc3RzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUudXBkYXRlQW5kRHJhd1Bvc3RzID0gaGFuZGxlVXBkYXRlQW5kRHJhd1Bvc3RzO1xuXG4gICAgICAgICAgICAvLyBkcmF3IHJlc3BvbnNlc1xuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRHJhd1Jlc3BvbnNlcyhwb3N0KXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICdkcmF3UmVzcG9uc2VzJywgcG9zdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUuZHJhd1Jlc3BvbnNlcyA9IGhhbmRsZURyYXdSZXNwb25zZXM7XG5cbiAgICAgICAgICAgIC8vIHVuZHJhdyBwb3N0c1xuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlVW5EcmF3UG9zdChwb3N0aWQpe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ3VuRHJhd1Bvc3QnLCBwb3N0aWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLnVuRHJhd1Bvc3QgPSBoYW5kbGVVbkRyYXdQb3N0O1xuXG4gICAgICAgICAgICAvLyBjcmVhdGUgY3VzdG9tIG1hcCBmb3IgYXBwXG4gICAgICAgICAgICBtYXAgPSBuZXcgQ2xvdWRNYXAoKTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnZHJhd1hNYXJrZXInLCBmdW5jdGlvbihsb2NhdGlvbil7XG4gICAgICAgICAgICAgICAgZHJhd0FuZFNldFBsYWNlKGxvY2F0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICdkcmF3Q3VyckxvY2F0aW9uTWFya2VyJywgZnVuY3Rpb24obG9jYXRpb24pe1xuICAgICAgICAgICAgICAgIGRyYXdEcm9wRG93bihsb2NhdGlvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAndXBkYXRlQW5kRHJhd1Bvc3RzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB1cGRhdGVBbmREcmF3UG9zdHMoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICdkcmF3UmVzcG9uc2VzJywgZnVuY3Rpb24ocG9zdCl7XG4gICAgICAgICAgICAgICAgZHJhd1Jlc3BvbnNlcyhwb3N0KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICd1bkRyYXdQb3N0JywgZnVuY3Rpb24ocG9zdGlkKXtcbiAgICAgICAgICAgICAgICB1bkRyYXdQb3N0KHBvc3RpZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFN0eWxlRm9yTWFwKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8g6rmU64GU7J20IFxuICAgICAgICAgICAgLy92YXIgZmVhdHVyZU9wdHMgPSBbe1wiZmVhdHVyZVR5cGVcIjpcImFkbWluaXN0cmF0aXZlXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLnRleHQuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzYxOTVhMFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmMmYyZjJcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZmZmZmZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2lcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5wYXJrXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2U2ZjNkNlwifSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInNhdHVyYXRpb25cIjotMTAwfSx7XCJsaWdodG5lc3NcIjo0NX0se1widmlzaWJpbGl0eVwiOlwic2ltcGxpZmllZFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwic2ltcGxpZmllZFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjRkMmM1XCJ9LHtcInZpc2liaWxpdHlcIjpcInNpbXBsaWZpZWRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLnRleHRcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiM0ZTRlNGVcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmNGY0ZjRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy50ZXh0LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiM3ODc4NzhcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy5pY29uXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ0cmFuc2l0XCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2VhZjZmOFwifSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNlYWY2ZjhcIn1dfV07XG4gICAgICAgICAgICAvLyDsg4HtgbzsnbRcbiAgICAgICAgICAgIC8vdmFyIGZlYXR1cmVPcHRzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGUubWFuX21hZGVcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2Y3ZjFkZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGUubmF0dXJhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZDBlM2I0XCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZS5uYXR1cmFsLnRlcnJhaW5cIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kuYnVzaW5lc3NcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5tZWRpY2FsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmYmQzZGFcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLnBhcmtcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2JkZTZhYlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuc3Ryb2tlXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmZlMTVmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LnN0cm9rZVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2VmZDE1MVwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZmZmZmZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmxvY2FsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiYmxhY2tcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwidHJhbnNpdC5zdGF0aW9uLmFpcnBvcnRcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjY2ZiMmRiXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNhMmRhZjJcIn1dfV07XG4gICAgICAgICAgICAvLyDrmJHrmJHsnbRcbiAgICAgICAgICAgIC8vdmFyIGZlYXR1cmVPcHRzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM3ZmM4ZWRcIn0se1wic2F0dXJhdGlvblwiOjU1fSx7XCJsaWdodG5lc3NcIjotNn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjN2ZjOGVkXCJ9LHtcInNhdHVyYXRpb25cIjo1NX0se1wibGlnaHRuZXNzXCI6LTZ9LHtcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kucGFya1wiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzgzY2VhZFwifSx7XCJzYXR1cmF0aW9uXCI6MX0se1wibGlnaHRuZXNzXCI6LTE1fSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmM2Y0ZjRcIn0se1wic2F0dXJhdGlvblwiOi04NH0se1wibGlnaHRuZXNzXCI6NTl9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmZmZmZmZcIn0se1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjEwMH0se1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmZmZmZmZcIn0se1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjEwMH0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNiYmJiYmJcIn0se1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjI2fSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZmZjYzAwXCJ9LHtcInNhdHVyYXRpb25cIjoxMDB9LHtcImxpZ2h0bmVzc1wiOi0zNX0se1widmlzaWJpbGl0eVwiOlwic2ltcGxpZmllZFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmZmNjMDBcIn0se1wic2F0dXJhdGlvblwiOjEwMH0se1wibGlnaHRuZXNzXCI6LTIyfSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kuc2Nob29sXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2Q3ZTRlNFwifSx7XCJzYXR1cmF0aW9uXCI6LTYwfSx7XCJsaWdodG5lc3NcIjoyM30se1widmlzaWJpbGl0eVwiOlwib25cIn1dfV07XG4gICAgICAgICAgICAvLyDstIjroZ3snbRcbiAgICAgICAgICAgIHZhciBmZWF0dXJlT3B0cyA9IFt7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI0ZGQTgwMFwifSx7XCJzYXR1cmF0aW9uXCI6MH0se1wibGlnaHRuZXNzXCI6MH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjNTNGRjAwXCJ9LHtcInNhdHVyYXRpb25cIjotNzN9LHtcImxpZ2h0bmVzc1wiOjQwfSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjRkJGRjAwXCJ9LHtcInNhdHVyYXRpb25cIjowfSx7XCJsaWdodG5lc3NcIjowfSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQubG9jYWxcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjMDBGRkZEXCJ9LHtcInNhdHVyYXRpb25cIjowfSx7XCJsaWdodG5lc3NcIjozMH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiMwMEJGRkZcIn0se1wic2F0dXJhdGlvblwiOjZ9LHtcImxpZ2h0bmVzc1wiOjh9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzY3OTcxNFwifSx7XCJzYXR1cmF0aW9uXCI6MzMuNH0se1wibGlnaHRuZXNzXCI6LTI1LjR9LHtcImdhbW1hXCI6MX1dfV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBzdHlsZWRNYXBPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdDdXN0b20gU3R5bGUnXG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBjdXN0b21NYXBUeXBlID0gbmV3IGdvb2dsZS5tYXBzLlN0eWxlZE1hcFR5cGUoZmVhdHVyZU9wdHMsIHN0eWxlZE1hcE9wdGlvbnMpO1xuICAgICAgICAgICAgbWFwLm1hcFR5cGVzLnNldChDTE9VRF9NQVBfSUQsIGN1c3RvbU1hcFR5cGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW5pdCB0aGUgbWFwXG4gICAgICAgIGZ1bmN0aW9uIGluaXRNYXAoKSB7XG4gICAgICAgICAgICBpZiAobWFwID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsTWFwRGF0YSgpO1xuXG4gICAgICAgICAgICAgICAgc2V0TWFudWFsRXZlbnRzKCk7XG5cbiAgICAgICAgICAgICAgICBzZXRTdHlsZUZvck1hcCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBicm9hZGNhc3QgdG8gc2VuZCBtYXAgdG8gYXBwbGljYXRpb24gY3RybFxuICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ21hcEluaXQnLCBtYXApO1xuXG4gICAgICAgICAgICAvLyBhZGQgVUkgZWxlbWVudHMgdG8gbWFwXG4gICAgICAgICAgICBzZXRVSVNlYXJjaEJveCgpO1xuICAgICAgICAgICAgc2V0VUlNb3ZlVG9DdXJyTG9jQnRuKCk7XG4gICAgICAgICAgICBzZXRVSVBvc3RGb3JtKCk7XG4gICAgICAgICAgICBzZXRVSVBvc3RCdG4oKTtcbiAgICAgICAgICAgIHNldFVJVGltZVNsaWRlcigpO1xuXG4gICAgICAgICAgICAvLyBhZGQgb3JpZ2luIG5hdGl2ZSBFdmVudCBoYW5kbGVycyB0byBtYXBcbiAgICAgICAgICAgIHNldEV2ZW50Q2xpY2soKTtcbiAgICAgICAgICAgIHNldEV2ZW50Q2VudGVyQ2hhbmdlZCgpO1xuICAgICAgICAgICAgc2V0RXZlbnREcmFnRW5kKCk7XG4gICAgICAgICAgICBzZXRFdmVudFJlc2l6ZSgpO1xuICAgICAgICAgICAgc2V0RXZlbnRab29tQ2hhbmdlZCgpO1xuICAgICAgICAgICAgc2V0RXZlbnRCb3VuZHNDaGFuZ2VkKCk7XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSB2ZXJ5IGZpcnN0IHRpbWUgZm9yIGFwcFxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHVwZGF0ZURlZmF1bHRMb2NhdGlvbigpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVdhdGNoTG9jYXRpb24oKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVBbmREcmF3UG9zdHMoKTtcbiAgICAgICAgICAgIH0sIDgwMCk7XG4gICAgICAgIH0gXG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gRVhFQ1VURVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBpbml0TWFwKCk7XG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgaWQ9XCJtYXAtY2FudmFzXCI+PC9kaXY+JyxcbiAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgbGluazogbGlua1xuICAgIH07XG59KTtcblxuXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5kaXJlY3RpdmUoJ21hcE1zZycsIGZ1bmN0aW9uICgkdGltZW91dCkge1xuXG4gICAgdmFyIGxpbmsgPSBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHsgICAgICAgIFxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIENPVVBMSU5HIENMQVNTXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8qIGNvdXBsaW5nIHN0YXR1c1xuICAgICAgICAgIDAgLSBubyBzdGF0dXNcbiAgICAgICAgICAxIC0gaSBsaWtlIHlvdVxuICAgICAgICAgIDIgLSB5b3UgbGlrZSBpXG4gICAgICAgICAgNCAtIHdlIGxpa2UgZWFjaCBvdGhlclxuICAgICAgICAqL1xuICAgICAgICBzY29wZS5nZXRfY291cGxpbmcgPSBmdW5jdGlvbihjb3VwbGluZ19zdGF0dXMpe1xuICAgICAgICAgIGlmIChjb3VwbGluZ19zdGF0dXMgPT0gNCl7XG4gICAgICAgICAgICByZXR1cm4gXCJidWJibGVQb3N0IGJ1YmJsZVBvc3RfY291cGxlXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKGNvdXBsaW5nX3N0YXR1cyA9PSAxKXtcbiAgICAgICAgICAgIHJldHVybiBcImJ1YmJsZVBvc3QgYnViYmxlUG9zdF9pbGlrZXlvdVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChjb3VwbGluZ19zdGF0dXMgPT0gMil7XG4gICAgICAgICAgICByZXR1cm4gXCJidWJibGVQb3N0IGJ1YmJsZVBvc3RfeW91bGlrZWlcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJidWJibGVQb3N0IGJ1YmJsZVBvc3Rfbm9uZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBET0NVTUVOVCBSRUFEWVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBhcyB0aGUgZG9jdW1lbnQgZ2V0cyByZWFkeSwgc2V0IGNsaWNrIGV2ZW50IGFuZCBsaWZlYmFyIGFuaW1hdGlvbiBsZW5ndGhcbiAgICAgICAgdmFyIG1hbnVhbENsaWNrID0gZmFsc2U7XG5cbiAgICAgICAgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuICAgICAgICAgIHVwZGF0ZUd1aWRUYXJnZXQoKTtcblxuICAgICAgICAgIHVwZGF0ZVBvc3RUaW1lcigpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUd1aWRUYXJnZXQoKXtcbiAgICAgICAgICAvLyB1cGRhdGUgc3RhdHVzIGZvciBndWlkIHRhcmdldFxuICAgICAgICAgIHZhciBwb3N0Z3VpZCA9IHNjb3BlLnBvc3RndWlkO1xuICAgICAgICAgIHZhciBteWd1aWQgPSBzY29wZS4kcGFyZW50Lmd1aWQ7XG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgI2J1YmJsZUNsaWNrJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gY2xpY2tpbmcgaXRzIG93biBwb3N0IHdpbGwgZG8gbm90aGluZ1xuICAgICAgICAgICAgaWYgKHBvc3RndWlkID09IG15Z3VpZCl7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdGhpcyBoYXZlIHRvIGJlIHVwZGF0ZSB0byBiZSBjb21tdW5pY2F0ZWQgdGhyb3VnaCB0aGUgc2VydmVyXG5cbiAgICAgICAgICAgIGlmIChzY29wZS4kcGFyZW50Lmd1aWR0Z3QgPT0gMCl7XG4gICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdzZXQ6Y291cGxpbmcnLCAxKTsgLy8gcHJvcGFnYXRlIHRvIHVwcGVyIHNjb3BlIGZvciBjb3VwbGluZyB1cGRhdGVcbiAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3NldDpndWlkdGd0JywgcG9zdGd1aWQpOyAvLyBwcm9wYWdhdGUgdG8gdXBwZXIgc2NvcGUgZm9yIGd1aWR0Z3QgdXBkYXRlXG4gICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpOyAvLyBmb3JjZSB0byB1cGRhdGUgRE9NXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZS5wb3N0Y291cGxlc3RhdHVzID09IDEgJiYgc2NvcGUuJHBhcmVudC5ndWlkdGd0ICE9IDApe1xuICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0OmNvdXBsaW5nJywgMCk7IC8vIHByb3BhZ2F0ZSB0byB1cHBlciBzY29wZSBmb3IgY291cGxpbmcgdXBkYXRlXG4gICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdzZXQ6Z3VpZHRndCcsIDApOyAvLyBwcm9wYWdhdGUgdG8gdXBwZXIgc2NvcGUgZm9yIGd1aWR0Z3QgdXBkYXRlXG4gICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpOyAvLyBmb3JjZSB0byB1cGRhdGUgRE9NXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBvc3RUaW1lcigpe1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiTGlmZSAlOlwiLCBzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UpO1xuXG4gICAgICAgICAgLy8gc2V0IHRpbWVyIGZvciBwb3N0IGxpZmUgYmFyXG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHNjb3BlLnBvc3RsaWZlICsgXCJtc1wiO1xuICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2IC5wb3N0bGlmZWJhcicpLmNzcygnLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb24nLCBkdXJhdGlvbik7XG5cbiAgICAgICAgICAgIGlmIChzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPiAwLjc1KXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX3FfZm91cicpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2IC5wb3N0bGlmZWJhcicpLmNzcygnYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX3FfZm91cicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlIDw9IDAuNzUgJiYgc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID4gMC41KXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX3FfdGhyZWUnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9xX3RocmVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPD0gMC41ICYmIHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA+IDAuMjApe1xuICAgICAgICAgICAgICAvKiBDaHJvbWUsIFNhZmFyaSwgT3BlcmEgKi9cbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2IC5wb3N0bGlmZWJhcicpLmNzcygnLXdlYmtpdC1hbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fcV90d28nKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9xX3R3bycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX3Ffb25lJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgLnBvc3RsaWZlYmFyJykuY3NzKCdhbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fcV9vbmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnLi90ZW1wbGF0ZXMvd2luZG93Lmh0bWwnLFxuICAgICAgICBsaW5rOiBsaW5rXG4gICAgfTtcbn0pO1xuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHIuY29udHJvbGxlcignUG9zdHNDdHJsJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzY29wZSwgUG9zdHNTdmMsICR3aW5kb3csICRkb2N1bWVudCl7XHJcclx0LyogZW1pdCBicm9hZGNhc3QgZm9yIGN1cnJlbnQgcGFnZUlkICovXHJcdCRzY29wZS4kZW1pdCgncGFnZWNoYW5nZScsICRzY29wZS5wYWdlSWQucG9zdCk7XHJcclx0JHNjb3BlLnBvc3RzID0gW107XHJcclx0LyogYXMgc2VydmVyIHRlbGxzIHRoZXJlIHdhcyBuZXcgcG9zdCwgbGV0cyByZS1sb2FkIGxpc3QgZGF0YSAqL1xyXHQkc2NvcGUuJG9uKCd3czpuZXdfcG9zdCcsIGZ1bmN0aW9uKF8sIHBvc3Qpe1xyXHRcdCRzY29wZS5yZXF1ZXN0RmV0Y2goKTtcclx0fSk7XHJcclx0JHNjb3BlLmFkZFBvc3QgPSBmdW5jdGlvbigpIHtcclx0XHQvKiBnZXQgYXV0b2NvbXBsZXRlZCBwbGFjZSBhbmQgcmVzZXQoc2V0IHRvIHVuZGVmaW5lZCkgKi9cclx0XHR2YXIgcGxhY2UgPSAkc2NvcGUucG9zdHBsYWNlO1xyXHRcdHZhciBsb2NhdGlvbiA9ICRzY29wZS5wb3N0TG9jYXRpb247XHJcclx0XHR2YXIgbG9jYXRpb25KU09OID0gSlNPTi5zdHJpbmdpZnkobG9jYXRpb24pO1xyXHJcdFx0UG9zdHNTdmMuY3JlYXRlKFxyXHRcdHtcclx0XHRcdGJvZHkgICAgOiAgJHNjb3BlLmNvbnRlbnQsXHJcdFx0XHRsb2NhdGlvbjogIGxvY2F0aW9uSlNPTixcclx0XHRcdHBsYWNlICAgOiAgcGxhY2UsXHJcdFx0XHRndWlkICAgIDogICRzY29wZS5ndWlkLFxyXHRcdFx0Z3VpZHRndCA6ICAkc2NvcGUuZ3VpZHRndFxyXHRcdH0pXHJcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocG9zdCl7XHJcdFx0XHQvKiBtYW51YWxseSByZWxvYWQgbWFya2VycyBcclx0XHRcdHVzaW5nIG1hcHR5cGVpZCBzaW5jZSBpdHMgbW9zdCBsZWFzdCB1c2VkIGV2ZW50LCAtIGtpbmQgb2YgaGFja3kgd2F5IHRvIGRvIGl0XHJcdFx0XHQqL1xyXHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcigkc2NvcGUubWFwLCAnbWFwdHlwZWlkX2NoYW5nZWQnKTtcclxyXHRcdFx0JHNjb3BlLnBvc3RzLnVuc2hpZnQocG9zdCk7XHJcclx0XHRcdC8qIDEw7LSI67O064ukIOq4tCDqsr3smrDsnZgg6rKD66eMIOyEnOuyhOqwgCDqs4TsgrDsnYQg7ZWY6rOgIOyEnOuyhOqwgCDrs7TrgrTspJjshJwgZnJvbnRlbmTsl5DshJwg7KeA7Jqw64+E66GdIOq0gOumrO2VtOykmOyVvCDtlZzri6QuXHJcdFx0XHQg66as7Iqk7Yq47J24642wIO2YhOyerOuKlCDslYjrs7TsnbTqsowg7ZW065GUIOyDgSAqL1xyICAgICAgICAgICAgdmFyIG1heEluc3RhbnRMaWZlU3BhbiA9IDEwMDAwO1xyICAgICAgICAgICAgaWYgKHBvc3QubGlmZXNwYW4gPCBtYXhJbnN0YW50TGlmZVNwYW4pe1xyICAgICAgICAgICAgXHQvKiBmcm9udCBlbmQgc2lkZSBsaXN0IHBvc3QgcmVtb3ZlICovXHJcdFx0XHRcdHZhciBmcm9udEVuZFBvc3RSZW1vdmUgPSBmdW5jdGlvbigpeyBcclx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wb3N0cy5sZW5ndGg7ICsraSl7XHJcdFx0XHRcdFx0XHRpZiAocG9zdC5faWQgPT0gJHNjb3BlLnBvc3RzW2ldLl9pZClcclx0XHRcdFx0XHRcdHtcclx0XHRcdFx0XHRcdFx0JHNjb3BlLnBvc3RzLnNwbGljZShpLCAxKTtcclx0XHRcdFx0XHRcdH1cclx0XHRcdFx0XHR9XHJcdFx0XHRcdH07XHJcdFx0XHRcdHNldFRpbWVvdXQoZnJvbnRFbmRQb3N0UmVtb3ZlLCBwb3N0LmxpZmVzcGFuKTtcciAgICAgICAgICAgIH1cclx0XHRcdFxyXHJcdFx0XHQvKiByZXNldCBpbnB1dCBmb3JtcyAqL1xyXHRcdFx0JHNjb3BlLmNvbnRlbnQgID0gbnVsbDtcclx0XHR9KVxyXHRcdC5lcnJvcihmdW5jdGlvbihkYXRhLCBzdGF0dXMpe1xyXHRcdFx0c3dhbChcIlBvc3QgZmFpbGVkXCIsIFwiUGxlYXNlIGNvbXBsZXRlIHRoZSBmcm9tIGNvcnJlY3RseVwiLCBcImVycm9yXCIpO1xyXHRcdH0pO1xyXHJcdH07XHJcclx0LyogYXMgc2VydmVyIHRlbGxzIHRoZXJlIHdhcyBuZXcgcG9zdCwgbGV0cyByZS1sb2FkIGxpc3QgZGF0YSAqL1xyXHQkc2NvcGUucmVxdWVzdEZldGNoID0gZnVuY3Rpb24oKSB7XHJcdFx0UG9zdHNTdmMuZmV0Y2goKVxyXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHBvc3RzKXtcclx0XHRcdCRzY29wZS5wb3N0cyA9IHBvc3RzO1xyXHRcdH0pO1xyXHR9O1xyXHJcdCRzY29wZS5yZXF1ZXN0RmV0Y2goKTtccn0pO1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdQb3N0c1N2YycsIGZ1bmN0aW9uKCRodHRwKXtcblx0dGhpcy5mZXRjaCA9IGZ1bmN0aW9uKCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9wb3N0cycpO1xuXHR9O1xuXG5cdHRoaXMuY3JlYXRlID0gZnVuY3Rpb24ocG9zdCl7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcG9zdHMnLCBwb3N0KTtcblx0fTtcblxuXHR0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKHBvc3Qpe1xuXHRcdGNvbnNvbGUubG9nKFwiZGVsZXRpbmcgcG9zdGluZ1wiKTtcblx0XHRjb25zb2xlLmxvZygncG9zdC5faWQ6JywgcG9zdC5faWQpO1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvcG9zdHMnLCBwb3N0KTtcblx0fTtcbn0pO1xuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnU2Vzc2lvblN2YycsIGZ1bmN0aW9uKCRodHRwKXtcblx0dGhpcy5mZXRjaCA9IGZ1bmN0aW9uKCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9zZXNzaW9ucycpO1xuXHR9O1xuXG5cdHRoaXMuZW50ZXIgPSBmdW5jdGlvbihzZXNzaW9uKXtcblx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zZXNzaW9ucycsIHNlc3Npb24pO1xuXHR9O1xuXG5cdHRoaXMucmVtb3ZlID0gZnVuY3Rpb24oZ3VpZCl7XG5cdFx0Y29uc29sZS5sb2coXCJkZWxldGluZyBzZXNzaW9uXCIpO1xuXHRcdGNvbnNvbGUubG9nKCdzZXNzaW9uLmd1aWQ6JywgZ3VpZCk7XG5cdFx0dmFyIHNlc3Npb24gPSB7Z3VpZDogZ3VpZH07XG5cdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9zZXNzaW9ucycsIHNlc3Npb24pO1xuXHR9O1xuXG5cdHRoaXMudXBkYXRlV2F0Y2hMb2NhdGlvbiA9IGZ1bmN0aW9uKGN1cnJlbnRfbWFwX253LCBjdXJyZW50X21hcF9zZSwgY3VycmVudF9tYXBfY2VudGVyLCBndWlkKXtcblx0XHR2YXIgd2F0Y2hsb2MgPSB7XG4gICAgICAgICAgICBud19sYXQgICAgOiBjdXJyZW50X21hcF9udy5sYXQsXG4gICAgICAgICAgICBud19sb24gICAgOiBjdXJyZW50X21hcF9udy5sb24sXG4gICAgICAgICAgICBzZV9sYXQgICAgOiBjdXJyZW50X21hcF9zZS5sYXQsXG4gICAgICAgICAgICBzZV9sb25cdCAgOiBjdXJyZW50X21hcF9zZS5sb24sXG4gICAgICAgICAgICBjZW50ZXJfbGF0OiBjdXJyZW50X21hcF9jZW50ZXIubGF0LFxuICAgICAgICAgICAgY2VudGVyX2xvbjogY3VycmVudF9tYXBfY2VudGVyLmxvblxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHdhdGNobG9jSlNPTiA9IEpTT04uc3RyaW5naWZ5KHdhdGNobG9jKTtcblxuICAgICAgICB2YXIgdXBkYXRlZHNlc3Npb24gPSB7XG4gICAgICAgICAgICB3YXRjaGxvYzogd2F0Y2hsb2NKU09OLFxuICAgICAgICAgICAgZ3VpZDogZ3VpZFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIHVwZGF0ZSB3YXRjaGxvYyB3aGVuIGNlbnRlciBjaGFuZ2VkLlxuICAgICAgICBjb25zb2xlLmxvZyhcInVwZGF0aW5nIHdhdGNoIGxvY2F0aW9uXCIpO1xuXHRcdGNvbnNvbGUubG9nKFwidXBkYXRlZHNlc3Npb246XCIsIHVwZGF0ZWRzZXNzaW9uKTtcblx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zZXNzaW9ucy91cGRhdGUnLCB1cGRhdGVkc2Vzc2lvbik7XG5cdH07XG59KTtcblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9