angular.module("app",["ngRoute","ui.slider"]),angular.module("app").controller("ApplicationCtrl",["SessionSvc","$rootScope","$scope","$window","$http","$timeout",function(t,o,e,n,a,i){function l(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}e.guid=l(),e.pageId={post:0},e.sliderOptions={from:1,to:3e5,step:5e3,dimension:" km",vertical:!1,limits:!1,css:{background:{"background-color":"yellow"},before:{"background-color":"purple"},"default":{"background-color":"white"},after:{"background-color":"green"},pointer:{"background-color":"red"}}},e.timevalue=5e3,e.navCollapsed=!0,e.guidtgt="0",window.onbeforeunload=function(){t.remove(e.guid)};var s,r=document.location.hostname,g="192.168.0.4";s="localhost"==r?"ws://localhost:5000":r==g?"ws://192.168.0.4:5000":"wss://cloudtalk.herokuapp.com";var c=function(){connection=new WebSocket(s),connection.onopen=function(){function o(o){var n=o.coords,a=new google.maps.LatLng(n.latitude,n.longitude),i={lat:a.lat(),lon:a.lng()},l=JSON.stringify(i),s=e.map.getBounds(),r=s.getNorthEast(),g=s.getSouthWest(),c={lat:r.lat(),lon:g.lng()},u={lat:g.lat(),lon:r.lng()},p={lat:window.localStorage.latitude,lon:window.localStorage.longitude},d={nw_lat:c.lat,nw_lon:c.lon,se_lat:u.lat,se_lon:u.lon,center_lat:p.lat,center_lon:p.lon},m=JSON.stringify(d),f={guid:e.guid,location:l,watchloc:m};t.enter(f)}function n(t){swal("","Need to turn on location service for proper use."),console.warn("ERROR("+t.code+"): "+t.message)}navigator.geolocation.getCurrentPosition(o,n),console.log("WebSocket connected")},connection.onclose=function(){console.log("WebSocket closed. Reconecting..."),i(c,2e3)},connection.onmessage=function(t){var e=JSON.parse(t.data);o.$broadcast("ws:"+e.type,e.data)}};c(),e.$on("ws:new_post",function(t,o){e.map.updateAndDrawPosts(),o.guid==e.guid&&e.map.drawResponses(o)}),e.$on("ws:new_session",function(t,o){var n=angular.fromJson(o.location);e.map.drawCurrLocationMarker(n)}),e.$on("ws:remove_post",function(t,o){e.map.unDrawPost(o)}),e.isMobile=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1},e.moveToCurrentLocation=function(){function t(t){if(e.currentPageId==e.pageId.post){var o=t.coords;window.localStorage.latitude=o.latitude,window.localStorage.longitude=o.longitude;var n={lat:o.latitude,lon:o.longitude};e.map.drawCurrLocationMarker(n),e.map.drawXMarker(n);var a=new google.maps.LatLng(n.lat,n.lon);e.map.panTo(a),e.map.setZoom(15)}}function o(t){swal("","Need to turn on location service for proper use."),console.warn("ERROR("+t.code+"): "+t.message)}navigator.geolocation.getCurrentPosition(t,o),swal({title:"",text:"Moving to current location..",timer:1500,showConfirmButton:!1})},e.moveToPostLocation=function(){var t=0;if(e.isMobile()){var o=e.map.getBounds(),n=o.getNorthEast(),a=o.getSouthWest();current_map_nw=new google.maps.LatLng(n.lat(),a.lng()),current_map_se=new google.maps.LatLng(a.lat(),n.lng());var i=.5*Math.abs(e.postLocation.lat-current_map_nw.lat()),l=.5*Math.abs(e.postLocation.lat-current_map_se.lat());t=i>l?l:i}var s=new google.maps.LatLng(e.postLocation.lat+t,e.postLocation.lon);e.map.panTo(s)},e.collapse=function(){e.navCollapsed=!0},e.$on("mapInit",function(t,o){e.map=o}),e.$on("set:guidtgt",function(t,o){e.guidtgt=o}),e.$on("pagechange",function(t,o){e.currentPageId=o}),e.$on("loc",function(t,o){var n=o.lat(),a=o.lng();e.postLocation={lat:n,lon:a}}),e.$on("place",function(t,o){e.$apply(function(){e.postplace=o})})}]),angular.module("app").config(["$routeProvider",function(t){t.when("/",{controller:"PostsCtrl",templateUrl:"/templates/posts.html"}).otherwise({redirectTo:"/"})}]),angular.module("app").service("UtilSvc",function(){var t=this;t.deg2rad=function(t){return t*(Math.PI/180)},t.getDistanceFromLatLonInKm=function(o,e,n,a){var i=6371,l=t.deg2rad(n-o),s=t.deg2rad(a-e),r=Math.sin(l/2)*Math.sin(l/2)+Math.cos(t.deg2rad(o))*Math.cos(t.deg2rad(n))*Math.sin(s/2)*Math.sin(s/2),g=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),c=i*g;return c},t.mapRange=function(t,o,e,n,a){return n+(a-n)*(t-o)/(e-o)}}),angular.module("app").run(["$rootScope","$timeout","SessionSvc",function(t,o,e){}]),angular.module("app").directive("appMap",["PostsSvc","UtilSvc","SessionSvc","$compile",function(t,o,e,n){var a=function(o,a,i,l){function s(){window.localStorage.latitude=O.getCenter().lat(),window.localStorage.longitude=O.getCenter().lng()}function r(){var t=O.getBounds(),o=t.getNorthEast(),e=t.getSouthWest();B=new google.maps.LatLng(o.lat(),e.lng()),E=new google.maps.LatLng(e.lat(),o.lng())}function g(){var t=O.getBounds(),n=t.getNorthEast(),a=t.getSouthWest();B={lat:n.lat(),lon:a.lng()},E={lat:a.lat(),lon:n.lng()};var i;i=o.postLocation.lat<B.lat&&o.postLocation.lat>E.lat&&o.postLocation.lon<E.lon&&o.postLocation.lon>B.lon?{lat:o.postLocation.lat,lon:o.postLocation.lon}:{lat:O.getCenter().lat(),lon:O.getCenter().lng()},e.updateWatchLocation(B,E,i,o.guid)}function c(t){e.fetch().success(function(e){for(var n=0;n<e.length;n++){var a=e[n];if(a.guid!=o.guid){var i=angular.fromJson(a.watchloc),l=angular.fromJson(t.location);if(r(),i.center_lat<B.lat()&&i.center_lat>E.lat()&&i.center_lon<E.lng()&&i.center_lon>B.lng()&&l.lat<i.nw_lat&&l.lat>i.se_lat&&l.lon<i.se_lon&&l.lon>i.nw_lon){var s=new google.maps.LatLng(i.center_lat,i.center_lon),g={position:s,map:O,title:"UserPin",icon:X,optimized:!1},c=new google.maps.Marker(g);setTimeout(function(t){return function(){t.setMap(null)}}(c),1800)}}}})}function u(){t.fetch().success(function(t){for(var e=0;e<t.length;e++){for(var a,i=t[e],l=0;a=W[l];l++)if(i._id==a.post._id){i=null;break}if(i&&i.hasOwnProperty("location")){var s=angular.fromJson(i.location),g=new google.maps.LatLng(s.lat,s.lon);if(r(),g.lat()<B.lat()&&g.lat()>E.lat()&&g.lng()<E.lng()&&g.lng()>B.lng()){var c=v(i.guid,i.guidtgt),u={position:g,map:O,title:"Bubble",icon:J},a=new google.maps.Marker(u),p=1e4;i.lifespan<p&&setTimeout(function(t,o){return function(){t.setMap(null);for(var e,n=0;e=W[n];n++)o._id==e.post._id&&W.splice(n,1)}}(a,i),i.lifespan),W.push({marker:a,post:i});var d=o,m=d.$new(!0),f=function(t,o,e,a){return function(){var i={pixelOffset:new google.maps.Size(-41.5,10),disableAutoPan:!0},l=new google.maps.InfoWindow(i),s=new Date,r=s.getTime(),g=e.lifeend-r>=0?e.lifeend-r:0,c=(g/e.lifespan).toFixed(2);o.msg=e.body,o.postlife=g,o.postguid=e.guid,o.postguidtgt=e.guidtgt,o.postcouplestatus=a,o.postlifepercentage=c,o.$on("set:coupling",function(t,e){o.postcouplestatus=e});var u="<div map-msg></div>",p=n(u)(o);l.setContent(p[0]),l.open(O,t)}}(a,m,i,c);f()}}}})}function p(t){var o=new google.maps.LatLng(t.lat,t.lon);if(r(),o.lat()<B.lat()&&o.lat()>E.lat()&&o.lng()<E.lng()&&o.lng()>B.lng()){var e={position:o,map:O,animation:google.maps.Animation.DROP,title:"UserPin",icon:U},n=new google.maps.Marker(e);setTimeout(function(t){return function(){t.setMap(null)}}(n),2e3)}}function d(t){for(var o,e=0;o=W[e];e++)if(t==o.post._id){o.marker.setMap(null),W.splice(e,1);break}}function m(t){var o=new google.maps.LatLng(t.lat,t.lon);f(o),w(o),g()}function f(t){for(var o,e=0;o=D[e];e++)o.setMap(null);D=[];var o=new google.maps.Marker({position:t,map:O,icon:x});D.push(o)}function w(t){o.$emit("loc",t);var e=new google.maps.Geocoder;e.geocode({latLng:t},function(t,e){try{o.$emit("place",t[1].formatted_address)}catch(n){console.log(n),swal("","Location does not exists"),o.$emit("place","Location does not exists")}})}function v(t,e){var n=o.guidtgt==t,a=o.guid==e;return n&&a?4:n&&!a?1:!n&&a?2:0}function h(){var t=document.getElementById("btn-curr");O.controls[google.maps.ControlPosition.TOP_RIGHT].push(t)}function _(){var t=document.getElementById("posting");O.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(t)}function b(){var t=document.getElementById("btn-submit");O.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(t)}function L(){var t=document.getElementById("timeSlider");O.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(t)}function y(){var t=document.getElementById("pac-input");O.controls[google.maps.ControlPosition.TOP_LEFT].push(t);var o=new google.maps.places.SearchBox(t);google.maps.event.addListener(o,"places_changed",function(){var t=o.getPlaces();if(0!=t.length){var e=t[0],n={lat:e.geometry.location.lat(),lon:e.geometry.location.lng()};m(n),window.localStorage.latitude=e.geometry.location.latitude,window.localStorage.longitude=e.geometry.location.longitude,O.panTo(e.geometry.location),O.setZoom(16)}})}function S(){google.maps.event.addListener(R,"click",function(t){var o={lat:t.latLng.lat(),lon:t.latLng.lng()};m(o)})}function P(){google.maps.event.addListener(R,"center_changed",function(){s()})}function M(){google.maps.event.addListener(R,"bounds_changed",function(){r()})}function k(){google.maps.event.addListener(R,"dragend",function(){u(),g()})}function $(){google.maps.event.addListener(R,"resize",function(){u(),g()})}function T(){google.maps.event.addListener(R,"zoom_changed",function(){u(),g()})}function C(){N=new google.maps.LatLng(34.05,-118.24),isNaN(window.localStorage.latitude)||isNaN(window.localStorage.longitude)||(N=new google.maps.LatLng(window.localStorage.latitude,window.localStorage.longitude)),w(N),F={center:N,zoom:15,scrollwheel:!0,streetViewControl:!1,mapTypeControl:!1,panControl:!1,zoomControl:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,q]},mapTypeId:q}}function A(){function t(t){}function o(t){google.maps.event.trigger(this,"drawXMarker",t)}function e(t){google.maps.event.trigger(this,"drawCurrLocationMarker",t)}function n(){google.maps.event.trigger(this,"updateAndDrawPosts")}function i(t){google.maps.event.trigger(this,"drawResponses",t)}function l(t){google.maps.event.trigger(this,"unDrawPost",t)}R=new google.maps.Map(a[0],F),t.prototype=R,t.prototype.drawXMarker=o,t.prototype.drawCurrLocationMarker=e,t.prototype.updateAndDrawPosts=n,t.prototype.drawResponses=i,t.prototype.unDrawPost=l,O=new t,google.maps.event.addListener(O,"drawXMarker",function(t){m(t)}),google.maps.event.addListener(O,"drawCurrLocationMarker",function(t){p(t)}),google.maps.event.addListener(O,"updateAndDrawPosts",function(){u()}),google.maps.event.addListener(O,"drawResponses",function(t){c(t)}),google.maps.event.addListener(O,"unDrawPost",function(t){d(t)})}function I(){var t=[{featureType:"landscape",stylers:[{hue:"#FFA800"},{saturation:0},{lightness:0},{gamma:1}]},{featureType:"road.highway",stylers:[{hue:"#53FF00"},{saturation:-73},{lightness:40},{gamma:1}]},{featureType:"road.arterial",stylers:[{hue:"#FBFF00"},{saturation:0},{lightness:0},{gamma:1}]},{featureType:"road.local",stylers:[{hue:"#00FFFD"},{saturation:0},{lightness:30},{gamma:1}]},{featureType:"water",stylers:[{hue:"#00BFFF"},{saturation:6},{lightness:8},{gamma:1}]},{featureType:"poi",stylers:[{hue:"#679714"},{saturation:33.4},{lightness:-25.4},{gamma:1}]}],o={name:"Custom Style"},e=new google.maps.StyledMapType(t,o);O.mapTypes.set(q,e)}function z(){void 0===O&&(C(),A(),I()),o.$emit("mapInit",O),y(),h(),_(),b(),L(),S(),P(),k(),$(),T(),M(),setTimeout(function(){s(),r(),g(),u()},800)}var O,R,B,E,F,N,q="custom_style",D=[],W=[],J={url:"https://catchme.ifyoucan.com/images/pictures/IYC_Icons/IYC_Location_Icon_Small.png",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(1,1)},x={url:"http://www.clker.com/cliparts/U/P/j/M/I/i/x-mark-yellow-md.png",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},U={url:"http://www.clker.com/cliparts/q/o/2/K/g/V/location-symbol-map-md.png",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(20,33)},X={url:"http://2.bp.blogspot.com/-djMa_n5nAEM/T1Gvx_-7-zI/AAAAAAAAAQ4/-1N6lleQvZc/s1600/blinking_dot.gif",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(17,17)};z()};return{restrict:"A",template:'<div id="map-canvas"></div>',replace:!0,link:a}}]),angular.module("app").directive("mapMsg",["$timeout",function(t){var o=function(o,e,n){function a(){var t=o.postguid,n=o.$parent.guid;angular.element(e).parent().find("div div #bubbleClick").on("click",function(){t!=n&&(0==o.$parent.guidtgt?(o.$emit("set:coupling",1),o.$emit("set:guidtgt",t),o.$apply()):1==o.postcouplestatus&&0!=o.$parent.guidtgt&&(o.$emit("set:coupling",0),o.$emit("set:guidtgt",0),o.$apply()))})}function i(){console.log("Life %:",o.postlifepercentage),t(function(){{var t=o.postlife+"ms";angular.element(e).parent().find("div div .postlifebar").css("-webkit-animation-duration",t)}if(o.postlifepercentage>.75){angular.element(e).parent().find("div div .postlifebar").css("-webkit-animation-name","postlifeanim_q_four"),angular.element(e).parent().find("div div .postlifebar").css("animation-name","postlifeanim_q_four")}else if(o.postlifepercentage<=.75&&o.postlifepercentage>.5){angular.element(e).parent().find("div div .postlifebar").css("-webkit-animation-name","postlifeanim_q_three"),angular.element(e).parent().find("div div .postlifebar").css("animation-name","postlifeanim_q_three")}else if(o.postlifepercentage<=.5&&o.postlifepercentage>.2){angular.element(e).parent().find("div div .postlifebar").css("-webkit-animation-name","postlifeanim_q_two"),angular.element(e).parent().find("div div .postlifebar").css("animation-name","postlifeanim_q_two")}else{angular.element(e).parent().find("div div .postlifebar").css("-webkit-animation-name","postlifeanim_q_one"),angular.element(e).parent().find("div div .postlifebar").css("animation-name","postlifeanim_q_one")}},100)}o.get_coupling=function(t){return 4==t?"bubblePost bubblePost_couple":1==t?"bubblePost bubblePost_ilikeyou":2==t?"bubblePost bubblePost_youlikei":"bubblePost bubblePost_none"};angular.element(document).ready(function(){a(),i()})};return{restrict:"A",templateUrl:"./templates/window.html",link:o}}]),angular.module("app").controller("PostsCtrl",["$rootScope","$scope","PostsSvc","UtilSvc","$window","$document",function(t,o,e,n,a,i){o.$emit("pagechange",o.pageId.post),o.posts=[],o.$on("ws:new_post",function(t,e){o.requestFetch()}),o.addPost=function(){var t,a=o.postplace,i=o.postLocation,l=JSON.stringify(i);if(o.timevalue<=5e3){var s=o.content.length;t=5>s?3e3:s*n.mapRange(s,5,20,500,300)}else t=o.timevalue;e.create({body:o.content,location:l,place:a,guid:o.guid,guidtgt:o.guidtgt,lifespan:t}).success(function(t){google.maps.event.trigger(o.map,"maptypeid_changed"),o.posts.unshift(t);var e=1e4;if(t.lifespan<e){var n=function(){for(var e=0;e<o.posts.length;++e)t._id==o.posts[e]._id&&o.posts.splice(e,1)};setTimeout(n,t.lifespan)}o.content=null}).error(function(t,o){swal("Post failed","Please complete the from correctly","error")})},o.requestFetch=function(){e.fetch().success(function(t){o.posts=t})},o.requestFetch()}]),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts")},this.create=function(o){return t.post("/api/posts",o)},this.remove=function(o){return t.put("/api/posts",o)}}]),angular.module("app").service("SessionSvc",["$http",function(t){this.fetch=function(){return t.get("/api/sessions")},this.enter=function(o){return t.post("/api/sessions",o)},this.remove=function(o){var e={guid:o};return t.put("/api/sessions",e)},this.updateWatchLocation=function(o,e,n,a){var i={nw_lat:o.lat,nw_lon:o.lon,se_lat:e.lat,se_lon:e.lon,center_lat:n.lat,center_lon:n.lon},l=JSON.stringify(i),s={watchloc:l,guid:a};return console.log("updating watch location"),t.post("/api/sessions/update",s)}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1dGlsLnN2Yy5qcyIsImdlbmVyYWwvbWFpbi5qcyIsIm1hcHMvbWFwLmRpcmVjdGl2ZS5qcyIsIm1hcHMvbXNnLmRpcmVjdGl2ZS5qcyIsInBvc3RzL3Bvc3RzLmN0cmwuanMiLCJwb3N0cy9wb3N0cy5zdmMuanMiLCJzZXNzaW9ucy9zZXNzaW9ucy5zdmMuanMiLCJhcHAuanMiLCJzb2NrZXRzL3dlYnNvY2tldHMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCJTZXNzaW9uU3ZjIiwiJHJvb3RTY29wZSIsIiRzY29wZSIsIiR3aW5kb3ciLCIkaHR0cCIsIiR0aW1lb3V0IiwiZ3VpZCIsInM0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJwYWdlSWQiLCJwb3N0Iiwic2xpZGVyT3B0aW9ucyIsImZyb20iLCJ0byIsInN0ZXAiLCJkaW1lbnNpb24iLCJ2ZXJ0aWNhbCIsImxpbWl0cyIsImNzcyIsImJhY2tncm91bmQiLCJiYWNrZ3JvdW5kLWNvbG9yIiwiYmVmb3JlIiwiZGVmYXVsdCIsImFmdGVyIiwicG9pbnRlciIsInRpbWV2YWx1ZSIsIm5hdkNvbGxhcHNlZCIsImd1aWR0Z3QiLCJ3aW5kb3ciLCJvbmJlZm9yZXVubG9hZCIsInJlbW92ZSIsInVybCIsImhvc3RuYW1lIiwiZG9jdW1lbnQiLCJsb2NhdGlvbiIsImRldmVsb3BtZW50SVAiLCJjb25uZWN0IiwiY29ubmVjdGlvbiIsIldlYlNvY2tldCIsIm9ub3BlbiIsImdldEN1cnJMb2NTdWNjZXNzIiwicG9zIiwiY3JkIiwiY29vcmRzIiwiZ29vZ2xlTG9jIiwiZ29vZ2xlIiwibWFwcyIsIkxhdExuZyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwibGF0IiwibG9uIiwibG5nIiwibG9jYXRpb25KU09OIiwiSlNPTiIsInN0cmluZ2lmeSIsImJvdW5kcyIsIm1hcCIsImdldEJvdW5kcyIsIm5lIiwiZ2V0Tm9ydGhFYXN0Iiwic3ciLCJnZXRTb3V0aFdlc3QiLCJjdXJyZW50X21hcF9udyIsImN1cnJlbnRfbWFwX3NlIiwiY3VycmVudF9tYXBfY2VudGVyIiwibG9jYWxTdG9yYWdlIiwid2F0Y2hsb2MiLCJud19sYXQiLCJud19sb24iLCJzZV9sYXQiLCJzZV9sb24iLCJjZW50ZXJfbGF0IiwiY2VudGVyX2xvbiIsIndhdGNobG9jSlNPTiIsInNlc3Npb24iLCJlbnRlciIsImdldEN1cnJMb2NFcnJvciIsImVyciIsInN3YWwiLCJjb25zb2xlIiwid2FybiIsImNvZGUiLCJtZXNzYWdlIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJnZXRDdXJyZW50UG9zaXRpb24iLCJsb2ciLCJvbmNsb3NlIiwib25tZXNzYWdlIiwiZSIsInBheWxvYWQiLCJwYXJzZSIsImRhdGEiLCIkYnJvYWRjYXN0IiwidHlwZSIsIiRvbiIsIl8iLCJ1cGRhdGVBbmREcmF3UG9zdHMiLCJkcmF3UmVzcG9uc2VzIiwiZnJvbUpzb24iLCJkcmF3Q3VyckxvY2F0aW9uTWFya2VyIiwicG9zdGlkIiwidW5EcmF3UG9zdCIsImlzTW9iaWxlIiwidXNlckFnZW50IiwibWF0Y2giLCJtb3ZlVG9DdXJyZW50TG9jYXRpb24iLCJjdXJyZW50UGFnZUlkIiwiZHJhd1hNYXJrZXIiLCJwYW5UbyIsInNldFpvb20iLCJ0aXRsZSIsInRleHQiLCJ0aW1lciIsInNob3dDb25maXJtQnV0dG9uIiwibW92ZVRvUG9zdExvY2F0aW9uIiwibGF0RGVsdGEiLCJsYXREZWx0YV9jZW50ZXIybm9ydGgiLCJhYnMiLCJwb3N0TG9jYXRpb24iLCJsYXREZWx0YV9jZW50ZXIyc291dGgiLCJjb2xsYXBzZSIsInBsYWNlIiwiJGFwcGx5IiwicG9zdHBsYWNlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwic2VydmljZSIsInN2YyIsInRoaXMiLCJkZWcycmFkIiwiZGVnIiwiUEkiLCJnZXREaXN0YW5jZUZyb21MYXRMb25JbkttIiwibGF0MSIsImxvbjEiLCJsYXQyIiwibG9uMiIsIlIiLCJkTGF0IiwiZExvbiIsImEiLCJzaW4iLCJjb3MiLCJjIiwiYXRhbjIiLCJzcXJ0IiwiZCIsIm1hcFJhbmdlIiwidmFsdWUiLCJsb3cxIiwiaGlnaDEiLCJsb3cyIiwiaGlnaDIiLCJydW4iLCJkaXJlY3RpdmUiLCJQb3N0c1N2YyIsIlV0aWxTdmMiLCIkY29tcGlsZSIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsInJvb3RTY29wZSIsInVwZGF0ZURlZmF1bHRMb2NhdGlvbiIsImdldENlbnRlciIsInVwZGF0ZUJvdW5kcyIsInVwZGF0ZVdhdGNoTG9jYXRpb24iLCJmZXRjaCIsInN1Y2Nlc3MiLCJzZXNzaW9ucyIsImkiLCJsZW5ndGgiLCJ3YXRjaF9sb2NhdGlvbiIsInBvc3RfbG9jYXRpb24iLCJtYXJrZXJPcHRpb25zIiwicG9zaXRpb24iLCJpY29uIiwiaW1hZ2VMaXN0ZW5lciIsIm9wdGltaXplZCIsIm1hcmtlciIsIk1hcmtlciIsInNldFRpbWVvdXQiLCJvbGRfbWFya2VyIiwic2V0TWFwIiwicG9zdHMiLCJqIiwibWFya2VycyIsIl9pZCIsImhhc093blByb3BlcnR5IiwiY291cGxpbmdfc3RhdHVzIiwiY2FsY3VsYXRlQ291cGxpbmciLCJpbWFnZVBvc3QiLCJtYXhJbnN0YW50TGlmZVNwYW4iLCJsaWZlc3BhbiIsIm9sZF9wb3N0IiwiayIsInNwbGljZSIsInB1c2giLCJwYXJlbnQiLCJjaGlsZCIsIiRuZXciLCJvcGVuSW5mb1dpbmRvdyIsImNoaWxkX3Njb3BlIiwiaW5mb1dpbmRvd09wdGlvbnMiLCJwaXhlbE9mZnNldCIsIlNpemUiLCJkaXNhYmxlQXV0b1BhbiIsImluZm9XaW5kb3ciLCJJbmZvV2luZG93IiwiY3VycmVudERhdGUiLCJEYXRlIiwiY3VycmVudFRpbWVNaWxsaSIsImdldFRpbWUiLCJwb3N0bGlmZSIsImxpZmVlbmQiLCJsaWZlcGVyY2VudGFnZSIsInRvRml4ZWQiLCJtc2ciLCJib2R5IiwicG9zdGd1aWQiLCJwb3N0Z3VpZHRndCIsInBvc3Rjb3VwbGVzdGF0dXMiLCJwb3N0bGlmZXBlcmNlbnRhZ2UiLCJjb3VwbGluZ191cGRhdGUiLCJjb250ZW50IiwiY29tcGlsZWQiLCJzZXRDb250ZW50Iiwib3BlbiIsImRyYXdEcm9wRG93biIsImFuaW1hdGlvbiIsIkFuaW1hdGlvbiIsIkRST1AiLCJpbWFnZVVzZXJMb2dpbiIsImRyYXdBbmRTZXRQbGFjZSIsImRyYXdIZWxwZXJNYXJrZXIiLCJzZXRQbGFjZSIsImhlbHBlck1hcmtlcnMiLCJpbWFnZVRhcmdldCIsIiRlbWl0IiwiZ2VvY29kZXIiLCJHZW9jb2RlciIsImdlb2NvZGUiLCJsYXRMbmciLCJyZXN1bHRzIiwic3RhdHVzIiwiZm9ybWF0dGVkX2FkZHJlc3MiLCJwb3N0X2d1aWQiLCJwb3N0X2d1aWR0Z3QiLCJpbGlrZXlvdSIsInlvdWxpa2VpIiwic2V0VUlNb3ZlVG9DdXJyTG9jQnRuIiwiY3VyckxvY0J0biIsImdldEVsZW1lbnRCeUlkIiwiY29udHJvbHMiLCJDb250cm9sUG9zaXRpb24iLCJUT1BfUklHSFQiLCJzZXRVSVBvc3RGb3JtIiwicG9zdEZvcm0iLCJCT1RUT01fQ0VOVEVSIiwic2V0VUlQb3N0QnRuIiwicG9zdEJ0biIsInNldFVJVGltZVNsaWRlciIsInRpbWVTbGlkZXIiLCJzZXRVSVNlYXJjaEJveCIsImlucHV0IiwiVE9QX0xFRlQiLCJzZWFyY2hCb3giLCJwbGFjZXMiLCJTZWFyY2hCb3giLCJldmVudCIsImFkZExpc3RlbmVyIiwiZ2V0UGxhY2VzIiwiZ2VvbWV0cnkiLCJzZXRFdmVudENsaWNrIiwibWFwX29yaWdpbiIsInNldEV2ZW50Q2VudGVyQ2hhbmdlZCIsInNldEV2ZW50Qm91bmRzQ2hhbmdlZCIsInNldEV2ZW50RHJhZ0VuZCIsInNldEV2ZW50UmVzaXplIiwic2V0RXZlbnRab29tQ2hhbmdlZCIsImluaXRpYWxNYXBEYXRhIiwiaW5pdGlhbE1hcENlbnRlciIsImlzTmFOIiwibWFwT3B0aW9ucyIsImNlbnRlciIsInpvb20iLCJzY3JvbGx3aGVlbCIsInN0cmVldFZpZXdDb250cm9sIiwibWFwVHlwZUNvbnRyb2wiLCJwYW5Db250cm9sIiwiem9vbUNvbnRyb2wiLCJtYXBUeXBlQ29udHJvbE9wdGlvbnMiLCJtYXBUeXBlSWRzIiwiTWFwVHlwZUlkIiwiUk9BRE1BUCIsIkNMT1VEX01BUF9JRCIsIm1hcFR5cGVJZCIsInNldE1hbnVhbEV2ZW50cyIsIkNsb3VkTWFwIiwib3B0aW9ucyIsImhhbmRsZURyYXdYTWFya2VyIiwidHJpZ2dlciIsImhhbmRsZURyYXdDdXJyTG9jYXRpb25NYXJrZXIiLCJoYW5kbGVVcGRhdGVBbmREcmF3UG9zdHMiLCJoYW5kbGVEcmF3UmVzcG9uc2VzIiwiaGFuZGxlVW5EcmF3UG9zdCIsIk1hcCIsInByb3RvdHlwZSIsInNldFN0eWxlRm9yTWFwIiwiZmVhdHVyZU9wdHMiLCJmZWF0dXJlVHlwZSIsInN0eWxlcnMiLCJodWUiLCJzYXR1cmF0aW9uIiwibGlnaHRuZXNzIiwiZ2FtbWEiLCJzdHlsZWRNYXBPcHRpb25zIiwibmFtZSIsImN1c3RvbU1hcFR5cGUiLCJTdHlsZWRNYXBUeXBlIiwibWFwVHlwZXMiLCJzZXQiLCJpbml0TWFwIiwic2l6ZSIsIm9yaWdpbiIsIlBvaW50IiwiYW5jaG9yIiwic2NhbGVkU2l6ZSIsInJlc3RyaWN0IiwidGVtcGxhdGUiLCJyZXBsYWNlIiwidXBkYXRlR3VpZFRhcmdldCIsIm15Z3VpZCIsIiRwYXJlbnQiLCJmaW5kIiwib24iLCJ1cGRhdGVQb3N0VGltZXIiLCJkdXJhdGlvbiIsImdldF9jb3VwbGluZyIsInJlYWR5IiwiJGRvY3VtZW50IiwicmVxdWVzdEZldGNoIiwiYWRkUG9zdCIsInJlbGF0aXZlTGlmZVNwYW4iLCJjaGFyTGVuIiwiY3JlYXRlIiwidW5zaGlmdCIsImZyb250RW5kUG9zdFJlbW92ZSIs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QUdkN04sS0FBQ3lOLE9BQWEsU0FBSXJWLEdBQ2pCLE1BQU9WLEdBQU1VLEtBQUssYUFBY0EsSUFHakM0SCxLQUFDeEcsT0FBYSxTQUFLcEIsR0FHbkIsTUFBS1YsR0FBU29XLElBQUEsYUFBYzFWLE9BRzdCakIsUUFBRUMsT0FBYSxPQUNkMEksUUFBUSxjQUFlLFFBQVMsU0FBU3BJLEdBQ3pDc0ksS0FBS3VDLE1BQVEsV0FDZCxNQUFRN0ssR0FBT21XLElBQUEsa0JBR2Q3TixLQUFDMUQsTUFBTyxTQUFVRCxHQUNqQixNQUFPM0UsR0FBTVUsS0FBSyxnQkFBaUJpRSxJQUdwQzJELEtBQUN4RyxPQUFhLFNBQUs1QixHQUduQixHQUFLeUUsSUFBU3pFLEtBQUFBLEVBQ2IsT0FBT0YsR0FBTW9XLElBQUksZ0JBQWlCelIsSUFHbkMyRCxLQUFDc0Msb0JBQWlCLFNBQWlCN0csRUFBQUMsRUFBQUMsRUFBQS9ELEdBQ2xDLEdBQUlpRSxJQUNNQyxPQUFZTCxFQUFlYixJQUNqQ21CLE9BQUFOLEVBQStCWixJQUMvQm1CLE9BQVdOLEVBQUFkLElBQ0xxQixPQUFBUCxFQUFZYixJQUNacUIsV0FBWVAsRUFBZWYsSUFDM0J1QixXQUFZUixFQUFlZCxLQUczQnVCLEVBQVlwQixLQUFBQyxVQUFBWSxHQUVaa1MsR0FDQWxTLFNBQUFPLEVBQ0F4RSxLQUFNQSxFQU1oQixPQUZNOEUsU0FBUU8sSUFBSSwyQkFFWHZGLEVBQU1VLEtBQUssdUJBQXdCMlYiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5hbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuXHQnbmdSb3V0ZScsXG5cdCd1aS5zbGlkZXInXG5dKTtcbiIsIlxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24oU2Vzc2lvblN2YywgJHJvb3RTY29wZSwgJHNjb3BlLCAkd2luZG93LCAkaHR0cCwgJHRpbWVvdXQpe1xuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBJTklUSUFMXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBmdW5jdGlvbiBndWlkKCkge1xuXHRcdGZ1bmN0aW9uIHM0KCkge1xuXHRcdCAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcblx0XHQgICAgICAudG9TdHJpbmcoMTYpXG5cdFx0ICAgICAgLnN1YnN0cmluZygxKTtcblx0XHR9XG5cdCAgXHRyZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgczQoKSArIHM0KCk7XG5cdH1cblxuXHQkc2NvcGUuZ3VpZCA9IGd1aWQoKTtcblxuXHQkc2NvcGUucGFnZUlkID0geyBcblx0XHRwb3N0IDogMCxcblx0fTtcblxuXHQkc2NvcGUuc2xpZGVyT3B0aW9ucyA9IHtcbiAgICAgICAgZnJvbTogMSxcbiAgICAgICAgdG86IDMwMDAwMCxcbiAgICAgICAgc3RlcDogNTAwMCxcbiAgICAgICAgZGltZW5zaW9uOiAnIGttJyxcbiAgICAgICAgdmVydGljYWw6IGZhbHNlLFxuICAgICAgICBsaW1pdHM6IGZhbHNlLFxuICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHsnYmFja2dyb3VuZC1jb2xvcic6ICd5ZWxsb3cnfSxcbiAgICAgICAgICAgIGJlZm9yZTogeydiYWNrZ3JvdW5kLWNvbG9yJzogJ3B1cnBsZSd9LFxuICAgICAgICAgICAgZGVmYXVsdDogeydiYWNrZ3JvdW5kLWNvbG9yJzogJ3doaXRlJ30sXG4gICAgICAgICAgICBhZnRlcjogeydiYWNrZ3JvdW5kLWNvbG9yJzogJ2dyZWVuJ30sXG4gICAgICAgICAgICBwb2ludGVyOiB7J2JhY2tncm91bmQtY29sb3InOiAncmVkJ31cbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgJHNjb3BlLnRpbWV2YWx1ZSA9IDUwMDA7XG5cblx0JHNjb3BlLm5hdkNvbGxhcHNlZCA9IHRydWU7XG5cblx0JHNjb3BlLmd1aWR0Z3QgPSBcIjBcIjsgLy8g6riw67O46rCS7J2AIDDsnLzroZwg7ZW07IScIDDsnbTrqbQg6rSA7Ius7IOB64yAZ3VpZOqwgCDsl4bripQg7IOB7YOc7J2064ukLiBcblxuXHQvKlxuXHQvLyDsnIjrj4TsmrDqsIAg64ur7Z6I66Ck6rOgIO2VmOuptCDrpqztgJjsiqTtirgg67O064K464ukISDsnKDsoLgg7IS47IWY7J2EIOuLq+ycvOudvOqzoCFcblx0d2luZG93Lm9udW5sb2FkID0gZnVuY3Rpb24gKCl7XG5cdFx0U2Vzc2lvblN2Yy5yZW1vdmUoJHNjb3BlLmd1aWQpOyAvLyDshJzrsoTsl5DshJwg7Jyg7KCA6rCAIOuCmOqwkOydhCDslYzrprDri6Rcblx0fTtcblx0Ki9cblx0Lypcblx0d2luZG93LnVubG9hZCA9IG9uY2hhbmdlO1xuXG5cdGRvY3VtZW50LnVubG9hZCA9IG9uY2hhbmdlO1xuXG5cdGZ1bmN0aW9uIG9uY2hhbmdlIChldnQpIHtcblx0ICAgIGFsZXJ0KFwiU2Vzc2lvbiBkZWxldGVcIik7XG5cdCAgICBTZXNzaW9uU3ZjLnJlbW92ZSgkc2NvcGUuZ3VpZCk7XG5cdCAgfVxuXHQqL1xuXG5cdHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uKCl7XG5cdFx0U2Vzc2lvblN2Yy5yZW1vdmUoJHNjb3BlLmd1aWQpO1xuXHR9O1xuXG5cdC8qXG5cdHdpbmRvdy5wYWdlaGlkZSA9IGZ1bmN0aW9uKCl7XG5cdFx0IC8vIOyEnOuyhOyXkOyEnCDsnKDsoIDqsIAg64KY6rCQ7J2EIOyVjOumsOuLpFxuXHRcdGFsZXJ0KFwib24gYmVmb3JlIHVubG9hZFwiKTtcblx0fVxuXHQqL1xuXHRcblxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gU09DS0VUXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0dmFyIHVybDtcblx0dmFyIGhvc3RuYW1lID0gZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWU7XG5cdHZhciBkZXZlbG9wbWVudElQID0gXCIxOTIuMTY4LjAuNFwiO1xuXG5cdGlmIChob3N0bmFtZSA9PSBcImxvY2FsaG9zdFwiKXtcblx0XHR1cmwgPSBcIndzOi8vbG9jYWxob3N0OjUwMDBcIjtcblx0fVxuXHRlbHNlIGlmIChob3N0bmFtZSA9PSBkZXZlbG9wbWVudElQKSB7XG5cdFx0dXJsID0gJ3dzOi8vMTkyLjE2OC4wLjQ6NTAwMCc7IC8vIGRldmVsb3BtZXQgb24gc29ja2V0IGxvY2FsbHkgXG5cdH1cblx0ZWxzZSB7XG5cdFx0dXJsID0gJ3dzczovL2Nsb3VkdGFsay5oZXJva3VhcHAuY29tJzsgLy8gcHJvZHVjdGlvbiBkZXBsb3kgdmVyc2lvbiAtIHN0aWxsIGRlYnVnIG1vZGVcblx0fVxuXG5cdC8qIOqwnOuwnOqzvOygleydtCDrgZ3rgpjqs6Ag67Cw7Y+s7Iuc7JeQ64qUIOychOu2gOu2hOydhCDsp4DsmrDqs6Ag7JWE656YIOy9lOuTnOunjCDrgqjqsqjrj4Qg65Cc64ukLlxuXHR1cmwgPSAnd3NzOi8vZnJvemVuLWJhZGxhbmRzLTg2NDkuaGVyb2t1YXBwLmNvbSc7XG5cdCovXG5cdHZhciBjb25uZWN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Y29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXQodXJsKTtcblxuXHRcdGNvbm5lY3Rpb24ub25vcGVuID0gZnVuY3Rpb24oKXtcblx0XHRcdGZ1bmN0aW9uIGdldEN1cnJMb2NTdWNjZXNzKHBvcykge1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8vLy8vLy8vLy8vLy8vLy8vIFBIWVNJQ0FMIExPQ0FUSU9OXG5cdFx0XHRcdC8vIOunqOyymOydjOyXkOuKlCDsnKDsoIDsnZgg7Iuk7KCcIOychOy5mCjslbHsl5Ag7J6F7J6l7ZaI7J2E65WM7J2YIOychOy5mCnsmYAg7IS87YSwIO2PrOyngOyFmOydhCDqsJnsnbQg67O064K06rOgLFxuXHRcdFx0XHQvLyDshLzthLAg7Y+s7KeA7IWY7J2AIOqzhOyGjSDsl4XrjbDsnbTtirgg65CY7Ja07JW8IO2VnOuLpC5cblx0ICAgICAgICAgICAgdmFyIGNyZCA9IHBvcy5jb29yZHM7XG5cblx0ICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoY3JkLmxhdGl0dWRlLCBjcmQubG9uZ2l0dWRlKTtcblxuXHQgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSB7XG5cdCAgICAgICAgXHRcdGxhdDpnb29nbGVMb2MubGF0KCksXG5cdCAgICAgICAgXHRcdGxvbjpnb29nbGVMb2MubG5nKClcblx0ICAgICAgICBcdH07XG5cdCAgICAgICAgXHR2YXIgbG9jYXRpb25KU09OID0gSlNPTi5zdHJpbmdpZnkobG9jYXRpb24pO1xuXHQgICAgICAgIFx0Ly9jb25zb2xlLmxvZyhcInNldHRpbmcgbG9jYXRpb25cIiwgbG9jYXRpb25KU09OKTtcblxuXHQgICAgICAgIFx0Ly8vLy8vLy8vLy8vLy8vLy8vIFdBVENIIExPQ0FUSU9OXG5cdCAgICAgICAgXHR2YXIgYm91bmRzID0gJHNjb3BlLm1hcC5nZXRCb3VuZHMoKTtcblx0ICAgICAgICAgICAgdmFyIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIG5vcnRoLWVhc3QgY29ybmVyXG5cdCAgICAgICAgICAgIHZhciBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBzb3V0aC13ZXN0IGNvcmRlclxuXHQgICAgICAgICAgICAvL1lvdSBnZXQgbm9ydGgtd2VzdCBhbmQgc291dGgtZWFzdCBjb3JuZXJzIGZyb20gdGhlIHR3byBhYm92ZTpcblxuXHQgICAgICAgICAgICB2YXIgY3VycmVudF9tYXBfbncgPSB7IFxuXHQgICAgICAgICAgICAgICAgbGF0OiBuZS5sYXQoKSwgXG5cdCAgICAgICAgICAgICAgICBsb246IHN3LmxuZygpXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50X21hcF9zZSA9IHtcblx0ICAgICAgICAgICAgICAgIGxhdDogc3cubGF0KCksIFxuXHQgICAgICAgICAgICAgICAgbG9uOiBuZS5sbmcoKVxuXHQgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50X21hcF9jZW50ZXIgPSB7XG5cdCAgICAgICAgICAgIFx0bGF0OndpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUsXG5cdCAgICAgICAgICAgIFx0bG9uOndpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlXG5cdCAgICAgICAgXHR9O1xuXG5cdCAgICAgICAgICAgIHZhciB3YXRjaGxvYyA9IHtcblx0XHQgICAgICAgICAgICBud19sYXQgICAgOiBjdXJyZW50X21hcF9udy5sYXQsXG5cdFx0ICAgICAgICAgICAgbndfbG9uICAgIDogY3VycmVudF9tYXBfbncubG9uLFxuXHRcdCAgICAgICAgICAgIHNlX2xhdCAgICA6IGN1cnJlbnRfbWFwX3NlLmxhdCxcblx0XHQgICAgICAgICAgICBzZV9sb25cdCAgOiBjdXJyZW50X21hcF9zZS5sb24sXG5cdFx0ICAgICAgICAgICAgY2VudGVyX2xhdDogY3VycmVudF9tYXBfY2VudGVyLmxhdCxcblx0XHQgICAgICAgICAgICBjZW50ZXJfbG9uOiBjdXJyZW50X21hcF9jZW50ZXIubG9uXG5cdFx0ICAgICAgICB9XG5cblx0ICAgICAgICBcdHZhciB3YXRjaGxvY0pTT04gPSBKU09OLnN0cmluZ2lmeSh3YXRjaGxvYyk7XG5cdCAgICAgICAgXHQvL2NvbnNvbGUubG9nKFwic2V0dGluZyB3YXRjaGxvY1wiLCB3YXRjaGxvY0pTT04pO1xuXHQgICAgICAgICAgICBcblx0ICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vIExPQ0FUSU9OIFVQREFURSBXSVRIIFNFU1NJT04gRU5URVJcblx0ICAgICAgICAgICAgLy/sl6zquLDshJwg67mE64+Z6riw7KCB7Jy866GcIOycoOyggOydmCDroZzsvIDsnbTshZjsnYQg7Ja76rOgIOyEuOyFmOydhCDrs7TrgrzsiJgg7J6I64ukLlxuXHRcdFx0XHR2YXIgc2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRndWlkOiAgICAgJHNjb3BlLmd1aWQsXG5cdFx0XHRcdFx0bG9jYXRpb246IGxvY2F0aW9uSlNPTixcblx0XHRcdFx0XHR3YXRjaGxvYzogd2F0Y2hsb2NKU09OXG5cdFx0XHRcdH07XG5cdFx0XHRcdFNlc3Npb25TdmMuZW50ZXIoc2Vzc2lvbik7IC8vIOyEnOuyhOyXkOyEnCDsnKDsoIDqsIAg65Ok7Ja07Ji07J2EIOyVjOumsOuLpC5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICBmdW5jdGlvbiBnZXRDdXJyTG9jRXJyb3IoZXJyKSB7XG5cdCAgICAgICAgXHRzd2FsKFwiXCIsIFwiTmVlZCB0byB0dXJuIG9uIGxvY2F0aW9uIHNlcnZpY2UgZm9yIHByb3BlciB1c2UuXCIpO1xuXHQgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0VSUk9SKCcgKyBlcnIuY29kZSArICcpOiAnICsgZXJyLm1lc3NhZ2UpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8qIGluaXQgbWFwIGFuZCBwbGFjZSBzb21lIG1hcmtlcnMsIHNvIGV2ZXJ5dGhpbmcgc3RhcnQgd2l0aCB0aGlzIGZ1bmN0aW9uLiAqL1xuXHQgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZ2V0Q3VyckxvY1N1Y2Nlc3MsIGdldEN1cnJMb2NFcnJvcik7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY29ubmVjdGVkJyk7XG5cdFx0fTtcblxuXHRcdGNvbm5lY3Rpb24ub25jbG9zZSA9IGZ1bmN0aW9uKCl7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY2xvc2VkLiBSZWNvbmVjdGluZy4uLicpO1xuXHRcdFx0JHRpbWVvdXQoY29ubmVjdCwgMjAwMCk7XG5cdFx0fTtcblxuXHRcdGNvbm5lY3Rpb24ub25tZXNzYWdlID0gZnVuY3Rpb24oZSl7XG5cdFx0XHQvL2NvbnNvbGUubG9nKCdicm9hZGNhc3QgbXNnIGZyb20gc2VydmVyOicsIGUpO1xuXHRcdFx0dmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKGUuZGF0YSk7XG5cblx0XHRcdC8qXG5cdFx0XHRcdHdzOm5ld19wb3N0ICAgIC0g7IOI66Gc7Jq0IO2PrOyKpO2KuOqwgCDsmKzrnbzsmZTsnYTrlYwgZnJvbnQtZW5k7JeQ7IScIOunteydtCDri6Tsi5wg7JeF642w7J207Yq4IO2VtOyVvCDrkJzri6Tqs6Ag7JWM66Ck7KSA64ukIVxuXHRcdFx0XHR3czpuZXdfc2Vzc2lvbiAtIHNlc3Npb27snbQg7IOI66GcIOuTpOyWtOyYpOuptCDrkJzri6Tqs6Ag7JWM66Ck7KSA64ukIVxuXHRcdFx0XHR3czpyZW1vdmVfcG9zdCAtIO2PrOyKpO2KuOqwgCDsi5zqsITsnbQg64ukIOuQmOyWtOyEnCDsgqzrnbzsp4jrlYwhXG5cdFx0XHRcdOunpOyasOykkeyalCEgXG5cdFx0XHQqL1xuXHRcdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCd3czonICsgcGF5bG9hZC50eXBlLCBwYXlsb2FkLmRhdGEpO1xuXHRcdH07XG5cdH07XG5cdGNvbm5lY3QoKTtcblxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIFNPQ0tFVCBCUk9BRENBU1QgUkVDRUlWRVJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBhcyBzZXJ2ZXIgc29ja2V0IHNlbmQgJ3dzOm5ld19wb3N0JyAsIHdlIGNhbiB1cGRhdGUgdGhlIG1hcCFcblx0JHNjb3BlLiRvbignd3M6bmV3X3Bvc3QnLCBmdW5jdGlvbihfLCBwb3N0KXtcblx0XHQvLyB1cGRhdGUgcG9zdHNcblx0XHQkc2NvcGUubWFwLnVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXG5cdFx0Ly8gc2hvdyByZXNwb25zaXZlIHVzZXJzIG9ubHkgdG8gdGhlIHVzZXIgd2hvIHdyb3RlIHRoaXMgcG9zdFxuXHRcdGlmIChwb3N0Lmd1aWQgPT0gJHNjb3BlLmd1aWQpXG5cdFx0e1xuXHRcdFx0Ly9jb25zb2xlLmxvZygnc3RhcnQgZHJhd2luZyByZXNwb25zZXMuLicpO1xuXHRcdFx0JHNjb3BlLm1hcC5kcmF3UmVzcG9uc2VzKHBvc3QpO1xuXHRcdH1cblx0fSk7XG5cblx0Ly8gYXMgc2VydmVyIHNvY2tldCBzZW5kICd3czpuZXdfcG9zdCcgLCB3ZSBjYW4gdXBkYXRlIHRoZSBtYXAhXG5cdCRzY29wZS4kb24oJ3dzOm5ld19zZXNzaW9uJywgZnVuY3Rpb24oXywgc2Vzc2lvbil7XG5cblx0XHR2YXIgbG9jYXRpb24gPSBhbmd1bGFyLmZyb21Kc29uKHNlc3Npb24ubG9jYXRpb24pO1xuXHRcdCRzY29wZS5tYXAuZHJhd0N1cnJMb2NhdGlvbk1hcmtlcihsb2NhdGlvbik7XG5cblx0fSk7XG5cblx0Ly8gd2hlbiBzZXJ2ZXIgcmVtb3ZlIHRoZSBwb3N0IGFmdGVyIHRpbWUgZm9yIGxvbmdlciBvbmVzLCBcblx0Ly8gdXBkYXRlIG1hcCB3aXRoIGNvcmVzcG9uZGluZyBpbmZvXG5cdCRzY29wZS4kb24oJ3dzOnJlbW92ZV9wb3N0JywgZnVuY3Rpb24oXywgcG9zdGlkKXtcblx0XHQkc2NvcGUubWFwLnVuRHJhd1Bvc3QocG9zdGlkKTtcblx0fSk7XG5cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBBUFBMSUNBVElPTiBMRVZFTCBGVU5DVElPTlNcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBzZWUgaWYgaXRzIG1vYmlsZSBwaG9uZVxuXHQkc2NvcGUuaXNNb2JpbGUgPSBmdW5jdGlvbigpe1xuXHRcdGlmKCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL3dlYk9TL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQb2QvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9XaW5kb3dzIFBob25lL2kpXG5cdFx0ICl7XG5cdFx0ICAgIHJldHVybiB0cnVlO1xuXHRcdCAgfVxuXHRcdCBlbHNlIHtcblx0XHQgICAgcmV0dXJuIGZhbHNlO1xuXHRcdCAgfVxuXHR9O1xuXG5cdC8qIG1vdmUgdG8gY3VycmVudCBsb2NhdGlvbiAqL1xuXHQkc2NvcGUubW92ZVRvQ3VycmVudExvY2F0aW9uID0gZnVuY3Rpb24oKXtcblx0XHRmdW5jdGlvbiBnZXRDdXJyTG9jU3VjY2Vzcyhwb3MpIHtcbiAgICAgICAgICAgIC8qIG1ha2Ugc3VyZSB0byBjaGVjayB3ZSBhcmUgb24gcG9zdCBwYWdlIHdpdGggbWFwIGZpcnN0ICovXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRQYWdlSWQgIT0gJHNjb3BlLnBhZ2VJZC5wb3N0KVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgdmFyIGNyZCA9IHBvcy5jb29yZHM7XG5cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUgPSBjcmQubGF0aXR1ZGU7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSA9IGNyZC5sb25naXR1ZGU7XG5cbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHtcbiAgICAgICAgICAgIFx0bGF0OiBjcmQubGF0aXR1ZGUsIFxuICAgICAgICAgICAgXHRsb246IGNyZC5sb25naXR1ZGVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIGRyYXcgZHJvcCBkb3duIHVzZXIgcG9zaXRpb25cbiAgICAgICAgICAgXHQkc2NvcGUubWFwLmRyYXdDdXJyTG9jYXRpb25NYXJrZXIobG9jYXRpb24pO1xuXG4gICAgICAgICAgIFx0Ly8gZHJhdyB4IG1hcmtlclxuXHQgICAgICAgICRzY29wZS5tYXAuZHJhd1hNYXJrZXIobG9jYXRpb24pO1xuXG5cdCAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobG9jYXRpb24ubGF0LCBsb2NhdGlvbi5sb24pO1xuXG5cdCAgICAgICAgLy8gbW92ZSB0byB0aGUgbG9jYXRpb24gYW5kIHpvb20gaW50byByaWdodCBhbW91bnRcbiAgICAgICAgICAgICRzY29wZS5tYXAucGFuVG8oZ29vZ2xlTG9jKVxuICAgICAgICAgICAgJHNjb3BlLm1hcC5zZXRab29tKDE1KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEN1cnJMb2NFcnJvcihlcnIpIHtcbiAgICAgICAgXHRzd2FsKFwiXCIsIFwiTmVlZCB0byB0dXJuIG9uIGxvY2F0aW9uIHNlcnZpY2UgZm9yIHByb3BlciB1c2UuXCIpO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdFUlJPUignICsgZXJyLmNvZGUgKyAnKTogJyArIGVyci5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGluaXQgbWFwIGFuZCBwbGFjZSBzb21lIG1hcmtlcnMsIHNvIGV2ZXJ5dGhpbmcgc3RhcnQgd2l0aCB0aGlzIGZ1bmN0aW9uLiAqL1xuICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGdldEN1cnJMb2NTdWNjZXNzLCBnZXRDdXJyTG9jRXJyb3IpO1xuXG4gICAgICAgIHN3YWwoeyAgIHRpdGxlOiBcIlwiLCAgIHRleHQ6IFwiTW92aW5nIHRvIGN1cnJlbnQgbG9jYXRpb24uLlwiLCAgIHRpbWVyOiAxNTAwLCAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSB9KTtcblx0fTtcblxuXHQkc2NvcGUubW92ZVRvUG9zdExvY2F0aW9uID0gZnVuY3Rpb24oKXtcblx0XHR2YXIgbGF0RGVsdGEgPSAwLjA7XG5cblx0XHRpZiAoJHNjb3BlLmlzTW9iaWxlKCkpe1xuXHRcdFx0dmFyIGJvdW5kcyA9ICRzY29wZS5tYXAuZ2V0Qm91bmRzKCk7XG5cdCAgICAgICAgdmFyIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIG5vcnRoLWVhc3QgY29ybmVyXG5cdCAgICAgICAgdmFyIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIHNvdXRoLXdlc3QgY29yZGVyXG5cdCAgICAgICAgY3VycmVudF9tYXBfbncgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKG5lLmxhdCgpLCBzdy5sbmcoKSk7XG5cdCAgICAgICAgY3VycmVudF9tYXBfc2UgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHN3LmxhdCgpLCBuZS5sbmcoKSk7XG5cblx0ICAgICAgICB2YXIgbGF0RGVsdGFfY2VudGVyMm5vcnRoID0gMC41ICogTWF0aC5hYnMoJHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQgLSBjdXJyZW50X21hcF9udy5sYXQoKSk7XG5cdCAgICAgICAgdmFyIGxhdERlbHRhX2NlbnRlcjJzb3V0aCA9IDAuNSAqIE1hdGguYWJzKCRzY29wZS5wb3N0TG9jYXRpb24ubGF0IC0gY3VycmVudF9tYXBfc2UubGF0KCkpO1xuXG5cdCAgICAgICAgaWYgKGxhdERlbHRhX2NlbnRlcjJub3J0aCA+IGxhdERlbHRhX2NlbnRlcjJzb3V0aCl7XG5cdCAgICAgICAgXHRsYXREZWx0YSA9IGxhdERlbHRhX2NlbnRlcjJzb3V0aDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgXHRsYXREZWx0YSA9IGxhdERlbHRhX2NlbnRlcjJub3J0aDtcblx0ICAgICAgICB9XG5cdFx0fVxuXG5cdFx0dmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoJHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQgKyBsYXREZWx0YSwgJHNjb3BlLnBvc3RMb2NhdGlvbi5sb24pO1xuXHRcdCRzY29wZS5tYXAucGFuVG8oZ29vZ2xlTG9jKTtcblx0fTtcblxuXHQkc2NvcGUuY29sbGFwc2UgPSBmdW5jdGlvbigpe1xuXHRcdCRzY29wZS5uYXZDb2xsYXBzZWQgPSB0cnVlO1xuXHR9O1xuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gR0VORVJBTCBCUk9BRENBU1QgUkVDRUlWRVJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICRzY29wZS4kb24oJ21hcEluaXQnLCBmdW5jdGlvbihfLCBtYXApe1xuXHRcdCRzY29wZS5tYXAgPSBtYXA7XG5cdH0pO1xuXG4gICAgJHNjb3BlLiRvbignc2V0Omd1aWR0Z3QnLCBmdW5jdGlvbihfLCBndWlkdGd0KXtcblx0XHQkc2NvcGUuZ3VpZHRndCA9IGd1aWR0Z3Q7XG5cdH0pO1xuXG5cdCRzY29wZS4kb24oJ3BhZ2VjaGFuZ2UnLCBmdW5jdGlvbihfLCBwYWdlSWQpe1xuXHRcdCRzY29wZS5jdXJyZW50UGFnZUlkID0gcGFnZUlkO1xuXHR9KTtcblxuXHQkc2NvcGUuJG9uKCdsb2MnLCBmdW5jdGlvbihfLCBsb2NhdGlvbil7XG5cdFx0dmFyIGxhdCA9IGxvY2F0aW9uLmxhdCgpO1xuXHRcdHZhciBsb24gPSBsb2NhdGlvbi5sbmcoKTtcblx0XHQkc2NvcGUucG9zdExvY2F0aW9uID0ge1xuXHRcdFx0bGF0OiBsYXQsXG5cdFx0XHRsb246IGxvblxuXHRcdH07XG5cdH0pO1xuXG5cdCRzY29wZS4kb24oJ3BsYWNlJywgZnVuY3Rpb24oXywgcGxhY2Upe1xuXHRcdC8vIEZvcmNpbmcgdGhlIHVwZGF0ZSB3aXRoICRhcHBseSgpIG1ldGhvZCBvbiAkc2NvcGVcblx0XHQvLyBwcm9ibGVtIHJlbGF0ZWQgbm90ZTogaHR0cDovL3d3dy5qZWZmcnlob3VzZXIuY29tL2luZGV4LmNmbS8yMDE0LzYvMi9Ib3ctZG8tSS1ydW4tY29kZS13aGVuLWEtdmFyaWFibGUtY2hhbmdlcy13aXRoLUFuZ3VsYXJKU1xuXHRcdCRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcblx0XHRcdFx0JHNjb3BlLnBvc3RwbGFjZSA9IHBsYWNlO1xuXHRcdFx0fVxuXHRcdCk7XG5cdH0pO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcil7XG5cdCRyb3V0ZVByb3ZpZGVyXG5cdC53aGVuKCcvJywgXG5cdFx0e1xuXHRcdFx0Y29udHJvbGxlcjogJ1Bvc3RzQ3RybCcsIFxuXHRcdFx0dGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3Bvc3RzLmh0bWwnXG5cdFx0fSlcblx0Ly8gUmVkaXJlY3QgdG8gdGhlIHJvb3QgcGFnZS5cblx0Lm90aGVyd2lzZShcblx0XHR7XG4gICBcdFx0XHRyZWRpcmVjdFRvOiAnLydcblx0XHR9KTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnVXRpbFN2YycsIGZ1bmN0aW9uKCl7XG5cdHZhciBzdmMgPSB0aGlzO1xuXG5cdHN2Yy5kZWcycmFkID0gZnVuY3Rpb24oZGVnKSB7XG5cdCAgcmV0dXJuIGRlZyAqIChNYXRoLlBJLzE4MCk7XG5cdH07XG5cblx0c3ZjLmdldERpc3RhbmNlRnJvbUxhdExvbkluS20gPSBmdW5jdGlvbiAobGF0MSxsb24xLGxhdDIsbG9uMikge1xuXHQgIHZhciBSID0gNjM3MTtcblx0ICB2YXIgZExhdCA9IHN2Yy5kZWcycmFkKGxhdDItbGF0MSk7XG5cdCAgdmFyIGRMb24gPSBzdmMuZGVnMnJhZChsb24yLWxvbjEpOyBcblx0ICB2YXIgYSA9IFxuXHQgICAgTWF0aC5zaW4oZExhdC8yKSAqIE1hdGguc2luKGRMYXQvMikgK1xuXHQgICAgTWF0aC5jb3Moc3ZjLmRlZzJyYWQobGF0MSkpICogTWF0aC5jb3Moc3ZjLmRlZzJyYWQobGF0MikpICogXG5cdCAgICBNYXRoLnNpbihkTG9uLzIpICogTWF0aC5zaW4oZExvbi8yKVxuXHQgICAgOyBcblx0ICB2YXIgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEtYSkpOyBcblx0ICB2YXIgZCA9IFIgKiBjO1xuXHQgIHJldHVybiBkO1xuXHR9O1xuXG5cdHN2Yy5tYXBSYW5nZSA9IGZ1bmN0aW9uICh2YWx1ZSwgbG93MSwgaGlnaDEsIGxvdzIsIGhpZ2gyKSB7XG5cdCAgICByZXR1cm4gbG93MiArIChoaWdoMiAtIGxvdzIpICogKHZhbHVlIC0gbG93MSkgLyAoaGlnaDEgLSBsb3cxKTtcblx0fVxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4ucnVuKGZ1bmN0aW9uKCRyb290U2NvcGUsICR0aW1lb3V0LCBTZXNzaW9uU3ZjKXtcblxuXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5kaXJlY3RpdmUoJ2FwcE1hcCcsIGZ1bmN0aW9uKFBvc3RzU3ZjLCBVdGlsU3ZjLCBTZXNzaW9uU3ZjLCAkY29tcGlsZSkge1xuICAgIC8vIGRpcmVjdGl2ZSBsaW5rIGZ1bmN0aW9uXG4gICAgdmFyIGxpbmsgPSBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIHJvb3RTY29wZSkge1xuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEdMT0JBTCBWQVJJQUJMRVMgSU4gTElOSyBGVU5DVElPTlxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICB2YXIgbWFwOyAvLyBleHBhbmQgZnJvbSBnb29nbGUgbWFwIGZvciBtYW51YWxseSBjcmVhdGVkIGV2ZW50c1xuICAgICAgICB2YXIgbWFwX29yaWdpbjsgLy8gZm9yIG9yaWdpbmFsIGdvb2dsZSBtYXAgZXZlbnQgZnVuY3Rpb24gbGlua3NcbiAgICAgICAgdmFyIGN1cnJlbnRfbWFwX253O1xuICAgICAgICB2YXIgY3VycmVudF9tYXBfc2U7XG4gICAgICAgIHZhciBtYXBPcHRpb25zO1xuICAgICAgICB2YXIgaW5pdGlhbE1hcENlbnRlcjtcbiAgICAgICAgdmFyIENMT1VEX01BUF9JRCA9ICdjdXN0b21fc3R5bGUnOyAvLyBtYXAgc3R5bGVcbiAgICAgICAgdmFyIGhlbHBlck1hcmtlcnMgPSBbXTtcbiAgICAgICAgdmFyIG1hcmtlcnMgPSBbXTtcbiAgICAgICAgdmFyIGltYWdlUG9zdCA9IHtcbiAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vY2F0Y2htZS5pZnlvdWNhbi5jb20vaW1hZ2VzL3BpY3R1cmVzL0lZQ19JY29ucy9JWUNfTG9jYXRpb25fSWNvbl9TbWFsbC5wbmcnLFxuICAgICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTAwLCAxMDApLFxuICAgICAgICAgICAgb3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgxNywgMzQpLFxuICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMSwgMSlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGltYWdlVGFyZ2V0ID0ge1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovL3d3dy5jbGtlci5jb20vY2xpcGFydHMvVS9QL2ovTS9JL2kveC1tYXJrLXllbGxvdy1tZC5wbmcnLFxuICAgICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTAwLCAxMDApLFxuICAgICAgICAgICAgb3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgxNywgMzQpLFxuICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMjUsIDI1KVxuICAgICAgICB9O1xuICAgICAgICB2YXIgaW1hZ2VVc2VyTG9naW4gPSB7XG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vd3d3LmNsa2VyLmNvbS9jbGlwYXJ0cy9xL28vMi9LL2cvVi9sb2NhdGlvbi1zeW1ib2wtbWFwLW1kLnBuZycsXG4gICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICBvcmlnaW46IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDE3LCAzNCksXG4gICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgyMCwgMzMpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBpbWFnZUxpc3RlbmVyID0ge1xuICAgICAgICAgICAgdXJsOiAnaHR0cDovLzIuYnAuYmxvZ3Nwb3QuY29tLy1kak1hX241bkFFTS9UMUd2eF8tNy16SS9BQUFBQUFBQUFRNC8tMU42bGxlUXZaYy9zMTYwMC9ibGlua2luZ19kb3QuZ2lmJyxcbiAgICAgICAgICAgIHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEwMCwgMTAwKSxcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTcsIDM0KSxcbiAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDE3LCAxNylcbiAgICAgICAgfTtcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFVkVOVCBIQU5ETEVSUyAtIFVQREFURVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVEZWZhdWx0TG9jYXRpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxhdGl0dWRlID0gbWFwLmdldENlbnRlcigpLmxhdCgpO1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sb25naXR1ZGUgPSBtYXAuZ2V0Q2VudGVyKCkubG5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVCb3VuZHMoKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gbWFwLmdldEJvdW5kcygpO1xuICAgICAgICAgICAgdmFyIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIG5vcnRoLWVhc3QgY29ybmVyXG4gICAgICAgICAgICB2YXIgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCk7IC8vIExhdExuZyBvZiB0aGUgc291dGgtd2VzdCBjb3JkZXJcbiAgICAgICAgICAgIC8vWW91IGdldCBub3J0aC13ZXN0IGFuZCBzb3V0aC1lYXN0IGNvcm5lcnMgZnJvbSB0aGUgdHdvIGFib3ZlOlxuXG4gICAgICAgICAgICBjdXJyZW50X21hcF9udyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobmUubGF0KCksIHN3LmxuZygpKTtcbiAgICAgICAgICAgIGN1cnJlbnRfbWFwX3NlID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhzdy5sYXQoKSwgbmUubG5nKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlV2F0Y2hMb2NhdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBtYXAuZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICB2YXIgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7IC8vIExhdExuZyBvZiB0aGUgbm9ydGgtZWFzdCBjb3JuZXJcbiAgICAgICAgICAgIHZhciBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBzb3V0aC13ZXN0IGNvcmRlclxuICAgICAgICAgICAgLy9Zb3UgZ2V0IG5vcnRoLXdlc3QgYW5kIHNvdXRoLWVhc3QgY29ybmVycyBmcm9tIHRoZSB0d28gYWJvdmU6XG5cbiAgICAgICAgICAgIGN1cnJlbnRfbWFwX253ID0geyBcbiAgICAgICAgICAgICAgICBsYXQ6IG5lLmxhdCgpLCBcbiAgICAgICAgICAgICAgICBsb246IHN3LmxuZygpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY3VycmVudF9tYXBfc2UgPSB7XG4gICAgICAgICAgICAgICAgbGF0OiBzdy5sYXQoKSwgXG4gICAgICAgICAgICAgICAgbG9uOiBuZS5sbmcoKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGN1cnJlbnRfbWFwX2NlbnRlciA7XG5cbiAgICAgICAgICAgIC8vIHNlZSBpZiB0aGUgbGF0ZXN0IHggbWFya2VyIG9yIHBvc3QgbG9jYXRpb24gaXMgd2l0aGluIHVzZXIncyB2aWV3XG4gICAgICAgICAgICBpZiAoIShzY29wZS5wb3N0TG9jYXRpb24ubGF0IDwgY3VycmVudF9tYXBfbncubGF0KSB8fFxuICAgICAgICAgICAgICAgICEoc2NvcGUucG9zdExvY2F0aW9uLmxhdCA+IGN1cnJlbnRfbWFwX3NlLmxhdCkgfHxcbiAgICAgICAgICAgICAgICAhKHNjb3BlLnBvc3RMb2NhdGlvbi5sb24gPCBjdXJyZW50X21hcF9zZS5sb24pIHx8XG4gICAgICAgICAgICAgICAgIShzY29wZS5wb3N0TG9jYXRpb24ubG9uID4gY3VycmVudF9tYXBfbncubG9uKSApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gaWYgaXQgaXMgbm90IHdpdGhpbiB1c2VyJ3MgdmlldywgdGhlbiBqdXN0IHVzZSBtYXAgY2VudGVyXG4gICAgICAgICAgICAgICAgY3VycmVudF9tYXBfY2VudGVyID0ge1xuICAgICAgICAgICAgICAgICAgICBsYXQ6IG1hcC5nZXRDZW50ZXIoKS5sYXQoKSxcbiAgICAgICAgICAgICAgICAgICAgbG9uOiBtYXAuZ2V0Q2VudGVyKCkubG5nKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIGlmIGl0IGlzIHdpdGhpbiB1c2VyJ3MgdmlldywgdXNlIHggbWFya2VyIGxvY2F0aW9uIGEuay5hIHBvc3QgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBjdXJyZW50X21hcF9jZW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIGxhdDogc2NvcGUucG9zdExvY2F0aW9uLmxhdCxcbiAgICAgICAgICAgICAgICAgICAgbG9uOiBzY29wZS5wb3N0TG9jYXRpb24ubG9uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFNlc3Npb25TdmMudXBkYXRlV2F0Y2hMb2NhdGlvbihjdXJyZW50X21hcF9udywgY3VycmVudF9tYXBfc2UsIGN1cnJlbnRfbWFwX2NlbnRlciwgc2NvcGUuZ3VpZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFVkVOVCBIQU5ETEVSUyAtIERSQVdcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gdXBkYXRlIHJlc3BvbnNlcyBzdWNoIGFzIHZpc3VhbGl6YXRpb24gb2YgbGlzdGVuZXJzXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdSZXNwb25zZXMocG9zdCl7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdyZWZlcmVuY2UgcG9zdDonLCBwb3N0KTtcblxuICAgICAgICAgICAgU2Vzc2lvblN2Yy5mZXRjaCgpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihzZXNzaW9ucyl7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlc3Npb25zLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlc3Npb24gPSBzZXNzaW9uc1tpXTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBza2lwIG15IHNlc3Npb24gLSBubyBuZWVkIHRvIGRyYXcg64K0IOyekOyLoOydmCDshLjshZjsnYAg6re466a07ZWE7JqU6rCAIOyXhuuLpC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlc3Npb24uZ3VpZCA9PSBzY29wZS5ndWlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgIC8vIHNlc3Npb24ncyB3YXRjaCBsb2NhdGlvbiB3aWxsIGJlIGJvdW5jZWQhXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Nlc3Npb24gd2F0Y2ggbG9jYXRpb246Jywgc2Vzc2lvbi53YXRjaGxvYyk7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Bvc3QgbG9jYXRpb246JywgcG9zdC5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHZhciB3YXRjaF9sb2NhdGlvbiA9IGFuZ3VsYXIuZnJvbUpzb24oc2Vzc2lvbi53YXRjaGxvYyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3N0X2xvY2F0aW9uID0gYW5ndWxhci5mcm9tSnNvbihwb3N0LmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIOycoOyggOqwgCDrs7Tqs6Ag7J6I64qUIOuwlOyatOuNlOumrCDslYjsl5Ag6re4IHNlc3Npb24o64uk66W47Jyg7KCAKSDssrTtgoFcblxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGN1cnJlbnRfbWFwX3NlLCBjdXJyZW50X21hcF9udyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHdhdGNoX2xvY2F0aW9uLmNlbnRlcl9sYXQgPCBjdXJyZW50X21hcF9udy5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEod2F0Y2hfbG9jYXRpb24uY2VudGVyX2xhdCA+IGN1cnJlbnRfbWFwX3NlLmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgISh3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbG9uIDwgY3VycmVudF9tYXBfc2UubG5nKCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKHdhdGNoX2xvY2F0aW9uLmNlbnRlcl9sb24gPiBjdXJyZW50X21hcF9udy5sbmcoKSkgKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlc3Npb24o64uk66W47Jyg7KCAKeuTpOydtCDqt7gg7Y+s7Iqk7Yq466W8IOuztOqzoCDsnojsp4Ag7JWK7Jy866m0IOyKpO2CtS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocG9zdF9sb2NhdGlvbi5sYXQgPCB3YXRjaF9sb2NhdGlvbi5ud19sYXQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKHBvc3RfbG9jYXRpb24ubGF0ID4gd2F0Y2hfbG9jYXRpb24uc2VfbGF0KSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShwb3N0X2xvY2F0aW9uLmxvbiA8IHdhdGNoX2xvY2F0aW9uLnNlX2xvbikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEocG9zdF9sb2NhdGlvbi5sb24gPiB3YXRjaF9sb2NhdGlvbi5ud19sb24pIClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcod2F0Y2hfbG9jYXRpb24uY2VudGVyX2xhdCwgd2F0Y2hfbG9jYXRpb24uY2VudGVyX2xvbik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gbWFya2VyIG9wdGlvbiBzZXR0aW5nXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXJPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGdvb2dsZUxvYyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogbWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9hbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5CT1VOQ0UsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJVc2VyUGluXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpbWFnZUxpc3RlbmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW1pemVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG1hcmtlck9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24ob2xkX21hcmtlcil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZF9tYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9KG1hcmtlcikpLCBcbiAgICAgICAgICAgICAgICAgICAgMTgwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVBbmREcmF3UG9zdHMoKXtcbiAgICAgICAgICAgIFBvc3RzU3ZjLmZldGNoKClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHBvc3RzKXtcblxuICAgICAgICAgICAgICAgIC8vIGRyYXcgbGF0ZXN0IHVwZGF0ZVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zdHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zdCA9IHBvc3RzW2ldO1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgbWFya2VycyBwb3N0IGlzIGV4aXNpdGluZyBvbmUsIHdlIGRvbid0IHdhbnQgdG8gZHJhdyBpdCBhZ2Fpbi5cbiAgICAgICAgICAgICAgICAgICAgLy8gb25seSBkcmF3IG5ldyBvbmVzIVxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2pdOyBqKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3QuX2lkID09IG1hcmtlci5wb3N0Ll9pZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0ID0gbnVsbDsgLy8g7J2066+4IOq3uOugpOynhCDtj6zsiqTtirjrnbzrqbQsIG51bGzroZwuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIOydtCBsb29w7J2AIHBvc3QuX2lk66eMIOqygOyCrOyaqeyehOycvOuhnCwg66eM7JW9IOqyuey5mOuptCDrsJTroZwgbG9vcOydhCDrqYjstrDrj4Qg6rSc7LCu64ukLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gcG9zdOqwgCDsm5Drnpgg7J6I7JeH642Y6rKD7J2066m0IHBvc3TqsIAgbnVsbOuhnCDshYsg65CY7JeI7J2E6rKD7J206rOgLCBsb2NhdGlvbu2UhOuhnO2NvO2LsOuPhCDsnojripTsp4Ag7ZmV7J247ZWY7J6QXG4gICAgICAgICAgICAgICAgICAgIGlmICghcG9zdCB8fCAhcG9zdC5oYXNPd25Qcm9wZXJ0eSgnbG9jYXRpb24nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBza2lwIHRoaXMgcG9zdCAtIG5vIG5lZWQgdG8gZHJhd1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGFuZ3VsYXIuZnJvbUpzb24ocG9zdC5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG9uKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDrsJTsmrTrjZTrpqwg7JWI7JeQIOyeiOuKlOyngOu2gO2EsCDssrTtgazrpbwg7ZWY7J6lXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShnb29nbGVMb2MubGF0KCkgPCBjdXJyZW50X21hcF9udy5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxhdCgpID4gY3VycmVudF9tYXBfc2UubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA8IGN1cnJlbnRfbWFwX3NlLmxuZygpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShnb29nbGVMb2MubG5nKCkgPiBjdXJyZW50X21hcF9udy5sbmcoKSkgKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gc2tpcCB0aGlzIHBvc3QgLSBubyBuZWVkIHRvIGRyYXdcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VwbGluZ19zdGF0dXMgPSBjYWxjdWxhdGVDb3VwbGluZyhwb3N0Lmd1aWQsIHBvc3QuZ3VpZHRndCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBtYXJrZXIgb3B0aW9uIHNldHRpbmdcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlTG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJCdWJibGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlUG9zdFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcihtYXJrZXJPcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIDEw7LSI67O064ukIOq4tCDqsr3smrDsnZgg6rKD66eMIOyEnOuyhOqwgCDqs4TsgrDsnYQg7ZWY6rOgIOyEnOuyhOqwgCDrs7TrgrTspJjshJwgZnJvbnRlbmTsl5DshJwg7KeA7Jqw64+E66GdIOq0gOumrO2VtOykmOyVvCDtlZzri6QuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhJbnN0YW50TGlmZVNwYW4gPSAxMDAwMDtcblxuICAgICAgICAgICAgICAgICAgICAvLyDsnbjsiqTthLTtirgg66e1IOuplOyLnOyngOydvCDqsr3smrDrp4wg7ZSE66Gg7Yq47JeU65Oc7JmAIOyEnOuyhOqwgCDri6TrpbTqsowg7KeA7JuM7KO864+E66GdIO2VnOuLpC4gKOydvOuLqOydgCDsg4HtlZzshKDsnYAgMTDstIgpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3N0LmxpZmVzcGFuIDwgbWF4SW5zdGFudExpZmVTcGFuKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB1cCBzZWxmIHJlbW92ZSBmb3IgbWFya2VyIGl0c2VsZiBhbmQgZnJvbSBtYXJrZXJzIGNvbGxlY3Rpb24gYXQgZnJvbnQtZW5kXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihvbGRfbWFya2VyLCBvbGRfcG9zdCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkX21hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2tdOyBrKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRfcG9zdC5faWQgPT0gbWFya2VyLnBvc3QuX2lkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5zcGxpY2UoaywgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0obWFya2VyLCBwb3N0KSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdC5saWZlc3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgbWFya2VyIHRvIGFycmF5LCB0aGlzIG1lYW5zIHRoYXQgaXQgaGFzIGJlZW4gZHJhd24gdG8gbWFwXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcnMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXI6IG1hcmtlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0ICA6IHBvc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRFJBV0lORyBNRVNTQUdFIFdJTkRPVyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgaWQ9XCJidWJibGVQb3N0XCI+JyArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0LmJvZHkgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjxkaXYgaWQ9XCJidWJibGVMaWZlQmFyXCI+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgLy8g7Iqk7L2U7ZSE7JeQ7ISc67aA7YSwIOyDiOuhnOyatCDssKjsnbzrk5wg7Iqk7L2U7ZSE66W8IOunjOuTpOyWtCBlYWNoIGZvciBsb29w7JeQ7IScIOyCrOyaqe2VnOuLpC5cbiAgICAgICAgICAgICAgICAgICAgLy8gLS0+IO2VtOyVvCwg6rCBIERPTeydtCDqsIHqsIHsnZggc2NvcGXrpbwg6rCA7KC47IScIHBvc3QgbXNn6rCAIOyViCDqsrnsuZzri6QuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBzY29wZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gcGFyZW50LiRuZXcodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZW5JbmZvV2luZG93ID0gKGZ1bmN0aW9uKG1hcmtlciwgY2hpbGRfc2NvcGUsIHBvc3QsIGNvdXBsaW5nX3N0YXR1cyl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBuZXcgd2luZG93XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZm9XaW5kb3dPcHRpb25zID0geyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGl4ZWxPZmZzZXQ6IG5ldyBnb29nbGUubWFwcy5TaXplKC00MS41LCAxMC4wKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVBdXRvUGFuOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KGluZm9XaW5kb3dPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBjdXJyZW50IHRpbWUgYW5kIHN1YnRyYWN0IGl0IGZyb20gcG9zdCdzIGVuZCB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgd2lsbCBiZSBhY2N1cmF0ZSBwb3N0IHRpbWUgZm9yIGluc3RhbnQgcG9zdHMgYW5kIGxvbmcgcG9zdHMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFRpbWVNaWxsaSA9IGN1cnJlbnREYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zdGxpZmUgPSAoKHBvc3QubGlmZWVuZCAtIGN1cnJlbnRUaW1lTWlsbGkpID49IDApID8gKHBvc3QubGlmZWVuZCAtIGN1cnJlbnRUaW1lTWlsbGkpIDogMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaWZlcGVyY2VudGFnZSA9IChwb3N0bGlmZSAvIHBvc3QubGlmZXNwYW4pLnRvRml4ZWQoMilcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdG8gbWFrZSBkYXRhIGF2YWlsYWJsZSB0byB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLm1zZyA9IHBvc3QuYm9keTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0bGlmZSA9IHBvc3RsaWZlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3RndWlkID0gcG9zdC5ndWlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3RndWlkdGd0ID0gcG9zdC5ndWlkdGd0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3Rjb3VwbGVzdGF0dXMgPSBjb3VwbGluZ19zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID0gbGlmZXBlcmNlbnRhZ2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS4kb24oJ3NldDpjb3VwbGluZycsIGZ1bmN0aW9uKF8sIGNvdXBsaW5nX3VwZGF0ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3Rjb3VwbGVzdGF0dXMgPSBjb3VwbGluZ191cGRhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21waWxlIGl0IGJlZm9yZSBsb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9ICc8ZGl2IG1hcC1tc2c+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcGlsZWQgPSAkY29tcGlsZShjb250ZW50KShjaGlsZF9zY29wZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvV2luZG93LnNldENvbnRlbnQoIGNvbXBpbGVkWzBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvdy5vcGVuKG1hcCAsIG1hcmtlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KShtYXJrZXIsIGNoaWxkLCBwb3N0LCBjb3VwbGluZ19zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgb3BlbkluZm9XaW5kb3coKTtcbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFTkQgb2YgRFJBV0lORyBNRVNTQUdFIFdJTkRPVyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgICAgICAgICB9IC8vIGVuZCBvZiBmb3ItbG9vcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkcmF3RHJvcERvd24obG9jYXRpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG9uKTtcblxuICAgICAgICAgICAgdXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICAvLyDrsJTsmrTrjZTrpqwg7JWI7JeQIOyeiOuKlOyngOu2gO2EsCDssrTtgazrpbwg7ZWY7J6lXG4gICAgICAgICAgICBpZiAoIShnb29nbGVMb2MubGF0KCkgPCBjdXJyZW50X21hcF9udy5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sYXQoKSA+IGN1cnJlbnRfbWFwX3NlLmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxuZygpIDwgY3VycmVudF9tYXBfc2UubG5nKCkpIHx8XG4gICAgICAgICAgICAgICAgIShnb29nbGVMb2MubG5nKCkgPiBjdXJyZW50X21hcF9udy5sbmcoKSkgKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gc2tpcCB0aGlzIHBvc3QgLSBubyBuZWVkIHRvIGRyYXdcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbWFya2VyIG9wdGlvbiBzZXR0aW5nXG4gICAgICAgICAgICB2YXIgbWFya2VyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlTG9jLFxuICAgICAgICAgICAgICAgIG1hcDogbWFwLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkRST1AsXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiVXNlclBpblwiLFxuICAgICAgICAgICAgICAgIGljb246IGltYWdlVXNlckxvZ2luXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcihtYXJrZXJPcHRpb25zKTtcblxuICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAoZnVuY3Rpb24ob2xkX21hcmtlcil7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgb2xkX21hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfShtYXJrZXIpKSwgXG4gICAgICAgICAgICAyMDAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVuRHJhd1Bvc3QocG9zdGlkKVxuICAgICAgICB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwic3RhcnRpbmcgcmVtb3ZlIHBvc3RcIik7XG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzW2tdOyBrKyspIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHBvc3RpZCk7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhtYXJrZXIucG9zdC5faWQpO1xuICAgICAgICAgICAgICAgIGlmIChwb3N0aWQgPT0gbWFya2VyLnBvc3QuX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5tYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnNwbGljZShrLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhd0FuZFNldFBsYWNlKGxvY2F0aW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XG4gICAgICAgICAgICBkcmF3SGVscGVyTWFya2VyKGdvb2dsZUxvYyk7XG4gICAgICAgICAgICBzZXRQbGFjZShnb29nbGVMb2MpO1xuXG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgc2VydmVyIGdldHMgdXBkYXRlZCB3aGVuZXZlciBzZXR0aW5nIG5ldyBwbGFjZSB3aXRoIG1hcmtlclxuICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZHJhdyBtYXAgd2l0aCBoZWxwZXIgbWFya2Vyc1xuICAgICAgICBmdW5jdGlvbiBkcmF3SGVscGVyTWFya2VyKGxvY2F0aW9uKXtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IGhlbHBlck1hcmtlcnNbaV07IGkrKykge1xuICAgICAgICAgICAgICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWxwZXJNYXJrZXJzID0gW107XG4gICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGxvY2F0aW9uLCBcbiAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICBpY29uOiBpbWFnZVRhcmdldFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoZWxwZXJNYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVuRHJhd0hlbHBlck1hcmtlcigpe1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gaGVscGVyTWFya2Vyc1tpXTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhlbHBlck1hcmtlcnMgPSBbXTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gVVRJTFxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBzZXRQbGFjZShsb2NhdGlvbilcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gYnJvYWRjYXN0IGxvY2F0aW9uIGluZm9yKGxvbixsYXQpXG4gICAgICAgICAgICBzY29wZS4kZW1pdCgnbG9jJywgbG9jYXRpb24pO1xuXG4gICAgICAgICAgICB2YXIgZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcblxuICAgICAgICAgICAgLy8gYnJvYWRjYXN0IHBsYWNlIGZvcm1hdHRlZF9hZGRyZXNzIGFuZCBkcmF3IGljb25cbiAgICAgICAgICAgIGdlb2NvZGVyLmdlb2NvZGUoIHsgJ2xhdExuZyc6IGxvY2F0aW9uIH0sIGZ1bmN0aW9uKHJlc3VsdHMsIHN0YXR1cykge1xuICAgICAgICAgICAgICAgIC8vIGFzIHVzZXIgY2xpY2tzIG9uIHRoZSBtYXAsXG4gICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSB0byBzYXZlIHRoZSBmb3JtYXR0ZWQgYWRkcmVzcyBpbiAkc2NvcGUgYW5kXG4gICAgICAgICAgICAgICAgLy8gaXQgd2lsbCBiZSB1c2VkIHRocm91Z2ggcG9zdHMuY3RybFxuICAgICAgICAgICAgICAgIC8vIGVtaXQgYnJvYWRjYXNlICdwbGFjZScgYW5kIHNlbmQgdGhpcyB0byBhcHBsaWNhdGlvbi5jdHJsXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYnJvYWRjYXN0IGZvcm1hdHRlZF9hZGRyZXNzXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdwbGFjZScsIHJlc3VsdHNbMV0uZm9ybWF0dGVkX2FkZHJlc3MpOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2goZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHN3YWwoXCJcIixcIkxvY2F0aW9uIGRvZXMgbm90IGV4aXN0c1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3BsYWNlJywgXCJMb2NhdGlvbiBkb2VzIG5vdCBleGlzdHNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVDb3VwbGluZyhwb3N0X2d1aWQsIHBvc3RfZ3VpZHRndClcbiAgICAgICAge1xuICAgICAgICAgICAgLyogY291cGxpbmcgc3RhdHVzXG4gICAgICAgICAgICAgICAgMCAtIG5vIHN0YXR1c1xuICAgICAgICAgICAgICAgIDEgLSBpIGxpa2UgeW91XG4gICAgICAgICAgICAgICAgMiAtIHlvdSBsaWtlIGlcbiAgICAgICAgICAgICAgICA0IC0gd2UgbGlrZSBlYWNoIG90aGVyXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFyIGlsaWtleW91ID0gc2NvcGUuZ3VpZHRndCA9PSBwb3N0X2d1aWQ7XG4gICAgICAgICAgICB2YXIgeW91bGlrZWkgPSBzY29wZS5ndWlkID09IHBvc3RfZ3VpZHRndDtcbiAgICAgICAgICAgIGlmIChpbGlrZXlvdSAmJiB5b3VsaWtlaSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlsaWtleW91ICYmICF5b3VsaWtlaSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFpbGlrZXlvdSAmJiB5b3VsaWtlaSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIFVJXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJTW92ZVRvQ3VyckxvY0J0bigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBjdXJyTG9jQnRuID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tY3VycicpKTsgXG4gICAgICAgICAgICBtYXAuY29udHJvbHNbZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLlRPUF9SSUdIVF0ucHVzaChjdXJyTG9jQnRuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJUG9zdEZvcm0oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcG9zdEZvcm0gPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bvc3RpbmcnKSk7IFxuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5CT1RUT01fQ0VOVEVSXS5wdXNoKHBvc3RGb3JtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJUG9zdEJ0bigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBwb3N0QnRuID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tc3VibWl0JykpO1xuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5CT1RUT01fQ0VOVEVSXS5wdXNoKHBvc3RCdG4pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VUlUaW1lU2xpZGVyKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHRpbWVTbGlkZXIgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWVTbGlkZXInKSk7XG4gICAgICAgICAgICBtYXAuY29udHJvbHNbZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLkJPVFRPTV9DRU5URVJdLnB1c2godGltZVNsaWRlcik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVNlYXJjaEJveCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgc2VhcmNoIGJveCBhbmQgbGluayBpdCB0byB0aGUgVUkgZWxlbWVudC5cbiAgICAgICAgICAgIHZhciBpbnB1dCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFjLWlucHV0JykpOyAvLyBAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gIFxuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5UT1BfTEVGVF0ucHVzaChpbnB1dCk7XG5cbiAgICAgICAgICAgIHZhciBzZWFyY2hCb3ggPSBuZXcgZ29vZ2xlLm1hcHMucGxhY2VzLlNlYXJjaEJveCgoaW5wdXQpKTsgLy8gQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9IFxuXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIHRoZSBldmVudCBmaXJlZCB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYW4gaXRlbSBmcm9tIHRoZVxuICAgICAgICAgICAgLy8gcGljayBsaXN0LiBSZXRyaWV2ZSB0aGUgbWF0Y2hpbmcgcGxhY2VzIGZvciB0aGF0IGl0ZW0uXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihzZWFyY2hCb3gsICdwbGFjZXNfY2hhbmdlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBwbGFjZXMgPSBzZWFyY2hCb3guZ2V0UGxhY2VzKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGxhY2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gdGFrZSBvbmx5IDEgc3BvdFxuICAgICAgICAgICAgICAgIHZhciBwbGFjZSA9IHBsYWNlc1swXTtcblxuICAgICAgICAgICAgICAgIC8vIHdoZW4gc2VhcmNoIGhhcHBlbnMsIGxvY2F0aW9uIHdpbGwgYmUgdXBkYXRlZCBhcyB3ZWxsIGZvciBwb3N0XG4gICAgICAgICAgICAgICAgLy8gc2NvcGUuJGVtaXQoJ3BsYWNlJywgcGxhY2UuZm9ybWF0dGVkX2FkZHJlc3MpO1xuICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQoKSxcbiAgICAgICAgICAgICAgICAgICAgbG9uOiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZHJhd0FuZFNldFBsYWNlKGxvY2F0aW9uKTtcblxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUgPSBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXRpdHVkZTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSA9IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxvbmdpdHVkZTtcblxuICAgICAgICAgICAgICAgIG1hcC5wYW5UbyhwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgbWFwLnNldFpvb20oMTYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFVkVOVFxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudENsaWNrKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gY2xpY2sgZXZlbnQgb24gbWFwIHRvIGRyYXcgbWFya2VyXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBldmVudC5sYXRMbmcubGF0KCksXG4gICAgICAgICAgICAgICAgICAgIGxvbjogZXZlbnQubGF0TG5nLmxuZygpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkcmF3QW5kU2V0UGxhY2UobG9jYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudENlbnRlckNoYW5nZWQoKVxuICAgICAgICB7XG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnY2VudGVyX2NoYW5nZWQnLCBmdW5jdGlvbigpeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyB3aGVuIG1hcCBjZW50ZXIgY2hhbmdlLCB1cGRhdGUgbGFzdCBsb2NhdGlvbiBpbiBtZW1vcnksXG4gICAgICAgICAgICAgICAgLy8gc28gYnJvd3NlciB3aWxsIHJlbWVtYmVyIGl0IG5leHQgdGltZSB5b3UgY29tZSFcbiAgICAgICAgICAgICAgICB1cGRhdGVEZWZhdWx0TG9jYXRpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0RXZlbnRCb3VuZHNDaGFuZ2VkKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ2JvdW5kc19jaGFuZ2VkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIG1hcCBjZW50ZXIgY2hhbmdlLCB1cGRhdGUgYm91bmRzIGluZm8gZm9yIG1hcFxuICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpOyAgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50RHJhZ0VuZCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcF9vcmlnaW4sICdkcmFnZW5kJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbWFwIGFzIGRyYWcgZW5kXG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICB1cGRhdGVXYXRjaExvY2F0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50UmVzaXplKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ3Jlc2l6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG1hcCBhcyBkcmFnIGVuZFxuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHdhdGNobG9jIHdoZW4gY2VudGVyIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudFpvb21DaGFuZ2VkKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ3pvb21fY2hhbmdlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG1hcCBhcyBkcmFnIGVuZFxuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHdhdGNobG9jIHdoZW4gY2VudGVyIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBTRVRVUCBGT1IgTUFQXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIG1hcCBpbml0aWFsIGNvbmZpZ3NcbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbE1hcERhdGEoKXtcbiAgICAgICAgICAgIGluaXRpYWxNYXBDZW50ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKDM0LjA1LCAtMTE4LjI0KTtcbiAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWlzTmFOKHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUpICYmICFpc05hTih3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbE1hcENlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcod2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSwgd2luZG93LmxvY2FsU3RvcmFnZS5sb25naXR1ZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRQbGFjZShpbml0aWFsTWFwQ2VudGVyKTtcblxuICAgICAgICAgICAgbWFwT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyICAgICAgOiBpbml0aWFsTWFwQ2VudGVyLFxuICAgICAgICAgICAgICAgICAgICB6b29tICAgICAgICA6IDE1LFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGx3aGVlbCA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHN0cmVldFZpZXdDb250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBwYW5Db250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgem9vbUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlQ29udHJvbE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICBtYXBUeXBlSWRzOiBbZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVAsIENMT1VEX01BUF9JRF1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUlkOiBDTE9VRF9NQVBfSURcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRNYW51YWxFdmVudHMoKXtcbiAgICAgICAgICAgIGZ1bmN0aW9uIENsb3VkTWFwKG9wdGlvbnMpe1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiSW5pdGlhbGl6aW5nIG1hcFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaW5zdGFudGlhdGUgZ29vZ2xlIG1hcFxuICAgICAgICAgICAgbWFwX29yaWdpbiA9IG5ldyBnb29nbGUubWFwcy5NYXAoZWxlbWVudFswXSwgbWFwT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIC8vIHNldCBwcm90b3R5cGUgb2YgY3VzdG9tIG1hcCB3aXRoIG9yaWdpbiBtYXBcbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZSA9IG1hcF9vcmlnaW47XG5cbiAgICAgICAgICAgIC8vIGRyYXcgeCBtYXJrZXJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZURyYXdYTWFya2VyKGxvY2F0aW9uKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICdkcmF3WE1hcmtlcicsIGxvY2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS5kcmF3WE1hcmtlciA9IGhhbmRsZURyYXdYTWFya2VyO1xuXG4gICAgICAgICAgICAvLyBkcmF3IGN1cnJlbnQgbG9jYXRpb24gbWFya2VyXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVEcmF3Q3VyckxvY2F0aW9uTWFya2VyKGxvY2F0aW9uKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICdkcmF3Q3VyckxvY2F0aW9uTWFya2VyJywgbG9jYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLmRyYXdDdXJyTG9jYXRpb25NYXJrZXIgPSBoYW5kbGVEcmF3Q3VyckxvY2F0aW9uTWFya2VyO1xuXG4gICAgICAgICAgICAvLyBkcmF3IHBvc3RzXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVVcGRhdGVBbmREcmF3UG9zdHMoKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICd1cGRhdGVBbmREcmF3UG9zdHMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS51cGRhdGVBbmREcmF3UG9zdHMgPSBoYW5kbGVVcGRhdGVBbmREcmF3UG9zdHM7XG5cbiAgICAgICAgICAgIC8vIGRyYXcgcmVzcG9uc2VzXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVEcmF3UmVzcG9uc2VzKHBvc3Qpe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ2RyYXdSZXNwb25zZXMnLCBwb3N0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS5kcmF3UmVzcG9uc2VzID0gaGFuZGxlRHJhd1Jlc3BvbnNlcztcblxuICAgICAgICAgICAgLy8gdW5kcmF3IHBvc3RzXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVVbkRyYXdQb3N0KHBvc3RpZCl7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCAndW5EcmF3UG9zdCcsIHBvc3RpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUudW5EcmF3UG9zdCA9IGhhbmRsZVVuRHJhd1Bvc3Q7XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBjdXN0b20gbWFwIGZvciBhcHBcbiAgICAgICAgICAgIG1hcCA9IG5ldyBDbG91ZE1hcCgpO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICdkcmF3WE1hcmtlcicsIGZ1bmN0aW9uKGxvY2F0aW9uKXtcbiAgICAgICAgICAgICAgICBkcmF3QW5kU2V0UGxhY2UobG9jYXRpb24pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ2RyYXdDdXJyTG9jYXRpb25NYXJrZXInLCBmdW5jdGlvbihsb2NhdGlvbil7XG4gICAgICAgICAgICAgICAgZHJhd0Ryb3BEb3duKGxvY2F0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICd1cGRhdGVBbmREcmF3UG9zdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ2RyYXdSZXNwb25zZXMnLCBmdW5jdGlvbihwb3N0KXtcbiAgICAgICAgICAgICAgICBkcmF3UmVzcG9uc2VzKHBvc3QpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ3VuRHJhd1Bvc3QnLCBmdW5jdGlvbihwb3N0aWQpe1xuICAgICAgICAgICAgICAgIHVuRHJhd1Bvc3QocG9zdGlkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0U3R5bGVGb3JNYXAoKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyDquZTrgZTsnbQgXG4gICAgICAgICAgICAvL3ZhciBmZWF0dXJlT3B0cyA9IFt7XCJmZWF0dXJlVHlwZVwiOlwiYWRtaW5pc3RyYXRpdmVcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMudGV4dC5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjNjE5NWEwXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2YyZjJmMlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmZmZmZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLnBhcmtcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZTZmM2Q2XCJ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjQ1fSx7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmNGQyYzVcIn0se1widmlzaWJpbGl0eVwiOlwic2ltcGxpZmllZFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMudGV4dFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzRlNGU0ZVwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2Y0ZjRmNFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLnRleHQuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzc4Nzg3OFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLmljb25cIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInRyYW5zaXRcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZWFmNmY4XCJ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2VhZjZmOFwifV19XTtcbiAgICAgICAgICAgIC8vIOyDge2BvOydtFxuICAgICAgICAgICAgLy92YXIgZmVhdHVyZU9wdHMgPSBbe1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZS5tYW5fbWFkZVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjdmMWRmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZS5uYXR1cmFsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNkMGUzYjRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlLm5hdHVyYWwudGVycmFpblwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2lcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5idXNpbmVzc1wiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLm1lZGljYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZiZDNkYVwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kucGFya1wiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjYmRlNmFiXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5zdHJva2VcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmZmUxNWZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuc3Ryb2tlXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZWZkMTUxXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmZmZmZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQubG9jYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCJibGFja1wifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ0cmFuc2l0LnN0YXRpb24uYWlycG9ydFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNjZmIyZGJcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2EyZGFmMlwifV19XTtcbiAgICAgICAgICAgIC8vIOuYkeuYkeydtFxuICAgICAgICAgICAgLy92YXIgZmVhdHVyZU9wdHMgPSBbe1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzdmYzhlZFwifSx7XCJzYXR1cmF0aW9uXCI6NTV9LHtcImxpZ2h0bmVzc1wiOi02fSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM3ZmM4ZWRcIn0se1wic2F0dXJhdGlvblwiOjU1fSx7XCJsaWdodG5lc3NcIjotNn0se1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5wYXJrXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjODNjZWFkXCJ9LHtcInNhdHVyYXRpb25cIjoxfSx7XCJsaWdodG5lc3NcIjotMTV9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2YzZjRmNFwifSx7XCJzYXR1cmF0aW9uXCI6LTg0fSx7XCJsaWdodG5lc3NcIjo1OX0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2ZmZmZmZlwifSx7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6MTAwfSx7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2ZmZmZmZlwifSx7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6MTAwfSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2JiYmJiYlwifSx7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6MjZ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmZmNjMDBcIn0se1wic2F0dXJhdGlvblwiOjEwMH0se1wibGlnaHRuZXNzXCI6LTM1fSx7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2ZmY2MwMFwifSx7XCJzYXR1cmF0aW9uXCI6MTAwfSx7XCJsaWdodG5lc3NcIjotMjJ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5zY2hvb2xcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZDdlNGU0XCJ9LHtcInNhdHVyYXRpb25cIjotNjB9LHtcImxpZ2h0bmVzc1wiOjIzfSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19XTtcbiAgICAgICAgICAgIC8vIOy0iOuhneydtFxuICAgICAgICAgICAgdmFyIGZlYXR1cmVPcHRzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjRkZBODAwXCJ9LHtcInNhdHVyYXRpb25cIjowfSx7XCJsaWdodG5lc3NcIjowfSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM1M0ZGMDBcIn0se1wic2F0dXJhdGlvblwiOi03M30se1wibGlnaHRuZXNzXCI6NDB9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNGQkZGMDBcIn0se1wic2F0dXJhdGlvblwiOjB9LHtcImxpZ2h0bmVzc1wiOjB9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5sb2NhbFwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiMwMEZGRkRcIn0se1wic2F0dXJhdGlvblwiOjB9LHtcImxpZ2h0bmVzc1wiOjMwfSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzAwQkZGRlwifSx7XCJzYXR1cmF0aW9uXCI6Nn0se1wibGlnaHRuZXNzXCI6OH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2lcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjNjc5NzE0XCJ9LHtcInNhdHVyYXRpb25cIjozMy40fSx7XCJsaWdodG5lc3NcIjotMjUuNH0se1wiZ2FtbWFcIjoxfV19XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHN0eWxlZE1hcE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ0N1c3RvbSBTdHlsZSdcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGN1c3RvbU1hcFR5cGUgPSBuZXcgZ29vZ2xlLm1hcHMuU3R5bGVkTWFwVHlwZShmZWF0dXJlT3B0cywgc3R5bGVkTWFwT3B0aW9ucyk7XG4gICAgICAgICAgICBtYXAubWFwVHlwZXMuc2V0KENMT1VEX01BUF9JRCwgY3VzdG9tTWFwVHlwZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpbml0IHRoZSBtYXBcbiAgICAgICAgZnVuY3Rpb24gaW5pdE1hcCgpIHtcbiAgICAgICAgICAgIGlmIChtYXAgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIGluaXRpYWxNYXBEYXRhKCk7XG5cbiAgICAgICAgICAgICAgICBzZXRNYW51YWxFdmVudHMoKTtcblxuICAgICAgICAgICAgICAgIHNldFN0eWxlRm9yTWFwKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGJyb2FkY2FzdCB0byBzZW5kIG1hcCB0byBhcHBsaWNhdGlvbiBjdHJsXG4gICAgICAgICAgICBzY29wZS4kZW1pdCgnbWFwSW5pdCcsIG1hcCk7XG5cbiAgICAgICAgICAgIC8vIGFkZCBVSSBlbGVtZW50cyB0byBtYXBcbiAgICAgICAgICAgIHNldFVJU2VhcmNoQm94KCk7XG4gICAgICAgICAgICBzZXRVSU1vdmVUb0N1cnJMb2NCdG4oKTtcbiAgICAgICAgICAgIHNldFVJUG9zdEZvcm0oKTtcbiAgICAgICAgICAgIHNldFVJUG9zdEJ0bigpO1xuICAgICAgICAgICAgc2V0VUlUaW1lU2xpZGVyKCk7XG5cbiAgICAgICAgICAgIC8vIGFkZCBvcmlnaW4gbmF0aXZlIEV2ZW50IGhhbmRsZXJzIHRvIG1hcFxuICAgICAgICAgICAgc2V0RXZlbnRDbGljaygpO1xuICAgICAgICAgICAgc2V0RXZlbnRDZW50ZXJDaGFuZ2VkKCk7XG4gICAgICAgICAgICBzZXRFdmVudERyYWdFbmQoKTtcbiAgICAgICAgICAgIHNldEV2ZW50UmVzaXplKCk7XG4gICAgICAgICAgICBzZXRFdmVudFpvb21DaGFuZ2VkKCk7XG4gICAgICAgICAgICBzZXRFdmVudEJvdW5kc0NoYW5nZWQoKTtcblxuICAgICAgICAgICAgLy8gdXBkYXRlIHZlcnkgZmlyc3QgdGltZSBmb3IgYXBwXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGVmYXVsdExvY2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuICAgICAgICAgICAgfSwgODAwKTtcbiAgICAgICAgfSBcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFWEVDVVRFXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGluaXRNYXAoKTtcbiAgICB9O1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHRlbXBsYXRlOiAnPGRpdiBpZD1cIm1hcC1jYW52YXNcIj48L2Rpdj4nLFxuICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICBsaW5rOiBsaW5rXG4gICAgfTtcbn0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5kaXJlY3RpdmUoJ21hcE1zZycsIGZ1bmN0aW9uICgkdGltZW91dCkge1xuXG4gICAgdmFyIGxpbmsgPSBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHsgICAgICAgIFxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIENPVVBMSU5HIENMQVNTXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8qIGNvdXBsaW5nIHN0YXR1c1xuICAgICAgICAgIDAgLSBubyBzdGF0dXNcbiAgICAgICAgICAxIC0gaSBsaWtlIHlvdVxuICAgICAgICAgIDIgLSB5b3UgbGlrZSBpXG4gICAgICAgICAgNCAtIHdlIGxpa2UgZWFjaCBvdGhlclxuICAgICAgICAqL1xuICAgICAgICBzY29wZS5nZXRfY291cGxpbmcgPSBmdW5jdGlvbihjb3VwbGluZ19zdGF0dXMpe1xuICAgICAgICAgIGlmIChjb3VwbGluZ19zdGF0dXMgPT0gNCl7XG4gICAgICAgICAgICByZXR1cm4gXCJidWJibGVQb3N0IGJ1YmJsZVBvc3RfY291cGxlXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKGNvdXBsaW5nX3N0YXR1cyA9PSAxKXtcbiAgICAgICAgICAgIHJldHVybiBcImJ1YmJsZVBvc3QgYnViYmxlUG9zdF9pbGlrZXlvdVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChjb3VwbGluZ19zdGF0dXMgPT0gMil7XG4gICAgICAgICAgICByZXR1cm4gXCJidWJibGVQb3N0IGJ1YmJsZVBvc3RfeW91bGlrZWlcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJidWJibGVQb3N0IGJ1YmJsZVBvc3Rfbm9uZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBET0NVTUVOVCBSRUFEWVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBhcyB0aGUgZG9jdW1lbnQgZ2V0cyByZWFkeSwgc2V0IGNsaWNrIGV2ZW50IGFuZCBsaWZlYmFyIGFuaW1hdGlvbiBsZW5ndGhcbiAgICAgICAgdmFyIG1hbnVhbENsaWNrID0gZmFsc2U7XG5cbiAgICAgICAgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuICAgICAgICAgIHVwZGF0ZUd1aWRUYXJnZXQoKTtcblxuICAgICAgICAgIHVwZGF0ZVBvc3RUaW1lcigpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUd1aWRUYXJnZXQoKXtcbiAgICAgICAgICAvLyB1cGRhdGUgc3RhdHVzIGZvciBndWlkIHRhcmdldFxuICAgICAgICAgIHZhciBwb3N0Z3VpZCA9IHNjb3BlLnBvc3RndWlkO1xuICAgICAgICAgIHZhciBteWd1aWQgPSBzY29wZS4kcGFyZW50Lmd1aWQ7XG4gICAgICAgICAgYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgI2J1YmJsZUNsaWNrJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gY2xpY2tpbmcgaXRzIG93biBwb3N0IHdpbGwgZG8gbm90aGluZ1xuICAgICAgICAgICAgaWYgKHBvc3RndWlkID09IG15Z3VpZCl7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdGhpcyBoYXZlIHRvIGJlIHVwZGF0ZSB0byBiZSBjb21tdW5pY2F0ZWQgdGhyb3VnaCB0aGUgc2VydmVyXG5cbiAgICAgICAgICAgIGlmIChzY29wZS4kcGFyZW50Lmd1aWR0Z3QgPT0gMCl7XG4gICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdzZXQ6Y291cGxpbmcnLCAxKTsgLy8gcHJvcGFnYXRlIHRvIHVwcGVyIHNjb3BlIGZvciBjb3VwbGluZyB1cGRhdGVcbiAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3NldDpndWlkdGd0JywgcG9zdGd1aWQpOyAvLyBwcm9wYWdhdGUgdG8gdXBwZXIgc2NvcGUgZm9yIGd1aWR0Z3QgdXBkYXRlXG4gICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpOyAvLyBmb3JjZSB0byB1cGRhdGUgRE9NXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZS5wb3N0Y291cGxlc3RhdHVzID09IDEgJiYgc2NvcGUuJHBhcmVudC5ndWlkdGd0ICE9IDApe1xuICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0OmNvdXBsaW5nJywgMCk7IC8vIHByb3BhZ2F0ZSB0byB1cHBlciBzY29wZSBmb3IgY291cGxpbmcgdXBkYXRlXG4gICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdzZXQ6Z3VpZHRndCcsIDApOyAvLyBwcm9wYWdhdGUgdG8gdXBwZXIgc2NvcGUgZm9yIGd1aWR0Z3QgdXBkYXRlXG4gICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpOyAvLyBmb3JjZSB0byB1cGRhdGUgRE9NXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBvc3RUaW1lcigpe1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiTGlmZSAlOlwiLCBzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UpO1xuXG4gICAgICAgICAgLy8gc2V0IHRpbWVyIGZvciBwb3N0IGxpZmUgYmFyXG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHNjb3BlLnBvc3RsaWZlICsgXCJtc1wiO1xuICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2IC5wb3N0bGlmZWJhcicpLmNzcygnLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb24nLCBkdXJhdGlvbik7XG5cbiAgICAgICAgICAgIGlmIChzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPiAwLjc1KXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX3FfZm91cicpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2IC5wb3N0bGlmZWJhcicpLmNzcygnYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX3FfZm91cicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlIDw9IDAuNzUgJiYgc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID4gMC41KXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX3FfdGhyZWUnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9xX3RocmVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPD0gMC41ICYmIHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA+IDAuMjApe1xuICAgICAgICAgICAgICAvKiBDaHJvbWUsIFNhZmFyaSwgT3BlcmEgKi9cbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2IC5wb3N0bGlmZWJhcicpLmNzcygnLXdlYmtpdC1hbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fcV90d28nKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9xX3R3bycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX3Ffb25lJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgLnBvc3RsaWZlYmFyJykuY3NzKCdhbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fcV9vbmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnLi90ZW1wbGF0ZXMvd2luZG93Lmh0bWwnLFxuICAgICAgICBsaW5rOiBsaW5rXG4gICAgfTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyLmNvbnRyb2xsZXIoJ1Bvc3RzQ3RybCcsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc2NvcGUsIFBvc3RzU3ZjLCBVdGlsU3ZjLCAkd2luZG93LCAkZG9jdW1lbnQpe1xyXHJcdC8qIGVtaXQgYnJvYWRjYXN0IGZvciBjdXJyZW50IHBhZ2VJZCAqL1xyXHQkc2NvcGUuJGVtaXQoJ3BhZ2VjaGFuZ2UnLCAkc2NvcGUucGFnZUlkLnBvc3QpO1xyXHJcdCRzY29wZS5wb3N0cyA9IFtdO1xyXHJcdC8qIGFzIHNlcnZlciB0ZWxscyB0aGVyZSB3YXMgbmV3IHBvc3QsIGxldHMgcmUtbG9hZCBsaXN0IGRhdGEgKi9cclx0JHNjb3BlLiRvbignd3M6bmV3X3Bvc3QnLCBmdW5jdGlvbihfLCBwb3N0KXtcclx0XHQkc2NvcGUucmVxdWVzdEZldGNoKCk7XHJcdH0pO1xyXHJcclxyXHQkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uKCkge1xyXHRcdC8qIGdldCBhdXRvY29tcGxldGVkIHBsYWNlIGFuZCByZXNldChzZXQgdG8gdW5kZWZpbmVkKSAqL1xyXHRcdHZhciBwbGFjZSA9ICRzY29wZS5wb3N0cGxhY2U7XHJcdFx0dmFyIGxvY2F0aW9uID0gJHNjb3BlLnBvc3RMb2NhdGlvbjtcclxyXHRcdHZhciBsb2NhdGlvbkpTT04gPSBKU09OLnN0cmluZ2lmeShsb2NhdGlvbik7XHJcclx0XHR2YXIgcmVsYXRpdmVMaWZlU3Bhbjtcclx0XHRpZiAoJHNjb3BlLnRpbWV2YWx1ZSA8PSA1MDAwKXtcclx0XHRcdHZhciBjaGFyTGVuID0gJHNjb3BlLmNvbnRlbnQubGVuZ3RoO1xyXHRcdFx0aWYgKGNoYXJMZW4gPCA1KVxyXHRcdFx0e1xyXHRcdFx0XHRyZWxhdGl2ZUxpZmVTcGFuID0gMzAwMDtcclx0XHRcdH1cclx0XHRcdGVsc2Vcclx0XHRcdHtcclx0XHRcdFx0cmVsYXRpdmVMaWZlU3BhbiA9IGNoYXJMZW4gKiBVdGlsU3ZjLm1hcFJhbmdlKGNoYXJMZW4sIDUsIDIwLCA1MDAsIDMwMCk7XHJcdFx0XHR9XHJcdFx0fVxyXHRcdGVsc2Uge1xyXHRcdFx0cmVsYXRpdmVMaWZlU3BhbiA9ICRzY29wZS50aW1ldmFsdWU7XHJcdFx0fVxyXHJcdFx0UG9zdHNTdmMuY3JlYXRlKFxyXHRcdHtcclx0XHRcdGJvZHkgICAgOiAgJHNjb3BlLmNvbnRlbnQsXHJcdFx0XHRsb2NhdGlvbjogIGxvY2F0aW9uSlNPTixcclx0XHRcdHBsYWNlICAgOiAgcGxhY2UsXHJcdFx0XHRndWlkICAgIDogICRzY29wZS5ndWlkLFxyXHRcdFx0Z3VpZHRndCA6ICAkc2NvcGUuZ3VpZHRndCxcclx0XHRcdGxpZmVzcGFuOiAgcmVsYXRpdmVMaWZlU3BhblxyXHRcdH0pXHJcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocG9zdCl7XHJcdFx0XHQvKiBtYW51YWxseSByZWxvYWQgbWFya2VycyBcclx0XHRcdHVzaW5nIG1hcHR5cGVpZCBzaW5jZSBpdHMgbW9zdCBsZWFzdCB1c2VkIGV2ZW50LCAtIGtpbmQgb2YgaGFja3kgd2F5IHRvIGRvIGl0XHJcdFx0XHQqL1xyXHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcigkc2NvcGUubWFwLCAnbWFwdHlwZWlkX2NoYW5nZWQnKTtcclxyXHRcdFx0JHNjb3BlLnBvc3RzLnVuc2hpZnQocG9zdCk7XHJcclx0XHRcdC8qIDEw7LSI67O064ukIOq4tCDqsr3smrDsnZgg6rKD66eMIOyEnOuyhOqwgCDqs4TsgrDsnYQg7ZWY6rOgIOyEnOuyhOqwgCDrs7TrgrTspJjshJwgZnJvbnRlbmTsl5DshJwg7KeA7Jqw64+E66GdIOq0gOumrO2VtOykmOyVvCDtlZzri6QuXHJcdFx0XHQg66as7Iqk7Yq47J24642wIO2YhOyerOuKlCDslYjrs7TsnbTqsowg7ZW065GUIOyDgSAqL1xyICAgICAgICAgICAgdmFyIG1heEluc3RhbnRMaWZlU3BhbiA9IDEwMDAwO1xyICAgICAgICAgICAgaWYgKHBvc3QubGlmZXNwYW4gPCBtYXhJbnN0YW50TGlmZVNwYW4pe1xyICAgICAgICAgICAgXHQvKiBmcm9udCBlbmQgc2lkZSBsaXN0IHBvc3QgcmVtb3ZlICovXHJcdFx0XHRcdHZhciBmcm9udEVuZFBvc3RSZW1vdmUgPSBmdW5jdGlvbigpeyBcclx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wb3N0cy5sZW5ndGg7ICsraSl7XHJcdFx0XHRcdFx0XHRpZiAocG9zdC5faWQgPT0gJHNjb3BlLnBvc3RzW2ldLl9pZClcclx0XHRcdFx0XHRcdHtcclx0XHRcdFx0XHRcdFx0JHNjb3BlLnBvc3RzLnNwbGljZShpLCAxKTtcclx0XHRcdFx0XHRcdH1cclx0XHRcdFx0XHR9XHJcdFx0XHRcdH07XHJcdFx0XHRcdHNldFRpbWVvdXQoZnJvbnRFbmRQb3N0UmVtb3ZlLCBwb3N0LmxpZmVzcGFuKTtcciAgICAgICAgICAgIH1cclx0XHRcdFxyXHJcdFx0XHQvKiByZXNldCBpbnB1dCBmb3JtcyAqL1xyXHRcdFx0JHNjb3BlLmNvbnRlbnQgID0gbnVsbDtcclx0XHR9KVxyXHRcdC5lcnJvcihmdW5jdGlvbihkYXRhLCBzdGF0dXMpe1xyXHRcdFx0c3dhbChcIlBvc3QgZmFpbGVkXCIsIFwiUGxlYXNlIGNvbXBsZXRlIHRoZSBmcm9tIGNvcnJlY3RseVwiLCBcImVycm9yXCIpO1xyXHRcdH0pO1xyXHJcdH07XHJcclx0LyogYXMgc2VydmVyIHRlbGxzIHRoZXJlIHdhcyBuZXcgcG9zdCwgbGV0cyByZS1sb2FkIGxpc3QgZGF0YSAqL1xyXHQkc2NvcGUucmVxdWVzdEZldGNoID0gZnVuY3Rpb24oKSB7XHJcdFx0UG9zdHNTdmMuZmV0Y2goKVxyXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHBvc3RzKXtcclx0XHRcdCRzY29wZS5wb3N0cyA9IHBvc3RzO1xyXHRcdH0pO1xyXHR9O1xyXHJcdCRzY29wZS5yZXF1ZXN0RmV0Y2goKTtccn0pO1xyIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnUG9zdHNTdmMnLCBmdW5jdGlvbigkaHR0cCl7XG5cdHRoaXMuZmV0Y2ggPSBmdW5jdGlvbigpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnKTtcblx0fTtcblxuXHR0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKHBvc3Qpe1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Bvc3RzJywgcG9zdCk7XG5cdH07XG5cblx0dGhpcy5yZW1vdmUgPSBmdW5jdGlvbihwb3N0KXtcblx0XHQvL2NvbnNvbGUubG9nKFwiZGVsZXRpbmcgcG9zdGluZ1wiKTtcblx0XHQvL2NvbnNvbGUubG9nKCdwb3N0Ll9pZDonLCBwb3N0Ll9pZCk7XG5cdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9wb3N0cycsIHBvc3QpO1xuXHR9O1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnU2Vzc2lvblN2YycsIGZ1bmN0aW9uKCRodHRwKXtcblx0dGhpcy5mZXRjaCA9IGZ1bmN0aW9uKCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9zZXNzaW9ucycpO1xuXHR9O1xuXG5cdHRoaXMuZW50ZXIgPSBmdW5jdGlvbihzZXNzaW9uKXtcblx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zZXNzaW9ucycsIHNlc3Npb24pO1xuXHR9O1xuXG5cdHRoaXMucmVtb3ZlID0gZnVuY3Rpb24oZ3VpZCl7XG5cdFx0Ly9jb25zb2xlLmxvZyhcImRlbGV0aW5nIHNlc3Npb25cIik7XG5cdFx0Ly9jb25zb2xlLmxvZygnc2Vzc2lvbi5ndWlkOicsIGd1aWQpO1xuXHRcdHZhciBzZXNzaW9uID0ge2d1aWQ6IGd1aWR9O1xuXHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvc2Vzc2lvbnMnLCBzZXNzaW9uKTtcblx0fTtcblxuXHR0aGlzLnVwZGF0ZVdhdGNoTG9jYXRpb24gPSBmdW5jdGlvbihjdXJyZW50X21hcF9udywgY3VycmVudF9tYXBfc2UsIGN1cnJlbnRfbWFwX2NlbnRlciwgZ3VpZCl7XG5cdFx0dmFyIHdhdGNobG9jID0ge1xuICAgICAgICAgICAgbndfbGF0ICAgIDogY3VycmVudF9tYXBfbncubGF0LFxuICAgICAgICAgICAgbndfbG9uICAgIDogY3VycmVudF9tYXBfbncubG9uLFxuICAgICAgICAgICAgc2VfbGF0ICAgIDogY3VycmVudF9tYXBfc2UubGF0LFxuICAgICAgICAgICAgc2VfbG9uXHQgIDogY3VycmVudF9tYXBfc2UubG9uLFxuICAgICAgICAgICAgY2VudGVyX2xhdDogY3VycmVudF9tYXBfY2VudGVyLmxhdCxcbiAgICAgICAgICAgIGNlbnRlcl9sb246IGN1cnJlbnRfbWFwX2NlbnRlci5sb25cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB3YXRjaGxvY0pTT04gPSBKU09OLnN0cmluZ2lmeSh3YXRjaGxvYyk7XG5cbiAgICAgICAgdmFyIHVwZGF0ZWRzZXNzaW9uID0ge1xuICAgICAgICAgICAgd2F0Y2hsb2M6IHdhdGNobG9jSlNPTixcbiAgICAgICAgICAgIGd1aWQ6IGd1aWRcbiAgICAgICAgfTtcblxuICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgY29uc29sZS5sb2coXCJ1cGRhdGluZyB3YXRjaCBsb2NhdGlvblwiKTtcblx0XHQvL2NvbnNvbGUubG9nKFwidXBkYXRlZHNlc3Npb246XCIsIHVwZGF0ZWRzZXNzaW9uKTtcblx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zZXNzaW9ucy91cGRhdGUnLCB1cGRhdGVkc2Vzc2lvbik7XG5cdH07XG59KTtcbiIsIlxuYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcblx0J25nUm91dGUnLFxuXHQndWkuc2xpZGVyJ1xuXSk7XG5cblxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24oU2Vzc2lvblN2YywgJHJvb3RTY29wZSwgJHNjb3BlLCAkd2luZG93LCAkaHR0cCwgJHRpbWVvdXQpe1xuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBJTklUSUFMXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBmdW5jdGlvbiBndWlkKCkge1xuXHRcdGZ1bmN0aW9uIHM0KCkge1xuXHRcdCAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcblx0XHQgICAgICAudG9TdHJpbmcoMTYpXG5cdFx0ICAgICAgLnN1YnN0cmluZygxKTtcblx0XHR9XG5cdCAgXHRyZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgczQoKSArIHM0KCk7XG5cdH1cblxuXHQkc2NvcGUuZ3VpZCA9IGd1aWQoKTtcblxuXHQkc2NvcGUucGFnZUlkID0geyBcblx0XHRwb3N0IDogMCxcblx0fTtcblxuXHQkc2NvcGUuc2xpZGVyT3B0aW9ucyA9IHtcbiAgICAgICAgZnJvbTogMSxcbiAgICAgICAgdG86IDMwMDAwMCxcbiAgICAgICAgc3RlcDogNTAwMCxcbiAgICAgICAgZGltZW5zaW9uOiAnIGttJyxcbiAgICAgICAgdmVydGljYWw6IGZhbHNlLFxuICAgICAgICBsaW1pdHM6IGZhbHNlLFxuICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHsnYmFja2dyb3VuZC1jb2xvcic6ICd5ZWxsb3cnfSxcbiAgICAgICAgICAgIGJlZm9yZTogeydiYWNrZ3JvdW5kLWNvbG9yJzogJ3B1cnBsZSd9LFxuICAgICAgICAgICAgZGVmYXVsdDogeydiYWNrZ3JvdW5kLWNvbG9yJzogJ3doaXRlJ30sXG4gICAgICAgICAgICBhZnRlcjogeydiYWNrZ3JvdW5kLWNvbG9yJzogJ2dyZWVuJ30sXG4gICAgICAgICAgICBwb2ludGVyOiB7J2JhY2tncm91bmQtY29sb3InOiAncmVkJ31cbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgJHNjb3BlLnRpbWV2YWx1ZSA9IDUwMDA7XG5cblx0JHNjb3BlLm5hdkNvbGxhcHNlZCA9IHRydWU7XG5cblx0JHNjb3BlLmd1aWR0Z3QgPSBcIjBcIjsgLy8g6riw67O46rCS7J2AIDDsnLzroZwg7ZW07IScIDDsnbTrqbQg6rSA7Ius7IOB64yAZ3VpZOqwgCDsl4bripQg7IOB7YOc7J2064ukLiBcblxuXHQvKlxuXHQvLyDsnIjrj4TsmrDqsIAg64ur7Z6I66Ck6rOgIO2VmOuptCDrpqztgJjsiqTtirgg67O064K464ukISDsnKDsoLgg7IS47IWY7J2EIOuLq+ycvOudvOqzoCFcblx0d2luZG93Lm9udW5sb2FkID0gZnVuY3Rpb24gKCl7XG5cdFx0U2Vzc2lvblN2Yy5yZW1vdmUoJHNjb3BlLmd1aWQpOyAvLyDshJzrsoTsl5DshJwg7Jyg7KCA6rCAIOuCmOqwkOydhCDslYzrprDri6Rcblx0fTtcblx0Ki9cblx0Lypcblx0d2luZG93LnVubG9hZCA9IG9uY2hhbmdlO1xuXG5cdGRvY3VtZW50LnVubG9hZCA9IG9uY2hhbmdlO1xuXG5cdGZ1bmN0aW9uIG9uY2hhbmdlIChldnQpIHtcblx0ICAgIGFsZXJ0KFwiU2Vzc2lvbiBkZWxldGVcIik7XG5cdCAgICBTZXNzaW9uU3ZjLnJlbW92ZSgkc2NvcGUuZ3VpZCk7XG5cdCAgfVxuXHQqL1xuXG5cdHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uKCl7XG5cdFx0U2Vzc2lvblN2Yy5yZW1vdmUoJHNjb3BlLmd1aWQpO1xuXHR9O1xuXG5cdC8qXG5cdHdpbmRvdy5wYWdlaGlkZSA9IGZ1bmN0aW9uKCl7XG5cdFx0IC8vIOyEnOuyhOyXkOyEnCDsnKDsoIDqsIAg64KY6rCQ7J2EIOyVjOumsOuLpFxuXHRcdGFsZXJ0KFwib24gYmVmb3JlIHVubG9hZFwiKTtcblx0fVxuXHQqL1xuXHRcblxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gU09DS0VUXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0dmFyIHVybDtcblx0dmFyIGhvc3RuYW1lID0gZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWU7XG5cdHZhciBkZXZlbG9wbWVudElQID0gXCIxOTIuMTY4LjAuNFwiO1xuXG5cdGlmIChob3N0bmFtZSA9PSBcImxvY2FsaG9zdFwiKXtcblx0XHR1cmwgPSBcIndzOi8vbG9jYWxob3N0OjUwMDBcIjtcblx0fVxuXHRlbHNlIGlmIChob3N0bmFtZSA9PSBkZXZlbG9wbWVudElQKSB7XG5cdFx0dXJsID0gJ3dzOi8vMTkyLjE2OC4wLjQ6NTAwMCc7IC8vIGRldmVsb3BtZXQgb24gc29ja2V0IGxvY2FsbHkgXG5cdH1cblx0ZWxzZSB7XG5cdFx0dXJsID0gJ3dzczovL2Nsb3VkdGFsay5oZXJva3VhcHAuY29tJzsgLy8gcHJvZHVjdGlvbiBkZXBsb3kgdmVyc2lvbiAtIHN0aWxsIGRlYnVnIG1vZGVcblx0fVxuXG5cdC8qIOqwnOuwnOqzvOygleydtCDrgZ3rgpjqs6Ag67Cw7Y+s7Iuc7JeQ64qUIOychOu2gOu2hOydhCDsp4DsmrDqs6Ag7JWE656YIOy9lOuTnOunjCDrgqjqsqjrj4Qg65Cc64ukLlxuXHR1cmwgPSAnd3NzOi8vZnJvemVuLWJhZGxhbmRzLTg2NDkuaGVyb2t1YXBwLmNvbSc7XG5cdCovXG5cdHZhciBjb25uZWN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Y29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXQodXJsKTtcblxuXHRcdGNvbm5lY3Rpb24ub25vcGVuID0gZnVuY3Rpb24oKXtcblx0XHRcdGZ1bmN0aW9uIGdldEN1cnJMb2NTdWNjZXNzKHBvcykge1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8vLy8vLy8vLy8vLy8vLy8vIFBIWVNJQ0FMIExPQ0FUSU9OXG5cdFx0XHRcdC8vIOunqOyymOydjOyXkOuKlCDsnKDsoIDsnZgg7Iuk7KCcIOychOy5mCjslbHsl5Ag7J6F7J6l7ZaI7J2E65WM7J2YIOychOy5mCnsmYAg7IS87YSwIO2PrOyngOyFmOydhCDqsJnsnbQg67O064K06rOgLFxuXHRcdFx0XHQvLyDshLzthLAg7Y+s7KeA7IWY7J2AIOqzhOyGjSDsl4XrjbDsnbTtirgg65CY7Ja07JW8IO2VnOuLpC5cblx0ICAgICAgICAgICAgdmFyIGNyZCA9IHBvcy5jb29yZHM7XG5cblx0ICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoY3JkLmxhdGl0dWRlLCBjcmQubG9uZ2l0dWRlKTtcblxuXHQgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSB7XG5cdCAgICAgICAgXHRcdGxhdDpnb29nbGVMb2MubGF0KCksXG5cdCAgICAgICAgXHRcdGxvbjpnb29nbGVMb2MubG5nKClcblx0ICAgICAgICBcdH07XG5cdCAgICAgICAgXHR2YXIgbG9jYXRpb25KU09OID0gSlNPTi5zdHJpbmdpZnkobG9jYXRpb24pO1xuXHQgICAgICAgIFx0Ly9jb25zb2xlLmxvZyhcInNldHRpbmcgbG9jYXRpb25cIiwgbG9jYXRpb25KU09OKTtcblxuXHQgICAgICAgIFx0Ly8vLy8vLy8vLy8vLy8vLy8vIFdBVENIIExPQ0FUSU9OXG5cdCAgICAgICAgXHR2YXIgYm91bmRzID0gJHNjb3BlLm1hcC5nZXRCb3VuZHMoKTtcblx0ICAgICAgICAgICAgdmFyIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIG5vcnRoLWVhc3QgY29ybmVyXG5cdCAgICAgICAgICAgIHZhciBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBzb3V0aC13ZXN0IGNvcmRlclxuXHQgICAgICAgICAgICAvL1lvdSBnZXQgbm9ydGgtd2VzdCBhbmQgc291dGgtZWFzdCBjb3JuZXJzIGZyb20gdGhlIHR3byBhYm92ZTpcblxuXHQgICAgICAgICAgICB2YXIgY3VycmVudF9tYXBfbncgPSB7IFxuXHQgICAgICAgICAgICAgICAgbGF0OiBuZS5sYXQoKSwgXG5cdCAgICAgICAgICAgICAgICBsb246IHN3LmxuZygpXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50X21hcF9zZSA9IHtcblx0ICAgICAgICAgICAgICAgIGxhdDogc3cubGF0KCksIFxuXHQgICAgICAgICAgICAgICAgbG9uOiBuZS5sbmcoKVxuXHQgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50X21hcF9jZW50ZXIgPSB7XG5cdCAgICAgICAgICAgIFx0bGF0OndpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUsXG5cdCAgICAgICAgICAgIFx0bG9uOndpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlXG5cdCAgICAgICAgXHR9O1xuXG5cdCAgICAgICAgICAgIHZhciB3YXRjaGxvYyA9IHtcblx0XHQgICAgICAgICAgICBud19sYXQgICAgOiBjdXJyZW50X21hcF9udy5sYXQsXG5cdFx0ICAgICAgICAgICAgbndfbG9uICAgIDogY3VycmVudF9tYXBfbncubG9uLFxuXHRcdCAgICAgICAgICAgIHNlX2xhdCAgICA6IGN1cnJlbnRfbWFwX3NlLmxhdCxcblx0XHQgICAgICAgICAgICBzZV9sb25cdCAgOiBjdXJyZW50X21hcF9zZS5sb24sXG5cdFx0ICAgICAgICAgICAgY2VudGVyX2xhdDogY3VycmVudF9tYXBfY2VudGVyLmxhdCxcblx0XHQgICAgICAgICAgICBjZW50ZXJfbG9uOiBjdXJyZW50X21hcF9jZW50ZXIubG9uXG5cdFx0ICAgICAgICB9XG5cblx0ICAgICAgICBcdHZhciB3YXRjaGxvY0pTT04gPSBKU09OLnN0cmluZ2lmeSh3YXRjaGxvYyk7XG5cdCAgICAgICAgXHQvL2NvbnNvbGUubG9nKFwic2V0dGluZyB3YXRjaGxvY1wiLCB3YXRjaGxvY0pTT04pO1xuXHQgICAgICAgICAgICBcblx0ICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vIExPQ0FUSU9OIFVQREFURSBXSVRIIFNFU1NJT04gRU5URVJcblx0ICAgICAgICAgICAgLy/sl6zquLDshJwg67mE64+Z6riw7KCB7Jy866GcIOycoOyggOydmCDroZzsvIDsnbTshZjsnYQg7Ja76rOgIOyEuOyFmOydhCDrs7TrgrzsiJgg7J6I64ukLlxuXHRcdFx0XHR2YXIgc2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRndWlkOiAgICAgJHNjb3BlLmd1aWQsXG5cdFx0XHRcdFx0bG9jYXRpb246IGxvY2F0aW9uSlNPTixcblx0XHRcdFx0XHR3YXRjaGxvYzogd2F0Y2hsb2NKU09OXG5cdFx0XHRcdH07XG5cdFx0XHRcdFNlc3Npb25TdmMuZW50ZXIoc2Vzc2lvbik7IC8vIOyEnOuyhOyXkOyEnCDsnKDsoIDqsIAg65Ok7Ja07Ji07J2EIOyVjOumsOuLpC5cblx0ICAgICAgICB9XG5cblx0ICAgICAgICBmdW5jdGlvbiBnZXRDdXJyTG9jRXJyb3IoZXJyKSB7XG5cdCAgICAgICAgXHRzd2FsKFwiXCIsIFwiTmVlZCB0byB0dXJuIG9uIGxvY2F0aW9uIHNlcnZpY2UgZm9yIHByb3BlciB1c2UuXCIpO1xuXHQgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0VSUk9SKCcgKyBlcnIuY29kZSArICcpOiAnICsgZXJyLm1lc3NhZ2UpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIC8qIGluaXQgbWFwIGFuZCBwbGFjZSBzb21lIG1hcmtlcnMsIHNvIGV2ZXJ5dGhpbmcgc3RhcnQgd2l0aCB0aGlzIGZ1bmN0aW9uLiAqL1xuXHQgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZ2V0Q3VyckxvY1N1Y2Nlc3MsIGdldEN1cnJMb2NFcnJvcik7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY29ubmVjdGVkJyk7XG5cdFx0fTtcblxuXHRcdGNvbm5lY3Rpb24ub25jbG9zZSA9IGZ1bmN0aW9uKCl7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY2xvc2VkLiBSZWNvbmVjdGluZy4uLicpO1xuXHRcdFx0JHRpbWVvdXQoY29ubmVjdCwgMjAwMCk7XG5cdFx0fTtcblxuXHRcdGNvbm5lY3Rpb24ub25tZXNzYWdlID0gZnVuY3Rpb24oZSl7XG5cdFx0XHQvL2NvbnNvbGUubG9nKCdicm9hZGNhc3QgbXNnIGZyb20gc2VydmVyOicsIGUpO1xuXHRcdFx0dmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKGUuZGF0YSk7XG5cblx0XHRcdC8qXG5cdFx0XHRcdHdzOm5ld19wb3N0ICAgIC0g7IOI66Gc7Jq0IO2PrOyKpO2KuOqwgCDsmKzrnbzsmZTsnYTrlYwgZnJvbnQtZW5k7JeQ7IScIOunteydtCDri6Tsi5wg7JeF642w7J207Yq4IO2VtOyVvCDrkJzri6Tqs6Ag7JWM66Ck7KSA64ukIVxuXHRcdFx0XHR3czpuZXdfc2Vzc2lvbiAtIHNlc3Npb27snbQg7IOI66GcIOuTpOyWtOyYpOuptCDrkJzri6Tqs6Ag7JWM66Ck7KSA64ukIVxuXHRcdFx0XHR3czpyZW1vdmVfcG9zdCAtIO2PrOyKpO2KuOqwgCDsi5zqsITsnbQg64ukIOuQmOyWtOyEnCDsgqzrnbzsp4jrlYwhXG5cdFx0XHRcdOunpOyasOykkeyalCEgXG5cdFx0XHQqL1xuXHRcdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCd3czonICsgcGF5bG9hZC50eXBlLCBwYXlsb2FkLmRhdGEpO1xuXHRcdH07XG5cdH07XG5cdGNvbm5lY3QoKTtcblxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIFNPQ0tFVCBCUk9BRENBU1QgUkVDRUlWRVJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBhcyBzZXJ2ZXIgc29ja2V0IHNlbmQgJ3dzOm5ld19wb3N0JyAsIHdlIGNhbiB1cGRhdGUgdGhlIG1hcCFcblx0JHNjb3BlLiRvbignd3M6bmV3X3Bvc3QnLCBmdW5jdGlvbihfLCBwb3N0KXtcblx0XHQvLyB1cGRhdGUgcG9zdHNcblx0XHQkc2NvcGUubWFwLnVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXG5cdFx0Ly8gc2hvdyByZXNwb25zaXZlIHVzZXJzIG9ubHkgdG8gdGhlIHVzZXIgd2hvIHdyb3RlIHRoaXMgcG9zdFxuXHRcdGlmIChwb3N0Lmd1aWQgPT0gJHNjb3BlLmd1aWQpXG5cdFx0e1xuXHRcdFx0Ly9jb25zb2xlLmxvZygnc3RhcnQgZHJhd2luZyByZXNwb25zZXMuLicpO1xuXHRcdFx0JHNjb3BlLm1hcC5kcmF3UmVzcG9uc2VzKHBvc3QpO1xuXHRcdH1cblx0fSk7XG5cblx0Ly8gYXMgc2VydmVyIHNvY2tldCBzZW5kICd3czpuZXdfcG9zdCcgLCB3ZSBjYW4gdXBkYXRlIHRoZSBtYXAhXG5cdCRzY29wZS4kb24oJ3dzOm5ld19zZXNzaW9uJywgZnVuY3Rpb24oXywgc2Vzc2lvbil7XG5cblx0XHR2YXIgbG9jYXRpb24gPSBhbmd1bGFyLmZyb21Kc29uKHNlc3Npb24ubG9jYXRpb24pO1xuXHRcdCRzY29wZS5tYXAuZHJhd0N1cnJMb2NhdGlvbk1hcmtlcihsb2NhdGlvbik7XG5cblx0fSk7XG5cblx0Ly8gd2hlbiBzZXJ2ZXIgcmVtb3ZlIHRoZSBwb3N0IGFmdGVyIHRpbWUgZm9yIGxvbmdlciBvbmVzLCBcblx0Ly8gdXBkYXRlIG1hcCB3aXRoIGNvcmVzcG9uZGluZyBpbmZvXG5cdCRzY29wZS4kb24oJ3dzOnJlbW92ZV9wb3N0JywgZnVuY3Rpb24oXywgcG9zdGlkKXtcblx0XHQkc2NvcGUubWFwLnVuRHJhd1Bvc3QocG9zdGlkKTtcblx0fSk7XG5cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBBUFBMSUNBVElPTiBMRVZFTCBGVU5DVElPTlNcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQvLyBzZWUgaWYgaXRzIG1vYmlsZSBwaG9uZVxuXHQkc2NvcGUuaXNNb2JpbGUgPSBmdW5jdGlvbigpe1xuXHRcdGlmKCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL3dlYk9TL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZS9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQb2QvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9XaW5kb3dzIFBob25lL2kpXG5cdFx0ICl7XG5cdFx0ICAgIHJldHVybiB0cnVlO1xuXHRcdCAgfVxuXHRcdCBlbHNlIHtcblx0XHQgICAgcmV0dXJuIGZhbHNlO1xuXHRcdCAgfVxuXHR9O1xuXG5cdC8qIG1vdmUgdG8gY3VycmVudCBsb2NhdGlvbiAqL1xuXHQkc2NvcGUubW92ZVRvQ3VycmVudExvY2F0aW9uID0gZnVuY3Rpb24oKXtcblx0XHRmdW5jdGlvbiBnZXRDdXJyTG9jU3VjY2Vzcyhwb3MpIHtcbiAgICAgICAgICAgIC8qIG1ha2Ugc3VyZSB0byBjaGVjayB3ZSBhcmUgb24gcG9zdCBwYWdlIHdpdGggbWFwIGZpcnN0ICovXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmN1cnJlbnRQYWdlSWQgIT0gJHNjb3BlLnBhZ2VJZC5wb3N0KVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgdmFyIGNyZCA9IHBvcy5jb29yZHM7XG5cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUgPSBjcmQubGF0aXR1ZGU7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSA9IGNyZC5sb25naXR1ZGU7XG5cbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHtcbiAgICAgICAgICAgIFx0bGF0OiBjcmQubGF0aXR1ZGUsIFxuICAgICAgICAgICAgXHRsb246IGNyZC5sb25naXR1ZGVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIGRyYXcgZHJvcCBkb3duIHVzZXIgcG9zaXRpb25cbiAgICAgICAgICAgXHQkc2NvcGUubWFwLmRyYXdDdXJyTG9jYXRpb25NYXJrZXIobG9jYXRpb24pO1xuXG4gICAgICAgICAgIFx0Ly8gZHJhdyB4IG1hcmtlclxuXHQgICAgICAgICRzY29wZS5tYXAuZHJhd1hNYXJrZXIobG9jYXRpb24pO1xuXG5cdCAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobG9jYXRpb24ubGF0LCBsb2NhdGlvbi5sb24pO1xuXG5cdCAgICAgICAgLy8gbW92ZSB0byB0aGUgbG9jYXRpb24gYW5kIHpvb20gaW50byByaWdodCBhbW91bnRcbiAgICAgICAgICAgICRzY29wZS5tYXAucGFuVG8oZ29vZ2xlTG9jKVxuICAgICAgICAgICAgJHNjb3BlLm1hcC5zZXRab29tKDE1KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEN1cnJMb2NFcnJvcihlcnIpIHtcbiAgICAgICAgXHRzd2FsKFwiXCIsIFwiTmVlZCB0byB0dXJuIG9uIGxvY2F0aW9uIHNlcnZpY2UgZm9yIHByb3BlciB1c2UuXCIpO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdFUlJPUignICsgZXJyLmNvZGUgKyAnKTogJyArIGVyci5tZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGluaXQgbWFwIGFuZCBwbGFjZSBzb21lIG1hcmtlcnMsIHNvIGV2ZXJ5dGhpbmcgc3RhcnQgd2l0aCB0aGlzIGZ1bmN0aW9uLiAqL1xuICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGdldEN1cnJMb2NTdWNjZXNzLCBnZXRDdXJyTG9jRXJyb3IpO1xuXG4gICAgICAgIHN3YWwoeyAgIHRpdGxlOiBcIlwiLCAgIHRleHQ6IFwiTW92aW5nIHRvIGN1cnJlbnQgbG9jYXRpb24uLlwiLCAgIHRpbWVyOiAxNTAwLCAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSB9KTtcblx0fTtcblxuXHQkc2NvcGUubW92ZVRvUG9zdExvY2F0aW9uID0gZnVuY3Rpb24oKXtcblx0XHR2YXIgbGF0RGVsdGEgPSAwLjA7XG5cblx0XHRpZiAoJHNjb3BlLmlzTW9iaWxlKCkpe1xuXHRcdFx0dmFyIGJvdW5kcyA9ICRzY29wZS5tYXAuZ2V0Qm91bmRzKCk7XG5cdCAgICAgICAgdmFyIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIG5vcnRoLWVhc3QgY29ybmVyXG5cdCAgICAgICAgdmFyIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIHNvdXRoLXdlc3QgY29yZGVyXG5cdCAgICAgICAgY3VycmVudF9tYXBfbncgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKG5lLmxhdCgpLCBzdy5sbmcoKSk7XG5cdCAgICAgICAgY3VycmVudF9tYXBfc2UgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHN3LmxhdCgpLCBuZS5sbmcoKSk7XG5cblx0ICAgICAgICB2YXIgbGF0RGVsdGFfY2VudGVyMm5vcnRoID0gMC41ICogTWF0aC5hYnMoJHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQgLSBjdXJyZW50X21hcF9udy5sYXQoKSk7XG5cdCAgICAgICAgdmFyIGxhdERlbHRhX2NlbnRlcjJzb3V0aCA9IDAuNSAqIE1hdGguYWJzKCRzY29wZS5wb3N0TG9jYXRpb24ubGF0IC0gY3VycmVudF9tYXBfc2UubGF0KCkpO1xuXG5cdCAgICAgICAgaWYgKGxhdERlbHRhX2NlbnRlcjJub3J0aCA+IGxhdERlbHRhX2NlbnRlcjJzb3V0aCl7XG5cdCAgICAgICAgXHRsYXREZWx0YSA9IGxhdERlbHRhX2NlbnRlcjJzb3V0aDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgXHRsYXREZWx0YSA9IGxhdERlbHRhX2NlbnRlcjJub3J0aDtcblx0ICAgICAgICB9XG5cdFx0fVxuXG5cdFx0dmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoJHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQgKyBsYXREZWx0YSwgJHNjb3BlLnBvc3RMb2NhdGlvbi5sb24pO1xuXHRcdCRzY29wZS5tYXAucGFuVG8oZ29vZ2xlTG9jKTtcblx0fTtcblxuXHQkc2NvcGUuY29sbGFwc2UgPSBmdW5jdGlvbigpe1xuXHRcdCRzY29wZS5uYXZDb2xsYXBzZWQgPSB0cnVlO1xuXHR9O1xuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gR0VORVJBTCBCUk9BRENBU1QgUkVDRUlWRVJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICRzY29wZS4kb24oJ21hcEluaXQnLCBmdW5jdGlvbihfLCBtYXApe1xuXHRcdCRzY29wZS5tYXAgPSBtYXA7XG5cdH0pO1xuXG4gICAgJHNjb3BlLiRvbignc2V0Omd1aWR0Z3QnLCBmdW5jdGlvbihfLCBndWlkdGd0KXtcblx0XHQkc2NvcGUuZ3VpZHRndCA9IGd1aWR0Z3Q7XG5cdH0pO1xuXG5cdCRzY29wZS4kb24oJ3BhZ2VjaGFuZ2UnLCBmdW5jdGlvbihfLCBwYWdlSWQpe1xuXHRcdCRzY29wZS5jdXJyZW50UGFnZUlkID0gcGFnZUlkO1xuXHR9KTtcblxuXHQkc2NvcGUuJG9uKCdsb2MnLCBmdW5jdGlvbihfLCBsb2NhdGlvbil7XG5cdFx0dmFyIGxhdCA9IGxvY2F0aW9uLmxhdCgpO1xuXHRcdHZhciBsb24gPSBsb2NhdGlvbi5sbmcoKTtcblx0XHQkc2NvcGUucG9zdExvY2F0aW9uID0ge1xuXHRcdFx0bGF0OiBsYXQsXG5cdFx0XHRsb246IGxvblxuXHRcdH07XG5cdH0pO1xuXG5cdCRzY29wZS4kb24oJ3BsYWNlJywgZnVuY3Rpb24oXywgcGxhY2Upe1xuXHRcdC8vIEZvcmNpbmcgdGhlIHVwZGF0ZSB3aXRoICRhcHBseSgpIG1ldGhvZCBvbiAkc2NvcGVcblx0XHQvLyBwcm9ibGVtIHJlbGF0ZWQgbm90ZTogaHR0cDovL3d3dy5qZWZmcnlob3VzZXIuY29tL2luZGV4LmNmbS8yMDE0LzYvMi9Ib3ctZG8tSS1ydW4tY29kZS13aGVuLWEtdmFyaWFibGUtY2hhbmdlcy13aXRoLUFuZ3VsYXJKU1xuXHRcdCRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcblx0XHRcdFx0JHNjb3BlLnBvc3RwbGFjZSA9IHBsYWNlO1xuXHRcdFx0fVxuXHRcdCk7XG5cdH0pO1xufSk7XG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKXtcblx0JHJvdXRlUHJvdmlkZXJcblx0LndoZW4oJy8nLCBcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyOiAnUG9zdHNDdHJsJywgXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvcG9zdHMuaHRtbCdcblx0XHR9KVxuXHQvLyBSZWRpcmVjdCB0byB0aGUgcm9vdCBwYWdlLlxuXHQub3RoZXJ3aXNlKFxuXHRcdHtcbiAgIFx0XHRcdHJlZGlyZWN0VG86ICcvJ1xuXHRcdH0pO1xufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1V0aWxTdmMnLCBmdW5jdGlvbigpe1xuXHR2YXIgc3ZjID0gdGhpcztcblxuXHRzdmMuZGVnMnJhZCA9IGZ1bmN0aW9uKGRlZykge1xuXHQgIHJldHVybiBkZWcgKiAoTWF0aC5QSS8xODApO1xuXHR9O1xuXG5cdHN2Yy5nZXREaXN0YW5jZUZyb21MYXRMb25JbkttID0gZnVuY3Rpb24gKGxhdDEsbG9uMSxsYXQyLGxvbjIpIHtcblx0ICB2YXIgUiA9IDYzNzE7XG5cdCAgdmFyIGRMYXQgPSBzdmMuZGVnMnJhZChsYXQyLWxhdDEpO1xuXHQgIHZhciBkTG9uID0gc3ZjLmRlZzJyYWQobG9uMi1sb24xKTsgXG5cdCAgdmFyIGEgPSBcblx0ICAgIE1hdGguc2luKGRMYXQvMikgKiBNYXRoLnNpbihkTGF0LzIpICtcblx0ICAgIE1hdGguY29zKHN2Yy5kZWcycmFkKGxhdDEpKSAqIE1hdGguY29zKHN2Yy5kZWcycmFkKGxhdDIpKSAqIFxuXHQgICAgTWF0aC5zaW4oZExvbi8yKSAqIE1hdGguc2luKGRMb24vMilcblx0ICAgIDsgXG5cdCAgdmFyIGMgPSAyICogTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksIE1hdGguc3FydCgxLWEpKTsgXG5cdCAgdmFyIGQgPSBSICogYztcblx0ICByZXR1cm4gZDtcblx0fTtcblxuXHRzdmMubWFwUmFuZ2UgPSBmdW5jdGlvbiAodmFsdWUsIGxvdzEsIGhpZ2gxLCBsb3cyLCBoaWdoMikge1xuXHQgICAgcmV0dXJuIGxvdzIgKyAoaGlnaDIgLSBsb3cyKSAqICh2YWx1ZSAtIGxvdzEpIC8gKGhpZ2gxIC0gbG93MSk7XG5cdH1cbn0pO1xuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4ucnVuKGZ1bmN0aW9uKCRyb290U2NvcGUsICR0aW1lb3V0LCBTZXNzaW9uU3ZjKXtcblxuXG59KTtcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmRpcmVjdGl2ZSgnYXBwTWFwJywgZnVuY3Rpb24oUG9zdHNTdmMsIFV0aWxTdmMsIFNlc3Npb25TdmMsICRjb21waWxlKSB7XG4gICAgLy8gZGlyZWN0aXZlIGxpbmsgZnVuY3Rpb25cbiAgICB2YXIgbGluayA9IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgcm9vdFNjb3BlKSB7XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gR0xPQkFMIFZBUklBQkxFUyBJTiBMSU5LIEZVTkNUSU9OXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIHZhciBtYXA7IC8vIGV4cGFuZCBmcm9tIGdvb2dsZSBtYXAgZm9yIG1hbnVhbGx5IGNyZWF0ZWQgZXZlbnRzXG4gICAgICAgIHZhciBtYXBfb3JpZ2luOyAvLyBmb3Igb3JpZ2luYWwgZ29vZ2xlIG1hcCBldmVudCBmdW5jdGlvbiBsaW5rc1xuICAgICAgICB2YXIgY3VycmVudF9tYXBfbnc7XG4gICAgICAgIHZhciBjdXJyZW50X21hcF9zZTtcbiAgICAgICAgdmFyIG1hcE9wdGlvbnM7XG4gICAgICAgIHZhciBpbml0aWFsTWFwQ2VudGVyO1xuICAgICAgICB2YXIgQ0xPVURfTUFQX0lEID0gJ2N1c3RvbV9zdHlsZSc7IC8vIG1hcCBzdHlsZVxuICAgICAgICB2YXIgaGVscGVyTWFya2VycyA9IFtdO1xuICAgICAgICB2YXIgbWFya2VycyA9IFtdO1xuICAgICAgICB2YXIgaW1hZ2VQb3N0ID0ge1xuICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9jYXRjaG1lLmlmeW91Y2FuLmNvbS9pbWFnZXMvcGljdHVyZXMvSVlDX0ljb25zL0lZQ19Mb2NhdGlvbl9JY29uX1NtYWxsLnBuZycsXG4gICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICBvcmlnaW46IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDE3LCAzNCksXG4gICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxLCAxKVxuICAgICAgICB9O1xuICAgICAgICB2YXIgaW1hZ2VUYXJnZXQgPSB7XG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vd3d3LmNsa2VyLmNvbS9jbGlwYXJ0cy9VL1Avai9NL0kvaS94LW1hcmsteWVsbG93LW1kLnBuZycsXG4gICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICBvcmlnaW46IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDE3LCAzNCksXG4gICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgyNSwgMjUpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBpbWFnZVVzZXJMb2dpbiA9IHtcbiAgICAgICAgICAgIHVybDogJ2h0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzL3Evby8yL0svZy9WL2xvY2F0aW9uLXN5bWJvbC1tYXAtbWQucG5nJyxcbiAgICAgICAgICAgIHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEwMCwgMTAwKSxcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTcsIDM0KSxcbiAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDIwLCAzMylcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGltYWdlTGlzdGVuZXIgPSB7XG4gICAgICAgICAgICB1cmw6ICdodHRwOi8vMi5icC5ibG9nc3BvdC5jb20vLWRqTWFfbjVuQUVNL1QxR3Z4Xy03LXpJL0FBQUFBQUFBQVE0Ly0xTjZsbGVRdlpjL3MxNjAwL2JsaW5raW5nX2RvdC5naWYnLFxuICAgICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTAwLCAxMDApLFxuICAgICAgICAgICAgb3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgxNywgMzQpLFxuICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTcsIDE3KVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEVWRU5UIEhBTkRMRVJTIC0gVVBEQVRFXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZURlZmF1bHRMb2NhdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUgPSBtYXAuZ2V0Q2VudGVyKCkubGF0KCk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSA9IG1hcC5nZXRDZW50ZXIoKS5sbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUJvdW5kcygpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBtYXAuZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICB2YXIgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7IC8vIExhdExuZyBvZiB0aGUgbm9ydGgtZWFzdCBjb3JuZXJcbiAgICAgICAgICAgIHZhciBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBzb3V0aC13ZXN0IGNvcmRlclxuICAgICAgICAgICAgLy9Zb3UgZ2V0IG5vcnRoLXdlc3QgYW5kIHNvdXRoLWVhc3QgY29ybmVycyBmcm9tIHRoZSB0d28gYWJvdmU6XG5cbiAgICAgICAgICAgIGN1cnJlbnRfbWFwX253ID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhuZS5sYXQoKSwgc3cubG5nKCkpO1xuICAgICAgICAgICAgY3VycmVudF9tYXBfc2UgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHN3LmxhdCgpLCBuZS5sbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVXYXRjaExvY2F0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG1hcC5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIHZhciBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBub3J0aC1lYXN0IGNvcm5lclxuICAgICAgICAgICAgdmFyIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIHNvdXRoLXdlc3QgY29yZGVyXG4gICAgICAgICAgICAvL1lvdSBnZXQgbm9ydGgtd2VzdCBhbmQgc291dGgtZWFzdCBjb3JuZXJzIGZyb20gdGhlIHR3byBhYm92ZTpcblxuICAgICAgICAgICAgY3VycmVudF9tYXBfbncgPSB7IFxuICAgICAgICAgICAgICAgIGxhdDogbmUubGF0KCksIFxuICAgICAgICAgICAgICAgIGxvbjogc3cubG5nKClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjdXJyZW50X21hcF9zZSA9IHtcbiAgICAgICAgICAgICAgICBsYXQ6IHN3LmxhdCgpLCBcbiAgICAgICAgICAgICAgICBsb246IG5lLmxuZygpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgY3VycmVudF9tYXBfY2VudGVyIDtcblxuICAgICAgICAgICAgLy8gc2VlIGlmIHRoZSBsYXRlc3QgeCBtYXJrZXIgb3IgcG9zdCBsb2NhdGlvbiBpcyB3aXRoaW4gdXNlcidzIHZpZXdcbiAgICAgICAgICAgIGlmICghKHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQgPCBjdXJyZW50X21hcF9udy5sYXQpIHx8XG4gICAgICAgICAgICAgICAgIShzY29wZS5wb3N0TG9jYXRpb24ubGF0ID4gY3VycmVudF9tYXBfc2UubGF0KSB8fFxuICAgICAgICAgICAgICAgICEoc2NvcGUucG9zdExvY2F0aW9uLmxvbiA8IGN1cnJlbnRfbWFwX3NlLmxvbikgfHxcbiAgICAgICAgICAgICAgICAhKHNjb3BlLnBvc3RMb2NhdGlvbi5sb24gPiBjdXJyZW50X21hcF9udy5sb24pIClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBpdCBpcyBub3Qgd2l0aGluIHVzZXIncyB2aWV3LCB0aGVuIGp1c3QgdXNlIG1hcCBjZW50ZXJcbiAgICAgICAgICAgICAgICBjdXJyZW50X21hcF9jZW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIGxhdDogbWFwLmdldENlbnRlcigpLmxhdCgpLFxuICAgICAgICAgICAgICAgICAgICBsb246IG1hcC5nZXRDZW50ZXIoKS5sbmcoKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gaWYgaXQgaXMgd2l0aGluIHVzZXIncyB2aWV3LCB1c2UgeCBtYXJrZXIgbG9jYXRpb24gYS5rLmEgcG9zdCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGN1cnJlbnRfbWFwX2NlbnRlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBzY29wZS5wb3N0TG9jYXRpb24ubGF0LFxuICAgICAgICAgICAgICAgICAgICBsb246IHNjb3BlLnBvc3RMb2NhdGlvbi5sb25cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgU2Vzc2lvblN2Yy51cGRhdGVXYXRjaExvY2F0aW9uKGN1cnJlbnRfbWFwX253LCBjdXJyZW50X21hcF9zZSwgY3VycmVudF9tYXBfY2VudGVyLCBzY29wZS5ndWlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEVWRU5UIEhBTkRMRVJTIC0gRFJBV1xuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyB1cGRhdGUgcmVzcG9uc2VzIHN1Y2ggYXMgdmlzdWFsaXphdGlvbiBvZiBsaXN0ZW5lcnNcbiAgICAgICAgZnVuY3Rpb24gZHJhd1Jlc3BvbnNlcyhwb3N0KXtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3JlZmVyZW5jZSBwb3N0OicsIHBvc3QpO1xuXG4gICAgICAgICAgICBTZXNzaW9uU3ZjLmZldGNoKClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHNlc3Npb25zKXtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2Vzc2lvbnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2Vzc2lvbiA9IHNlc3Npb25zW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNraXAgbXkgc2Vzc2lvbiAtIG5vIG5lZWQgdG8gZHJhdyDrgrQg7J6Q7Iug7J2YIOyEuOyFmOydgCDqt7jrprTtlYTsmpTqsIAg7JeG64ukLlxuICAgICAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5ndWlkID09IHNjb3BlLmd1aWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAgLy8gc2Vzc2lvbidzIHdhdGNoIGxvY2F0aW9uIHdpbGwgYmUgYm91bmNlZCFcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc2Vzc2lvbiB3YXRjaCBsb2NhdGlvbjonLCBzZXNzaW9uLndhdGNobG9jKTtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygncG9zdCBsb2NhdGlvbjonLCBwb3N0LmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdhdGNoX2xvY2F0aW9uID0gYW5ndWxhci5mcm9tSnNvbihzZXNzaW9uLndhdGNobG9jKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc3RfbG9jYXRpb24gPSBhbmd1bGFyLmZyb21Kc29uKHBvc3QubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8g7Jyg7KCA6rCAIOuztOqzoCDsnojripQg67CU7Jq0642U66asIOyViOyXkCDqt7ggc2Vzc2lvbijri6TrpbjsnKDsoIApIOyytO2CgVxuXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coY3VycmVudF9tYXBfc2UsIGN1cnJlbnRfbWFwX253KTtcblxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEod2F0Y2hfbG9jYXRpb24uY2VudGVyX2xhdCA8IGN1cnJlbnRfbWFwX253LmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgISh3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbGF0ID4gY3VycmVudF9tYXBfc2UubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKHdhdGNoX2xvY2F0aW9uLmNlbnRlcl9sb24gPCBjdXJyZW50X21hcF9zZS5sbmcoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEod2F0Y2hfbG9jYXRpb24uY2VudGVyX2xvbiA+IGN1cnJlbnRfbWFwX253LmxuZygpKSApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2Vzc2lvbijri6TrpbjsnKDsoIAp65Ok7J20IOq3uCDtj6zsiqTtirjrpbwg67O06rOgIOyeiOyngCDslYrsnLzrqbQg7Iqk7YK1LlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShwb3N0X2xvY2F0aW9uLmxhdCA8IHdhdGNoX2xvY2F0aW9uLm53X2xhdCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEocG9zdF9sb2NhdGlvbi5sYXQgPiB3YXRjaF9sb2NhdGlvbi5zZV9sYXQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKHBvc3RfbG9jYXRpb24ubG9uIDwgd2F0Y2hfbG9jYXRpb24uc2VfbG9uKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShwb3N0X2xvY2F0aW9uLmxvbiA+IHdhdGNoX2xvY2F0aW9uLm53X2xvbikgKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyh3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbGF0LCB3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbG9uKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBtYXJrZXIgb3B0aW9uIHNldHRpbmdcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlTG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkJPVU5DRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlVzZXJQaW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlTGlzdGVuZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWl6ZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIobWFya2VyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihvbGRfbWFya2VyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkX21hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0obWFya2VyKSksIFxuICAgICAgICAgICAgICAgICAgICAxODAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFuZERyYXdQb3N0cygpe1xuICAgICAgICAgICAgUG9zdHNTdmMuZmV0Y2goKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocG9zdHMpe1xuXG4gICAgICAgICAgICAgICAgLy8gZHJhdyBsYXRlc3QgdXBkYXRlXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3N0cy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3N0ID0gcG9zdHNbaV07XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBtYXJrZXJzIHBvc3QgaXMgZXhpc2l0aW5nIG9uZSwgd2UgZG9uJ3Qgd2FudCB0byBkcmF3IGl0IGFnYWluLlxuICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGRyYXcgbmV3IG9uZXMhXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNbal07IGorKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zdC5faWQgPT0gbWFya2VyLnBvc3QuX2lkKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QgPSBudWxsOyAvLyDsnbTrr7gg6re466Ck7KeEIO2PrOyKpO2KuOudvOuptCwgbnVsbOuhnC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8g7J20IGxvb3DsnYAgcG9zdC5faWTrp4wg6rKA7IKs7Jqp7J6E7Jy866GcLCDrp4zslb0g6rK57LmY66m0IOuwlOuhnCBsb29w7J2EIOupiOy2sOuPhCDqtJzssK7ri6QuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBwb3N06rCAIOybkOuemCDsnojsl4frjZjqsoPsnbTrqbQgcG9zdOqwgCBudWxs66GcIOyFiyDrkJjsl4jsnYTqsoPsnbTqs6AsIGxvY2F0aW9u7ZSE66Gc7Y287Yuw64+EIOyeiOuKlOyngCDtmZXsnbjtlZjsnpBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwb3N0IHx8ICFwb3N0Lmhhc093blByb3BlcnR5KCdsb2NhdGlvbicpKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBwb3N0IC0gbm8gbmVlZCB0byBkcmF3XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gYW5ndWxhci5mcm9tSnNvbihwb3N0LmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobG9jYXRpb24ubGF0LCBsb2NhdGlvbi5sb24pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOuwlOyatOuNlOumrCDslYjsl5Ag7J6I64qU7KeA67aA7YSwIOyytO2BrOulvCDtlZjsnqVcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGdvb2dsZUxvYy5sYXQoKSA8IGN1cnJlbnRfbWFwX253LmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShnb29nbGVMb2MubGF0KCkgPiBjdXJyZW50X21hcF9zZS5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxuZygpIDwgY3VycmVudF9tYXBfc2UubG5nKCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA+IGN1cnJlbnRfbWFwX253LmxuZygpKSApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBza2lwIHRoaXMgcG9zdCAtIG5vIG5lZWQgdG8gZHJhd1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdXBsaW5nX3N0YXR1cyA9IGNhbGN1bGF0ZUNvdXBsaW5nKHBvc3QuZ3VpZCwgcG9zdC5ndWlkdGd0KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmtlciBvcHRpb24gc2V0dGluZ1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGVMb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkJ1YmJsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQb3N0XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG1hcmtlck9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gMTDstIjrs7Tri6Qg6ri0IOqyveyasOydmCDqsoPrp4wg7ISc67KE6rCAIOqzhOyCsOydhCDtlZjqs6Ag7ISc67KE6rCAIOuztOuCtOykmOyEnCBmcm9udGVuZOyXkOyEnCDsp4DsmrDrj4TroZ0g6rSA66as7ZW07KSY7JW8IO2VnOuLpC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heEluc3RhbnRMaWZlU3BhbiA9IDEwMDAwO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOyduOyKpO2EtO2KuCDrp7Ug66mU7Iuc7KeA7J28IOqyveyasOunjCDtlITroaDtirjsl5Trk5zsmYAg7ISc67KE6rCAIOuLpOultOqyjCDsp4Dsm4zso7zrj4TroZ0g7ZWc64ukLiAo7J2864uo7J2AIOyDge2VnOyEoOydgCAxMOy0iClcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3QubGlmZXNwYW4gPCBtYXhJbnN0YW50TGlmZVNwYW4pe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHVwIHNlbGYgcmVtb3ZlIGZvciBtYXJrZXIgaXRzZWxmIGFuZCBmcm9tIG1hcmtlcnMgY29sbGVjdGlvbiBhdCBmcm9udC1lbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKG9sZF9tYXJrZXIsIG9sZF9wb3N0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRfbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNba107IGsrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZF9wb3N0Ll9pZCA9PSBtYXJrZXIucG9zdC5faWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnNwbGljZShrLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfShtYXJrZXIsIHBvc3QpKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3N0LmxpZmVzcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBtYXJrZXIgdG8gYXJyYXksIHRoaXMgbWVhbnMgdGhhdCBpdCBoYXMgYmVlbiBkcmF3biB0byBtYXBcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcjogbWFya2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QgIDogcG9zdFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBEUkFXSU5HIE1FU1NBR0UgV0lORE9XIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGRpdiBpZD1cImJ1YmJsZVBvc3RcIj4nICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QuYm9keSArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PGRpdiBpZD1cImJ1YmJsZUxpZmVCYXJcIj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAvLyDsiqTsvZTtlITsl5DshJzrtoDthLAg7IOI66Gc7Jq0IOywqOydvOuTnCDsiqTsvZTtlITrpbwg66eM65Ok7Ja0IGVhY2ggZm9yIGxvb3Dsl5DshJwg7IKs7Jqp7ZWc64ukLlxuICAgICAgICAgICAgICAgICAgICAvLyAtLT4g7ZW07JW8LCDqsIEgRE9N7J20IOqwgeqwgeydmCBzY29wZeulvCDqsIDsoLjshJwgcG9zdCBtc2fqsIAg7JWIIOqyuey5nOuLpC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHNjb3BlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBwYXJlbnQuJG5ldyh0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgb3BlbkluZm9XaW5kb3cgPSAoZnVuY3Rpb24obWFya2VyLCBjaGlsZF9zY29wZSwgcG9zdCwgY291cGxpbmdfc3RhdHVzKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyB3aW5kb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mb1dpbmRvd09wdGlvbnMgPSB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXhlbE9mZnNldDogbmV3IGdvb2dsZS5tYXBzLlNpemUoLTQxLjUsIDEwLjApLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUF1dG9QYW46IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coaW5mb1dpbmRvd09wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGN1cnJlbnQgdGltZSBhbmQgc3VidHJhY3QgaXQgZnJvbSBwb3N0J3MgZW5kIHRpbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB3aWxsIGJlIGFjY3VyYXRlIHBvc3QgdGltZSBmb3IgaW5zdGFudCBwb3N0cyBhbmQgbG9uZyBwb3N0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VGltZU1pbGxpID0gY3VycmVudERhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3N0bGlmZSA9ICgocG9zdC5saWZlZW5kIC0gY3VycmVudFRpbWVNaWxsaSkgPj0gMCkgPyAocG9zdC5saWZlZW5kIC0gY3VycmVudFRpbWVNaWxsaSkgOiAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpZmVwZXJjZW50YWdlID0gKHBvc3RsaWZlIC8gcG9zdC5saWZlc3BhbikudG9GaXhlZCgyKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90byBtYWtlIGRhdGEgYXZhaWxhYmxlIHRvIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUubXNnID0gcG9zdC5ib2R5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3RsaWZlID0gcG9zdGxpZmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGd1aWQgPSBwb3N0Lmd1aWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGd1aWR0Z3QgPSBwb3N0Lmd1aWR0Z3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGNvdXBsZXN0YXR1cyA9IGNvdXBsaW5nX3N0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPSBsaWZlcGVyY2VudGFnZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLiRvbignc2V0OmNvdXBsaW5nJywgZnVuY3Rpb24oXywgY291cGxpbmdfdXBkYXRlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGNvdXBsZXN0YXR1cyA9IGNvdXBsaW5nX3VwZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXBpbGUgaXQgYmVmb3JlIGxvYWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gJzxkaXYgbWFwLW1zZz48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21waWxlZCA9ICRjb21waWxlKGNvbnRlbnQpKGNoaWxkX3Njb3BlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9XaW5kb3cuc2V0Q29udGVudCggY29tcGlsZWRbMF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvV2luZG93Lm9wZW4obWFwICwgbWFya2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0pKG1hcmtlciwgY2hpbGQsIHBvc3QsIGNvdXBsaW5nX3N0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBvcGVuSW5mb1dpbmRvdygpO1xuICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEVORCBvZiBEUkFXSU5HIE1FU1NBR0UgV0lORE9XIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICAgICAgICAgIH0gLy8gZW5kIG9mIGZvci1sb29wXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdEcm9wRG93bihsb2NhdGlvbilcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobG9jYXRpb24ubGF0LCBsb2NhdGlvbi5sb24pO1xuXG4gICAgICAgICAgICB1cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgIC8vIOuwlOyatOuNlOumrCDslYjsl5Ag7J6I64qU7KeA67aA7YSwIOyytO2BrOulvCDtlZjsnqVcbiAgICAgICAgICAgIGlmICghKGdvb2dsZUxvYy5sYXQoKSA8IGN1cnJlbnRfbWFwX253LmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxhdCgpID4gY3VycmVudF9tYXBfc2UubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgIShnb29nbGVMb2MubG5nKCkgPCBjdXJyZW50X21hcF9zZS5sbmcoKSkgfHxcbiAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA+IGN1cnJlbnRfbWFwX253LmxuZygpKSApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBza2lwIHRoaXMgcG9zdCAtIG5vIG5lZWQgdG8gZHJhd1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBtYXJrZXIgb3B0aW9uIHNldHRpbmdcbiAgICAgICAgICAgIHZhciBtYXJrZXJPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGVMb2MsXG4gICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uRFJPUCxcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJVc2VyUGluXCIsXG4gICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VVc2VyTG9naW5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG1hcmtlck9wdGlvbnMpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgIChmdW5jdGlvbihvbGRfbWFya2VyKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRfbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KG1hcmtlcikpLCBcbiAgICAgICAgICAgIDIwMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdW5EcmF3UG9zdChwb3N0aWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJzdGFydGluZyByZW1vdmUgcG9zdFwiKTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNba107IGsrKykge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocG9zdGlkKTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKG1hcmtlci5wb3N0Ll9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKHBvc3RpZCA9PSBtYXJrZXIucG9zdC5faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyLm1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcnMuc3BsaWNlKGssIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkcmF3QW5kU2V0UGxhY2UobG9jYXRpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG9uKTtcbiAgICAgICAgICAgIGRyYXdIZWxwZXJNYXJrZXIoZ29vZ2xlTG9jKTtcbiAgICAgICAgICAgIHNldFBsYWNlKGdvb2dsZUxvYyk7XG5cbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBzZXJ2ZXIgZ2V0cyB1cGRhdGVkIHdoZW5ldmVyIHNldHRpbmcgbmV3IHBsYWNlIHdpdGggbWFya2VyXG4gICAgICAgICAgICB1cGRhdGVXYXRjaExvY2F0aW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkcmF3IG1hcCB3aXRoIGhlbHBlciBtYXJrZXJzXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdIZWxwZXJNYXJrZXIobG9jYXRpb24pe1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gaGVscGVyTWFya2Vyc1tpXTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhlbHBlck1hcmtlcnMgPSBbXTtcbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbG9jYXRpb24sIFxuICAgICAgICAgICAgICAgIG1hcDogbWFwLFxuICAgICAgICAgICAgICAgIGljb246IGltYWdlVGFyZ2V0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhlbHBlck1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdW5EcmF3SGVscGVyTWFya2VyKCl7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBoZWxwZXJNYXJrZXJzW2ldOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVscGVyTWFya2VycyA9IFtdO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBVVElMXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGZ1bmN0aW9uIHNldFBsYWNlKGxvY2F0aW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBicm9hZGNhc3QgbG9jYXRpb24gaW5mb3IobG9uLGxhdClcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdsb2MnLCBsb2NhdGlvbik7XG5cbiAgICAgICAgICAgIHZhciBnZW9jb2RlciA9IG5ldyBnb29nbGUubWFwcy5HZW9jb2RlcigpO1xuXG4gICAgICAgICAgICAvLyBicm9hZGNhc3QgcGxhY2UgZm9ybWF0dGVkX2FkZHJlc3MgYW5kIGRyYXcgaWNvblxuICAgICAgICAgICAgZ2VvY29kZXIuZ2VvY29kZSggeyAnbGF0TG5nJzogbG9jYXRpb24gfSwgZnVuY3Rpb24ocmVzdWx0cywgc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgLy8gYXMgdXNlciBjbGlja3Mgb24gdGhlIG1hcCxcbiAgICAgICAgICAgICAgICAvLyB3ZSBoYXZlIHRvIHNhdmUgdGhlIGZvcm1hdHRlZCBhZGRyZXNzIGluICRzY29wZSBhbmRcbiAgICAgICAgICAgICAgICAvLyBpdCB3aWxsIGJlIHVzZWQgdGhyb3VnaCBwb3N0cy5jdHJsXG4gICAgICAgICAgICAgICAgLy8gZW1pdCBicm9hZGNhc2UgJ3BsYWNlJyBhbmQgc2VuZCB0aGlzIHRvIGFwcGxpY2F0aW9uLmN0cmxcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBicm9hZGNhc3QgZm9ybWF0dGVkX2FkZHJlc3NcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3BsYWNlJywgcmVzdWx0c1sxXS5mb3JtYXR0ZWRfYWRkcmVzcyk7IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgc3dhbChcIlwiLFwiTG9jYXRpb24gZG9lcyBub3QgZXhpc3RzXCIpO1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgncGxhY2UnLCBcIkxvY2F0aW9uIGRvZXMgbm90IGV4aXN0c1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUNvdXBsaW5nKHBvc3RfZ3VpZCwgcG9zdF9ndWlkdGd0KVxuICAgICAgICB7XG4gICAgICAgICAgICAvKiBjb3VwbGluZyBzdGF0dXNcbiAgICAgICAgICAgICAgICAwIC0gbm8gc3RhdHVzXG4gICAgICAgICAgICAgICAgMSAtIGkgbGlrZSB5b3VcbiAgICAgICAgICAgICAgICAyIC0geW91IGxpa2UgaVxuICAgICAgICAgICAgICAgIDQgLSB3ZSBsaWtlIGVhY2ggb3RoZXJcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YXIgaWxpa2V5b3UgPSBzY29wZS5ndWlkdGd0ID09IHBvc3RfZ3VpZDtcbiAgICAgICAgICAgIHZhciB5b3VsaWtlaSA9IHNjb3BlLmd1aWQgPT0gcG9zdF9ndWlkdGd0O1xuICAgICAgICAgICAgaWYgKGlsaWtleW91ICYmIHlvdWxpa2VpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiA0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaWxpa2V5b3UgJiYgIXlvdWxpa2VpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWlsaWtleW91ICYmIHlvdWxpa2VpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gVUlcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gc2V0VUlNb3ZlVG9DdXJyTG9jQnRuKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGN1cnJMb2NCdG4gPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1jdXJyJykpOyBcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uVE9QX1JJR0hUXS5wdXNoKGN1cnJMb2NCdG4pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VUlQb3N0Rm9ybSgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBwb3N0Rm9ybSA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9zdGluZycpKTsgXG4gICAgICAgICAgICBtYXAuY29udHJvbHNbZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLkJPVFRPTV9DRU5URVJdLnB1c2gocG9zdEZvcm0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VUlQb3N0QnRuKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHBvc3RCdG4gPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1zdWJtaXQnKSk7XG4gICAgICAgICAgICBtYXAuY29udHJvbHNbZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLkJPVFRPTV9DRU5URVJdLnB1c2gocG9zdEJ0bik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVRpbWVTbGlkZXIoKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgdGltZVNsaWRlciA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZVNsaWRlcicpKTtcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0NFTlRFUl0ucHVzaCh0aW1lU2xpZGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJU2VhcmNoQm94KClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBzZWFyY2ggYm94IGFuZCBsaW5rIGl0IHRvIHRoZSBVSSBlbGVtZW50LlxuICAgICAgICAgICAgdmFyIGlucHV0ID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWMtaW5wdXQnKSk7IC8vIEB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAgXG4gICAgICAgICAgICBtYXAuY29udHJvbHNbZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLlRPUF9MRUZUXS5wdXNoKGlucHV0KTtcblxuICAgICAgICAgICAgdmFyIHNlYXJjaEJveCA9IG5ldyBnb29nbGUubWFwcy5wbGFjZXMuU2VhcmNoQm94KChpbnB1dCkpOyAvLyBAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gXG5cbiAgICAgICAgICAgIC8vIExpc3RlbiBmb3IgdGhlIGV2ZW50IGZpcmVkIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhbiBpdGVtIGZyb20gdGhlXG4gICAgICAgICAgICAvLyBwaWNrIGxpc3QuIFJldHJpZXZlIHRoZSBtYXRjaGluZyBwbGFjZXMgZm9yIHRoYXQgaXRlbS5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHNlYXJjaEJveCwgJ3BsYWNlc19jaGFuZ2VkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBsYWNlcyA9IHNlYXJjaEJveC5nZXRQbGFjZXMoKTtcblxuICAgICAgICAgICAgICAgIGlmIChwbGFjZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyB0YWtlIG9ubHkgMSBzcG90XG4gICAgICAgICAgICAgICAgdmFyIHBsYWNlID0gcGxhY2VzWzBdO1xuXG4gICAgICAgICAgICAgICAgLy8gd2hlbiBzZWFyY2ggaGFwcGVucywgbG9jYXRpb24gd2lsbCBiZSB1cGRhdGVkIGFzIHdlbGwgZm9yIHBvc3RcbiAgICAgICAgICAgICAgICAvLyBzY29wZS4kZW1pdCgncGxhY2UnLCBwbGFjZS5mb3JtYXR0ZWRfYWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBsYXQ6IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpLFxuICAgICAgICAgICAgICAgICAgICBsb246IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxuZygpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkcmF3QW5kU2V0UGxhY2UobG9jYXRpb24pO1xuXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSA9IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxhdGl0dWRlO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlID0gcGxhY2UuZ2VvbWV0cnkubG9jYXRpb24ubG9uZ2l0dWRlO1xuXG4gICAgICAgICAgICAgICAgbWFwLnBhblRvKHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICBtYXAuc2V0Wm9vbSgxNik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEVWRU5UXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50Q2xpY2soKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBjbGljayBldmVudCBvbiBtYXAgdG8gZHJhdyBtYXJrZXJcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcF9vcmlnaW4sICdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBsYXQ6IGV2ZW50LmxhdExuZy5sYXQoKSxcbiAgICAgICAgICAgICAgICAgICAgbG9uOiBldmVudC5sYXRMbmcubG5nKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRyYXdBbmRTZXRQbGFjZShsb2NhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50Q2VudGVyQ2hhbmdlZCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcF9vcmlnaW4sICdjZW50ZXJfY2hhbmdlZCcsIGZ1bmN0aW9uKCl7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIHdoZW4gbWFwIGNlbnRlciBjaGFuZ2UsIHVwZGF0ZSBsYXN0IGxvY2F0aW9uIGluIG1lbW9yeSxcbiAgICAgICAgICAgICAgICAvLyBzbyBicm93c2VyIHdpbGwgcmVtZW1iZXIgaXQgbmV4dCB0aW1lIHlvdSBjb21lIVxuICAgICAgICAgICAgICAgIHVwZGF0ZURlZmF1bHRMb2NhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudEJvdW5kc0NoYW5nZWQoKVxuICAgICAgICB7XG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnYm91bmRzX2NoYW5nZWQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gbWFwIGNlbnRlciBjaGFuZ2UsIHVwZGF0ZSBib3VuZHMgaW5mbyBmb3IgbWFwXG4gICAgICAgICAgICAgICAgdXBkYXRlQm91bmRzKCk7ICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0RXZlbnREcmFnRW5kKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ2RyYWdlbmQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBtYXAgYXMgZHJhZyBlbmRcbiAgICAgICAgICAgICAgICB1cGRhdGVBbmREcmF3UG9zdHMoKTtcblxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB3YXRjaGxvYyB3aGVuIGNlbnRlciBjaGFuZ2VkLlxuICAgICAgICAgICAgICAgIHVwZGF0ZVdhdGNoTG9jYXRpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0RXZlbnRSZXNpemUoKVxuICAgICAgICB7XG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAncmVzaXplJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbWFwIGFzIGRyYWcgZW5kXG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICB1cGRhdGVXYXRjaExvY2F0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50Wm9vbUNoYW5nZWQoKVxuICAgICAgICB7XG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnem9vbV9jaGFuZ2VkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbWFwIGFzIGRyYWcgZW5kXG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICB1cGRhdGVXYXRjaExvY2F0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIFNFVFVQIEZPUiBNQVBcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gbWFwIGluaXRpYWwgY29uZmlnc1xuICAgICAgICBmdW5jdGlvbiBpbml0aWFsTWFwRGF0YSgpe1xuICAgICAgICAgICAgaW5pdGlhbE1hcENlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoMzQuMDUsIC0xMTguMjQpO1xuICAgICAgICBcbiAgICAgICAgICAgIGlmICghaXNOYU4od2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSkgJiYgIWlzTmFOKHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsTWFwQ2VudGVyID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyh3aW5kb3cubG9jYWxTdG9yYWdlLmxhdGl0dWRlLCB3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldFBsYWNlKGluaXRpYWxNYXBDZW50ZXIpO1xuXG4gICAgICAgICAgICBtYXBPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXIgICAgICA6IGluaXRpYWxNYXBDZW50ZXIsXG4gICAgICAgICAgICAgICAgICAgIHpvb20gICAgICAgIDogMTUsXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbHdoZWVsIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3RyZWV0Vmlld0NvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlQ29udHJvbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHBhbkNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1hcFR5cGVDb250cm9sT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgIG1hcFR5cGVJZHM6IFtnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUCwgQ0xPVURfTUFQX0lEXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlSWQ6IENMT1VEX01BUF9JRFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldE1hbnVhbEV2ZW50cygpe1xuICAgICAgICAgICAgZnVuY3Rpb24gQ2xvdWRNYXAob3B0aW9ucyl7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJJbml0aWFsaXppbmcgbWFwXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpbnN0YW50aWF0ZSBnb29nbGUgbWFwXG4gICAgICAgICAgICBtYXBfb3JpZ2luID0gbmV3IGdvb2dsZS5tYXBzLk1hcChlbGVtZW50WzBdLCBtYXBPcHRpb25zKTtcblxuICAgICAgICAgICAgLy8gc2V0IHByb3RvdHlwZSBvZiBjdXN0b20gbWFwIHdpdGggb3JpZ2luIG1hcFxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlID0gbWFwX29yaWdpbjtcblxuICAgICAgICAgICAgLy8gZHJhdyB4IG1hcmtlclxuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRHJhd1hNYXJrZXIobG9jYXRpb24pe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ2RyYXdYTWFya2VyJywgbG9jYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLmRyYXdYTWFya2VyID0gaGFuZGxlRHJhd1hNYXJrZXI7XG5cbiAgICAgICAgICAgIC8vIGRyYXcgY3VycmVudCBsb2NhdGlvbiBtYXJrZXJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZURyYXdDdXJyTG9jYXRpb25NYXJrZXIobG9jYXRpb24pe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ2RyYXdDdXJyTG9jYXRpb25NYXJrZXInLCBsb2NhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUuZHJhd0N1cnJMb2NhdGlvbk1hcmtlciA9IGhhbmRsZURyYXdDdXJyTG9jYXRpb25NYXJrZXI7XG5cbiAgICAgICAgICAgIC8vIGRyYXcgcG9zdHNcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZUFuZERyYXdQb3N0cygpe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ3VwZGF0ZUFuZERyYXdQb3N0cycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLnVwZGF0ZUFuZERyYXdQb3N0cyA9IGhhbmRsZVVwZGF0ZUFuZERyYXdQb3N0cztcblxuICAgICAgICAgICAgLy8gZHJhdyByZXNwb25zZXNcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZURyYXdSZXNwb25zZXMocG9zdCl7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCAnZHJhd1Jlc3BvbnNlcycsIHBvc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLmRyYXdSZXNwb25zZXMgPSBoYW5kbGVEcmF3UmVzcG9uc2VzO1xuXG4gICAgICAgICAgICAvLyB1bmRyYXcgcG9zdHNcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVVuRHJhd1Bvc3QocG9zdGlkKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICd1bkRyYXdQb3N0JywgcG9zdGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS51bkRyYXdQb3N0ID0gaGFuZGxlVW5EcmF3UG9zdDtcblxuICAgICAgICAgICAgLy8gY3JlYXRlIGN1c3RvbSBtYXAgZm9yIGFwcFxuICAgICAgICAgICAgbWFwID0gbmV3IENsb3VkTWFwKCk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ2RyYXdYTWFya2VyJywgZnVuY3Rpb24obG9jYXRpb24pe1xuICAgICAgICAgICAgICAgIGRyYXdBbmRTZXRQbGFjZShsb2NhdGlvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnZHJhd0N1cnJMb2NhdGlvbk1hcmtlcicsIGZ1bmN0aW9uKGxvY2F0aW9uKXtcbiAgICAgICAgICAgICAgICBkcmF3RHJvcERvd24obG9jYXRpb24pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ3VwZGF0ZUFuZERyYXdQb3N0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnZHJhd1Jlc3BvbnNlcycsIGZ1bmN0aW9uKHBvc3Qpe1xuICAgICAgICAgICAgICAgIGRyYXdSZXNwb25zZXMocG9zdCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAndW5EcmF3UG9zdCcsIGZ1bmN0aW9uKHBvc3RpZCl7XG4gICAgICAgICAgICAgICAgdW5EcmF3UG9zdChwb3N0aWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRTdHlsZUZvck1hcCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIOq5lOuBlOydtCBcbiAgICAgICAgICAgIC8vdmFyIGZlYXR1cmVPcHRzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJhZG1pbmlzdHJhdGl2ZVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy50ZXh0LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiM2MTk1YTBcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjJmMmYyXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmZmZmZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kucGFya1wiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNlNmYzZDZcIn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6NDV9LHtcInZpc2liaWxpdHlcIjpcInNpbXBsaWZpZWRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcInNpbXBsaWZpZWRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2Y0ZDJjNVwifSx7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy50ZXh0XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjNGU0ZTRlXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjRmNGY0XCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMudGV4dC5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjNzg3ODc4XCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMuaWNvblwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwidHJhbnNpdFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNlYWY2ZjhcIn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZWFmNmY4XCJ9XX1dO1xuICAgICAgICAgICAgLy8g7IOB7YG87J20XG4gICAgICAgICAgICAvL3ZhciBmZWF0dXJlT3B0cyA9IFt7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlLm1hbl9tYWRlXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmN2YxZGZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlLm5hdHVyYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2QwZTNiNFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGUubmF0dXJhbC50ZXJyYWluXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLmJ1c2luZXNzXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kubWVkaWNhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmJkM2RhXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5wYXJrXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNiZGU2YWJcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LnN0cm9rZVwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZmZTE1ZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5zdHJva2VcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNlZmQxNTFcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmZmZmZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5sb2NhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcImJsYWNrXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInRyYW5zaXQuc3RhdGlvbi5haXJwb3J0XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2NmYjJkYlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjYTJkYWYyXCJ9XX1dO1xuICAgICAgICAgICAgLy8g65iR65iR7J20XG4gICAgICAgICAgICAvL3ZhciBmZWF0dXJlT3B0cyA9IFt7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjN2ZjOGVkXCJ9LHtcInNhdHVyYXRpb25cIjo1NX0se1wibGlnaHRuZXNzXCI6LTZ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzdmYzhlZFwifSx7XCJzYXR1cmF0aW9uXCI6NTV9LHtcImxpZ2h0bmVzc1wiOi02fSx7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLnBhcmtcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM4M2NlYWRcIn0se1wic2F0dXJhdGlvblwiOjF9LHtcImxpZ2h0bmVzc1wiOi0xNX0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZjNmNGY0XCJ9LHtcInNhdHVyYXRpb25cIjotODR9LHtcImxpZ2h0bmVzc1wiOjU5fSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZmZmZmZmXCJ9LHtcInNhdHVyYXRpb25cIjotMTAwfSx7XCJsaWdodG5lc3NcIjoxMDB9LHtcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZmZmZmZmXCJ9LHtcInNhdHVyYXRpb25cIjotMTAwfSx7XCJsaWdodG5lc3NcIjoxMDB9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjYmJiYmJiXCJ9LHtcInNhdHVyYXRpb25cIjotMTAwfSx7XCJsaWdodG5lc3NcIjoyNn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2ZmY2MwMFwifSx7XCJzYXR1cmF0aW9uXCI6MTAwfSx7XCJsaWdodG5lc3NcIjotMzV9LHtcInZpc2liaWxpdHlcIjpcInNpbXBsaWZpZWRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZmZjYzAwXCJ9LHtcInNhdHVyYXRpb25cIjoxMDB9LHtcImxpZ2h0bmVzc1wiOi0yMn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLnNjaG9vbFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNkN2U0ZTRcIn0se1wic2F0dXJhdGlvblwiOi02MH0se1wibGlnaHRuZXNzXCI6MjN9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX1dO1xuICAgICAgICAgICAgLy8g7LSI66Gd7J20XG4gICAgICAgICAgICB2YXIgZmVhdHVyZU9wdHMgPSBbe1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNGRkE4MDBcIn0se1wic2F0dXJhdGlvblwiOjB9LHtcImxpZ2h0bmVzc1wiOjB9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzUzRkYwMFwifSx7XCJzYXR1cmF0aW9uXCI6LTczfSx7XCJsaWdodG5lc3NcIjo0MH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI0ZCRkYwMFwifSx7XCJzYXR1cmF0aW9uXCI6MH0se1wibGlnaHRuZXNzXCI6MH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmxvY2FsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzAwRkZGRFwifSx7XCJzYXR1cmF0aW9uXCI6MH0se1wibGlnaHRuZXNzXCI6MzB9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjMDBCRkZGXCJ9LHtcInNhdHVyYXRpb25cIjo2fSx7XCJsaWdodG5lc3NcIjo4fSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM2Nzk3MTRcIn0se1wic2F0dXJhdGlvblwiOjMzLjR9LHtcImxpZ2h0bmVzc1wiOi0yNS40fSx7XCJnYW1tYVwiOjF9XX1dO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgc3R5bGVkTWFwT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnQ3VzdG9tIFN0eWxlJ1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgY3VzdG9tTWFwVHlwZSA9IG5ldyBnb29nbGUubWFwcy5TdHlsZWRNYXBUeXBlKGZlYXR1cmVPcHRzLCBzdHlsZWRNYXBPcHRpb25zKTtcbiAgICAgICAgICAgIG1hcC5tYXBUeXBlcy5zZXQoQ0xPVURfTUFQX0lELCBjdXN0b21NYXBUeXBlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGluaXQgdGhlIG1hcFxuICAgICAgICBmdW5jdGlvbiBpbml0TWFwKCkge1xuICAgICAgICAgICAgaWYgKG1hcCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbE1hcERhdGEoKTtcblxuICAgICAgICAgICAgICAgIHNldE1hbnVhbEV2ZW50cygpO1xuXG4gICAgICAgICAgICAgICAgc2V0U3R5bGVGb3JNYXAoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYnJvYWRjYXN0IHRvIHNlbmQgbWFwIHRvIGFwcGxpY2F0aW9uIGN0cmxcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdtYXBJbml0JywgbWFwKTtcblxuICAgICAgICAgICAgLy8gYWRkIFVJIGVsZW1lbnRzIHRvIG1hcFxuICAgICAgICAgICAgc2V0VUlTZWFyY2hCb3goKTtcbiAgICAgICAgICAgIHNldFVJTW92ZVRvQ3VyckxvY0J0bigpO1xuICAgICAgICAgICAgc2V0VUlQb3N0Rm9ybSgpO1xuICAgICAgICAgICAgc2V0VUlQb3N0QnRuKCk7XG4gICAgICAgICAgICBzZXRVSVRpbWVTbGlkZXIoKTtcblxuICAgICAgICAgICAgLy8gYWRkIG9yaWdpbiBuYXRpdmUgRXZlbnQgaGFuZGxlcnMgdG8gbWFwXG4gICAgICAgICAgICBzZXRFdmVudENsaWNrKCk7XG4gICAgICAgICAgICBzZXRFdmVudENlbnRlckNoYW5nZWQoKTtcbiAgICAgICAgICAgIHNldEV2ZW50RHJhZ0VuZCgpO1xuICAgICAgICAgICAgc2V0RXZlbnRSZXNpemUoKTtcbiAgICAgICAgICAgIHNldEV2ZW50Wm9vbUNoYW5nZWQoKTtcbiAgICAgICAgICAgIHNldEV2ZW50Qm91bmRzQ2hhbmdlZCgpO1xuXG4gICAgICAgICAgICAvLyB1cGRhdGUgdmVyeSBmaXJzdCB0aW1lIGZvciBhcHBcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB1cGRhdGVEZWZhdWx0TG9jYXRpb24oKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVXYXRjaExvY2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG4gICAgICAgICAgICB9LCA4MDApO1xuICAgICAgICB9IFxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEVYRUNVVEVcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgaW5pdE1hcCgpO1xuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGlkPVwibWFwLWNhbnZhc1wiPjwvZGl2PicsXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgIGxpbms6IGxpbmtcbiAgICB9O1xufSk7XG5cblxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZGlyZWN0aXZlKCdtYXBNc2cnLCBmdW5jdGlvbiAoJHRpbWVvdXQpIHtcblxuICAgIHZhciBsaW5rID0gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7ICAgICAgICBcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBDT1VQTElORyBDTEFTU1xuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvKiBjb3VwbGluZyBzdGF0dXNcbiAgICAgICAgICAwIC0gbm8gc3RhdHVzXG4gICAgICAgICAgMSAtIGkgbGlrZSB5b3VcbiAgICAgICAgICAyIC0geW91IGxpa2UgaVxuICAgICAgICAgIDQgLSB3ZSBsaWtlIGVhY2ggb3RoZXJcbiAgICAgICAgKi9cbiAgICAgICAgc2NvcGUuZ2V0X2NvdXBsaW5nID0gZnVuY3Rpb24oY291cGxpbmdfc3RhdHVzKXtcbiAgICAgICAgICBpZiAoY291cGxpbmdfc3RhdHVzID09IDQpe1xuICAgICAgICAgICAgcmV0dXJuIFwiYnViYmxlUG9zdCBidWJibGVQb3N0X2NvdXBsZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChjb3VwbGluZ19zdGF0dXMgPT0gMSl7XG4gICAgICAgICAgICByZXR1cm4gXCJidWJibGVQb3N0IGJ1YmJsZVBvc3RfaWxpa2V5b3VcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoY291cGxpbmdfc3RhdHVzID09IDIpe1xuICAgICAgICAgICAgcmV0dXJuIFwiYnViYmxlUG9zdCBidWJibGVQb3N0X3lvdWxpa2VpXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiYnViYmxlUG9zdCBidWJibGVQb3N0X25vbmVcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gRE9DVU1FTlQgUkVBRFlcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gYXMgdGhlIGRvY3VtZW50IGdldHMgcmVhZHksIHNldCBjbGljayBldmVudCBhbmQgbGlmZWJhciBhbmltYXRpb24gbGVuZ3RoXG4gICAgICAgIHZhciBtYW51YWxDbGljayA9IGZhbHNlO1xuXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICB1cGRhdGVHdWlkVGFyZ2V0KCk7XG5cbiAgICAgICAgICB1cGRhdGVQb3N0VGltZXIoKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVHdWlkVGFyZ2V0KCl7XG4gICAgICAgICAgLy8gdXBkYXRlIHN0YXR1cyBmb3IgZ3VpZCB0YXJnZXRcbiAgICAgICAgICB2YXIgcG9zdGd1aWQgPSBzY29wZS5wb3N0Z3VpZDtcbiAgICAgICAgICB2YXIgbXlndWlkID0gc2NvcGUuJHBhcmVudC5ndWlkO1xuICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2ICNidWJibGVDbGljaycpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vIGNsaWNraW5nIGl0cyBvd24gcG9zdCB3aWxsIGRvIG5vdGhpbmdcbiAgICAgICAgICAgIGlmIChwb3N0Z3VpZCA9PSBteWd1aWQpe1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHRoaXMgaGF2ZSB0byBiZSB1cGRhdGUgdG8gYmUgY29tbXVuaWNhdGVkIHRocm91Z2ggdGhlIHNlcnZlclxuXG4gICAgICAgICAgICBpZiAoc2NvcGUuJHBhcmVudC5ndWlkdGd0ID09IDApe1xuICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0OmNvdXBsaW5nJywgMSk7IC8vIHByb3BhZ2F0ZSB0byB1cHBlciBzY29wZSBmb3IgY291cGxpbmcgdXBkYXRlXG4gICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdzZXQ6Z3VpZHRndCcsIHBvc3RndWlkKTsgLy8gcHJvcGFnYXRlIHRvIHVwcGVyIHNjb3BlIGZvciBndWlkdGd0IHVwZGF0ZVxuICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTsgLy8gZm9yY2UgdG8gdXBkYXRlIERPTVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcGUucG9zdGNvdXBsZXN0YXR1cyA9PSAxICYmIHNjb3BlLiRwYXJlbnQuZ3VpZHRndCAhPSAwKXtcbiAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3NldDpjb3VwbGluZycsIDApOyAvLyBwcm9wYWdhdGUgdG8gdXBwZXIgc2NvcGUgZm9yIGNvdXBsaW5nIHVwZGF0ZVxuICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0Omd1aWR0Z3QnLCAwKTsgLy8gcHJvcGFnYXRlIHRvIHVwcGVyIHNjb3BlIGZvciBndWlkdGd0IHVwZGF0ZVxuICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTsgLy8gZm9yY2UgdG8gdXBkYXRlIERPTVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVQb3N0VGltZXIoKXtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkxpZmUgJTpcIiwgc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlKTtcblxuICAgICAgICAgIC8vIHNldCB0aW1lciBmb3IgcG9zdCBsaWZlIGJhclxuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBzY29wZS5wb3N0bGlmZSArIFwibXNcIjtcbiAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uJywgZHVyYXRpb24pO1xuXG4gICAgICAgICAgICBpZiAoc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID4gMC43NSl7XG4gICAgICAgICAgICAgIC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqL1xuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgLnBvc3RsaWZlYmFyJykuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9xX2ZvdXInKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9xX2ZvdXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA8PSAwLjc1ICYmIHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA+IDAuNSl7XG4gICAgICAgICAgICAgIC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqL1xuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgLnBvc3RsaWZlYmFyJykuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9xX3RocmVlJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgLnBvc3RsaWZlYmFyJykuY3NzKCdhbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fcV90aHJlZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlIDw9IDAuNSAmJiBzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPiAwLjIwKXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCkuZmluZCgnZGl2IGRpdiAucG9zdGxpZmViYXInKS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX3FfdHdvJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgLnBvc3RsaWZlYmFyJykuY3NzKCdhbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fcV90d28nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqL1xuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnBhcmVudCgpLmZpbmQoJ2RpdiBkaXYgLnBvc3RsaWZlYmFyJykuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9xX29uZScpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IGFuZ3VsYXIuZWxlbWVudChlbGVtZW50KS5wYXJlbnQoKS5maW5kKCdkaXYgZGl2IC5wb3N0bGlmZWJhcicpLmNzcygnYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX3Ffb25lJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy4vdGVtcGxhdGVzL3dpbmRvdy5odG1sJyxcbiAgICAgICAgbGluazogbGlua1xuICAgIH07XG59KTtcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyLmNvbnRyb2xsZXIoJ1Bvc3RzQ3RybCcsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc2NvcGUsIFBvc3RzU3ZjLCBVdGlsU3ZjLCAkd2luZG93LCAkZG9jdW1lbnQpe1xyXHJcdC8qIGVtaXQgYnJvYWRjYXN0IGZvciBjdXJyZW50IHBhZ2VJZCAqL1xyXHQkc2NvcGUuJGVtaXQoJ3BhZ2VjaGFuZ2UnLCAkc2NvcGUucGFnZUlkLnBvc3QpO1xyXHJcdCRzY29wZS5wb3N0cyA9IFtdO1xyXHJcdC8qIGFzIHNlcnZlciB0ZWxscyB0aGVyZSB3YXMgbmV3IHBvc3QsIGxldHMgcmUtbG9hZCBsaXN0IGRhdGEgKi9cclx0JHNjb3BlLiRvbignd3M6bmV3X3Bvc3QnLCBmdW5jdGlvbihfLCBwb3N0KXtcclx0XHQkc2NvcGUucmVxdWVzdEZldGNoKCk7XHJcdH0pO1xyXHJcclxyXHQkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uKCkge1xyXHRcdC8qIGdldCBhdXRvY29tcGxldGVkIHBsYWNlIGFuZCByZXNldChzZXQgdG8gdW5kZWZpbmVkKSAqL1xyXHRcdHZhciBwbGFjZSA9ICRzY29wZS5wb3N0cGxhY2U7XHJcdFx0dmFyIGxvY2F0aW9uID0gJHNjb3BlLnBvc3RMb2NhdGlvbjtcclxyXHRcdHZhciBsb2NhdGlvbkpTT04gPSBKU09OLnN0cmluZ2lmeShsb2NhdGlvbik7XHJcclx0XHR2YXIgcmVsYXRpdmVMaWZlU3Bhbjtcclx0XHRpZiAoJHNjb3BlLnRpbWV2YWx1ZSA8PSA1MDAwKXtcclx0XHRcdHZhciBjaGFyTGVuID0gJHNjb3BlLmNvbnRlbnQubGVuZ3RoO1xyXHRcdFx0aWYgKGNoYXJMZW4gPCA1KVxyXHRcdFx0e1xyXHRcdFx0XHRyZWxhdGl2ZUxpZmVTcGFuID0gMzAwMDtcclx0XHRcdH1cclx0XHRcdGVsc2Vcclx0XHRcdHtcclx0XHRcdFx0cmVsYXRpdmVMaWZlU3BhbiA9IGNoYXJMZW4gKiBVdGlsU3ZjLm1hcFJhbmdlKGNoYXJMZW4sIDUsIDIwLCA1MDAsIDMwMCk7XHJcdFx0XHR9XHJcdFx0fVxyXHRcdGVsc2Uge1xyXHRcdFx0cmVsYXRpdmVMaWZlU3BhbiA9ICRzY29wZS50aW1ldmFsdWU7XHJcdFx0fVxyXHJcdFx0UG9zdHNTdmMuY3JlYXRlKFxyXHRcdHtcclx0XHRcdGJvZHkgICAgOiAgJHNjb3BlLmNvbnRlbnQsXHJcdFx0XHRsb2NhdGlvbjogIGxvY2F0aW9uSlNPTixcclx0XHRcdHBsYWNlICAgOiAgcGxhY2UsXHJcdFx0XHRndWlkICAgIDogICRzY29wZS5ndWlkLFxyXHRcdFx0Z3VpZHRndCA6ICAkc2NvcGUuZ3VpZHRndCxcclx0XHRcdGxpZmVzcGFuOiAgcmVsYXRpdmVMaWZlU3BhblxyXHRcdH0pXHJcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocG9zdCl7XHJcdFx0XHQvKiBtYW51YWxseSByZWxvYWQgbWFya2VycyBcclx0XHRcdHVzaW5nIG1hcHR5cGVpZCBzaW5jZSBpdHMgbW9zdCBsZWFzdCB1c2VkIGV2ZW50LCAtIGtpbmQgb2YgaGFja3kgd2F5IHRvIGRvIGl0XHJcdFx0XHQqL1xyXHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcigkc2NvcGUubWFwLCAnbWFwdHlwZWlkX2NoYW5nZWQnKTtcclxyXHRcdFx0JHNjb3BlLnBvc3RzLnVuc2hpZnQocG9zdCk7XHJcclx0XHRcdC8qIDEw7LSI67O064ukIOq4tCDqsr3smrDsnZgg6rKD66eMIOyEnOuyhOqwgCDqs4TsgrDsnYQg7ZWY6rOgIOyEnOuyhOqwgCDrs7TrgrTspJjshJwgZnJvbnRlbmTsl5DshJwg7KeA7Jqw64+E66GdIOq0gOumrO2VtOykmOyVvCDtlZzri6QuXHJcdFx0XHQg66as7Iqk7Yq47J24642wIO2YhOyerOuKlCDslYjrs7TsnbTqsowg7ZW065GUIOyDgSAqL1xyICAgICAgICAgICAgdmFyIG1heEluc3RhbnRMaWZlU3BhbiA9IDEwMDAwO1xyICAgICAgICAgICAgaWYgKHBvc3QubGlmZXNwYW4gPCBtYXhJbnN0YW50TGlmZVNwYW4pe1xyICAgICAgICAgICAgXHQvKiBmcm9udCBlbmQgc2lkZSBsaXN0IHBvc3QgcmVtb3ZlICovXHJcdFx0XHRcdHZhciBmcm9udEVuZFBvc3RSZW1vdmUgPSBmdW5jdGlvbigpeyBcclx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5wb3N0cy5sZW5ndGg7ICsraSl7XHJcdFx0XHRcdFx0XHRpZiAocG9zdC5faWQgPT0gJHNjb3BlLnBvc3RzW2ldLl9pZClcclx0XHRcdFx0XHRcdHtcclx0XHRcdFx0XHRcdFx0JHNjb3BlLnBvc3RzLnNwbGljZShpLCAxKTtcclx0XHRcdFx0XHRcdH1cclx0XHRcdFx0XHR9XHJcdFx0XHRcdH07XHJcdFx0XHRcdHNldFRpbWVvdXQoZnJvbnRFbmRQb3N0UmVtb3ZlLCBwb3N0LmxpZmVzcGFuKTtcciAgICAgICAgICAgIH1cclx0XHRcdFxyXHJcdFx0XHQvKiByZXNldCBpbnB1dCBmb3JtcyAqL1xyXHRcdFx0JHNjb3BlLmNvbnRlbnQgID0gbnVsbDtcclx0XHR9KVxyXHRcdC5lcnJvcihmdW5jdGlvbihkYXRhLCBzdGF0dXMpe1xyXHRcdFx0c3dhbChcIlBvc3QgZmFpbGVkXCIsIFwiUGxlYXNlIGNvbXBsZXRlIHRoZSBmcm9tIGNvcnJlY3RseVwiLCBcImVycm9yXCIpO1xyXHRcdH0pO1xyXHJcdH07XHJcclx0LyogYXMgc2VydmVyIHRlbGxzIHRoZXJlIHdhcyBuZXcgcG9zdCwgbGV0cyByZS1sb2FkIGxpc3QgZGF0YSAqL1xyXHQkc2NvcGUucmVxdWVzdEZldGNoID0gZnVuY3Rpb24oKSB7XHJcdFx0UG9zdHNTdmMuZmV0Y2goKVxyXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHBvc3RzKXtcclx0XHRcdCRzY29wZS5wb3N0cyA9IHBvc3RzO1xyXHRcdH0pO1xyXHR9O1xyXHJcdCRzY29wZS5yZXF1ZXN0RmV0Y2goKTtccn0pO1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdQb3N0c1N2YycsIGZ1bmN0aW9uKCRodHRwKXtcblx0dGhpcy5mZXRjaCA9IGZ1bmN0aW9uKCl7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9wb3N0cycpO1xuXHR9O1xuXG5cdHRoaXMuY3JlYXRlID0gZnVuY3Rpb24ocG9zdCl7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcG9zdHMnLCBwb3N0KTtcblx0fTtcblxuXHR0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKHBvc3Qpe1xuXHRcdC8vY29uc29sZS5sb2coXCJkZWxldGluZyBwb3N0aW5nXCIpO1xuXHRcdC8vY29uc29sZS5sb2coJ3Bvc3QuX2lkOicsIHBvc3QuX2lkKTtcblx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL3Bvc3RzJywgcG9zdCk7XG5cdH07XG59KTtcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1Nlc3Npb25TdmMnLCBmdW5jdGlvbigkaHR0cCl7XG5cdHRoaXMuZmV0Y2ggPSBmdW5jdGlvbigpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc2Vzc2lvbnMnKTtcblx0fTtcblxuXHR0aGlzLmVudGVyID0gZnVuY3Rpb24oc2Vzc2lvbil7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLCBzZXNzaW9uKTtcblx0fTtcblxuXHR0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKGd1aWQpe1xuXHRcdC8vY29uc29sZS5sb2coXCJkZWxldGluZyBzZXNzaW9uXCIpO1xuXHRcdC8vY29uc29sZS5sb2coJ3Nlc3Npb24uZ3VpZDonLCBndWlkKTtcblx0XHR2YXIgc2Vzc2lvbiA9IHtndWlkOiBndWlkfTtcblx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL3Nlc3Npb25zJywgc2Vzc2lvbik7XG5cdH07XG5cblx0dGhpcy51cGRhdGVXYXRjaExvY2F0aW9uID0gZnVuY3Rpb24oY3VycmVudF9tYXBfbncsIGN1cnJlbnRfbWFwX3NlLCBjdXJyZW50X21hcF9jZW50ZXIsIGd1aWQpe1xuXHRcdHZhciB3YXRjaGxvYyA9IHtcbiAgICAgICAgICAgIG53X2xhdCAgICA6IGN1cnJlbnRfbWFwX253LmxhdCxcbiAgICAgICAgICAgIG53X2xvbiAgICA6IGN1cnJlbnRfbWFwX253LmxvbixcbiAgICAgICAgICAgIHNlX2xhdCAgICA6IGN1cnJlbnRfbWFwX3NlLmxhdCxcbiAgICAgICAgICAgIHNlX2xvblx0ICA6IGN1cnJlbnRfbWFwX3NlLmxvbixcbiAgICAgICAgICAgIGNlbnRlcl9sYXQ6IGN1cnJlbnRfbWFwX2NlbnRlci5sYXQsXG4gICAgICAgICAgICBjZW50ZXJfbG9uOiBjdXJyZW50X21hcF9jZW50ZXIubG9uXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgd2F0Y2hsb2NKU09OID0gSlNPTi5zdHJpbmdpZnkod2F0Y2hsb2MpO1xuXG4gICAgICAgIHZhciB1cGRhdGVkc2Vzc2lvbiA9IHtcbiAgICAgICAgICAgIHdhdGNobG9jOiB3YXRjaGxvY0pTT04sXG4gICAgICAgICAgICBndWlkOiBndWlkXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gdXBkYXRlIHdhdGNobG9jIHdoZW4gY2VudGVyIGNoYW5nZWQuXG4gICAgICAgIGNvbnNvbGUubG9nKFwidXBkYXRpbmcgd2F0Y2ggbG9jYXRpb25cIik7XG5cdFx0Ly9jb25zb2xlLmxvZyhcInVwZGF0ZWRzZXNzaW9uOlwiLCB1cGRhdGVkc2Vzc2lvbik7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMvdXBkYXRlJywgdXBkYXRlZHNlc3Npb24pO1xuXHR9O1xufSk7XG5cbiIsIiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==