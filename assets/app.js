angular.module("app",["ngRoute","ngAnimate","ui.slider"]),angular.module("app").controller("ApplicationCtrl",["SessionSvc","UtilSvc","ConfigSvc","$rootScope","$scope","$window","$http","$timeout",function(t,e,o,n,a,i,l,s){"undefined"!=window.localStorage.guid&&"null"!=window.localStorage.guid&&window.localStorage.guid||(window.localStorage.guid=e.getGuid()),a.guid=window.localStorage.guid,"undefined"!=window.localStorage.guidtgt&&"null"!=window.localStorage.guidtgt&&window.localStorage.guidtgt||(window.localStorage.guidtgt="0"),a.guidtgt=window.localStorage.guidtgt,a.pageId={post:0},a.navCollapsed=!0,a.timevalue=o.maxInstantLifeSpan,a.userLocation={lat:0,lon:0},a.toggleSearchLocation=!1,a.toggleTimeSlider=!1,s(function(){document.getElementById("map-posting").onkeypress=function(t){"13"==t.which&&$("form#map-posting-form").submit()},document.getElementById("map-posting").onfocus=function(t){console.log("on focus"),a.toggleTimeSlider=!0},document.getElementById("map-posting").onblur=function(t){console.log("on blur"),a.toggleTimeSlider=!1},$(".nav-burger").click(function(){$(".nav-burger").toggleClass("active"),a.toggleSearchLocation=!a.toggleSearchLocation,a.$apply()})});var r,g=document.location.hostname;r=g==o.local?o.web_socket+o.local+":"+o.port:g==o.local_ip?o.web_socket+o.local_ip+":"+o.port:o.web_socket_secure+o.deploy_dns;var c=function(){connection=new WebSocket(r),connection.onopen=function(){function e(e){var o=e.coords,n=new google.maps.LatLng(o.latitude,o.longitude);a.userLocation={lat:o.latitude,lon:o.longitude};var i={lat:n.lat(),lon:n.lng()},l=JSON.stringify(i),s=a.map.getBounds(),r=s.getNorthEast(),g=s.getSouthWest(),c={lat:r.lat(),lon:g.lng()},u={lat:g.lat(),lon:r.lng()},p={lat:window.localStorage.latitude,lon:window.localStorage.longitude},d={nw_lat:c.lat,nw_lon:c.lon,se_lat:u.lat,se_lon:u.lon,center_lat:p.lat,center_lon:p.lon},m=JSON.stringify(d),f={guidtgt:a.guidtgt,guid:a.guid,location:l,watchloc:m};t.enter(f)}function o(t){swal("","Need to turn on location service for proper use."),console.warn("ERROR("+t.code+"): "+t.message)}connection.send(a.guid),navigator.geolocation.getCurrentPosition(e,o),console.log("WebSocket connected")},connection.onclose=function(){console.log("WebSocket closed. Reconecting..."),s(c,2e3)},connection.onmessage=function(t){var e=JSON.parse(t.data);console.log("ws:"+e.type),n.$broadcast("ws:"+e.type,e.data)}};c(),a.$on("ws:new_post",function(t,e){a.map.updateAndDrawPosts(),e.guid==a.guid&&a.map.drawResponses(e)}),a.$on("ws:new_session",function(t,e){var o=angular.fromJson(e.location);a.map.drawCurrLocationMarker(o)}),a.$on("ws:remove_post",function(t,e){a.map.unDrawPost(e)}),a.$on("ws:update_guidtgt",function(t,e){a.map.updateAndDrawPosts()}),a.isMobile=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1},a.moveToCurrentLocation=function(){function t(t){if(a.currentPageId==a.pageId.post){var e=t.coords;window.localStorage.latitude=e.latitude,window.localStorage.longitude=e.longitude;var o={lat:e.latitude,lon:e.longitude};a.map.drawCurrLocationMarker(o),a.map.drawXMarker(o);var n=new google.maps.LatLng(o.lat,o.lon);a.map.panTo(n),a.map.setZoom(15)}}function e(t){swal("","Need to turn on location service for proper use."),console.warn("ERROR("+t.code+"): "+t.message)}navigator.geolocation.getCurrentPosition(t,e),swal({title:"",text:"Moving to current location..",timer:1500,showConfirmButton:!1})},a.moveToPostLocation=function(){var t=0;if(a.isMobile()){var e=a.map.getBounds(),o=e.getNorthEast(),n=e.getSouthWest();current_map_nw=new google.maps.LatLng(o.lat(),n.lng()),current_map_se=new google.maps.LatLng(n.lat(),o.lng());var i=.5*Math.abs(a.postLocation.lat-current_map_nw.lat()),l=.5*Math.abs(a.postLocation.lat-current_map_se.lat());t=i>l?l:i}var s=new google.maps.LatLng(a.postLocation.lat+t,a.postLocation.lon);a.map.panTo(s)},a.collapse=function(){a.navCollapsed=!0},a.$on("set:map",function(t,e){a.map=e}),a.$on("set:guidtgt",function(t,e){a.guidtgt=e,window.localStorage.guidtgt=e}),a.$on("set:pagechange",function(t,e){a.currentPageId=e}),a.$on("set:loc",function(t,e){var o=e.lat(),n=e.lng();a.postLocation={lat:o,lon:n}}),a.$on("set:place",function(t,e){a.$apply(function(){a.postplace=e})})}]),angular.module("app").constant("ConfigSvc",{web_socket:"ws://",web_socket_secure:"wss://",local:"localhost",local_ip:"192.168.0.4",deploy_dns:"cloudtalk.herokuapp.com",port:"5000",maxInstantLifeSpan:5e3}),angular.module("app").config(["$routeProvider",function(t){t.when("/",{controller:"PostsCtrl",templateUrl:"/templates/posts.html"}).otherwise({redirectTo:"/"})}]),angular.module("app").service("UtilSvc",function(){var t=this;t.deg2rad=function(t){return t*(Math.PI/180)},t.getDistanceFromLatLonInKm=function(e,o,n,a){var i=6371,l=t.deg2rad(n-e),s=t.deg2rad(a-o),r=Math.sin(l/2)*Math.sin(l/2)+Math.cos(t.deg2rad(e))*Math.cos(t.deg2rad(n))*Math.sin(s/2)*Math.sin(s/2),g=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),c=i*g;return c},t.mapRange=function(t,e,o,n,a){return n+(a-n)*(t-e)/(o-e)},t.getGuid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}),angular.module("app").run(["$rootScope","$timeout","SessionSvc",function(t,e,o){}]),angular.module("app").directive("appMap",["PostsSvc","UtilSvc","ConfigSvc","SessionSvc","$compile","$timeout",function(t,e,o,n,a,i){var l=function(e,o,l){function s(){window.localStorage.latitude=A.getCenter().lat(),window.localStorage.longitude=A.getCenter().lng()}function r(){var t=A.getBounds(),e=t.getNorthEast(),o=t.getSouthWest();x=new google.maps.LatLng(e.lat(),o.lng()),R=new google.maps.LatLng(o.lat(),e.lng())}function g(){var t=A.getBounds(),o=t.getNorthEast(),a=t.getSouthWest();x={lat:o.lat(),lon:a.lng()},R={lat:a.lat(),lon:o.lng()};var i;i=e.postLocation.lat<x.lat&&e.postLocation.lat>R.lat&&e.postLocation.lon<R.lon&&e.postLocation.lon>x.lon?{lat:e.postLocation.lat,lon:e.postLocation.lon}:{lat:A.getCenter().lat(),lon:A.getCenter().lng()},n.updateWatchLocation(x,R,i,e.guid)}function c(t){n.fetch().success(function(o){for(var n=0;n<o.length;n++){var a=o[n];if(a.guid!=e.guid){var l=angular.fromJson(a.watchloc),s=angular.fromJson(t.location);if(r(),l.center_lat<x.lat()&&l.center_lat>R.lat()&&l.center_lon<R.lng()&&l.center_lon>x.lng()&&s.lat<l.nw_lat&&s.lat>l.se_lat&&s.lon<l.se_lon&&s.lon>l.nw_lon){var g=new google.maps.LatLng(l.center_lat,l.center_lon),c={position:g,map:A,title:"UserPin",icon:j,optimized:!1},u=new google.maps.Marker(c),p=1800;i(function(t){return function(){t.setMap(null)}}(u),p)}}}})}function u(){U=G!=e.guidtgt,G=e.guidtgt,t.fetch().success(function(o){for(var n=0;n<o.length;n++){var i=o[n],l=angular.fromJson(i.location),s=new google.maps.LatLng(l.lat,l.lon);if(r(),s.lat()<x.lat()&&s.lat()>R.lat()&&s.lng()<R.lng()&&s.lng()>x.lng()){for(var g,c=0;g=J[c];c++){var u=i._id==g.post._id;if(u){if(U){d(i._id);break}if(g.post.guidtgt==i.guidtgt){i=null;break}d(i._id);break}}if(null!=i){var p={position:s,map:A,title:"Bubble",icon:X},g=new google.maps.Marker(p);J.push({marker:g,post:i});var m=v(i.guid,i.guidtgt),f=i.islocal,w=e,h=w.$new(!0),y=function(o,n,i,l,s){return function(){var r={pixelOffset:new google.maps.Size(-39.5,16),disableAutoPan:!0},g=new google.maps.InfoWindow(r),c=new Date,u=c.getTime(),p=i.lifeend-u>=0?i.lifeend-u:0,d=(p/i.lifespan).toFixed(2);n.msg=i.body,n.postlife=p,n.postguid=i.guid,n.postguidtgt=i.guidtgt,n.postcouplestatus=l,n.postlifepercentage=d,n.postlocalstatus=s;var m="<div map-msg></div>",f=a(m)(n);g.setContent(f[0]),google.maps.event.addListener(g,"closeclick",function(){i.guid==e.guid&&swal({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e)t.remove(i),swal("Deleted!","Your imaginary file has been deleted.","success");else{var a=new Date,l=a.getTime(),s=i.lifeend-l>=0?i.lifeend-l:0,r=(s/i.lifespan).toFixed(2);r>0&&(n.postlifepercentage=r,g.open(A,o))}})}),g.open(A,o)}}(g,h,i,m,f);y()}}}})}function p(t){var e=new google.maps.LatLng(t.lat,t.lon);if(r(),e.lat()<x.lat()&&e.lat()>R.lat()&&e.lng()<R.lng()&&e.lng()>x.lng()){var o={position:e,map:A,animation:google.maps.Animation.DROP,title:"UserPin",icon:Y},n=new google.maps.Marker(o);i(function(t){return function(){t.setMap(null)}}(n),2e3)}}function d(t){for(var e,o=0;e=J[o];o++)if(t==e.post._id){e.marker.setMap(null),J.splice(o,1);break}}function m(t){var e=new google.maps.LatLng(t.lat,t.lon);f(e),w(e),g()}function f(t){for(var e,o=0;e=F[o];o++)e.setMap(null);F=[];var e=new google.maps.Marker({position:t,map:A,icon:q});F.push(e)}function w(t){e.$emit("set:loc",t);var o=new google.maps.Geocoder;o.geocode({latLng:t},function(t,o){try{e.$emit("set:place",t[1].formatted_address)}catch(n){console.log(n),swal("","Location does not exists"),e.$emit("set:place","Location does not exists")}})}function v(t,o){var n=e.guidtgt==t,a=e.guid==o,i=e.guid==t,l="0"!=e.guidtgt;return i&&l?2:n&&a?4:n&&!a?1:!n&&a?2:0}function h(){var t=document.getElementById("map-search-toggle");A.controls[google.maps.ControlPosition.TOP_LEFT].push(t)}function y(){var t=document.getElementById("map-btn-curr");A.controls[google.maps.ControlPosition.TOP_RIGHT].push(t)}function _(){var t=document.getElementById("map-posting");A.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(t)}function S(){var t=document.getElementById("map-btn-submit");A.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(t)}function L(){var t=document.getElementById("map-time-slider");A.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(t)}function b(){var t=document.getElementById("pac-input");A.controls[google.maps.ControlPosition.TOP_LEFT].push(t);var e=new google.maps.places.SearchBox(t);google.maps.event.addListener(e,"places_changed",function(){var t=e.getPlaces();if(0!=t.length){var o=t[0],n={lat:o.geometry.location.lat(),lon:o.geometry.location.lng()};m(n),window.localStorage.latitude=o.geometry.location.latitude,window.localStorage.longitude=o.geometry.location.longitude,A.panTo(o.geometry.location),A.setZoom(16)}})}function k(){google.maps.event.addListener(O,"click",function(t){var e={lat:t.latLng.lat(),lon:t.latLng.lng()};m(e)})}function T(){google.maps.event.addListener(O,"center_changed",function(){s()})}function P(){google.maps.event.addListener(O,"bounds_changed",function(){r()})}function M(){google.maps.event.addListener(O,"dragend",function(){u(),g()})}function $(){google.maps.event.addListener(O,"resize",function(){u(),g()})}function C(){google.maps.event.addListener(O,"zoom_changed",function(){u(),g()})}function B(){N=new google.maps.LatLng(34.05,-118.24),isNaN(window.localStorage.latitude)||isNaN(window.localStorage.longitude)||(N=new google.maps.LatLng(window.localStorage.latitude,window.localStorage.longitude)),w(N),D={center:N,zoom:15,scrollwheel:!0,streetViewControl:!1,mapTypeControl:!1,panControl:!1,zoomControl:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,W]},mapTypeId:W}}function I(){function t(t){}function e(t){google.maps.event.trigger(this,"drawXMarker",t)}function n(t){google.maps.event.trigger(this,"drawCurrLocationMarker",t)}function a(){google.maps.event.trigger(this,"updateAndDrawPosts")}function i(t){google.maps.event.trigger(this,"drawResponses",t)}function l(t){google.maps.event.trigger(this,"unDrawPost",t)}O=new google.maps.Map(o[0],D),t.prototype=O,t.prototype.drawXMarker=e,t.prototype.drawCurrLocationMarker=n,t.prototype.updateAndDrawPosts=a,t.prototype.drawResponses=i,t.prototype.unDrawPost=l,A=new t,google.maps.event.addListener(A,"drawXMarker",function(t){m(t)}),google.maps.event.addListener(A,"drawCurrLocationMarker",function(t){p(t)}),google.maps.event.addListener(A,"updateAndDrawPosts",function(){u()}),google.maps.event.addListener(A,"drawResponses",function(t){c(t)}),google.maps.event.addListener(A,"unDrawPost",function(t){d(t)})}function z(){var t=[{featureType:"water",elementType:"all",stylers:[{hue:"#7fc8ed"},{saturation:55},{lightness:-6},{visibility:"on"}]},{featureType:"water",elementType:"labels",stylers:[{hue:"#7fc8ed"},{saturation:55},{lightness:-6},{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{hue:"#83cead"},{saturation:1},{lightness:-15},{visibility:"on"}]},{featureType:"landscape",elementType:"geometry",stylers:[{hue:"#f3f4f4"},{saturation:-84},{lightness:59},{visibility:"on"}]},{featureType:"landscape",elementType:"labels",stylers:[{hue:"#ffffff"},{saturation:-100},{lightness:100},{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{hue:"#ffffff"},{saturation:-100},{lightness:100},{visibility:"on"}]},{featureType:"road",elementType:"labels",stylers:[{hue:"#bbbbbb"},{saturation:-100},{lightness:26},{visibility:"on"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{hue:"#ffcc00"},{saturation:100},{lightness:-35},{visibility:"simplified"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{hue:"#ffcc00"},{saturation:100},{lightness:-22},{visibility:"on"}]},{featureType:"poi.school",elementType:"all",stylers:[{hue:"#d7e4e4"},{saturation:-60},{lightness:23},{visibility:"on"}]}],e={name:"Custom Style"},o=new google.maps.StyledMapType(t,e);A.mapTypes.set(W,o)}function E(){void 0===A&&(B(),I(),z()),e.$emit("set:map",A),h(),b(),y(),_(),S(),L(),k(),T(),M(),$(),C(),P(),i(function(){s(),r(),g(),u()},800)}var A,O,x,R,D,N,U,W="custom_style",F=[],J=[],G="0",X={url:"Default_Marker.png",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(1,1)},q={url:"X_Marker.png",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},Y={url:"Current_Location_Marker.png",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(20,33)},j={url:"Blink.gif",size:new google.maps.Size(100,100),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,10),scaledSize:new google.maps.Size(17,17)};E()};return{restrict:"A",template:'<div id="map-canvas"></div>',replace:!0,link:l}}]),angular.module("app").directive("mapMsg",["$timeout","SessionSvc","PostsSvc",function(t,e,o){var n=function(n,a,i){function l(){var t=n.postguid,i=n.$parent.guid,l=n.$parent.guidtgt;a.children().on("click",function(){var a=t;if(t==i){if("0"==n.$parent.guidtgt)return;a="0"}t==l&&(a="0"),n.$emit("set:guidtgt",a),e.updateCoupling(i,a).then(function(t){});var s={guid:i,guidtgt:a};o.updateGuidtgt(s).then(function(t){})})}function s(){{var t=n.postlife+"ms",e=a.children().children(".postlifebar");e.css("-webkit-animation-duration",t)}if(n.postlifepercentage>.95){e.css("-webkit-animation-name","postlifeanim_a"),e.css("animation-name","postlifeanim_a")}else if(n.postlifepercentage<=.95&&n.postlifepercentage>.9){e.css("-webkit-animation-name","postlifeanim_b"),e.css("animation-name","postlifeanim_b")}else if(n.postlifepercentage<=.9&&n.postlifepercentage>.85){e.css("-webkit-animation-name","postlifeanim_c"),e.css("animation-name","postlifeanim_c")}else if(n.postlifepercentage<=.85&&n.postlifepercentage>.75){e.css("-webkit-animation-name","postlifeanim_d"),e.css("animation-name","postlifeanim_d")}else if(n.postlifepercentage<=.75&&n.postlifepercentage>.6){e.css("-webkit-animation-name","postlifeanim_e"),e.css("animation-name","postlifeanim_e")}else if(n.postlifepercentage<=.6&&n.postlifepercentage>.5){e.css("-webkit-animation-name","postlifeanim_f"),e.css("animation-name","postlifeanim_f")}else if(n.postlifepercentage<=.5&&n.postlifepercentage>.3){e.css("-webkit-animation-name","postlifeanim_g"),e.css("animation-name","postlifeanim_g")}else if(n.postlifepercentage<=.3&&n.postlifepercentage>.2){e.css("-webkit-animation-name","postlifeanim_h"),e.css("animation-name","postlifeanim_h")}else if(n.postlifepercentage<=.2&&n.postlifepercentage>.1){e.css("-webkit-animation-name","postlifeanim_i"),e.css("animation-name","postlifeanim_i")}else{e.css("-webkit-animation-name","postlifeanim_j"),e.css("animation-name","postlifeanim_j")}}function r(){var t=$(".gm-style-iw"),e=t.prev();e.children(":nth-child(2)").css({display:"none"}),e.children(":nth-child(4)").css({display:"none"}),e.children(":nth-child(3)").find("div").children().css({"box-shadow":"0 1px 6px rgba(178, 178, 178, 0.6)","z-index":"1",border:"0px"})}function g(){var t=$(".gm-style-iw"),e=t.next();e.css({opacity:"0.8",right:"20px",top:"20px"})}n.get_coupling=function(t){return 4==t?"coupling coupling-couple":1==t?"coupling coupling-ilikeyou":2==t?"coupling coupling-youlikei":"coupling coupling-none"},angular.element(document).ready(function(){t(l,100),t(s,10),t(r,10),t(g,10)})};return{restrict:"A",templateUrl:"./templates/window.html",link:n}}]),angular.module("app").controller("PostsCtrl",["$rootScope","$scope","ConfigSvc","PostsSvc","UtilSvc","$window","$document","$timeout",function(t,e,o,n,a,i,l,s){e.$emit("set:pagechange",e.pageId.post),e.posts=[],e.$on("ws:new_post",function(t,o){e.requestFetch()}),e.addPost=function(){if(!e.content)return void console.log("User attempted to post with 0 words.");var t,i=e.postplace,l=e.postLocation,s=a.getDistanceFromLatLonInKm(l.lat,l.lon,e.userLocation.lat,e.userLocation.lon);console.log("post location from user location : ",s),3>s?(console.log("postLocationFromUserLocation < 3",3>s),t=!0):(console.log("postLocationFromUserLocation < 3",3>s),t=!1);var r,g=JSON.stringify(l);if(e.timevalue<=o.maxInstantLifeSpan){var c=e.content.length;r=5>c?4e3:c*a.mapRange(c,5,20,700,400)}else r=e.timevalue;n.create({body:e.content,location:g,place:i,guid:e.guid,guidtgt:e.guidtgt,lifespan:r,islocal:t}).success(function(t){e.content=null}).error(function(t,e){swal("Post failed","Please complete the from correctly","error")})},e.requestFetch=function(){n.fetch().success(function(t){e.posts=t})},e.updateGuidtgt=function(t,e){var o={guid:t,guidtgt:e};console.log("udpate to post guidtgt:",o),n.updateGuidtgt(o)}}]),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(e){return t.get("/api/posts",e)},this.create=function(e){return t.post("/api/posts",e)},this.remove=function(e){return t.post("/api/posts/posts_delete",e)},this.updateGuidtgt=function(e){return t.post("/api/posts/update_guidtgt",e)}}]),angular.module("app").service("SessionSvc",["$http",function(t){this.fetch=function(){return t.get("/api/sessions")},this.enter=function(e){return t.post("/api/sessions",e)},this.remove=function(e){var o={guid:e};return t.put("/api/sessions",o)},this.updateWatchLocation=function(e,o,n,a){var i={nw_lat:e.lat,nw_lon:e.lon,se_lat:o.lat,se_lon:o.lon,center_lat:n.lat,center_lon:n.lon},l=JSON.stringify(i),s={watchloc:l,guid:a};return console.log("updating watch location"),t.post("/api/sessions/update_session",s)},this.updateCoupling=function(e,o){var n={guid:e,guidtgt:o};return console.log("updating coupling"),t.post("/api/sessions/update_coupling",n)}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJjb25maWcuc3ZjLmpzIiwicm91dGVzLmpzIiwidXRpbC5zdmMuanMiLCJnZW5lcmFsL21haW4uanMiLCJtYXBzL21hcC5kaXJlY3RpdmUuanMiLCJtYXBzL21zZy5kaXJlY3RpdmUuanMiLCJwb3N0cy9wb3N0cy5jdHJsLmpzIiwicG9zdHMvcG9zdHMuc3ZjLmpzIiwic2Vzc2lvbnMvc2Vzc2lvbnMuc3ZjLmpzIiwic29ja2V0cy93ZWJzb2NrZXRzLmpzIiwiYXBwLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiU2Vzc2lvblN2YyIsIlV0aWxTdmMiLCJDb25maWdTdmMiLCIkcm9vdFNjb3BlIiwiJHNjb3BlIiwiJHdpbmRvdyIsIiRodHRwIiwiJHRpbWVvdXQiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJndWlkIiwiZ2V0R3VpZCIsImd1aWR0Z3QiLCJwYWdlSWQiLCJwb3N0IiwibmF2Q29sbGFwc2VkIiwidGltZXZhbHVlIiwibWF4SW5zdGFudExpZmVTcGFuIiwidXNlckxvY2F0aW9uIiwibGF0IiwibG9uIiwidG9nZ2xlU2VhcmNoTG9jYXRpb24iLCJ0b2dnbGVUaW1lU2xpZGVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm9ua2V5cHJlc3MiLCJldmVudCIsIndoaWNoIiwiJCIsInN1Ym1pdCIsIm9uZm9jdXMiLCJjb25zb2xlIiwibG9nIiwib25ibHVyIiwiY2xpY2siLCJ0b2dnbGVDbGFzcyIsIiRhcHBseSIsInVybCIsImhvc3RuYW1lIiwibG9jYXRpb24iLCJsb2NhbCIsIndlYl9zb2NrZXQiLCJwb3J0IiwibG9jYWxfaXAiLCJ3ZWJfc29ja2V0X3NlY3VyZSIsImRlcGxveV9kbnMiLCJjb25uZWN0IiwiY29ubmVjdGlvbiIsIldlYlNvY2tldCIsIm9ub3BlbiIsImdldEN1cnJMb2NTdWNjZXNzIiwicG9zIiwiY3JkIiwiY29vcmRzIiwiZ29vZ2xlTG9jIiwiZ29vZ2xlIiwibWFwcyIsIkxhdExuZyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwibG5nIiwibG9jYXRpb25KU09OIiwiSlNPTiIsInN0cmluZ2lmeSIsImJvdW5kcyIsIm1hcCIsImdldEJvdW5kcyIsIm5lIiwiZ2V0Tm9ydGhFYXN0Iiwic3ciLCJnZXRTb3V0aFdlc3QiLCJjdXJyZW50X21hcF9udyIsImN1cnJlbnRfbWFwX3NlIiwiY3VycmVudF9tYXBfY2VudGVyIiwid2F0Y2hsb2MiLCJud19sYXQiLCJud19sb24iLCJzZV9sYXQiLCJzZV9sb24iLCJjZW50ZXJfbGF0IiwiY2VudGVyX2xvbiIsIndhdGNobG9jSlNPTiIsInNlc3Npb24iLCJlbnRlciIsImdldEN1cnJMb2NFcnJvciIsImVyciIsInN3YWwiLCJ3YXJuIiwiY29kZSIsIm1lc3NhZ2UiLCJzZW5kIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJnZXRDdXJyZW50UG9zaXRpb24iLCJvbmNsb3NlIiwib25tZXNzYWdlIiwiZSIsInBheWxvYWQiLCJwYXJzZSIsImRhdGEiLCJ0eXBlIiwiJGJyb2FkY2FzdCIsIiRvbiIsIl8iLCJ1cGRhdGVBbmREcmF3UG9zdHMiLCJkcmF3UmVzcG9uc2VzIiwiZnJvbUpzb24iLCJkcmF3Q3VyckxvY2F0aW9uTWFya2VyIiwicG9zdGlkIiwidW5EcmF3UG9zdCIsInVwZGF0ZWRTZXNzaW9uIiwiaXNNb2JpbGUiLCJ1c2VyQWdlbnQiLCJtYXRjaCIsIm1vdmVUb0N1cnJlbnRMb2NhdGlvbiIsImN1cnJlbnRQYWdlSWQiLCJkcmF3WE1hcmtlciIsInBhblRvIiwic2V0Wm9vbSIsInRpdGxlIiwidGV4dCIsInRpbWVyIiwic2hvd0NvbmZpcm1CdXR0b24iLCJtb3ZlVG9Qb3N0TG9jYXRpb24iLCJsYXREZWx0YSIsImxhdERlbHRhX2NlbnRlcjJub3J0aCIsIk1hdGgiLCJhYnMiLCJwb3N0TG9jYXRpb24iLCJsYXREZWx0YV9jZW50ZXIyc291dGgiLCJjb2xsYXBzZSIsInBsYWNlIiwicG9zdHBsYWNlIiwiY29uc3RhbnQiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJzZXJ2aWNlIiwic3ZjIiwidGhpcyIsImRlZzJyYWQiLCJkZWciLCJQSSIsImdldERpc3RhbmNlRnJvbUxhdExvbkluS20iLCJsYXQxIiwibG9uMSIsImxhdDIiLCJsb24yIiwiUiIsImRMYXQiLCJkTG9uIiwiYSIsInNpbiIsImNvcyIsImMiLCJhdGFuMiIsInNxcnQiLCJkIiwibWFwUmFuZ2UiLCJ2YWx1ZSIsImxvdzEiLCJoaWdoMSIsImxvdzIiLCJoaWdoMiIsInM0IiwiZmxvb3IiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsInJ1biIsImRpcmVjdGl2ZSIsIlBvc3RzU3ZjIiwiJGNvbXBpbGUiLCJsaW5rIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJ1cGRhdGVEZWZhdWx0TG9jYXRpb24iLCJnZXRDZW50ZXIiLCJ1cGRhdGVCb3VuZHMiLCJ1cGRhdGVXYXRjaExvY2F0aW9uIiwiZmV0Y2giLCJzdWNjZXNzIiwic2Vzc2lvbnMiLCJpIiwibGVuZ3RoIiwid2F0Y2hfbG9jYXRpb24iLCJwb3N0X2xvY2F0aW9uIiwibWFya2VyT3B0aW9ucyIsInBvc2l0aW9uIiwiaWNvbiIsImltYWdlTGlzdGVuZXIiLCJvcHRpbWl6ZWQiLCJtYXJrZXIiLCJNYXJrZXIiLCJ1c2VyX2xvY2F0aW9uX21hcmtlcl9saWZlc3BhbiIsIm9sZF9tYXJrZXIiLCJzZXRNYXAiLCJpc0d1aWR0Z3RDaGFuZ2VkIiwicHJldkd1aWR0Z3QiLCJwb3N0cyIsImoiLCJtYXJrZXJzT25NYXAiLCJpc0FscmVhZHlEcmF3biIsIl9pZCIsImltYWdlUG9zdCIsInB1c2giLCJjb3VwbGluZ19zdGF0dXMiLCJjYWxjdWxhdGVDb3VwbGluZyIsImxvY2FsX3N0YXR1cyIsImlzbG9jYWwiLCJwYXJlbnQiLCJjaGlsZCIsIiRuZXciLCJvcGVuSW5mb1dpbmRvdyIsImNoaWxkX3Njb3BlIiwiaW5mb1dpbmRvd09wdGlvbnMiLCJwaXhlbE9mZnNldCIsIlNpemUiLCJkaXNhYmxlQXV0b1BhbiIsImluZm9XaW5kb3ciLCJJbmZvV2luZG93IiwiY3VycmVudERhdGUiLCJEYXRlIiwiY3VycmVudFRpbWVNaWxsaSIsImdldFRpbWUiLCJwb3N0bGlmZSIsImxpZmVlbmQiLCJsaWZlcGVyY2VudGFnZSIsImxpZmVzcGFuIiwidG9GaXhlZCIsIm1zZyIsImJvZHkiLCJwb3N0Z3VpZCIsInBvc3RndWlkdGd0IiwicG9zdGNvdXBsZXN0YXR1cyIsInBvc3RsaWZlcGVyY2VudGFnZSIsInBvc3Rsb2NhbHN0YXR1cyIsImNvbnRlbnQiLCJjb21waWxlZCIsInNldENvbnRlbnQiLCJhZGRMaXN0ZW5lciIsInNob3dDYW5jZWxCdXR0b24iLCJjb25maXJtQnV0dG9uQ29sb3IiLCJjb25maXJtQnV0dG9uVGV4dCIsImNsb3NlT25Db25maXJtIiwiaXNDb25maXJtIiwicmVtb3ZlIiwib3BlbiIsImRyYXdEcm9wRG93biIsImFuaW1hdGlvbiIsIkFuaW1hdGlvbiIsIkRST1AiLCJpbWFnZVVzZXJMb2dpbiIsImsiLCJzcGxpY2UiLCJkcmF3QW5kU2V0UGxhY2UiLCJkcmF3SGVscGVyTWFya2VyIiwic2V0UGxhY2UiLCJoZWxwZXJNYXJrZXJzIiwiaW1hZ2VUYXJnZXQiLCIkZW1pdCIsImdlb2NvZGVyIiwiR2VvY29kZXIiLCJnZW9jb2RlIiwibGF0TG5nIiwicmVzdWx0cyIsInN0YXR1cyIsImZvcm1hdHRlZF9hZGRyZXNzIiwicG9zdF9ndWlkIiwicG9zdF9ndWlkdGd0IiwiaXNQb2ludGluZ1lvdSIsImlzUG9pbnRpbmdNZSIsImlzTXlQb3N0IiwiaXNQb2ludGluZ1NvbWVvbmUiLCJzZXRVSVNlYXJjaExvY2F0aW9uVG9nZ2xlIiwibWFwU2VhcmNoVG9nZ2xlIiwiY29udHJvbHMiLCJDb250cm9sUG9zaXRpb24iLCJUT1BfTEVGVCIsInNldFVJTW92ZVRvQ3VyckxvY0J0biIsImN1cnJMb2NCdG4iLCJUT1BfUklHSFQiLCJzZXRVSVBvc3RGb3JtIiwicG9zdEZvcm0iLCJCT1RUT01fQ0VOVEVSIiwic2V0VUlQb3N0QnRuIiwicG9zdEJ0biIsInNldFVJVGltZVNsaWRlciIsInRpbWVTbGlkZXIiLCJzZXRVSVNlYXJjaEJveCIsImlucHV0Iiwic2VhcmNoQm94IiwicGxhY2VzIiwiU2VhcmNoQm94IiwiZ2V0UGxhY2VzIiwiZ2VvbWV0cnkiLCJzZXRFdmVudENsaWNrIiwibWFwX29yaWdpbiIsInNldEV2ZW50Q2VudGVyQ2hhbmdlZCIsInNldEV2ZW50Qm91bmRzQ2hhbmdlZCIsInNldEV2ZW50RHJhZ0VuZCIsInNldEV2ZW50UmVzaXplIiwic2V0RXZlbnRab29tQ2hhbmdlZCIsImluaXRpYWxNYXBEYXRhIiwiaW5pdGlhbE1hcENlbnRlciIsImlzTmFOIiwibWFwT3B0aW9ucyIsImNlbnRlciIsInpvb20iLCJzY3JvbGx3aGVlbCIsInN0cmVldFZpZXdDb250cm9sIiwibWFwVHlwZUNvbnRyb2wiLCJwYW5Db250cm9sIiwiem9vbUNvbnRyb2wiLCJtYXBUeXBlQ29udHJvbE9wdGlvbnMiLCJtYXBUeXBlSWRzIiwiTWFwVHlwZUlkIiwiUk9BRE1BUCIsIkNMT1VEX01BUF9JRCIsIm1hcFR5cGVJZCIsInNldE1hbnVhbEV2ZW50cyIsIkNsb3VkTWFwIiwib3B0aW9ucyIsImhhbmRsZURyYXdYTWFya2VyIiwidHJpZ2dlciIsImhhbmRsZURyYXdDdXJyTG9jYXRpb25NYXJrZXIiLCJoYW5kbGVVcGRhdGVBbmREcmF3UG9zdHMiLCJoYW5kbGVEcmF3UmVzcG9uc2VzIiwiaGFuZGxlVW5EcmF3UG9zdCIsIk1hcCIsInByb3RvdHlwZSIsInNldFN0eWxlRm9yTWFwIiwiZmVhdHVyZU9wdHMiLCJmZWF0dXJlVHlwZSIsImVsZW1lbnRUeXBlIiwic3R5bGVycyIsImh1ZSIsInNhdHVyYXRpb24iLCJsaWdodG5lc3MiLCJ2aXNpYmlsaXR5Iiwic3R5bGVkTWFwT3B0aW9ucyIsIm5hbWUiLCJjdXN0b21NYXBUeXBlIiwiU3R5bGVkTWFwVHlwZSIsIm1hcFR5cGVzIiwic2V0IiwiaW5pdE1hcCIsInNpemUiLCJvcmlnaW4iLCJQb2ludCIsImFuY2hvciIsInNjYWxlZFNpemUiLCJyZXN0cmljdCIsInRlbXBsYXRlIiwicmVwbGFjZSIsInVwZGF0ZUd1aWRUYXJnZXQiLCJteWd1aWQiLCIkcGFyZW50IiwibXlndWlkdGd0IiwiY2hpbGRyZW4iLCJvbiIsInVwZGF0ZV9ndWlkdGd0IiwidXBkYXRlQ291cGxpbmciLCJ0aGVuIiwiZG9jIiwidXBkYXRlcyIsInVwZGF0ZUd1aWR0Z3QiLCJ1cGRhdGVQb3N0VGltZXIiLCJkdXJhdGlvbiIsInBvc3RiYXJsaWZlIiwiY3NzIiwiY3VzdG9taXplSW5mb1dpbmRvdyIsIml3T3V0ZXIiLCJpd0JhY2tncm91bmQiLCJwcmV2IiwiZGlzcGxheSIsImZpbmQiLCJib3gtc2hhZG93Iiwiei1pbmRleCIsImJvcmRlciIsImN1c3RvbWl6ZUNsb3NlQnRuIiwiaXdDbG9zZUJ0biIsIm5leHQiLCJvcGFjaXR5IiwicmlnaHQiLCJ0b3AiLCJnZXRfY291cGxpbmciLCJyZWFkeSIsIiRkb2N1bWVudCIsInJlcXVlc3RGZXRjaCIsImFkZFBvc3QiLCJwb3N0TG9jYXRpb25Gcm9tVXNlckxvY2F0aW9uIiwicmVsYXRpdmVMaWZlU3BhbiIsImNoYXJMZW4iLCJjcmVhdGUiLCJlcnJvciIsImd1aWRPYmoiLCJnZXQiLCJwdXQiLCJ1cGRhdGVkc2Vzc2lvbiIsInVwZGF0ZWRndWlkdGd0Il0sIm1hcHBpbmdzIjoiQUFDQUEsUUFBQUMsT0FBQSxPQUNBLFVBQ0EsWUFDQSxjQ0hBRCxRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsbUJBQUEsYUFBQSxVQUFBLFlBQUEsYUFBQSxTQUFBLFVBQUEsUUFBQSxXQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBT0EsYUFBQUMsT0FBQUMsYUFBQUMsTUFDQSxRQUFBRixPQUFBQyxhQUFBQyxNQUNBRixPQUFBQyxhQUFBQyxPQUVBRixPQUFBQyxhQUFBQyxLQUFBVCxFQUFBVSxXQUVBUCxFQUFBTSxLQUFBRixPQUFBQyxhQUFBQyxLQUdBLGFBQUFGLE9BQUFDLGFBQUFHLFNBQ0EsUUFBQUosT0FBQUMsYUFBQUcsU0FDQUosT0FBQUMsYUFBQUcsVUFFQUosT0FBQUMsYUFBQUcsUUFBQSxLQUVBUixFQUFBUSxRQUFBSixPQUFBQyxhQUFBRyxRQUVBUixFQUFBUyxRQUNBQyxLQUFBLEdBR0FWLEVBQUFXLGNBQUEsRUFJQVgsRUFBQVksVUFBQWQsRUFBQWUsbUJBSUFiLEVBQUFjLGNBQ0FDLElBQUEsRUFDQUMsSUFBQSxHQUdBaEIsRUFBQWlCLHNCQUFBLEVBQ0FqQixFQUFBa0Isa0JBQUEsRUFHQWYsRUFBQSxXQUVBZ0IsU0FBQUMsZUFBQSxlQUFBQyxXQUFBLFNBQUFDLEdBRUEsTUFBQUEsRUFBQUMsT0FFQUMsRUFBQSx5QkFBQUMsVUFJQU4sU0FBQUMsZUFBQSxlQUFBTSxRQUFBLFNBQUFKLEdBQ0FLLFFBQUFDLElBQUEsWUFDQTVCLEVBQUFrQixrQkFBQSxHQUdBQyxTQUFBQyxlQUFBLGVBQUFTLE9BQUEsU0FBQVAsR0FDQUssUUFBQUMsSUFBQSxXQUNBNUIsRUFBQWtCLGtCQUFBLEdBR0FNLEVBQUEsZUFBQU0sTUFBQSxXQUNBTixFQUFBLGVBQUFPLFlBQUEsVUFFQS9CLEVBQUFpQixzQkFBQWpCLEVBQUFpQixxQkFDQWpCLEVBQUFnQyxZQVFBLElBQUFDLEdBQ0FDLEVBQUFmLFNBQUFnQixTQUFBRCxRQUdBRCxHQURBQyxHQUFBcEMsRUFBQXNDLE1BQ0F0QyxFQUFBdUMsV0FBQXZDLEVBQUFzQyxNQUFBLElBQUF0QyxFQUFBd0MsS0FFQUosR0FBQXBDLEVBQUF5QyxTQUNBekMsRUFBQXVDLFdBQUF2QyxFQUFBeUMsU0FBQSxJQUFBekMsRUFBQXdDLEtBR0F4QyxFQUFBMEMsa0JBQUExQyxFQUFBMkMsVUFNQSxJQUFBQyxHQUFBLFdBQ0FDLFdBQUEsR0FBQUMsV0FBQVgsR0FFQVUsV0FBQUUsT0FBQSxXQUtBLFFBQUFDLEdBQUFDLEdBS0EsR0FBQUMsR0FBQUQsRUFBQUUsT0FFQUMsRUFBQSxHQUFBQyxRQUFBQyxLQUFBQyxPQUFBTCxFQUFBTSxTQUFBTixFQUFBTyxVQUdBdkQsR0FBQWMsY0FDQUMsSUFBQWlDLEVBQUFNLFNBQ0F0QyxJQUFBZ0MsRUFBQU8sVUFHQSxJQUFBcEIsSUFDQXBCLElBQUFtQyxFQUFBbkMsTUFDQUMsSUFBQWtDLEVBQUFNLE9BRUFDLEVBQUFDLEtBQUFDLFVBQUF4QixHQUlBeUIsRUFBQTVELEVBQUE2RCxJQUFBQyxZQUNBQyxFQUFBSCxFQUFBSSxlQUNBQyxFQUFBTCxFQUFBTSxlQUdBQyxHQUNBcEQsSUFBQWdELEVBQUFoRCxNQUNBQyxJQUFBaUQsRUFBQVQsT0FFQVksR0FDQXJELElBQUFrRCxFQUFBbEQsTUFDQUMsSUFBQStDLEVBQUFQLE9BR0FhLEdBQ0F0RCxJQUFBWCxPQUFBQyxhQUFBaUQsU0FDQXRDLElBQUFaLE9BQUFDLGFBQUFrRCxXQUdBZSxHQUNBQyxPQUFBSixFQUFBcEQsSUFDQXlELE9BQUFMLEVBQUFuRCxJQUNBeUQsT0FBQUwsRUFBQXJELElBQ0EyRCxPQUFBTixFQUFBcEQsSUFDQTJELFdBQUFOLEVBQUF0RCxJQUNBNkQsV0FBQVAsRUFBQXJELEtBR0E2RCxFQUFBbkIsS0FBQUMsVUFBQVcsR0FLQVEsR0FDQXRFLFFBQUFSLEVBQUFRLFFBQ0FGLEtBQUFOLEVBQUFNLEtBQ0E2QixTQUFBc0IsRUFDQWEsU0FBQU8sRUFFQWpGLEdBQUFtRixNQUFBRCxHQUdBLFFBQUFFLEdBQUFDLEdBQ0FDLEtBQUEsR0FBQSxvREFDQXZELFFBQUF3RCxLQUFBLFNBQUFGLEVBQUFHLEtBQUEsTUFBQUgsRUFBQUksU0FyRUExQyxXQUFBMkMsS0FBQXRGLEVBQUFNLE1BeUVBaUYsVUFBQUMsWUFBQUMsbUJBQUEzQyxFQUFBa0MsR0FFQXJELFFBQUFDLElBQUEsd0JBR0FlLFdBQUErQyxRQUFBLFdBRUEvRCxRQUFBQyxJQUFBLG9DQUNBekIsRUFBQXVDLEVBQUEsTUFHQUMsV0FBQWdELFVBQUEsU0FBQUMsR0FFQSxHQUFBQyxHQUFBbkMsS0FBQW9DLE1BQUFGLEVBQUFHLEtBUUFwRSxTQUFBQyxJQUFBLE1BQUFpRSxFQUFBRyxNQUNBakcsRUFBQWtHLFdBQUEsTUFBQUosRUFBQUcsS0FBQUgsRUFBQUUsT0FHQXJELEtBTUExQyxFQUFBa0csSUFBQSxjQUFBLFNBQUFDLEVBQUF6RixHQUVBVixFQUFBNkQsSUFBQXVDLHFCQUdBMUYsRUFBQUosTUFBQU4sRUFBQU0sTUFHQU4sRUFBQTZELElBQUF3QyxjQUFBM0YsS0FLQVYsRUFBQWtHLElBQUEsaUJBQUEsU0FBQUMsRUFBQXJCLEdBQ0EsR0FBQTNDLEdBQUExQyxRQUFBNkcsU0FBQXhCLEVBQUEzQyxTQUNBbkMsR0FBQTZELElBQUEwQyx1QkFBQXBFLEtBTUFuQyxFQUFBa0csSUFBQSxpQkFBQSxTQUFBQyxFQUFBSyxHQUNBeEcsRUFBQTZELElBQUE0QyxXQUFBRCxLQUdBeEcsRUFBQWtHLElBQUEsb0JBQUEsU0FBQUMsRUFBQU8sR0FFQTFHLEVBQUE2RCxJQUFBdUMsdUJBT0FwRyxFQUFBMkcsU0FBQSxXQUNBLE1BQUFwQixXQUFBcUIsVUFBQUMsTUFBQSxhQUNBdEIsVUFBQXFCLFVBQUFDLE1BQUEsV0FDQXRCLFVBQUFxQixVQUFBQyxNQUFBLFlBQ0F0QixVQUFBcUIsVUFBQUMsTUFBQSxVQUNBdEIsVUFBQXFCLFVBQUFDLE1BQUEsVUFDQXRCLFVBQUFxQixVQUFBQyxNQUFBLGdCQUNBdEIsVUFBQXFCLFVBQUFDLE1BQUEsbUJBRUEsR0FHQSxHQUtBN0csRUFBQThHLHNCQUFBLFdBQ0EsUUFBQWhFLEdBQUFDLEdBRUEsR0FBQS9DLEVBQUErRyxlQUFBL0csRUFBQVMsT0FBQUMsS0FBQSxDQUdBLEdBQUFzQyxHQUFBRCxFQUFBRSxNQUVBN0MsUUFBQUMsYUFBQWlELFNBQUFOLEVBQUFNLFNBQ0FsRCxPQUFBQyxhQUFBa0QsVUFBQVAsRUFBQU8sU0FFQSxJQUFBcEIsSUFDQXBCLElBQUFpQyxFQUFBTSxTQUNBdEMsSUFBQWdDLEVBQUFPLFVBSUF2RCxHQUFBNkQsSUFBQTBDLHVCQUFBcEUsR0FHQW5DLEVBQUE2RCxJQUFBbUQsWUFBQTdFLEVBRUEsSUFBQWUsR0FBQSxHQUFBQyxRQUFBQyxLQUFBQyxPQUFBbEIsRUFBQXBCLElBQUFvQixFQUFBbkIsSUFHQWhCLEdBQUE2RCxJQUFBb0QsTUFBQS9ELEdBQ0FsRCxFQUFBNkQsSUFBQXFELFFBQUEsS0FHQSxRQUFBbEMsR0FBQUMsR0FDQUMsS0FBQSxHQUFBLG9EQUNBdkQsUUFBQXdELEtBQUEsU0FBQUYsRUFBQUcsS0FBQSxNQUFBSCxFQUFBSSxTQUlBRSxVQUFBQyxZQUFBQyxtQkFBQTNDLEVBQUFrQyxHQUVBRSxNQUFBaUMsTUFBQSxHQUFBQyxLQUFBLCtCQUFBQyxNQUFBLEtBQUFDLG1CQUFBLEtBR0F0SCxFQUFBdUgsbUJBQUEsV0FDQSxHQUFBQyxHQUFBLENBRUEsSUFBQXhILEVBQUEyRyxXQUFBLENBQ0EsR0FBQS9DLEdBQUE1RCxFQUFBNkQsSUFBQUMsWUFDQUMsRUFBQUgsRUFBQUksZUFDQUMsRUFBQUwsRUFBQU0sY0FDQUMsZ0JBQUEsR0FBQWhCLFFBQUFDLEtBQUFDLE9BQUFVLEVBQUFoRCxNQUFBa0QsRUFBQVQsT0FDQVksZUFBQSxHQUFBakIsUUFBQUMsS0FBQUMsT0FBQVksRUFBQWxELE1BQUFnRCxFQUFBUCxNQUVBLElBQUFpRSxHQUFBLEdBQUFDLEtBQUFDLElBQUEzSCxFQUFBNEgsYUFBQTdHLElBQUFvRCxlQUFBcEQsT0FDQThHLEVBQUEsR0FBQUgsS0FBQUMsSUFBQTNILEVBQUE0SCxhQUFBN0csSUFBQXFELGVBQUFyRCxNQUdBeUcsR0FEQUMsRUFBQUksRUFDQUEsRUFHQUosRUFJQSxHQUFBdkUsR0FBQSxHQUFBQyxRQUFBQyxLQUFBQyxPQUFBckQsRUFBQTRILGFBQUE3RyxJQUFBeUcsRUFBQXhILEVBQUE0SCxhQUFBNUcsSUFDQWhCLEdBQUE2RCxJQUFBb0QsTUFBQS9ELElBR0FsRCxFQUFBOEgsU0FBQSxXQUNBOUgsRUFBQVcsY0FBQSxHQU1BWCxFQUFBa0csSUFBQSxVQUFBLFNBQUFDLEVBQUF0QyxHQUNBN0QsRUFBQTZELElBQUFBLElBR0E3RCxFQUFBa0csSUFBQSxjQUFBLFNBQUFDLEVBQUEzRixHQUNBUixFQUFBUSxRQUFBQSxFQUdBSixPQUFBQyxhQUFBRyxRQUFBQSxJQUdBUixFQUFBa0csSUFBQSxpQkFBQSxTQUFBQyxFQUFBMUYsR0FDQVQsRUFBQStHLGNBQUF0RyxJQUdBVCxFQUFBa0csSUFBQSxVQUFBLFNBQUFDLEVBQUFoRSxHQUNBLEdBQUFwQixHQUFBb0IsRUFBQXBCLE1BQ0FDLEVBQUFtQixFQUFBcUIsS0FDQXhELEdBQUE0SCxjQUNBN0csSUFBQUEsRUFDQUMsSUFBQUEsS0FJQWhCLEVBQUFrRyxJQUFBLFlBQUEsU0FBQUMsRUFBQTRCLEdBR0EvSCxFQUFBZ0MsT0FBQSxXQUNBaEMsRUFBQWdJLFVBQUFELFNDcFdBdEksUUFBQUMsT0FBQSxPQUNBdUksU0FBQSxhQUNBNUYsV0FBQSxRQUNBRyxrQkFBQSxTQUNBSixNQUFBLFlBQ0FHLFNBQUEsY0FDQUUsV0FBQSwwQkFDQUgsS0FBQSxPQUNBekIsbUJBQUEsTUNSQXBCLFFBQUFDLE9BQUEsT0FDQXdJLFFBQUEsaUJBQUEsU0FBQUMsR0FDQUEsRUFDQUMsS0FBQSxLQUVBekksV0FBQSxZQUNBMEksWUFBQSwwQkFHQUMsV0FFQUMsV0FBQSxTQ1hBOUksUUFBQUMsT0FBQSxPQUNBOEksUUFBQSxVQUFBLFdBQ0EsR0FBQUMsR0FBQUMsSUFFQUQsR0FBQUUsUUFBQSxTQUFBQyxHQUNBLE1BQUFBLElBQUFsQixLQUFBbUIsR0FBQSxNQUdBSixFQUFBSywwQkFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUEsS0FDQUMsRUFBQVgsRUFBQUUsUUFBQU0sRUFBQUYsR0FDQU0sRUFBQVosRUFBQUUsUUFBQU8sRUFBQUYsR0FDQU0sRUFDQTVCLEtBQUE2QixJQUFBSCxFQUFBLEdBQUExQixLQUFBNkIsSUFBQUgsRUFBQSxHQUNBMUIsS0FBQThCLElBQUFmLEVBQUFFLFFBQUFJLElBQUFyQixLQUFBOEIsSUFBQWYsRUFBQUUsUUFBQU0sSUFDQXZCLEtBQUE2QixJQUFBRixFQUFBLEdBQUEzQixLQUFBNkIsSUFBQUYsRUFBQSxHQUVBSSxFQUFBLEVBQUEvQixLQUFBZ0MsTUFBQWhDLEtBQUFpQyxLQUFBTCxHQUFBNUIsS0FBQWlDLEtBQUEsRUFBQUwsSUFDQU0sRUFBQVQsRUFBQU0sQ0FDQSxPQUFBRyxJQUdBbkIsRUFBQW9CLFNBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxNQUFBRCxJQUFBQyxFQUFBRCxJQUFBSCxFQUFBQyxJQUFBQyxFQUFBRCxJQUdBdEIsRUFBQWxJLFFBQUEsV0FDQSxRQUFBNEosS0FDQSxNQUFBekMsTUFBQTBDLE1BQUEsT0FBQSxFQUFBMUMsS0FBQTJDLFdBQ0FDLFNBQUEsSUFDQUMsVUFBQSxHQUVBLE1BQUFKLEtBQUFBLElBQUEsSUFBQUEsSUFBQSxJQUFBQSxJQUFBLElBQUFBLElBQUEsSUFBQUEsSUFBQUEsSUFBQUEsT0NoQ0ExSyxRQUFBQyxPQUFBLE9BQ0E4SyxLQUFBLGFBQUEsV0FBQSxhQUFBLFNBQUF6SyxFQUFBSSxFQUFBUCxPQ0RBSCxRQUFBQyxPQUFBLE9BQ0ErSyxVQUFBLFVBQUEsV0FBQSxVQUFBLFlBQUEsYUFBQSxXQUFBLFdBQUEsU0FBQUMsRUFBQTdLLEVBQUFDLEVBQUFGLEVBQUErSyxFQUFBeEssR0FFQSxHQUFBeUssR0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQXNEQSxRQUFBQyxLQUVBNUssT0FBQUMsYUFBQWlELFNBQUFPLEVBQUFvSCxZQUFBbEssTUFDQVgsT0FBQUMsYUFBQWtELFVBQUFNLEVBQUFvSCxZQUFBekgsTUFHQSxRQUFBMEgsS0FFQSxHQUFBdEgsR0FBQUMsRUFBQUMsWUFDQUMsRUFBQUgsRUFBQUksZUFDQUMsRUFBQUwsRUFBQU0sY0FHQUMsR0FBQSxHQUFBaEIsUUFBQUMsS0FBQUMsT0FBQVUsRUFBQWhELE1BQUFrRCxFQUFBVCxPQUNBWSxFQUFBLEdBQUFqQixRQUFBQyxLQUFBQyxPQUFBWSxFQUFBbEQsTUFBQWdELEVBQUFQLE9BR0EsUUFBQTJILEtBRUEsR0FBQXZILEdBQUFDLEVBQUFDLFlBQ0FDLEVBQUFILEVBQUFJLGVBQ0FDLEVBQUFMLEVBQUFNLGNBR0FDLElBQ0FwRCxJQUFBZ0QsRUFBQWhELE1BQ0FDLElBQUFpRCxFQUFBVCxPQUVBWSxHQUNBckQsSUFBQWtELEVBQUFsRCxNQUNBQyxJQUFBK0MsRUFBQVAsTUFHQSxJQUFBYSxFQWlCQUEsR0FkQXdHLEVBQUFqRCxhQUFBN0csSUFBQW9ELEVBQUFwRCxLQUNBOEosRUFBQWpELGFBQUE3RyxJQUFBcUQsRUFBQXJELEtBQ0E4SixFQUFBakQsYUFBQTVHLElBQUFvRCxFQUFBcEQsS0FDQTZKLEVBQUFqRCxhQUFBNUcsSUFBQW1ELEVBQUFuRCxLQVlBRCxJQUFBOEosRUFBQWpELGFBQUE3RyxJQUNBQyxJQUFBNkosRUFBQWpELGFBQUE1RyxNQVRBRCxJQUFBOEMsRUFBQW9ILFlBQUFsSyxNQUNBQyxJQUFBNkMsRUFBQW9ILFlBQUF6SCxPQVdBNUQsRUFBQXVMLG9CQUFBaEgsRUFBQUMsRUFBQUMsRUFBQXdHLEVBQUF2SyxNQU9BLFFBQUErRixHQUFBM0YsR0FHQWQsRUFBQXdMLFFBQ0FDLFFBQUEsU0FBQUMsR0FFQSxJQUFBLEdBQUFDLEdBQUEsRUFBQUEsRUFBQUQsRUFBQUUsT0FBQUQsSUFBQSxDQUNBLEdBQUF6RyxHQUFBd0csRUFBQUMsRUFHQSxJQUFBekcsRUFBQXhFLE1BQUF1SyxFQUFBdkssS0FBQSxDQU1BLEdBQUFtTCxHQUFBaE0sUUFBQTZHLFNBQUF4QixFQUFBUixVQUNBb0gsRUFBQWpNLFFBQUE2RyxTQUFBNUYsRUFBQXlCLFNBTUEsSUFEQStJLElBQ0FPLEVBQUE5RyxXQUFBUixFQUFBcEQsT0FDQTBLLEVBQUE5RyxXQUFBUCxFQUFBckQsT0FDQTBLLEVBQUE3RyxXQUFBUixFQUFBWixPQUNBaUksRUFBQTdHLFdBQUFULEVBQUFYLE9BTUFrSSxFQUFBM0ssSUFBQTBLLEVBQUFsSCxRQUNBbUgsRUFBQTNLLElBQUEwSyxFQUFBaEgsUUFDQWlILEVBQUExSyxJQUFBeUssRUFBQS9HLFFBQ0FnSCxFQUFBMUssSUFBQXlLLEVBQUFqSCxPQUhBLENBUUEsR0FBQXRCLEdBQUEsR0FBQUMsUUFBQUMsS0FBQUMsT0FBQW9JLEVBQUE5RyxXQUFBOEcsRUFBQTdHLFlBR0ErRyxHQUNBQyxTQUFBMUksRUFDQVcsSUFBQUEsRUFFQXNELE1BQUEsVUFDQTBFLEtBQUFDLEVBQ0FDLFdBQUEsR0FHQUMsRUFBQSxHQUFBN0ksUUFBQUMsS0FBQTZJLE9BQUFOLEdBRUFPLEVBQUEsSUFFQS9MLEdBQ0EsU0FBQWdNLEdBQ0EsTUFBQSxZQUNBQSxFQUFBQyxPQUFBLFFBRUFKLEdBQ0FFLFFBS0EsUUFBQTlGLEtBR0FpRyxFQUFBQyxHQUFBekIsRUFBQXJLLFFBQ0E4TCxFQUFBekIsRUFBQXJLLFFBR0FrSyxFQUFBVSxRQUNBQyxRQUFBLFNBQUFrQixHQUVBLElBQUEsR0FBQWhCLEdBQUEsRUFBQUEsRUFBQWdCLEVBQUFmLE9BQUFELElBQ0EsQ0FDQSxHQUFBN0ssR0FBQTZMLEVBQUFoQixHQUdBcEosRUFBQTFDLFFBQUE2RyxTQUFBNUYsRUFBQXlCLFVBQ0FlLEVBQUEsR0FBQUMsUUFBQUMsS0FBQUMsT0FBQWxCLEVBQUFwQixJQUFBb0IsRUFBQW5CLElBR0EsSUFEQWtLLElBQ0FoSSxFQUFBbkMsTUFBQW9ELEVBQUFwRCxPQUNBbUMsRUFBQW5DLE1BQUFxRCxFQUFBckQsT0FDQW1DLEVBQUFNLE1BQUFZLEVBQUFaLE9BQ0FOLEVBQUFNLE1BQUFXLEVBQUFYLE1BSEEsQ0FhQSxJQUFBLEdBQUF3SSxHQUFBUSxFQUFBLEVBQUFSLEVBQUFTLEVBQUFELEdBQUFBLElBQUEsQ0FHQSxHQUFBRSxHQUFBaE0sRUFBQWlNLEtBQUFYLEVBQUF0TCxLQUFBaU0sR0FDQSxJQUFBRCxFQUNBLENBQ0EsR0FBQUwsRUFBQSxDQUNBNUYsRUFBQS9GLEVBQUFpTSxJQUNBLE9BQ0EsR0FBQVgsRUFBQXRMLEtBQUFGLFNBQUFFLEVBQUFGLFFBQUEsQ0FDQUUsRUFBQSxJQUNBLE9BRUErRixFQUFBL0YsRUFBQWlNLElBQ0EsUUFLQSxHQUFBLE1BQUFqTSxFQUFBLENBUUEsR0FBQWlMLElBQ0FDLFNBQUExSSxFQUNBVyxJQUFBQSxFQUNBc0QsTUFBQSxTQUNBMEUsS0FBQWUsR0FFQVosRUFBQSxHQUFBN0ksUUFBQUMsS0FBQTZJLE9BQUFOLEVBRUFjLEdBQUFJLE1BRUFiLE9BQUFBLEVBQ0F0TCxLQUFBQSxHQUlBLElBQUFvTSxHQUFBQyxFQUFBck0sRUFBQUosS0FBQUksRUFBQUYsU0FHQXdNLEVBQUF0TSxFQUFBdU0sUUFJQUMsRUFBQXJDLEVBQ0FzQyxFQUFBRCxFQUFBRSxNQUFBLEdBRUFDLEVBQUEsU0FBQXJCLEVBQUFzQixFQUFBNU0sRUFBQW9NLEVBQUFFLEdBRUEsTUFBQSxZQUVBLEdBQUFPLElBQ0FDLFlBQUEsR0FBQXJLLFFBQUFDLEtBQUFxSyxLQUFBLE1BQUEsSUFDQUMsZ0JBQUEsR0FFQUMsRUFBQSxHQUFBeEssUUFBQUMsS0FBQXdLLFdBQUFMLEdBSUFNLEVBQUEsR0FBQUMsTUFDQUMsRUFBQUYsRUFBQUcsVUFDQUMsRUFBQXZOLEVBQUF3TixRQUFBSCxHQUFBLEVBQUFyTixFQUFBd04sUUFBQUgsRUFBQSxFQUVBSSxHQUFBRixFQUFBdk4sRUFBQTBOLFVBQUFDLFFBQUEsRUFHQWYsR0FBQWdCLElBQUE1TixFQUFBNk4sS0FDQWpCLEVBQUFXLFNBQUFBLEVBQ0FYLEVBQUFrQixTQUFBOU4sRUFBQUosS0FDQWdOLEVBQUFtQixZQUFBL04sRUFBQUYsUUFDQThNLEVBQUFvQixpQkFBQTVCLEVBQ0FRLEVBQUFxQixtQkFBQVIsRUFDQWIsRUFBQXNCLGdCQUFBNUIsQ0FVQSxJQUFBNkIsR0FBQSxzQkFDQUMsRUFBQW5FLEVBQUFrRSxHQUFBdkIsRUFFQUssR0FBQW9CLFdBQUFELEVBQUEsSUFFQTNMLE9BQUFDLEtBQUE5QixNQUFBME4sWUFBQXJCLEVBQUEsYUFBQSxXQUNBak4sRUFBQUosTUFBQXVLLEVBQUF2SyxNQUNBNEUsTUFFQWlDLE1BQUEsZ0JBQ0FDLEtBQUEsdURBQ0FwQixLQUFBLFVBQ0FpSixrQkFBQSxFQUNBQyxtQkFBQSxVQUNBQyxrQkFBQSxrQkFDQUMsZ0JBQUEsR0FFQSxTQUFBQyxHQUNBLEdBQUFBLEVBQ0EzRSxFQUFBNEUsT0FBQTVPLEdBQ0F3RSxLQUFBLFdBQUEsd0NBQUEsZUFDQSxDQUNBLEdBQUEySSxHQUFBLEdBQUFDLE1BQ0FDLEVBQUFGLEVBQUFHLFVBQ0FDLEVBQUF2TixFQUFBd04sUUFBQUgsR0FBQSxFQUFBck4sRUFBQXdOLFFBQUFILEVBQUEsRUFDQUksR0FBQUYsRUFBQXZOLEVBQUEwTixVQUFBQyxRQUFBLEVBRUFGLEdBQUEsSUFDQWIsRUFBQXFCLG1CQUFBUixFQUNBUixFQUFBNEIsS0FBQTFMLEVBQUFtSSxTQVVBMkIsRUFBQTRCLEtBQUExTCxFQUFBbUksS0FFQUEsRUFBQW1CLEVBQUF6TSxFQUFBb00sRUFBQUUsRUFFQUssVUFTQSxRQUFBbUMsR0FBQXJOLEdBRUEsR0FBQWUsR0FBQSxHQUFBQyxRQUFBQyxLQUFBQyxPQUFBbEIsRUFBQXBCLElBQUFvQixFQUFBbkIsSUFJQSxJQUZBa0ssSUFFQWhJLEVBQUFuQyxNQUFBb0QsRUFBQXBELE9BQ0FtQyxFQUFBbkMsTUFBQXFELEVBQUFyRCxPQUNBbUMsRUFBQU0sTUFBQVksRUFBQVosT0FDQU4sRUFBQU0sTUFBQVcsRUFBQVgsTUFIQSxDQVNBLEdBQUFtSSxJQUNBQyxTQUFBMUksRUFDQVcsSUFBQUEsRUFDQTRMLFVBQUF0TSxPQUFBQyxLQUFBc00sVUFBQUMsS0FDQXhJLE1BQUEsVUFDQTBFLEtBQUErRCxHQUdBNUQsRUFBQSxHQUFBN0ksUUFBQUMsS0FBQTZJLE9BQUFOLEVBRUF4TCxHQUNBLFNBQUFnTSxHQUNBLE1BQUEsWUFDQUEsRUFBQUMsT0FBQSxRQUVBSixHQUNBLE1BR0EsUUFBQXZGLEdBQUFELEdBR0EsSUFBQSxHQUFBd0YsR0FBQTZELEVBQUEsRUFBQTdELEVBQUFTLEVBQUFvRCxHQUFBQSxJQUdBLEdBQUFySixHQUFBd0YsRUFBQXRMLEtBQUFpTSxJQUFBLENBQ0FYLEVBQUFBLE9BQUFJLE9BQUEsTUFDQUssRUFBQXFELE9BQUFELEVBQUEsRUFDQSxRQUtBLFFBQUFFLEdBQUE1TixHQUVBLEdBQUFlLEdBQUEsR0FBQUMsUUFBQUMsS0FBQUMsT0FBQWxCLEVBQUFwQixJQUFBb0IsRUFBQW5CLElBQ0FnUCxHQUFBOU0sR0FDQStNLEVBQUEvTSxHQUdBaUksSUFJQSxRQUFBNkUsR0FBQTdOLEdBQ0EsSUFBQSxHQUFBNkosR0FBQVQsRUFBQSxFQUFBUyxFQUFBa0UsRUFBQTNFLEdBQUFBLElBQ0FTLEVBQUFJLE9BQUEsS0FFQThELEtBQ0EsSUFBQWxFLEdBQUEsR0FBQTdJLFFBQUFDLEtBQUE2SSxRQUNBTCxTQUFBekosRUFDQTBCLElBQUFBLEVBQ0FnSSxLQUFBc0UsR0FFQUQsR0FBQXJELEtBQUFiLEdBY0EsUUFBQWlFLEdBQUE5TixHQUdBMEksRUFBQXVGLE1BQUEsVUFBQWpPLEVBRUEsSUFBQWtPLEdBQUEsR0FBQWxOLFFBQUFDLEtBQUFrTixRQUdBRCxHQUFBRSxTQUFBQyxPQUFBck8sR0FBQSxTQUFBc08sRUFBQUMsR0FLQSxJQUVBN0YsRUFBQXVGLE1BQUEsWUFBQUssRUFBQSxHQUFBRSxtQkFFQSxNQUFBMUwsR0FDQXRELFFBQUFDLElBQUFxRCxHQUNBQyxLQUFBLEdBQUEsNEJBQ0EyRixFQUFBdUYsTUFBQSxZQUFBLCtCQUtBLFFBQUFyRCxHQUFBNkQsRUFBQUMsR0FTQSxHQUFBQyxHQUFBakcsRUFBQXJLLFNBQUFvUSxFQUNBRyxFQUFBbEcsRUFBQXZLLE1BQUF1USxFQUNBRyxFQUFBbkcsRUFBQXZLLE1BQUFzUSxFQUNBSyxFQUFBLEtBQUFwRyxFQUFBckssT0FFQSxPQUFBd1EsSUFBQUMsRUFFQSxFQUVBSCxHQUFBQyxFQUVBLEVBRUFELElBQUFDLEVBRUEsR0FFQUQsR0FBQUMsRUFFQSxFQUlBLEVBT0EsUUFBQUcsS0FFQSxHQUFBQyxHQUFBaFEsU0FBQUMsZUFBQSxvQkFDQXlDLEdBQUF1TixTQUFBak8sT0FBQUMsS0FBQWlPLGdCQUFBQyxVQUFBekUsS0FBQXNFLEdBR0EsUUFBQUksS0FFQSxHQUFBQyxHQUFBclEsU0FBQUMsZUFBQSxlQUNBeUMsR0FBQXVOLFNBQUFqTyxPQUFBQyxLQUFBaU8sZ0JBQUFJLFdBQUE1RSxLQUFBMkUsR0FHQSxRQUFBRSxLQUVBLEdBQUFDLEdBQUF4USxTQUFBQyxlQUFBLGNBQ0F5QyxHQUFBdU4sU0FBQWpPLE9BQUFDLEtBQUFpTyxnQkFBQU8sZUFBQS9FLEtBQUE4RSxHQUdBLFFBQUFFLEtBRUEsR0FBQUMsR0FBQTNRLFNBQUFDLGVBQUEsaUJBQ0F5QyxHQUFBdU4sU0FBQWpPLE9BQUFDLEtBQUFpTyxnQkFBQU8sZUFBQS9FLEtBQUFpRixHQUdBLFFBQUFDLEtBRUEsR0FBQUMsR0FBQTdRLFNBQUFDLGVBQUEsa0JBQ0F5QyxHQUFBdU4sU0FBQWpPLE9BQUFDLEtBQUFpTyxnQkFBQU8sZUFBQS9FLEtBQUFtRixHQUdBLFFBQUFDLEtBR0EsR0FBQUMsR0FBQS9RLFNBQUFDLGVBQUEsWUFDQXlDLEdBQUF1TixTQUFBak8sT0FBQUMsS0FBQWlPLGdCQUFBQyxVQUFBekUsS0FBQXFGLEVBRUEsSUFBQUMsR0FBQSxHQUFBaFAsUUFBQUMsS0FBQWdQLE9BQUFDLFVBQUEsRUFJQWxQLFFBQUFDLEtBQUE5QixNQUFBME4sWUFBQW1ELEVBQUEsaUJBQUEsV0FDQSxHQUFBQyxHQUFBRCxFQUFBRyxXQUVBLElBQUEsR0FBQUYsRUFBQTVHLE9BQUEsQ0FLQSxHQUFBekQsR0FBQXFLLEVBQUEsR0FHQWpRLEdBQ0FwQixJQUFBZ0gsRUFBQXdLLFNBQUFwUSxTQUFBcEIsTUFDQUMsSUFBQStHLEVBQUF3SyxTQUFBcFEsU0FBQXFCLE1BRUF1TSxHQUFBNU4sR0FFQS9CLE9BQUFDLGFBQUFpRCxTQUFBeUUsRUFBQXdLLFNBQUFwUSxTQUFBbUIsU0FDQWxELE9BQUFDLGFBQUFrRCxVQUFBd0UsRUFBQXdLLFNBQUFwUSxTQUFBb0IsVUFFQU0sRUFBQW9ELE1BQUFjLEVBQUF3SyxTQUFBcFEsVUFDQTBCLEVBQUFxRCxRQUFBLE9BT0EsUUFBQXNMLEtBR0FyUCxPQUFBQyxLQUFBOUIsTUFBQTBOLFlBQUF5RCxFQUFBLFFBQUEsU0FBQW5SLEdBQ0EsR0FBQWEsSUFDQXBCLElBQUFPLEVBQUFrUCxPQUFBelAsTUFDQUMsSUFBQU0sRUFBQWtQLE9BQUFoTixNQUVBdU0sR0FBQTVOLEtBSUEsUUFBQXVRLEtBRUF2UCxPQUFBQyxLQUFBOUIsTUFBQTBOLFlBQUF5RCxFQUFBLGlCQUFBLFdBR0F6SCxNQUlBLFFBQUEySCxLQUVBeFAsT0FBQUMsS0FBQTlCLE1BQUEwTixZQUFBeUQsRUFBQSxpQkFBQSxXQUVBdkgsTUFJQSxRQUFBMEgsS0FFQXpQLE9BQUFDLEtBQUE5QixNQUFBME4sWUFBQXlELEVBQUEsVUFBQSxXQUVBck0sSUFHQStFLE1BSUEsUUFBQTBILEtBRUExUCxPQUFBQyxLQUFBOUIsTUFBQTBOLFlBQUF5RCxFQUFBLFNBQUEsV0FFQXJNLElBR0ErRSxNQUlBLFFBQUEySCxLQUVBM1AsT0FBQUMsS0FBQTlCLE1BQUEwTixZQUFBeUQsRUFBQSxlQUFBLFdBRUFyTSxJQUdBK0UsTUFRQSxRQUFBNEgsS0FDQUMsRUFBQSxHQUFBN1AsUUFBQUMsS0FBQUMsT0FBQSxNQUFBLFNBRUE0UCxNQUFBN1MsT0FBQUMsYUFBQWlELFdBQUEyUCxNQUFBN1MsT0FBQUMsYUFBQWtELGFBRUF5UCxFQUFBLEdBQUE3UCxRQUFBQyxLQUFBQyxPQUFBakQsT0FBQUMsYUFBQWlELFNBQUFsRCxPQUFBQyxhQUFBa0QsWUFHQTBNLEVBQUErQyxHQUVBRSxHQUNBQyxPQUFBSCxFQUNBSSxLQUFBLEdBQ0FDLGFBQUEsRUFDQUMsbUJBQUEsRUFDQUMsZ0JBQUEsRUFDQUMsWUFBQSxFQUNBQyxhQUFBLEVBQ0FDLHVCQUNBQyxZQUFBeFEsT0FBQUMsS0FBQXdRLFVBQUFDLFFBQUFDLElBRUFDLFVBQUFELEdBSUEsUUFBQUUsS0FDQSxRQUFBQyxHQUFBQyxJQVlBLFFBQUFDLEdBQUFoUyxHQUNBZ0IsT0FBQUMsS0FBQTlCLE1BQUE4UyxRQUFBMUwsS0FBQSxjQUFBdkcsR0FLQSxRQUFBa1MsR0FBQWxTLEdBQ0FnQixPQUFBQyxLQUFBOUIsTUFBQThTLFFBQUExTCxLQUFBLHlCQUFBdkcsR0FLQSxRQUFBbVMsS0FDQW5SLE9BQUFDLEtBQUE5QixNQUFBOFMsUUFBQTFMLEtBQUEsc0JBS0EsUUFBQTZMLEdBQUE3VCxHQUNBeUMsT0FBQUMsS0FBQTlCLE1BQUE4UyxRQUFBMUwsS0FBQSxnQkFBQWhJLEdBS0EsUUFBQThULEdBQUFoTyxHQUNBckQsT0FBQUMsS0FBQTlCLE1BQUE4UyxRQUFBMUwsS0FBQSxhQUFBbEMsR0EvQkFpTSxFQUFBLEdBQUF0UCxRQUFBQyxLQUFBcVIsSUFBQTNKLEVBQUEsR0FBQW9JLEdBR0FlLEVBQUFTLFVBQUFqQyxFQU1Bd0IsRUFBQVMsVUFBQTFOLFlBQUFtTixFQU1BRixFQUFBUyxVQUFBbk8sdUJBQUE4TixFQU1BSixFQUFBUyxVQUFBdE8sbUJBQUFrTyxFQU1BTCxFQUFBUyxVQUFBck8sY0FBQWtPLEVBTUFOLEVBQUFTLFVBQUFqTyxXQUFBK04sRUFHQTNRLEVBQUEsR0FBQW9RLEdBRUE5USxPQUFBQyxLQUFBOUIsTUFBQTBOLFlBQUFuTCxFQUFBLGNBQUEsU0FBQTFCLEdBQ0E0TixFQUFBNU4sS0FHQWdCLE9BQUFDLEtBQUE5QixNQUFBME4sWUFBQW5MLEVBQUEseUJBQUEsU0FBQTFCLEdBQ0FxTixFQUFBck4sS0FHQWdCLE9BQUFDLEtBQUE5QixNQUFBME4sWUFBQW5MLEVBQUEscUJBQUEsV0FDQXVDLE1BR0FqRCxPQUFBQyxLQUFBOUIsTUFBQTBOLFlBQUFuTCxFQUFBLGdCQUFBLFNBQUFuRCxHQUNBMkYsRUFBQTNGLEtBR0F5QyxPQUFBQyxLQUFBOUIsTUFBQTBOLFlBQUFuTCxFQUFBLGFBQUEsU0FBQTJDLEdBQ0FDLEVBQUFELEtBSUEsUUFBQW1PLEtBT0EsR0FBQUMsS0FBQUMsWUFBQSxRQUFBQyxZQUFBLE1BQUFDLFVBQUFDLElBQUEsWUFBQUMsV0FBQSxLQUFBQyxVQUFBLEtBQUFDLFdBQUEsU0FBQU4sWUFBQSxRQUFBQyxZQUFBLFNBQUFDLFVBQUFDLElBQUEsWUFBQUMsV0FBQSxLQUFBQyxVQUFBLEtBQUFDLFdBQUEsVUFBQU4sWUFBQSxXQUFBQyxZQUFBLFdBQUFDLFVBQUFDLElBQUEsWUFBQUMsV0FBQSxJQUFBQyxVQUFBLE1BQUFDLFdBQUEsU0FBQU4sWUFBQSxZQUFBQyxZQUFBLFdBQUFDLFVBQUFDLElBQUEsWUFBQUMsV0FBQSxNQUFBQyxVQUFBLEtBQUFDLFdBQUEsU0FBQU4sWUFBQSxZQUFBQyxZQUFBLFNBQUFDLFVBQUFDLElBQUEsWUFBQUMsV0FBQSxPQUFBQyxVQUFBLE1BQUFDLFdBQUEsVUFBQU4sWUFBQSxPQUFBQyxZQUFBLFdBQUFDLFVBQUFDLElBQUEsWUFBQUMsV0FBQSxPQUFBQyxVQUFBLE1BQUFDLFdBQUEsU0FBQU4sWUFBQSxPQUFBQyxZQUFBLFNBQUFDLFVBQUFDLElBQUEsWUFBQUMsV0FBQSxPQUFBQyxVQUFBLEtBQUFDLFdBQUEsU0FBQU4sWUFBQSxnQkFBQUMsWUFBQSxXQUFBQyxVQUFBQyxJQUFBLFlBQUFDLFdBQUEsTUFBQUMsVUFBQSxNQUFBQyxXQUFBLGlCQUFBTixZQUFBLGVBQUFDLFlBQUEsV0FBQUMsVUFBQUMsSUFBQSxZQUFBQyxXQUFBLE1BQUFDLFVBQUEsTUFBQUMsV0FBQSxTQUFBTixZQUFBLGFBQUFDLFlBQUEsTUFBQUMsVUFBQUMsSUFBQSxZQUFBQyxXQUFBLE1BQUFDLFVBQUEsS0FBQUMsV0FBQSxTQUlBQyxHQUNBQyxLQUFBLGdCQUdBQyxFQUFBLEdBQUFuUyxRQUFBQyxLQUFBbVMsY0FBQVgsRUFBQVEsRUFDQXZSLEdBQUEyUixTQUFBQyxJQUFBM0IsRUFBQXdCLEdBSUEsUUFBQUksS0FDQSxTQUFBN1IsSUFDQWtQLElBRUFpQixJQUVBVyxLQUlBOUosRUFBQXVGLE1BQUEsVUFBQXZNLEdBR0FxTixJQUNBZSxJQUNBVixJQUNBRyxJQUNBRyxJQUNBRSxJQUdBUyxJQUNBRSxJQUNBRSxJQUNBQyxJQUNBQyxJQUNBSCxJQUdBeFMsRUFBQSxXQUNBNkssSUFDQUUsSUFDQUMsSUFDQS9FLEtBQ0EsS0F2d0JBLEdBQUF2QyxHQUNBNE8sRUFDQXRPLEVBQ0FDLEVBQ0E4TyxFQUNBRixFQU1BM0csRUFMQXlILEVBQUEsZUFDQTVELEtBQ0F6RCxLQUVBSCxFQUFBLElBR0FNLEdBRUEzSyxJQUFBLHFCQUNBMFQsS0FBQSxHQUFBeFMsUUFBQUMsS0FBQXFLLEtBQUEsSUFBQSxLQUNBbUksT0FBQSxHQUFBelMsUUFBQUMsS0FBQXlTLE1BQUEsRUFBQSxHQUNBQyxPQUFBLEdBQUEzUyxRQUFBQyxLQUFBeVMsTUFBQSxHQUFBLElBQ0FFLFdBQUEsR0FBQTVTLFFBQUFDLEtBQUFxSyxLQUFBLEVBQUEsSUFFQTBDLEdBRUFsTyxJQUFBLGVBQ0EwVCxLQUFBLEdBQUF4UyxRQUFBQyxLQUFBcUssS0FBQSxJQUFBLEtBQ0FtSSxPQUFBLEdBQUF6UyxRQUFBQyxLQUFBeVMsTUFBQSxFQUFBLEdBQ0FDLE9BQUEsR0FBQTNTLFFBQUFDLEtBQUF5UyxNQUFBLEdBQUEsSUFDQUUsV0FBQSxHQUFBNVMsUUFBQUMsS0FBQXFLLEtBQUEsR0FBQSxLQUVBbUMsR0FFQTNOLElBQUEsOEJBQ0EwVCxLQUFBLEdBQUF4UyxRQUFBQyxLQUFBcUssS0FBQSxJQUFBLEtBQ0FtSSxPQUFBLEdBQUF6UyxRQUFBQyxLQUFBeVMsTUFBQSxFQUFBLEdBQ0FDLE9BQUEsR0FBQTNTLFFBQUFDLEtBQUF5UyxNQUFBLEdBQUEsSUFDQUUsV0FBQSxHQUFBNVMsUUFBQUMsS0FBQXFLLEtBQUEsR0FBQSxLQUVBM0IsR0FFQTdKLElBQUEsWUFDQTBULEtBQUEsR0FBQXhTLFFBQUFDLEtBQUFxSyxLQUFBLElBQUEsS0FDQW1JLE9BQUEsR0FBQXpTLFFBQUFDLEtBQUF5UyxNQUFBLEVBQUEsR0FDQUMsT0FBQSxHQUFBM1MsUUFBQUMsS0FBQXlTLE1BQUEsR0FBQSxJQUNBRSxXQUFBLEdBQUE1UyxRQUFBQyxLQUFBcUssS0FBQSxHQUFBLElBa3VCQWlJLEtBR0EsUUFDQU0sU0FBQSxJQUNBQyxTQUFBLDhCQUNBQyxTQUFBLEVBQ0F0TCxLQUFBQSxNQzV4QkFuTCxRQUFBQyxPQUFBLE9BQ0ErSyxVQUFBLFVBQUEsV0FBQSxhQUFBLFdBQUEsU0FBQXRLLEVBQUFQLEVBQUE4SyxHQUVBLEdBQUFFLEdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0EyQ0EsUUFBQW9MLEtBRUEsR0FBQTNILEdBQUEzRCxFQUFBMkQsU0FDQTRILEVBQUF2TCxFQUFBd0wsUUFBQS9WLEtBQ0FnVyxFQUFBekwsRUFBQXdMLFFBQUE3VixPQUVBc0ssR0FBQXlMLFdBQUFDLEdBQUEsUUFBQSxXQUVBLEdBQUFDLEdBQUFqSSxDQUlBLElBQUFBLEdBQUE0SCxFQUFBLENBQ0EsR0FBQSxLQUFBdkwsRUFBQXdMLFFBQUE3VixRQUlBLE1BSEFpVyxHQUFBLElBU0FqSSxHQUFBOEgsSUFDQUcsRUFBQSxLQUlBNUwsRUFBQXVGLE1BQUEsY0FBQXFHLEdBSUE3VyxFQUFBOFcsZUFBQU4sRUFBQUssR0FDQUUsS0FBQSxTQUFBQyxLQU1BLElBQUFDLElBQ0F2VyxLQUFBOFYsRUFDQTVWLFFBQUFpVyxFQUVBL0wsR0FBQW9NLGNBQUFELEdBQ0FGLEtBQUEsU0FBQUMsUUFzQkEsUUFBQUcsS0FFQSxDQUFBLEdBQUFDLEdBQUFuTSxFQUFBb0QsU0FBQSxLQUVBZ0osRUFBQW5NLEVBQUF5TCxXQUFBQSxTQUFBLGVBRUFVLEdBQUFDLElBQUEsNkJBQUFGLEdBRUEsR0FBQW5NLEVBQUE4RCxtQkFBQSxJQUVBLENBQUFzSSxFQUFBQyxJQUFBLHlCQUFBLGtCQUVBRCxFQUFBQyxJQUFBLGlCQUFBLHNCQUVBLElBQUFyTSxFQUFBOEQsb0JBQUEsS0FBQTlELEVBQUE4RCxtQkFBQSxHQUVBLENBQUFzSSxFQUFBQyxJQUFBLHlCQUFBLGtCQUVBRCxFQUFBQyxJQUFBLGlCQUFBLHNCQUVBLElBQUFyTSxFQUFBOEQsb0JBQUEsSUFBQTlELEVBQUE4RCxtQkFBQSxJQUVBLENBQUFzSSxFQUFBQyxJQUFBLHlCQUFBLGtCQUVBRCxFQUFBQyxJQUFBLGlCQUFBLHNCQUVBLElBQUFyTSxFQUFBOEQsb0JBQUEsS0FBQTlELEVBQUE4RCxtQkFBQSxJQUVBLENBQUFzSSxFQUFBQyxJQUFBLHlCQUFBLGtCQUVBRCxFQUFBQyxJQUFBLGlCQUFBLHNCQUVBLElBQUFyTSxFQUFBOEQsb0JBQUEsS0FBQTlELEVBQUE4RCxtQkFBQSxHQUVBLENBQUFzSSxFQUFBQyxJQUFBLHlCQUFBLGtCQUVBRCxFQUFBQyxJQUFBLGlCQUFBLHNCQUVBLElBQUFyTSxFQUFBOEQsb0JBQUEsSUFBQTlELEVBQUE4RCxtQkFBQSxHQUVBLENBQUFzSSxFQUFBQyxJQUFBLHlCQUFBLGtCQUVBRCxFQUFBQyxJQUFBLGlCQUFBLHNCQUVBLElBQUFyTSxFQUFBOEQsb0JBQUEsSUFBQTlELEVBQUE4RCxtQkFBQSxHQUVBLENBQUFzSSxFQUFBQyxJQUFBLHlCQUFBLGtCQUVBRCxFQUFBQyxJQUFBLGlCQUFBLHNCQUVBLElBQUFyTSxFQUFBOEQsb0JBQUEsSUFBQTlELEVBQUE4RCxtQkFBQSxHQUVBLENBQUFzSSxFQUFBQyxJQUFBLHlCQUFBLGtCQUVBRCxFQUFBQyxJQUFBLGlCQUFBLHNCQUVBLElBQUFyTSxFQUFBOEQsb0JBQUEsSUFBQTlELEVBQUE4RCxtQkFBQSxHQUVBLENBQUFzSSxFQUFBQyxJQUFBLHlCQUFBLGtCQUVBRCxFQUFBQyxJQUFBLGlCQUFBLHNCQUlBLENBQUFELEVBQUFDLElBQUEseUJBQUEsa0JBRUFELEVBQUFDLElBQUEsaUJBQUEsbUJBSUEsUUFBQUMsS0FFQSxHQUFBQyxHQUFBNVYsRUFBQSxnQkFFQTZWLEVBQUFELEVBQUFFLE1BR0FELEdBQUFkLFNBQUEsaUJBQUFXLEtBQUFLLFFBQUEsU0FHQUYsRUFBQWQsU0FBQSxpQkFBQVcsS0FBQUssUUFBQSxTQUdBRixFQUFBZCxTQUFBLGlCQUFBaUIsS0FBQSxPQUFBakIsV0FBQVcsS0FDQU8sYUFBQSxxQ0FDQUMsVUFBQSxJQUNBQyxPQUFBLFFBR0EsUUFBQUMsS0FFQSxHQUFBUixHQUFBNVYsRUFBQSxnQkFFQXFXLEVBQUFULEVBQUFVLE1BVUFELEdBQUFYLEtBQ0FhLFFBQUEsTUFDQUMsTUFBQSxPQUFBQyxJQUFBLFNBM01BcE4sRUFBQXFOLGFBQUEsU0FBQXBMLEdBRUEsTUFBQSxJQUFBQSxFQUNBLDJCQUVBLEdBQUFBLEVBQ0EsNkJBRUEsR0FBQUEsRUFDQSw2QkFHQSwwQkFPQXJOLFFBQUFxTCxRQUFBM0osVUFBQWdYLE1BQUEsV0FFQWhZLEVBQUFnVyxFQUFBLEtBRUFoVyxFQUFBNFcsRUFBQSxJQUVBNVcsRUFBQWdYLEVBQUEsSUFFQWhYLEVBQUF5WCxFQUFBLE1BcUxBLFFBQ0E1QixTQUFBLElBQ0EzTixZQUFBLDBCQUNBdUMsS0FBQUEsTUNqT0FuTCxRQUFBQyxPQUFBLE9DQUFDLFdBQUEsYUFBQSxhQUFBLFNBQUEsWUFBQSxXQUFBLFVBQUEsVUFBQSxZQUFBLFdBQUEsU0FBQUksRUFBQUMsRUFBQUYsRUFBQTRLLEVBQUE3SyxFQUFBSSxFQUFBbVksRUFBQWpZLEdBR0FILEVBQUFvUSxNQUFBLGlCQUFBcFEsRUFBQVMsT0FBQUMsTUFFQVYsRUFBQXVNLFNBR0F2TSxFQUFBa0csSUFBQSxjQUFBLFNBQUFDLEVBQUF6RixHQUNBVixFQUFBcVksaUJBR0FyWSxFQUFBc1ksUUFBQSxXQUVBLElBQUF0WSxFQUFBNk8sUUFFQSxXQURBbE4sU0FBQUMsSUFBQSx1Q0NmQSxJQUdBb0wsR0FIQWpGLEVBQUEvSCxFQUFBZ0ksVUFDQTdGLEVBQUFuQyxFQUFBNEgsYUFHQTJRLEVBQUExWSxFQUFBaUosMEJBQUEzRyxFQUFBcEIsSUFBQW9CLEVBQUFuQixJQUFBaEIsRUFBQWMsYUFBQUMsSUFBQWYsRUFBQWMsYUFBQUUsSUFDQVcsU0FBQUMsSUFBQSxzQ0FBQTJXLEdBRUEsRUFBQUEsR0FDQTVXLFFBQUFDLElBQUEsbUNBQUEsRUFBQTJXLEdBQ0F2TCxHQUFBLElBR0FyTCxRQUFBQyxJQUFBLG1DQUFBLEVBQUEyVyxHQUNBdkwsR0FBQSxFQUdBLElBRUF3TCxHQUZBL1UsRUFBQUMsS0FBQUMsVUFBQXhCLEVBR0EsSUFBQW5DLEVBQUFZLFdBQUFkLEVBQUFlLG1CQUFBLENBQ0EsR0FBQTRYLEdBQUF6WSxFQUFBNk8sUUFBQXJELE1BR0FnTixHQUZBLEVBQUFDLEVBRUEsSUFJQUEsRUFBQTVZLEVBQUFnSyxTQUFBNE8sRUFBQSxFQUFBLEdBQUEsSUFBQSxTQUlBRCxHQUFBeFksRUFBQVksU0FHQThKLEdBQUFnTyxRQUVBbkssS0FBQXZPLEVBQUE2TyxRQUNBMU0sU0FBQXNCLEVBQ0FzRSxNQUFBQSxFQUNBekgsS0FBQU4sRUFBQU0sS0FDQUUsUUFBQVIsRUFBQVEsUUFDQTROLFNBQUFvSyxFQUNBdkwsUUFBQUQsSUFFQTNCLFFBQUEsU0FBQTNLLEdBR0FWLEVBQUE2TyxRQUFBLE9BRUE4SixNQUFBLFNBQUE1UyxFQUFBMkssR0FDQXhMLEtBQUEsY0FBQSxxQ0FBQSxZQ2xEQWxGLEVBQUFxWSxhQUFBLFdDb2dERTNOLEVBQVNVLFFBQ1JDLFFBQVEsU0FBU2tCLEdBQ2pCdk0sRUFBT3VNLE1BQVFBLEtBS2pCdk0sRUFBTzhXLGNBQWdCLFNBQVNWLEVBQVE1VixHQUN2QyxHQUFJcVcsSUFDSHZXLEtBQVU4VixFQUNWNVYsUUFBVUEsRUFHWG1CLFNBQVFDLElBQUksMEJBQTJCaVYsR0FFdkNuTSxFQUFTb00sY0FBY0QsT0FLekJwWCxRQUFRQyxPQUFPLE9BQ2Q4SSxRQUFRLFlBQUEsUUFBWSxTQUFTdEksR0FDN0J3SSxLQUFLMEMsTUFBUSxTQUFTd04sR0FDckIsTUFBTzFZLEdBQU0yWSxJQUFJLGFBQWNELElBR2hDbFEsS0FBS2dRLE9BQVMsU0FBU2hZLEdBQ3RCLE1BQU9SLEdBQU1RLEtBQUssYUFBY0EsSUFHakNnSSxLQUFLNEcsT0FBUyxTQUFTNU8sR0FHdEIsTUFBT1IsR0FBTVEsS0FBSywwQkFBMkJBLElBRzlDZ0ksS0FBS29PLGNBQWdCLFNBQVNELEdBQzdCLE1BQU8zVyxHQUFNUSxLQUFLLDRCQUE2Qm1XLE9BR2pEcFgsUUFBUUMsT0FBTyxPQUNkOEksUUFBUSxjQUFBLFFBQWMsU0FBU3RJLEdBQy9Cd0ksS0FBSzBDLE1BQVEsV0FDWixNQUFPbEwsR0FBTTJZLElBQUksa0JBR2xCblEsS0FBSzNELE1BQVEsU0FBU0QsR0FDckIsTUFBTzVFLEdBQU1RLEtBQUssZ0JBQWlCb0UsSUFHcEM0RCxLQUFLNEcsT0FBUyxTQUFTaFAsR0FHdEIsR0FBSXdFLElBQVd4RSxLQUFNQSxFQUNyQixPQUFPSixHQUFNNFksSUFBSSxnQkFBaUJoVSxJQUduQzRELEtBQUt5QyxvQkFBc0IsU0FBU2hILEVBQWdCQyxFQUFnQkMsRUFBb0IvRCxHQUN2RixHQUFJZ0UsSUFDTUMsT0FBYUosRUFBZXBELElBQzVCeUQsT0FBYUwsRUFBZW5ELElBQzVCeUQsT0FBYUwsRUFBZXJELElBQzVCMkQsT0FBWU4sRUFBZXBELElBQzNCMkQsV0FBYU4sRUFBbUJ0RCxJQUNoQzZELFdBQWFQLEVBQW1CckQsS0FHaEM2RCxFQUFlbkIsS0FBS0MsVUFBVVcsR0FFOUJ5VSxHQUNBelUsU0FBVU8sRUFDVnZFLEtBQVVBLEVBT3BCLE9BSE1xQixTQUFRQyxJQUFJLDJCQUdYMUIsRUFBTVEsS0FBSywrQkFBZ0NxWSxJQUduRHJRLEtBQUtnTyxlQUFpQixTQUFTcFcsRUFBTUUsR0FFcEMsR0FBSXdZLElBQ0gxWSxLQUFTQSxFQUNURSxRQUFTQSxFQU1WLE9BRk1tQixTQUFRQyxJQUFJLHFCQUVYMUIsRUFBTVEsS0FBSyxnQ0FBaUNzWSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG5cdCduZ1JvdXRlJyxcblx0J25nQW5pbWF0ZScsXG5cdCd1aS5zbGlkZXInXG5dKTtcbiIsIlxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24oU2Vzc2lvblN2YywgVXRpbFN2YywgQ29uZmlnU3ZjLCAkcm9vdFNjb3BlLCAkc2NvcGUsICR3aW5kb3csICRodHRwLCAkdGltZW91dCl7XG5cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIElOSVRJQUxcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgLy8gbG9hZCBhbmQgc2V0IGxhdGVzdCBndWlkXG5cdGlmICh3aW5kb3cubG9jYWxTdG9yYWdlLmd1aWQgPT0gJ3VuZGVmaW5lZCcgfHwgXG5cdFx0d2luZG93LmxvY2FsU3RvcmFnZS5ndWlkID09ICdudWxsJyB8fFxuXHRcdCF3aW5kb3cubG9jYWxTdG9yYWdlLmd1aWQpXG5cdHtcblx0XHR3aW5kb3cubG9jYWxTdG9yYWdlLmd1aWQgPSBVdGlsU3ZjLmdldEd1aWQoKTtcblx0fVxuXHQkc2NvcGUuZ3VpZCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ3VpZDtcblxuXHQvLyBsb2FkIGFuZCBzZXQgbGF0ZXN0IGd1aWR0Z3Rcblx0aWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ3VpZHRndCA9PSAndW5kZWZpbmVkJyB8fCBcblx0XHR3aW5kb3cubG9jYWxTdG9yYWdlLmd1aWR0Z3QgPT0gJ251bGwnIHx8XG5cdFx0IXdpbmRvdy5sb2NhbFN0b3JhZ2UuZ3VpZHRndClcblx0e1xuXHRcdHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ3VpZHRndCA9IFwiMFwiO1xuXHR9XG5cdCRzY29wZS5ndWlkdGd0ID0gd2luZG93LmxvY2FsU3RvcmFnZS5ndWlkdGd0OyAvLyBpbnRlcmVzdGVkIG9wcG9uZW50IGd1aWQgbnVtYmVyXG5cblx0JHNjb3BlLnBhZ2VJZCA9IHsgXG5cdFx0cG9zdCA6IDAsXG5cdH07XG5cblx0JHNjb3BlLm5hdkNvbGxhcHNlZCA9IHRydWU7XG5cblx0Ly8gdmFsdWUgZnJvbSB0aW1lIHNsaWRlciBpbiBVSVxuXHQvLyBkZWZhdWx0IGlzIG1heCBpbnN0YW50IGxpZmUgc3BhblxuICAgICRzY29wZS50aW1ldmFsdWUgPSBDb25maWdTdmMubWF4SW5zdGFudExpZmVTcGFuO1xuXG5cblx0Ly8gdXNlcidzIGN1cnJlbnQgbG9jYXRpb24gc3RvcmFnZVxuXHQkc2NvcGUudXNlckxvY2F0aW9uID0ge1xuXHRcdGxhdDogMC4wLFxuXHRcdGxvbjogMC4wXG5cdH07XG5cblx0JHNjb3BlLnRvZ2dsZVNlYXJjaExvY2F0aW9uID0gZmFsc2U7XG5cdCRzY29wZS50b2dnbGVUaW1lU2xpZGVyID0gZmFsc2U7XG5cblx0Ly8gZXZlbnQgaGFuZGVyIGZvciBtYXAgVUlzXG5cdCR0aW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0Ly8gZW5hYmxlcyBlbnRlciBrZXkgdG8gc3VibWl0IHBvc3QgZm9ybVxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtcG9zdGluZycpLm9ua2V5cHJlc3MgPSBmdW5jdGlvbihldmVudCl7XG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiSW5zaWRlIGtleXByZXNzXCIsZXZlbnQud2hpY2gpO1xuXHRcdFx0aWYgKGV2ZW50LndoaWNoID09ICcxMycpe1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKFwiZW50ZXIgcHJlc3NlZFwiKTtcblx0XHRcdFx0JCgnZm9ybSNtYXAtcG9zdGluZy1mb3JtJykuc3VibWl0KCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC1wb3N0aW5nJykub25mb2N1cyA9IGZ1bmN0aW9uKGV2ZW50KXtcblx0XHRcdGNvbnNvbGUubG9nKFwib24gZm9jdXNcIik7XG5cdFx0XHQkc2NvcGUudG9nZ2xlVGltZVNsaWRlciA9IHRydWU7XG5cdFx0fVxuXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC1wb3N0aW5nJykub25ibHVyID0gZnVuY3Rpb24oZXZlbnQpe1xuXHRcdFx0Y29uc29sZS5sb2coXCJvbiBibHVyXCIpO1xuXHRcdFx0JHNjb3BlLnRvZ2dsZVRpbWVTbGlkZXIgPSBmYWxzZTtcblx0XHR9XG5cblx0XHQkKCcubmF2LWJ1cmdlcicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuXHRcdCAgJCgnLm5hdi1idXJnZXInKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG5cdFx0ICAvLyQoJy5jb250cm9scycpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcblx0XHQgICRzY29wZS50b2dnbGVTZWFyY2hMb2NhdGlvbiA9ICEkc2NvcGUudG9nZ2xlU2VhcmNoTG9jYXRpb247XG5cdFx0ICAkc2NvcGUuJGFwcGx5KCk7XG5cdFx0fSk7XG5cblx0fSk7XG5cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIFNPQ0tFVFxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdHZhciB1cmw7XG5cdHZhciBob3N0bmFtZSA9IGRvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lO1xuXG5cdGlmIChob3N0bmFtZSA9PSBDb25maWdTdmMubG9jYWwpe1xuXHRcdHVybCA9IENvbmZpZ1N2Yy53ZWJfc29ja2V0ICsgQ29uZmlnU3ZjLmxvY2FsICsgJzonICsgQ29uZmlnU3ZjLnBvcnQ7XG5cdH1cblx0ZWxzZSBpZiAoaG9zdG5hbWUgPT0gQ29uZmlnU3ZjLmxvY2FsX2lwKSB7XG5cdFx0dXJsID0gQ29uZmlnU3ZjLndlYl9zb2NrZXQgKyBDb25maWdTdmMubG9jYWxfaXAgKyAnOicgKyBDb25maWdTdmMucG9ydDsgLy8gZGV2ZWxvcG1ldCBvbiBzb2NrZXQgbG9jYWxseSBcblx0fVxuXHRlbHNlIHtcblx0XHR1cmwgPSBDb25maWdTdmMud2ViX3NvY2tldF9zZWN1cmUgKyBDb25maWdTdmMuZGVwbG95X2RuczsgLy8gcHJvZHVjdGlvbiBkZXBsb3kgdmVyc2lvbiAtIHN0aWxsIGRlYnVnIG1vZGVcblx0fVxuXG5cdC8qIOqwnOuwnOqzvOygleydtCDrgZ3rgpjqs6Ag67Cw7Y+s7Iuc7JeQ64qUIOychOu2gOu2hOydhCDsp4DsmrDqs6Ag7JWE656YIOy9lOuTnOunjCDrgqjqsqjrj4Qg65Cc64ukLlxuXHR1cmwgPSAnd3NzOi8vZnJvemVuLWJhZGxhbmRzLTg2NDkuaGVyb2t1YXBwLmNvbSc7XG5cdCovXG5cdHZhciBjb25uZWN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0Y29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXQodXJsKTtcblxuXHRcdGNvbm5lY3Rpb24ub25vcGVuID0gZnVuY3Rpb24oKXtcblxuXHRcdFx0Ly8gc2VuZCBndWlkIHRvIHNlcnZlciBmb3Igd3MgaWRlbnRpZmljYXRpb25cblx0XHRcdGNvbm5lY3Rpb24uc2VuZCgkc2NvcGUuZ3VpZCk7XG5cblx0XHRcdGZ1bmN0aW9uIGdldEN1cnJMb2NTdWNjZXNzKHBvcykge1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8vLy8vLy8vLy8vLy8vLy8vIFBIWVNJQ0FMIExPQ0FUSU9OXG5cdFx0XHRcdC8vIOunqOyymOydjOyXkOuKlCDsnKDsoIDsnZgg7Iuk7KCcIOychOy5mCjslbHsl5Ag7J6F7J6l7ZaI7J2E65WM7J2YIOychOy5mCnsmYAg7IS87YSwIO2PrOyngOyFmOydhCDqsJnsnbQg67O064K06rOgLFxuXHRcdFx0XHQvLyDshLzthLAg7Y+s7KeA7IWY7J2AIOqzhOyGjSDsl4XrjbDsnbTtirgg65CY7Ja07JW8IO2VnOuLpC5cblx0ICAgICAgICAgICAgdmFyIGNyZCA9IHBvcy5jb29yZHM7XG5cblx0ICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoY3JkLmxhdGl0dWRlLCBjcmQubG9uZ2l0dWRlKTtcblxuXHQgICAgICAgICAgICAvLyBzYXZlIHRoZSB1c2VyIGxvY2F0aW9uIGludG8gYXBwbGljYXRpb24gc2NvcGUgdmFyaWFibGVcblx0ICAgICAgICAgICAgJHNjb3BlLnVzZXJMb2NhdGlvbiA9IHtcblx0ICAgICAgICAgICAgXHRsYXQ6IGNyZC5sYXRpdHVkZSxcblx0ICAgICAgICAgICAgXHRsb246IGNyZC5sb25naXR1ZGVcblx0ICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSB7XG5cdCAgICAgICAgXHRcdGxhdDpnb29nbGVMb2MubGF0KCksXG5cdCAgICAgICAgXHRcdGxvbjpnb29nbGVMb2MubG5nKClcblx0ICAgICAgICBcdH07XG5cdCAgICAgICAgXHR2YXIgbG9jYXRpb25KU09OID0gSlNPTi5zdHJpbmdpZnkobG9jYXRpb24pO1xuXHQgICAgICAgIFx0Ly9jb25zb2xlLmxvZyhcInNldHRpbmcgbG9jYXRpb25cIiwgbG9jYXRpb25KU09OKTtcblxuXHQgICAgICAgIFx0Ly8vLy8vLy8vLy8vLy8vLy8vIFdBVENIIExPQ0FUSU9OXG5cdCAgICAgICAgXHR2YXIgYm91bmRzID0gJHNjb3BlLm1hcC5nZXRCb3VuZHMoKTtcblx0ICAgICAgICAgICAgdmFyIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIG5vcnRoLWVhc3QgY29ybmVyXG5cdCAgICAgICAgICAgIHZhciBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBzb3V0aC13ZXN0IGNvcmRlclxuXHQgICAgICAgICAgICAvL1lvdSBnZXQgbm9ydGgtd2VzdCBhbmQgc291dGgtZWFzdCBjb3JuZXJzIGZyb20gdGhlIHR3byBhYm92ZTpcblxuXHQgICAgICAgICAgICB2YXIgY3VycmVudF9tYXBfbncgPSB7IFxuXHQgICAgICAgICAgICAgICAgbGF0OiBuZS5sYXQoKSwgXG5cdCAgICAgICAgICAgICAgICBsb246IHN3LmxuZygpXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50X21hcF9zZSA9IHtcblx0ICAgICAgICAgICAgICAgIGxhdDogc3cubGF0KCksIFxuXHQgICAgICAgICAgICAgICAgbG9uOiBuZS5sbmcoKVxuXHQgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50X21hcF9jZW50ZXIgPSB7XG5cdCAgICAgICAgICAgIFx0bGF0OndpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUsXG5cdCAgICAgICAgICAgIFx0bG9uOndpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlXG5cdCAgICAgICAgXHR9O1xuXG5cdCAgICAgICAgICAgIHZhciB3YXRjaGxvYyA9IHtcblx0XHQgICAgICAgICAgICBud19sYXQgICAgOiBjdXJyZW50X21hcF9udy5sYXQsXG5cdFx0ICAgICAgICAgICAgbndfbG9uICAgIDogY3VycmVudF9tYXBfbncubG9uLFxuXHRcdCAgICAgICAgICAgIHNlX2xhdCAgICA6IGN1cnJlbnRfbWFwX3NlLmxhdCxcblx0XHQgICAgICAgICAgICBzZV9sb25cdCAgOiBjdXJyZW50X21hcF9zZS5sb24sXG5cdFx0ICAgICAgICAgICAgY2VudGVyX2xhdDogY3VycmVudF9tYXBfY2VudGVyLmxhdCxcblx0XHQgICAgICAgICAgICBjZW50ZXJfbG9uOiBjdXJyZW50X21hcF9jZW50ZXIubG9uXG5cdFx0ICAgICAgICB9XG5cblx0ICAgICAgICBcdHZhciB3YXRjaGxvY0pTT04gPSBKU09OLnN0cmluZ2lmeSh3YXRjaGxvYyk7XG5cdCAgICAgICAgXHQvL2NvbnNvbGUubG9nKFwic2V0dGluZyB3YXRjaGxvY1wiLCB3YXRjaGxvY0pTT04pO1xuXHQgICAgICAgICAgICBcblx0ICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vIExPQ0FUSU9OIFVQREFURSBXSVRIIFNFU1NJT04gRU5URVJcblx0ICAgICAgICAgICAgLy/sl6zquLDshJwg67mE64+Z6riw7KCB7Jy866GcIOycoOyggOydmCDroZzsvIDsnbTshZjsnYQg7Ja76rOgIOyEuOyFmOydhCDrs7TrgrzsiJgg7J6I64ukLlxuXHRcdFx0XHR2YXIgc2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRndWlkdGd0IDogJHNjb3BlLmd1aWR0Z3QsXG5cdFx0XHRcdFx0Z3VpZCAgICA6ICRzY29wZS5ndWlkLFxuXHRcdFx0XHRcdGxvY2F0aW9uOiBsb2NhdGlvbkpTT04sXG5cdFx0XHRcdFx0d2F0Y2hsb2M6IHdhdGNobG9jSlNPTlxuXHRcdFx0XHR9O1xuXHRcdFx0XHRTZXNzaW9uU3ZjLmVudGVyKHNlc3Npb24pOyAvLyDshJzrsoTsl5DshJwg7Jyg7KCA6rCAIOuTpOyWtOyYtOydhCDslYzrprDri6QuXG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgZnVuY3Rpb24gZ2V0Q3VyckxvY0Vycm9yKGVycikge1xuXHQgICAgICAgIFx0c3dhbChcIlwiLCBcIk5lZWQgdG8gdHVybiBvbiBsb2NhdGlvbiBzZXJ2aWNlIGZvciBwcm9wZXIgdXNlLlwiKTtcblx0ICAgICAgICAgICAgY29uc29sZS53YXJuKCdFUlJPUignICsgZXJyLmNvZGUgKyAnKTogJyArIGVyci5tZXNzYWdlKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICAvKiBpbml0IG1hcCBhbmQgcGxhY2Ugc29tZSBtYXJrZXJzLCBzbyBldmVyeXRoaW5nIHN0YXJ0IHdpdGggdGhpcyBmdW5jdGlvbi4gKi9cblx0ICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGdldEN1cnJMb2NTdWNjZXNzLCBnZXRDdXJyTG9jRXJyb3IpO1xuXG5cdFx0XHRjb25zb2xlLmxvZygnV2ViU29ja2V0IGNvbm5lY3RlZCcpO1xuXHRcdH07XG5cblx0XHRjb25uZWN0aW9uLm9uY2xvc2UgPSBmdW5jdGlvbigpe1xuXG5cdFx0XHRjb25zb2xlLmxvZygnV2ViU29ja2V0IGNsb3NlZC4gUmVjb25lY3RpbmcuLi4nKTtcblx0XHRcdCR0aW1lb3V0KGNvbm5lY3QsIDIwMDApO1xuXHRcdH07XG5cblx0XHRjb25uZWN0aW9uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpe1xuXHRcdFx0Ly9jb25zb2xlLmxvZygnYnJvYWRjYXN0IG1zZyBmcm9tIHNlcnZlcjonLCBlKTtcblx0XHRcdHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZShlLmRhdGEpO1xuXG5cdFx0XHQvKlxuXHRcdFx0XHR3czpuZXdfcG9zdCAgICAtIOyDiOuhnOyatCDtj6zsiqTtirjqsIAg7Jis65287JmU7J2E65WMIGZyb250LWVuZOyXkOyEnCDrp7XsnbQg64uk7IucIOyXheuNsOydtO2KuCDtlbTslbwg65Cc64uk6rOgIOyVjOugpOykgOuLpCFcblx0XHRcdFx0d3M6bmV3X3Nlc3Npb24gLSBzZXNzaW9u7J20IOyDiOuhnCDrk6TslrTsmKTrqbQg65Cc64uk6rOgIOyVjOugpOykgOuLpCFcblx0XHRcdFx0d3M6cmVtb3ZlX3Bvc3QgLSDtj6zsiqTtirjqsIAg7Iuc6rCE7J20IOuLpCDrkJjslrTshJwg7IKs65287KeI65WMIVxuXHRcdFx0XHTrp6TsmrDspJHsmpQhIFxuXHRcdFx0Ki9cblx0XHRcdGNvbnNvbGUubG9nKCd3czonICsgcGF5bG9hZC50eXBlKTtcblx0XHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnd3M6JyArIHBheWxvYWQudHlwZSwgcGF5bG9hZC5kYXRhKTtcblx0XHR9O1xuXHR9O1xuXHRjb25uZWN0KCk7XG5cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBTT0NLRVQgQlJPQURDQVNUIFJFQ0VJVkVSXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gYXMgc2VydmVyIHNvY2tldCBzZW5kICd3czpuZXdfcG9zdCcgLCB3ZSBjYW4gdXBkYXRlIHRoZSBtYXAhXG5cdCRzY29wZS4kb24oJ3dzOm5ld19wb3N0JywgZnVuY3Rpb24oXywgcG9zdCl7XG5cdFx0Ly8gdXBkYXRlIHBvc3RzIG9uIG1hcFxuXHRcdCRzY29wZS5tYXAudXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG5cblx0XHQvLyBzaG93IHJlc3BvbnNpdmUgdXNlcnMgb25seSB0byB0aGUgdXNlciB3aG8gd3JvdGUgdGhpcyBwb3N0XG5cdFx0aWYgKHBvc3QuZ3VpZCA9PSAkc2NvcGUuZ3VpZClcblx0XHR7XG5cdFx0XHQvL2NvbnNvbGUubG9nKCdzdGFydCBkcmF3aW5nIHJlc3BvbnNlcy4uJyk7XG5cdFx0XHQkc2NvcGUubWFwLmRyYXdSZXNwb25zZXMocG9zdCk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBhcyBzZXJ2ZXIgc29ja2V0IHNlbmQgJ3dzOm5ld19wb3N0JyAsIHdlIGNhbiB1cGRhdGUgdGhlIG1hcCFcblx0JHNjb3BlLiRvbignd3M6bmV3X3Nlc3Npb24nLCBmdW5jdGlvbihfLCBzZXNzaW9uKXtcblx0XHR2YXIgbG9jYXRpb24gPSBhbmd1bGFyLmZyb21Kc29uKHNlc3Npb24ubG9jYXRpb24pO1xuXHRcdCRzY29wZS5tYXAuZHJhd0N1cnJMb2NhdGlvbk1hcmtlcihsb2NhdGlvbik7XG5cblx0fSk7XG5cblx0Ly8gd2hlbiBzZXJ2ZXIgcmVtb3ZlIHRoZSBwb3N0IGFmdGVyIHRpbWUgZm9yIGxvbmdlciBvbmVzLCBcblx0Ly8gdXBkYXRlIG1hcCB3aXRoIGNvcmVzcG9uZGluZyBpbmZvXG5cdCRzY29wZS4kb24oJ3dzOnJlbW92ZV9wb3N0JywgZnVuY3Rpb24oXywgcG9zdGlkKXtcblx0XHQkc2NvcGUubWFwLnVuRHJhd1Bvc3QocG9zdGlkKTtcblx0fSk7XG5cblx0JHNjb3BlLiRvbignd3M6dXBkYXRlX2d1aWR0Z3QnLCBmdW5jdGlvbihfLCB1cGRhdGVkU2Vzc2lvbil7XG5cdFx0Ly8gdXBkYXRlIHBvc3RzIG9uIG1hcFxuXHRcdCRzY29wZS5tYXAudXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG5cdH0pO1xuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gQVBQTElDQVRJT04gTEVWRUwgRlVOQ1RJT05TXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gc2VlIGlmIGl0cyBtb2JpbGUgcGhvbmVcblx0JHNjb3BlLmlzTW9iaWxlID0gZnVuY3Rpb24oKXtcblx0XHRpZiggbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZC9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC93ZWJPUy9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmUvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBhZC9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUG9kL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0JsYWNrQmVycnkvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvV2luZG93cyBQaG9uZS9pKVxuXHRcdCApe1xuXHRcdCAgICByZXR1cm4gdHJ1ZTtcblx0XHQgIH1cblx0XHQgZWxzZSB7XG5cdFx0ICAgIHJldHVybiBmYWxzZTtcblx0XHQgIH1cblx0fTtcblxuXHQvKiBtb3ZlIHRvIGN1cnJlbnQgbG9jYXRpb24gKi9cblx0JHNjb3BlLm1vdmVUb0N1cnJlbnRMb2NhdGlvbiA9IGZ1bmN0aW9uKCl7XG5cdFx0ZnVuY3Rpb24gZ2V0Q3VyckxvY1N1Y2Nlc3MocG9zKSB7XG4gICAgICAgICAgICAvKiBtYWtlIHN1cmUgdG8gY2hlY2sgd2UgYXJlIG9uIHBvc3QgcGFnZSB3aXRoIG1hcCBmaXJzdCAqL1xuICAgICAgICAgICAgaWYgKCRzY29wZS5jdXJyZW50UGFnZUlkICE9ICRzY29wZS5wYWdlSWQucG9zdClcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciBjcmQgPSBwb3MuY29vcmRzO1xuXG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxhdGl0dWRlID0gY3JkLmxhdGl0dWRlO1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sb25naXR1ZGUgPSBjcmQubG9uZ2l0dWRlO1xuXG4gICAgICAgICAgICB2YXIgbG9jYXRpb24gPSB7XG4gICAgICAgICAgICBcdGxhdDogY3JkLmxhdGl0dWRlLCBcbiAgICAgICAgICAgIFx0bG9uOiBjcmQubG9uZ2l0dWRlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBkcmF3IGRyb3AgZG93biB1c2VyIHBvc2l0aW9uXG4gICAgICAgICAgIFx0JHNjb3BlLm1hcC5kcmF3Q3VyckxvY2F0aW9uTWFya2VyKGxvY2F0aW9uKTtcblxuICAgICAgICAgICBcdC8vIGRyYXcgeCBtYXJrZXJcblx0ICAgICAgICAkc2NvcGUubWFwLmRyYXdYTWFya2VyKGxvY2F0aW9uKTtcblxuXHQgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG9uKTtcblxuXHQgICAgICAgIC8vIG1vdmUgdG8gdGhlIGxvY2F0aW9uIGFuZCB6b29tIGludG8gcmlnaHQgYW1vdW50XG4gICAgICAgICAgICAkc2NvcGUubWFwLnBhblRvKGdvb2dsZUxvYylcbiAgICAgICAgICAgICRzY29wZS5tYXAuc2V0Wm9vbSgxNSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRDdXJyTG9jRXJyb3IoZXJyKSB7XG4gICAgICAgIFx0c3dhbChcIlwiLCBcIk5lZWQgdG8gdHVybiBvbiBsb2NhdGlvbiBzZXJ2aWNlIGZvciBwcm9wZXIgdXNlLlwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRVJST1IoJyArIGVyci5jb2RlICsgJyk6ICcgKyBlcnIubWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBpbml0IG1hcCBhbmQgcGxhY2Ugc29tZSBtYXJrZXJzLCBzbyBldmVyeXRoaW5nIHN0YXJ0IHdpdGggdGhpcyBmdW5jdGlvbi4gKi9cbiAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihnZXRDdXJyTG9jU3VjY2VzcywgZ2V0Q3VyckxvY0Vycm9yKTtcblxuICAgICAgICBzd2FsKHsgICB0aXRsZTogXCJcIiwgICB0ZXh0OiBcIk1vdmluZyB0byBjdXJyZW50IGxvY2F0aW9uLi5cIiwgICB0aW1lcjogMTUwMCwgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UgfSk7XG5cdH07XG5cblx0JHNjb3BlLm1vdmVUb1Bvc3RMb2NhdGlvbiA9IGZ1bmN0aW9uKCl7XG5cdFx0dmFyIGxhdERlbHRhID0gMC4wO1xuXG5cdFx0aWYgKCRzY29wZS5pc01vYmlsZSgpKXtcblx0XHRcdHZhciBib3VuZHMgPSAkc2NvcGUubWFwLmdldEJvdW5kcygpO1xuXHQgICAgICAgIHZhciBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBub3J0aC1lYXN0IGNvcm5lclxuXHQgICAgICAgIHZhciBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBzb3V0aC13ZXN0IGNvcmRlclxuXHQgICAgICAgIGN1cnJlbnRfbWFwX253ID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhuZS5sYXQoKSwgc3cubG5nKCkpO1xuXHQgICAgICAgIGN1cnJlbnRfbWFwX3NlID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhzdy5sYXQoKSwgbmUubG5nKCkpO1xuXG5cdCAgICAgICAgdmFyIGxhdERlbHRhX2NlbnRlcjJub3J0aCA9IDAuNSAqIE1hdGguYWJzKCRzY29wZS5wb3N0TG9jYXRpb24ubGF0IC0gY3VycmVudF9tYXBfbncubGF0KCkpO1xuXHQgICAgICAgIHZhciBsYXREZWx0YV9jZW50ZXIyc291dGggPSAwLjUgKiBNYXRoLmFicygkc2NvcGUucG9zdExvY2F0aW9uLmxhdCAtIGN1cnJlbnRfbWFwX3NlLmxhdCgpKTtcblxuXHQgICAgICAgIGlmIChsYXREZWx0YV9jZW50ZXIybm9ydGggPiBsYXREZWx0YV9jZW50ZXIyc291dGgpe1xuXHQgICAgICAgIFx0bGF0RGVsdGEgPSBsYXREZWx0YV9jZW50ZXIyc291dGg7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgIFx0bGF0RGVsdGEgPSBsYXREZWx0YV9jZW50ZXIybm9ydGg7XG5cdCAgICAgICAgfVxuXHRcdH1cblxuXHRcdHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKCRzY29wZS5wb3N0TG9jYXRpb24ubGF0ICsgbGF0RGVsdGEsICRzY29wZS5wb3N0TG9jYXRpb24ubG9uKTtcblx0XHQkc2NvcGUubWFwLnBhblRvKGdvb2dsZUxvYyk7XG5cdH07XG5cblx0JHNjb3BlLmNvbGxhcHNlID0gZnVuY3Rpb24oKXtcblx0XHQkc2NvcGUubmF2Q29sbGFwc2VkID0gdHJ1ZTtcblx0fTtcblxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIEdFTkVSQUwgQlJPQURDQVNUIFJFQ0VJVkVSXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAkc2NvcGUuJG9uKCdzZXQ6bWFwJywgZnVuY3Rpb24oXywgbWFwKXtcblx0XHQkc2NvcGUubWFwID0gbWFwO1xuXHR9KTtcblxuICAgICRzY29wZS4kb24oJ3NldDpndWlkdGd0JywgZnVuY3Rpb24oXywgZ3VpZHRndCl7XG5cdFx0JHNjb3BlLmd1aWR0Z3QgPSBndWlkdGd0O1xuXG5cdFx0Ly8gaXRzIHZlcnkgaW1wb3JhbnQgdG8gc2V0IGxvY2FsIHN0b3JhZ2UgZ3VpZHRndFxuXHRcdHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ3VpZHRndCA9IGd1aWR0Z3Q7XG5cdH0pO1xuXG5cdCRzY29wZS4kb24oJ3NldDpwYWdlY2hhbmdlJywgZnVuY3Rpb24oXywgcGFnZUlkKXtcblx0XHQkc2NvcGUuY3VycmVudFBhZ2VJZCA9IHBhZ2VJZDtcblx0fSk7XG5cblx0JHNjb3BlLiRvbignc2V0OmxvYycsIGZ1bmN0aW9uKF8sIGxvY2F0aW9uKXtcblx0XHR2YXIgbGF0ID0gbG9jYXRpb24ubGF0KCk7XG5cdFx0dmFyIGxvbiA9IGxvY2F0aW9uLmxuZygpO1xuXHRcdCRzY29wZS5wb3N0TG9jYXRpb24gPSB7XG5cdFx0XHRsYXQ6IGxhdCxcblx0XHRcdGxvbjogbG9uXG5cdFx0fTtcblx0fSk7XG5cblx0JHNjb3BlLiRvbignc2V0OnBsYWNlJywgZnVuY3Rpb24oXywgcGxhY2Upe1xuXHRcdC8vIEZvcmNpbmcgdGhlIHVwZGF0ZSB3aXRoICRhcHBseSgpIG1ldGhvZCBvbiAkc2NvcGVcblx0XHQvLyBwcm9ibGVtIHJlbGF0ZWQgbm90ZTogaHR0cDovL3d3dy5qZWZmcnlob3VzZXIuY29tL2luZGV4LmNmbS8yMDE0LzYvMi9Ib3ctZG8tSS1ydW4tY29kZS13aGVuLWEtdmFyaWFibGUtY2hhbmdlcy13aXRoLUFuZ3VsYXJKU1xuXHRcdCRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcblx0XHRcdFx0JHNjb3BlLnBvc3RwbGFjZSA9IHBsYWNlO1xuXHRcdFx0fVxuXHRcdCk7XG5cdH0pO1xufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29uc3RhbnQoJ0NvbmZpZ1N2YycsIHtcblx0XCJ3ZWJfc29ja2V0XCJcdFx0OiBcIndzOi8vXCIsXG5cdFwid2ViX3NvY2tldF9zZWN1cmVcIiA6IFwid3NzOi8vXCIsXG5cdFwibG9jYWxcIlx0XHRcdFx0OiBcImxvY2FsaG9zdFwiLFxuXHRcImxvY2FsX2lwXCJcdFx0XHQ6IFwiMTkyLjE2OC4wLjRcIixcblx0XCJkZXBsb3lfZG5zXCJcdFx0OiBcImNsb3VkdGFsay5oZXJva3VhcHAuY29tXCIsXG5cdFwicG9ydFwiXHRcdFx0XHQ6IFwiNTAwMFwiLFxuXHRcIm1heEluc3RhbnRMaWZlU3BhblwiOiA1MDAwLFxufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKXtcblx0JHJvdXRlUHJvdmlkZXJcblx0LndoZW4oJy8nLCBcblx0XHR7XG5cdFx0XHRjb250cm9sbGVyOiAnUG9zdHNDdHJsJywgXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvcG9zdHMuaHRtbCdcblx0XHR9KVxuXHQvLyBSZWRpcmVjdCB0byB0aGUgcm9vdCBwYWdlLlxuXHQub3RoZXJ3aXNlKFxuXHRcdHtcbiAgIFx0XHRcdHJlZGlyZWN0VG86ICcvJ1xuXHRcdH0pO1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdVdGlsU3ZjJywgZnVuY3Rpb24oKXtcblx0dmFyIHN2YyA9IHRoaXM7XG5cblx0c3ZjLmRlZzJyYWQgPSBmdW5jdGlvbihkZWcpIHtcblx0ICByZXR1cm4gZGVnICogKE1hdGguUEkvMTgwKTtcblx0fTtcblxuXHRzdmMuZ2V0RGlzdGFuY2VGcm9tTGF0TG9uSW5LbSA9IGZ1bmN0aW9uIChsYXQxLGxvbjEsbGF0Mixsb24yKSB7XG5cdCAgdmFyIFIgPSA2MzcxO1xuXHQgIHZhciBkTGF0ID0gc3ZjLmRlZzJyYWQobGF0Mi1sYXQxKTtcblx0ICB2YXIgZExvbiA9IHN2Yy5kZWcycmFkKGxvbjItbG9uMSk7IFxuXHQgIHZhciBhID0gXG5cdCAgICBNYXRoLnNpbihkTGF0LzIpICogTWF0aC5zaW4oZExhdC8yKSArXG5cdCAgICBNYXRoLmNvcyhzdmMuZGVnMnJhZChsYXQxKSkgKiBNYXRoLmNvcyhzdmMuZGVnMnJhZChsYXQyKSkgKiBcblx0ICAgIE1hdGguc2luKGRMb24vMikgKiBNYXRoLnNpbihkTG9uLzIpXG5cdCAgICA7IFxuXHQgIHZhciBjID0gMiAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMS1hKSk7IFxuXHQgIHZhciBkID0gUiAqIGM7XG5cdCAgcmV0dXJuIGQ7XG5cdH07XG5cblx0c3ZjLm1hcFJhbmdlID0gZnVuY3Rpb24gKHZhbHVlLCBsb3cxLCBoaWdoMSwgbG93MiwgaGlnaDIpIHtcblx0ICAgIHJldHVybiBsb3cyICsgKGhpZ2gyIC0gbG93MikgKiAodmFsdWUgLSBsb3cxKSAvIChoaWdoMSAtIGxvdzEpO1xuXHR9O1xuXG5cdHN2Yy5nZXRHdWlkID0gZnVuY3Rpb24gKCkge1xuXHRcdGZ1bmN0aW9uIHM0KCkge1xuXHRcdCAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcblx0XHQgICAgICAudG9TdHJpbmcoMTYpXG5cdFx0ICAgICAgLnN1YnN0cmluZygxKTtcblx0XHR9XG5cdCAgXHRyZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgczQoKSArIHM0KCk7XG5cdH07XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSwgJHRpbWVvdXQsIFNlc3Npb25TdmMpe1xuXG5cbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmRpcmVjdGl2ZSgnYXBwTWFwJywgZnVuY3Rpb24oUG9zdHNTdmMsIFV0aWxTdmMsIENvbmZpZ1N2YywgU2Vzc2lvblN2YywgJGNvbXBpbGUsICR0aW1lb3V0KSB7XG4gICAgLy8gZGlyZWN0aXZlIGxpbmsgZnVuY3Rpb25cbiAgICB2YXIgbGluayA9IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEdMT0JBTCBWQVJJQUJMRVMgSU4gTElOSyBGVU5DVElPTlxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICB2YXIgbWFwOyAvLyBleHBhbmQgZnJvbSBnb29nbGUgbWFwIGZvciBtYW51YWxseSBjcmVhdGVkIGV2ZW50c1xuICAgICAgICB2YXIgbWFwX29yaWdpbjsgLy8gZm9yIG9yaWdpbmFsIGdvb2dsZSBtYXAgZXZlbnQgZnVuY3Rpb24gbGlua3NcbiAgICAgICAgdmFyIGN1cnJlbnRfbWFwX253O1xuICAgICAgICB2YXIgY3VycmVudF9tYXBfc2U7XG4gICAgICAgIHZhciBtYXBPcHRpb25zO1xuICAgICAgICB2YXIgaW5pdGlhbE1hcENlbnRlcjtcbiAgICAgICAgdmFyIENMT1VEX01BUF9JRCA9ICdjdXN0b21fc3R5bGUnOyAvLyBtYXAgc3R5bGVcbiAgICAgICAgdmFyIGhlbHBlck1hcmtlcnMgPSBbXTtcbiAgICAgICAgdmFyIG1hcmtlcnNPbk1hcCA9IFtdO1xuXG4gICAgICAgIHZhciBwcmV2R3VpZHRndCA9ICcwJztcbiAgICAgICAgdmFyIGlzR3VpZHRndENoYW5nZWQ7XG5cbiAgICAgICAgdmFyIGltYWdlUG9zdCA9IHtcbiAgICAgICAgICAgIC8vdXJsOiAnaHR0cHM6Ly9jYXRjaG1lLmlmeW91Y2FuLmNvbS9pbWFnZXMvcGljdHVyZXMvSVlDX0ljb25zL0lZQ19Mb2NhdGlvbl9JY29uX1NtYWxsLnBuZycsXG4gICAgICAgICAgICB1cmw6ICdEZWZhdWx0X01hcmtlci5wbmcnLFxuICAgICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTAwLCAxMDApLFxuICAgICAgICAgICAgb3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgxNywgMzQpLFxuICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMSwgMSlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGltYWdlVGFyZ2V0ID0ge1xuICAgICAgICAgICAgLy91cmw6ICdodHRwOi8vd3d3LmNsa2VyLmNvbS9jbGlwYXJ0cy9VL1Avai9NL0kvaS94LW1hcmsteWVsbG93LW1kLnBuZycsXG4gICAgICAgICAgICB1cmw6ICdYX01hcmtlci5wbmcnLFxuICAgICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTAwLCAxMDApLFxuICAgICAgICAgICAgb3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgxNywgMzQpLFxuICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMjUsIDI1KVxuICAgICAgICB9O1xuICAgICAgICB2YXIgaW1hZ2VVc2VyTG9naW4gPSB7XG4gICAgICAgICAgICAvL3VybDogJ2h0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzL3Evby8yL0svZy9WL2xvY2F0aW9uLXN5bWJvbC1tYXAtbWQucG5nJyxcbiAgICAgICAgICAgIHVybDogJ0N1cnJlbnRfTG9jYXRpb25fTWFya2VyLnBuZycsXG4gICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICBvcmlnaW46IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDE3LCAzNCksXG4gICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgyMCwgMzMpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBpbWFnZUxpc3RlbmVyID0ge1xuICAgICAgICAgICAgLy91cmw6ICdodHRwOi8vMi5icC5ibG9nc3BvdC5jb20vLWRqTWFfbjVuQUVNL1QxR3Z4Xy03LXpJL0FBQUFBQUFBQVE0Ly0xTjZsbGVRdlpjL3MxNjAwL2JsaW5raW5nX2RvdC5naWYnLFxuICAgICAgICAgICAgdXJsOiAnQmxpbmsuZ2lmJyxcbiAgICAgICAgICAgIHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEwMCwgMTAwKSxcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTAsIDEwKSxcbiAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDE3LCAxNylcbiAgICAgICAgfTtcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFVkVOVCBIQU5ETEVSUyAtIFVQREFURVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVEZWZhdWx0TG9jYXRpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxhdGl0dWRlID0gbWFwLmdldENlbnRlcigpLmxhdCgpO1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sb25naXR1ZGUgPSBtYXAuZ2V0Q2VudGVyKCkubG5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVCb3VuZHMoKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gbWFwLmdldEJvdW5kcygpO1xuICAgICAgICAgICAgdmFyIG5lID0gYm91bmRzLmdldE5vcnRoRWFzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIG5vcnRoLWVhc3QgY29ybmVyXG4gICAgICAgICAgICB2YXIgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCk7IC8vIExhdExuZyBvZiB0aGUgc291dGgtd2VzdCBjb3JkZXJcbiAgICAgICAgICAgIC8vWW91IGdldCBub3J0aC13ZXN0IGFuZCBzb3V0aC1lYXN0IGNvcm5lcnMgZnJvbSB0aGUgdHdvIGFib3ZlOlxuXG4gICAgICAgICAgICBjdXJyZW50X21hcF9udyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobmUubGF0KCksIHN3LmxuZygpKTtcbiAgICAgICAgICAgIGN1cnJlbnRfbWFwX3NlID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhzdy5sYXQoKSwgbmUubG5nKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlV2F0Y2hMb2NhdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBtYXAuZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICB2YXIgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7IC8vIExhdExuZyBvZiB0aGUgbm9ydGgtZWFzdCBjb3JuZXJcbiAgICAgICAgICAgIHZhciBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBzb3V0aC13ZXN0IGNvcmRlclxuICAgICAgICAgICAgLy9Zb3UgZ2V0IG5vcnRoLXdlc3QgYW5kIHNvdXRoLWVhc3QgY29ybmVycyBmcm9tIHRoZSB0d28gYWJvdmU6XG5cbiAgICAgICAgICAgIGN1cnJlbnRfbWFwX253ID0geyBcbiAgICAgICAgICAgICAgICBsYXQ6IG5lLmxhdCgpLCBcbiAgICAgICAgICAgICAgICBsb246IHN3LmxuZygpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY3VycmVudF9tYXBfc2UgPSB7XG4gICAgICAgICAgICAgICAgbGF0OiBzdy5sYXQoKSwgXG4gICAgICAgICAgICAgICAgbG9uOiBuZS5sbmcoKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGN1cnJlbnRfbWFwX2NlbnRlciA7XG5cbiAgICAgICAgICAgIC8vIHNlZSBpZiB0aGUgbGF0ZXN0IHggbWFya2VyIG9yIHBvc3QgbG9jYXRpb24gaXMgd2l0aGluIHVzZXIncyB2aWV3XG4gICAgICAgICAgICBpZiAoIShzY29wZS5wb3N0TG9jYXRpb24ubGF0IDwgY3VycmVudF9tYXBfbncubGF0KSB8fFxuICAgICAgICAgICAgICAgICEoc2NvcGUucG9zdExvY2F0aW9uLmxhdCA+IGN1cnJlbnRfbWFwX3NlLmxhdCkgfHxcbiAgICAgICAgICAgICAgICAhKHNjb3BlLnBvc3RMb2NhdGlvbi5sb24gPCBjdXJyZW50X21hcF9zZS5sb24pIHx8XG4gICAgICAgICAgICAgICAgIShzY29wZS5wb3N0TG9jYXRpb24ubG9uID4gY3VycmVudF9tYXBfbncubG9uKSApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gaWYgaXQgaXMgbm90IHdpdGhpbiB1c2VyJ3MgdmlldywgdGhlbiBqdXN0IHVzZSBtYXAgY2VudGVyXG4gICAgICAgICAgICAgICAgY3VycmVudF9tYXBfY2VudGVyID0ge1xuICAgICAgICAgICAgICAgICAgICBsYXQ6IG1hcC5nZXRDZW50ZXIoKS5sYXQoKSxcbiAgICAgICAgICAgICAgICAgICAgbG9uOiBtYXAuZ2V0Q2VudGVyKCkubG5nKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIGlmIGl0IGlzIHdpdGhpbiB1c2VyJ3MgdmlldywgdXNlIHggbWFya2VyIGxvY2F0aW9uIGEuay5hIHBvc3QgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBjdXJyZW50X21hcF9jZW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIGxhdDogc2NvcGUucG9zdExvY2F0aW9uLmxhdCxcbiAgICAgICAgICAgICAgICAgICAgbG9uOiBzY29wZS5wb3N0TG9jYXRpb24ubG9uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFNlc3Npb25TdmMudXBkYXRlV2F0Y2hMb2NhdGlvbihjdXJyZW50X21hcF9udywgY3VycmVudF9tYXBfc2UsIGN1cnJlbnRfbWFwX2NlbnRlciwgc2NvcGUuZ3VpZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFVkVOVCBIQU5ETEVSUyAtIERSQVdcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gdXBkYXRlIHJlc3BvbnNlcyBzdWNoIGFzIHZpc3VhbGl6YXRpb24gb2YgbGlzdGVuZXJzXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdSZXNwb25zZXMocG9zdCl7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdyZWZlcmVuY2UgcG9zdDonLCBwb3N0KTtcblxuICAgICAgICAgICAgU2Vzc2lvblN2Yy5mZXRjaCgpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihzZXNzaW9ucyl7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlc3Npb25zLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlc3Npb24gPSBzZXNzaW9uc1tpXTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBza2lwIG15IHNlc3Npb24gLSBubyBuZWVkIHRvIGRyYXcg64K0IOyekOyLoOydmCDshLjshZjsnYAg6re466a07ZWE7JqU6rCAIOyXhuuLpC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlc3Npb24uZ3VpZCA9PSBzY29wZS5ndWlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgIC8vIHNlc3Npb24ncyB3YXRjaCBsb2NhdGlvbiB3aWxsIGJlIGJvdW5jZWQhXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Nlc3Npb24gd2F0Y2ggbG9jYXRpb246Jywgc2Vzc2lvbi53YXRjaGxvYyk7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Bvc3QgbG9jYXRpb246JywgcG9zdC5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHZhciB3YXRjaF9sb2NhdGlvbiA9IGFuZ3VsYXIuZnJvbUpzb24oc2Vzc2lvbi53YXRjaGxvYyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3N0X2xvY2F0aW9uICA9IGFuZ3VsYXIuZnJvbUpzb24ocG9zdC5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyDsnKDsoIDqsIAg67O06rOgIOyeiOuKlCDrsJTsmrTrjZTrpqwg7JWI7JeQIOq3uCBzZXNzaW9uKOuLpOuluOycoOyggCkg7LK07YKBXG5cbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhjdXJyZW50X21hcF9zZSwgY3VycmVudF9tYXBfbncpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEod2F0Y2hfbG9jYXRpb24uY2VudGVyX2xhdCA8IGN1cnJlbnRfbWFwX253LmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgISh3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbGF0ID4gY3VycmVudF9tYXBfc2UubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKHdhdGNoX2xvY2F0aW9uLmNlbnRlcl9sb24gPCBjdXJyZW50X21hcF9zZS5sbmcoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEod2F0Y2hfbG9jYXRpb24uY2VudGVyX2xvbiA+IGN1cnJlbnRfbWFwX253LmxuZygpKSApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2Vzc2lvbijri6TrpbjsnKDsoIAp65Ok7J20IOq3uCDtj6zsiqTtirjrpbwg67O06rOgIOyeiOyngCDslYrsnLzrqbQg7Iqk7YK1LlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShwb3N0X2xvY2F0aW9uLmxhdCA8IHdhdGNoX2xvY2F0aW9uLm53X2xhdCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEocG9zdF9sb2NhdGlvbi5sYXQgPiB3YXRjaF9sb2NhdGlvbi5zZV9sYXQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKHBvc3RfbG9jYXRpb24ubG9uIDwgd2F0Y2hfbG9jYXRpb24uc2VfbG9uKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShwb3N0X2xvY2F0aW9uLmxvbiA+IHdhdGNoX2xvY2F0aW9uLm53X2xvbikgKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyh3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbGF0LCB3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbG9uKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBtYXJrZXIgb3B0aW9uIHNldHRpbmdcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlTG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkJPVU5DRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlVzZXJQaW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlTGlzdGVuZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWl6ZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIobWFya2VyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJfbG9jYXRpb25fbWFya2VyX2xpZmVzcGFuID0gMTgwMDtcblxuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbihvbGRfbWFya2VyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkX21hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0obWFya2VyKSksIFxuICAgICAgICAgICAgICAgICAgICB1c2VyX2xvY2F0aW9uX21hcmtlcl9saWZlc3Bhbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVBbmREcmF3UG9zdHMoKXtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gZm9yIGNoZWNraW5nIGxvY2FsIHBvc3RzIC0gaXNQb2ludGluZ1lvdVxuICAgICAgICAgICAgaXNHdWlkdGd0Q2hhbmdlZCA9IHByZXZHdWlkdGd0ICE9IHNjb3BlLmd1aWR0Z3Q7IC8vIHNlZSBpZiBteSBndWlkdGd0IGhhcyBjaGFuZ2VkO1xuICAgICAgICAgICAgcHJldkd1aWR0Z3QgPSBzY29wZS5ndWlkdGd0OyAvLyB1cGRhdGUgcHJldmlvdXMgZ3VpZHRndFxuXG4gICAgICAgICAgICAvL3ZhciBndWlkT2JqID0ge2d1aWQ6IHNjb3BlLmd1aWR9IC8vIGZvciBzb2NrZXQgZmV0Y2ggb3B0aW1pemF0aW9uIFRPRE9cbiAgICAgICAgICAgIFBvc3RzU3ZjLmZldGNoKClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHBvc3RzKXtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zdHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zdCA9IHBvc3RzW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gU1RBUlQgLSBDSEVDSyBJRiBJVFMgV0lUSElOIFZJRVcgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBhbmd1bGFyLmZyb21Kc29uKHBvc3QubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XG5cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGdvb2dsZUxvYy5sYXQoKSA8IGN1cnJlbnRfbWFwX253LmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShnb29nbGVMb2MubGF0KCkgPiBjdXJyZW50X21hcF9zZS5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxuZygpIDwgY3VycmVudF9tYXBfc2UubG5nKCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA+IGN1cnJlbnRfbWFwX253LmxuZygpKSApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBza2lwIHRoaXMgcG9zdCAtIG5vIG5lZWQgdG8gZHJhd1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRU5EIC0gQ0hFQ0sgSUYgSVRTIFdJVEhJTiBWSUVXIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gU1RBUlQgLSBDSEVDSyBXRSBIQVZFIFRPIFJFRFJBVyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBtYXJrZXJzIHBvc3QgaXMgZXhpc2l0aW5nIG9uZSwgd2UgZG9uJ3Qgd2FudCB0byBkcmF3IGl0IGFnYWluLlxuICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGRyYXcgbmV3IG9uZXMhXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNPbk1hcFtqXTsgaisrKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy/snbTrtoDrtoQg66Gc7KeB7J2EIOuLpOyLnCDsp5zslbztlahcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0FscmVhZHlEcmF3biA9IHBvc3QuX2lkID09IG1hcmtlci5wb3N0Ll9pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0FscmVhZHlEcmF3bikgLy8g7J2066+4IOq3uOugpOyhjOuKlOyngCDthYzsiqTtirhcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNHdWlkdGd0Q2hhbmdlZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuRHJhd1Bvc3QocG9zdC5faWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hcmtlci5wb3N0Lmd1aWR0Z3QgPT0gcG9zdC5ndWlkdGd0KXsgIC8vIOydtOuvuCDqt7jroKTsp4TqsoPspJEsIGd1aWR0Z3TsnbQg67CU64CM7JeI64qU6rCAXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QgPSBudWxsOyAvLyDsnbTrr7gg6re466Ck7KeEIO2PrOyKpO2KuOudvOuptCwgbnVsbOuhnC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIOydtCBsb29w7J2AIHBvc3QuX2lk66eMIOqygOyCrOyaqeyehOycvOuhnCwg66eM7JW9IOqyuey5mOuptCDrsJTroZwgbG9vcOydhCDrqYjstrDrj4Qg6rSc7LCu64ukLn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bkRyYXdQb3N0KHBvc3QuX2lkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3QgPT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gc2tpcCB0aGlzIHBvc3QgLSBubyBuZWVkIHRvIGRyYXdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEVORCAtIENIRUNLIFdFIEhBVkUgVE8gUkVEUkFXIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gU1RBUlQgLSBEUkFXSU5HIFBPU1QgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgICAgICAgICAvLyBtYXJrZXIgb3B0aW9uIHNldHRpbmdcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZ29vZ2xlTG9jLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJCdWJibGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlUG9zdFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcihtYXJrZXJPcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIG1hcmtlciB0byBhcnJheSwgdGhpcyBtZWFucyB0aGF0IGl0IGhhcyBiZWVuIGRyYXduIHRvIG1hcFxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJzT25NYXAucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXI6IG1hcmtlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0ICA6IHBvc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gU1RBUlQgLSBEUkFXSU5HIE1FU1NBR0UgV0lORE9XIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdXBsaW5nX3N0YXR1cyA9IGNhbGN1bGF0ZUNvdXBsaW5nKHBvc3QuZ3VpZCwgcG9zdC5ndWlkdGd0KTtcblxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwicG9zdC5pc0xvY2FsXCIsIHBvc3QuaXNsb2NhbCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbF9zdGF0dXMgPSBwb3N0LmlzbG9jYWw7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g7Iqk7L2U7ZSE7JeQ7ISc67aA7YSwIOyDiOuhnOyatCDssKjsnbzrk5wg7Iqk7L2U7ZSE66W8IOunjOuTpOyWtCBlYWNoIGZvciBsb29w7JeQ7IScIOyCrOyaqe2VnOuLpC5cbiAgICAgICAgICAgICAgICAgICAgLy8gLS0+IO2VtOyVvCwg6rCBIERPTeydtCDqsIHqsIHsnZggc2NvcGXrpbwg6rCA7KC47IScIHBvc3QgbXNn6rCAIOyViCDqsrnsuZzri6QuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBzY29wZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gcGFyZW50LiRuZXcodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wZW5JbmZvV2luZG93ID0gKGZ1bmN0aW9uKG1hcmtlciwgY2hpbGRfc2NvcGUsIHBvc3QsIGNvdXBsaW5nX3N0YXR1cywgbG9jYWxfc3RhdHVzKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyB3aW5kb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mb1dpbmRvd09wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpeGVsT2Zmc2V0OiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgtMzkuNSwgMTYuMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVBdXRvUGFuOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KGluZm9XaW5kb3dPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBjdXJyZW50IHRpbWUgYW5kIHN1YnRyYWN0IGl0IGZyb20gcG9zdCdzIGVuZCB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgd2lsbCBiZSBhY2N1cmF0ZSBwb3N0IHRpbWUgZm9yIGluc3RhbnQgcG9zdHMgYW5kIGxvbmcgcG9zdHMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlICAgICAgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VGltZU1pbGxpID0gY3VycmVudERhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3N0bGlmZSAgICAgICAgID0gKChwb3N0LmxpZmVlbmQgLSBjdXJyZW50VGltZU1pbGxpKSA+PSAwKSA/IChwb3N0LmxpZmVlbmQgLSBjdXJyZW50VGltZU1pbGxpKSA6IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlmZXBlcmNlbnRhZ2UgPSAocG9zdGxpZmUgLyBwb3N0LmxpZmVzcGFuKS50b0ZpeGVkKDIpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvIG1ha2UgZGF0YSBhdmFpbGFibGUgdG8gdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5tc2cgICAgICAgICAgICAgICAgPSBwb3N0LmJvZHk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGxpZmUgICAgICAgICAgID0gcG9zdGxpZmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGd1aWQgICAgICAgICAgID0gcG9zdC5ndWlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3RndWlkdGd0ICAgICAgICA9IHBvc3QuZ3VpZHRndDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0Y291cGxlc3RhdHVzICAgPSBjb3VwbGluZ19zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID0gbGlmZXBlcmNlbnRhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGxvY2Fsc3RhdHVzICAgID0gbG9jYWxfc3RhdHVzO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGVuYWJsZXMgY2hhbmdpbmcgY291cGxpbmcgdmFsdWUgaW5zdGFudGx5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLiRvbignc2V0OmNvdXBsaW5nJywgZnVuY3Rpb24oXywgY291cGxpbmdfdXBkYXRlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGNvdXBsZXN0YXR1cyA9IGNvdXBsaW5nX3VwZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcGlsZSBpdCBiZWZvcmUgbG9hZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgID0gJzxkaXYgbWFwLW1zZz48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21waWxlZCA9ICRjb21waWxlKGNvbnRlbnQpKGNoaWxkX3Njb3BlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9XaW5kb3cuc2V0Q29udGVudCggY29tcGlsZWRbMF0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKGluZm9XaW5kb3csJ2Nsb3NlY2xpY2snLGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3N0Lmd1aWQgPT0gc2NvcGUuZ3VpZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3YWwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiQXJlIHlvdSBzdXJlP1wiLCAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiWW91IHdpbGwgbm90IGJlIGFibGUgdG8gcmVjb3ZlciB0aGlzIGltYWdpbmFyeSBmaWxlIVwiLCAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwid2FybmluZ1wiLCAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiBcIiNERDZCNTVcIiwgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogXCJZZXMsIGRlbGV0ZSBpdCFcIiwgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGlzQ29uZmlybSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ29uZmlybSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvc3RzU3ZjLnJlbW92ZShwb3N0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dhbChcIkRlbGV0ZWQhXCIsIFwiWW91ciBpbWFnaW5hcnkgZmlsZSBoYXMgYmVlbiBkZWxldGVkLlwiLCBcInN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlICAgICAgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFRpbWVNaWxsaSA9IGN1cnJlbnREYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlICAgICAgICAgPSAoKHBvc3QubGlmZWVuZCAtIGN1cnJlbnRUaW1lTWlsbGkpID49IDApID8gKHBvc3QubGlmZWVuZCAtIGN1cnJlbnRUaW1lTWlsbGkpIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpZmVwZXJjZW50YWdlID0gKHBvc3RsaWZlIC8gcG9zdC5saWZlc3BhbikudG9GaXhlZCgyKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWZlcGVyY2VudGFnZSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID0gbGlmZXBlcmNlbnRhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvV2luZG93Lm9wZW4obWFwICwgbWFya2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9XaW5kb3cub3BlbihtYXAgLCBtYXJrZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSkobWFya2VyLCBjaGlsZCwgcG9zdCwgY291cGxpbmdfc3RhdHVzLCBsb2NhbF9zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgb3BlbkluZm9XaW5kb3coKTtcbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFTkQgLSBEUkFXSU5HIE1FU1NBR0UgV0lORE9XIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEVORCAtIERSQVdJTkcgUE9TVCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgICAgICAgICB9IC8vIGVuZCBvZiBmb3ItbG9vcFxuICAgICAgICAgICAgfSk7IC8vIGVuZCBvZiBwb3N0IGZldGNoIHN1Y2Nlc3NcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdEcm9wRG93bihsb2NhdGlvbilcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobG9jYXRpb24ubGF0LCBsb2NhdGlvbi5sb24pO1xuXG4gICAgICAgICAgICB1cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgIC8vIOuwlOyatOuNlOumrCDslYjsl5Ag7J6I64qU7KeA67aA7YSwIOyytO2BrOulvCDtlZjsnqVcbiAgICAgICAgICAgIGlmICghKGdvb2dsZUxvYy5sYXQoKSA8IGN1cnJlbnRfbWFwX253LmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxhdCgpID4gY3VycmVudF9tYXBfc2UubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgIShnb29nbGVMb2MubG5nKCkgPCBjdXJyZW50X21hcF9zZS5sbmcoKSkgfHxcbiAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA+IGN1cnJlbnRfbWFwX253LmxuZygpKSApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBza2lwIHRoaXMgcG9zdCAtIG5vIG5lZWQgdG8gZHJhd1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBtYXJrZXIgb3B0aW9uIHNldHRpbmdcbiAgICAgICAgICAgIHZhciBtYXJrZXJPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGVMb2MsXG4gICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uRFJPUCxcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJVc2VyUGluXCIsXG4gICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VVc2VyTG9naW5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG1hcmtlck9wdGlvbnMpO1xuXG4gICAgICAgICAgICAkdGltZW91dChcbiAgICAgICAgICAgICAgICAoZnVuY3Rpb24ob2xkX21hcmtlcil7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgb2xkX21hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfShtYXJrZXIpKSwgXG4gICAgICAgICAgICAyMDAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVuRHJhd1Bvc3QocG9zdGlkKVxuICAgICAgICB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwic3RhcnRpbmcgcmVtb3ZlIHBvc3RcIik7XG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMCwgbWFya2VyOyBtYXJrZXIgPSBtYXJrZXJzT25NYXBba107IGsrKykge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocG9zdGlkKTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKG1hcmtlci5wb3N0Ll9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKHBvc3RpZCA9PSBtYXJrZXIucG9zdC5faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyLm1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcnNPbk1hcC5zcGxpY2UoaywgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdBbmRTZXRQbGFjZShsb2NhdGlvbilcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGdvb2dsZUxvYyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobG9jYXRpb24ubGF0LCBsb2NhdGlvbi5sb24pO1xuICAgICAgICAgICAgZHJhd0hlbHBlck1hcmtlcihnb29nbGVMb2MpO1xuICAgICAgICAgICAgc2V0UGxhY2UoZ29vZ2xlTG9jKTtcblxuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHNlcnZlciBnZXRzIHVwZGF0ZWQgd2hlbmV2ZXIgc2V0dGluZyBuZXcgcGxhY2Ugd2l0aCBtYXJrZXJcbiAgICAgICAgICAgIHVwZGF0ZVdhdGNoTG9jYXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRyYXcgbWFwIHdpdGggaGVscGVyIG1hcmtlcnNcbiAgICAgICAgZnVuY3Rpb24gZHJhd0hlbHBlck1hcmtlcihsb2NhdGlvbil7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWFya2VyOyBtYXJrZXIgPSBoZWxwZXJNYXJrZXJzW2ldOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVscGVyTWFya2VycyA9IFtdO1xuICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBsb2NhdGlvbiwgXG4gICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VUYXJnZXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaGVscGVyTWFya2Vycy5wdXNoKG1hcmtlcik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1bkRyYXdIZWxwZXJNYXJrZXIoKXtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IGhlbHBlck1hcmtlcnNbaV07IGkrKykge1xuICAgICAgICAgICAgICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWxwZXJNYXJrZXJzID0gW107XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIFVUSUxcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gc2V0UGxhY2UobG9jYXRpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIGJyb2FkY2FzdCBsb2NhdGlvbiBpbmZvcihsb24sbGF0KVxuICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3NldDpsb2MnLCBsb2NhdGlvbik7XG5cbiAgICAgICAgICAgIHZhciBnZW9jb2RlciA9IG5ldyBnb29nbGUubWFwcy5HZW9jb2RlcigpO1xuXG4gICAgICAgICAgICAvLyBicm9hZGNhc3QgcGxhY2UgZm9ybWF0dGVkX2FkZHJlc3MgYW5kIGRyYXcgaWNvblxuICAgICAgICAgICAgZ2VvY29kZXIuZ2VvY29kZSggeyAnbGF0TG5nJzogbG9jYXRpb24gfSwgZnVuY3Rpb24ocmVzdWx0cywgc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgLy8gYXMgdXNlciBjbGlja3Mgb24gdGhlIG1hcCxcbiAgICAgICAgICAgICAgICAvLyB3ZSBoYXZlIHRvIHNhdmUgdGhlIGZvcm1hdHRlZCBhZGRyZXNzIGluICRzY29wZSBhbmRcbiAgICAgICAgICAgICAgICAvLyBpdCB3aWxsIGJlIHVzZWQgdGhyb3VnaCBwb3N0cy5jdHJsXG4gICAgICAgICAgICAgICAgLy8gZW1pdCBicm9hZGNhc2UgJ3BsYWNlJyBhbmQgc2VuZCB0aGlzIHRvIGFwcGxpY2F0aW9uLmN0cmxcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBicm9hZGNhc3QgZm9ybWF0dGVkX2FkZHJlc3NcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3NldDpwbGFjZScsIHJlc3VsdHNbMV0uZm9ybWF0dGVkX2FkZHJlc3MpOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2goZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHN3YWwoXCJcIixcIkxvY2F0aW9uIGRvZXMgbm90IGV4aXN0c1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3NldDpwbGFjZScsIFwiTG9jYXRpb24gZG9lcyBub3QgZXhpc3RzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlQ291cGxpbmcocG9zdF9ndWlkLCBwb3N0X2d1aWR0Z3QpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8qIGNvdXBsaW5nIHN0YXR1c1xuICAgICAgICAgICAgICAgIDAgLSBubyBzdGF0dXNcbiAgICAgICAgICAgICAgICAxIC0gaSBsaWtlIHlvdVxuICAgICAgICAgICAgICAgIDIgLSB5b3UgbGlrZSBpXG4gICAgICAgICAgICAgICAgNCAtIHdlIGxpa2UgZWFjaCBvdGhlciAvLyBkaXNhYmxlZC5cbiAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIHZhciBpc1BvaW50aW5nWW91ICAgICA9IHNjb3BlLmd1aWR0Z3QgPT0gcG9zdF9ndWlkO1xuICAgICAgICAgICAgdmFyIGlzUG9pbnRpbmdNZSAgICAgID0gc2NvcGUuZ3VpZCAgICA9PSBwb3N0X2d1aWR0Z3Q7XG4gICAgICAgICAgICB2YXIgaXNNeVBvc3QgICAgICAgICAgPSBzY29wZS5ndWlkICAgID09IHBvc3RfZ3VpZDtcbiAgICAgICAgICAgIHZhciBpc1BvaW50aW5nU29tZW9uZSA9IHNjb3BlLmd1aWR0Z3QgIT0gJzAnO1xuXG4gICAgICAgICAgICBpZiAoaXNNeVBvc3QgJiYgaXNQb2ludGluZ1NvbWVvbmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDI7IC8vIGZvciBteSB2aWV3J3MgbXkgcG9zdCB0byBiZSBcIkkgbGlrZSBzb21lb25lXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUG9pbnRpbmdZb3UgJiYgaXNQb2ludGluZ01lKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiA0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNQb2ludGluZ1lvdSAmJiAhaXNQb2ludGluZ01lKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzUG9pbnRpbmdZb3UgJiYgaXNQb2ludGluZ01lKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gVUlcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgZnVuY3Rpb24gc2V0VUlTZWFyY2hMb2NhdGlvblRvZ2dsZSgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBtYXBTZWFyY2hUb2dnbGUgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC1zZWFyY2gtdG9nZ2xlJykpO1xuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5UT1BfTEVGVF0ucHVzaChtYXBTZWFyY2hUb2dnbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VUlNb3ZlVG9DdXJyTG9jQnRuKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGN1cnJMb2NCdG4gPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC1idG4tY3VycicpKTsgXG4gICAgICAgICAgICBtYXAuY29udHJvbHNbZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLlRPUF9SSUdIVF0ucHVzaChjdXJyTG9jQnRuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJUG9zdEZvcm0oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcG9zdEZvcm0gPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC1wb3N0aW5nJykpOyBcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0NFTlRFUl0ucHVzaChwb3N0Rm9ybSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVBvc3RCdG4oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcG9zdEJ0biA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLWJ0bi1zdWJtaXQnKSk7XG4gICAgICAgICAgICBtYXAuY29udHJvbHNbZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLkJPVFRPTV9DRU5URVJdLnB1c2gocG9zdEJ0bik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVRpbWVTbGlkZXIoKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgdGltZVNsaWRlciA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLXRpbWUtc2xpZGVyJykpO1xuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5CT1RUT01fQ0VOVEVSXS5wdXNoKHRpbWVTbGlkZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VUlTZWFyY2hCb3goKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHNlYXJjaCBib3ggYW5kIGxpbmsgaXQgdG8gdGhlIFVJIGVsZW1lbnQuXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhYy1pbnB1dCcpKTsgLy8gQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9ICBcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uVE9QX0xFRlRdLnB1c2goaW5wdXQpO1xuXG4gICAgICAgICAgICB2YXIgc2VhcmNoQm94ID0gbmV3IGdvb2dsZS5tYXBzLnBsYWNlcy5TZWFyY2hCb3goKGlucHV0KSk7IC8vIEB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSBcblxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciB0aGUgZXZlbnQgZmlyZWQgd2hlbiB0aGUgdXNlciBzZWxlY3RzIGFuIGl0ZW0gZnJvbSB0aGVcbiAgICAgICAgICAgIC8vIHBpY2sgbGlzdC4gUmV0cmlldmUgdGhlIG1hdGNoaW5nIHBsYWNlcyBmb3IgdGhhdCBpdGVtLlxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIoc2VhcmNoQm94LCAncGxhY2VzX2NoYW5nZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGxhY2VzID0gc2VhcmNoQm94LmdldFBsYWNlcygpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHRha2Ugb25seSAxIHNwb3RcbiAgICAgICAgICAgICAgICB2YXIgcGxhY2UgPSBwbGFjZXNbMF07XG5cbiAgICAgICAgICAgICAgICAvLyB3aGVuIHNlYXJjaCBoYXBwZW5zLCBsb2NhdGlvbiB3aWxsIGJlIHVwZGF0ZWQgYXMgd2VsbCBmb3IgcG9zdFxuICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQoKSxcbiAgICAgICAgICAgICAgICAgICAgbG9uOiBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZHJhd0FuZFNldFBsYWNlKGxvY2F0aW9uKTtcblxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUgPSBwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbi5sYXRpdHVkZTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSA9IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxvbmdpdHVkZTtcblxuICAgICAgICAgICAgICAgIG1hcC5wYW5UbyhwbGFjZS5nZW9tZXRyeS5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgbWFwLnNldFpvb20oMTYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFVkVOVFxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudENsaWNrKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gY2xpY2sgZXZlbnQgb24gbWFwIHRvIGRyYXcgWCBtYXJrZXIgYW5kIHNldCBQb3N0IGxvY2F0aW9uXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBldmVudC5sYXRMbmcubGF0KCksXG4gICAgICAgICAgICAgICAgICAgIGxvbjogZXZlbnQubGF0TG5nLmxuZygpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkcmF3QW5kU2V0UGxhY2UobG9jYXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudENlbnRlckNoYW5nZWQoKVxuICAgICAgICB7XG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnY2VudGVyX2NoYW5nZWQnLCBmdW5jdGlvbigpeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyB3aGVuIG1hcCBjZW50ZXIgY2hhbmdlLCB1cGRhdGUgbGFzdCBsb2NhdGlvbiBpbiBtZW1vcnksXG4gICAgICAgICAgICAgICAgLy8gc28gYnJvd3NlciB3aWxsIHJlbWVtYmVyIGl0IG5leHQgdGltZSB5b3UgY29tZSFcbiAgICAgICAgICAgICAgICB1cGRhdGVEZWZhdWx0TG9jYXRpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0RXZlbnRCb3VuZHNDaGFuZ2VkKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ2JvdW5kc19jaGFuZ2VkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIG1hcCBjZW50ZXIgY2hhbmdlLCB1cGRhdGUgYm91bmRzIGluZm8gZm9yIG1hcFxuICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpOyAgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50RHJhZ0VuZCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcF9vcmlnaW4sICdkcmFnZW5kJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbWFwIGFzIGRyYWcgZW5kXG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICB1cGRhdGVXYXRjaExvY2F0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50UmVzaXplKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ3Jlc2l6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG1hcCBhcyBkcmFnIGVuZFxuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHdhdGNobG9jIHdoZW4gY2VudGVyIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudFpvb21DaGFuZ2VkKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ3pvb21fY2hhbmdlZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG1hcCBhcyBkcmFnIGVuZFxuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHdhdGNobG9jIHdoZW4gY2VudGVyIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBTRVRVUCBGT1IgTUFQXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIG1hcCBpbml0aWFsIGNvbmZpZ3NcbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbE1hcERhdGEoKXtcbiAgICAgICAgICAgIGluaXRpYWxNYXBDZW50ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKDM0LjA1LCAtMTE4LjI0KTtcbiAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWlzTmFOKHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUpICYmICFpc05hTih3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbE1hcENlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcod2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSwgd2luZG93LmxvY2FsU3RvcmFnZS5sb25naXR1ZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRQbGFjZShpbml0aWFsTWFwQ2VudGVyKTtcblxuICAgICAgICAgICAgbWFwT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyICAgICAgOiBpbml0aWFsTWFwQ2VudGVyLFxuICAgICAgICAgICAgICAgICAgICB6b29tICAgICAgICA6IDE1LFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGx3aGVlbCA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHN0cmVldFZpZXdDb250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBwYW5Db250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgem9vbUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlQ29udHJvbE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICBtYXBUeXBlSWRzOiBbZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVAsIENMT1VEX01BUF9JRF1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUlkOiBDTE9VRF9NQVBfSURcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRNYW51YWxFdmVudHMoKXtcbiAgICAgICAgICAgIGZ1bmN0aW9uIENsb3VkTWFwKG9wdGlvbnMpe1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiSW5pdGlhbGl6aW5nIG1hcFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaW5zdGFudGlhdGUgZ29vZ2xlIG1hcFxuICAgICAgICAgICAgbWFwX29yaWdpbiA9IG5ldyBnb29nbGUubWFwcy5NYXAoZWxlbWVudFswXSwgbWFwT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIC8vIHNldCBwcm90b3R5cGUgb2YgY3VzdG9tIG1hcCB3aXRoIG9yaWdpbiBtYXBcbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZSA9IG1hcF9vcmlnaW47XG5cbiAgICAgICAgICAgIC8vIGRyYXcgeCBtYXJrZXJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZURyYXdYTWFya2VyKGxvY2F0aW9uKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICdkcmF3WE1hcmtlcicsIGxvY2F0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS5kcmF3WE1hcmtlciA9IGhhbmRsZURyYXdYTWFya2VyO1xuXG4gICAgICAgICAgICAvLyBkcmF3IGN1cnJlbnQgbG9jYXRpb24gbWFya2VyXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVEcmF3Q3VyckxvY2F0aW9uTWFya2VyKGxvY2F0aW9uKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICdkcmF3Q3VyckxvY2F0aW9uTWFya2VyJywgbG9jYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLmRyYXdDdXJyTG9jYXRpb25NYXJrZXIgPSBoYW5kbGVEcmF3Q3VyckxvY2F0aW9uTWFya2VyO1xuXG4gICAgICAgICAgICAvLyBkcmF3IHBvc3RzXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVVcGRhdGVBbmREcmF3UG9zdHMoKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICd1cGRhdGVBbmREcmF3UG9zdHMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS51cGRhdGVBbmREcmF3UG9zdHMgPSBoYW5kbGVVcGRhdGVBbmREcmF3UG9zdHM7XG5cbiAgICAgICAgICAgIC8vIGRyYXcgcmVzcG9uc2VzXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVEcmF3UmVzcG9uc2VzKHBvc3Qpe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ2RyYXdSZXNwb25zZXMnLCBwb3N0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS5kcmF3UmVzcG9uc2VzID0gaGFuZGxlRHJhd1Jlc3BvbnNlcztcblxuICAgICAgICAgICAgLy8gdW5kcmF3IHBvc3RzXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVVbkRyYXdQb3N0KHBvc3RpZCl7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCAndW5EcmF3UG9zdCcsIHBvc3RpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUudW5EcmF3UG9zdCA9IGhhbmRsZVVuRHJhd1Bvc3Q7XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBjdXN0b20gbWFwIGZvciBhcHBcbiAgICAgICAgICAgIG1hcCA9IG5ldyBDbG91ZE1hcCgpO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICdkcmF3WE1hcmtlcicsIGZ1bmN0aW9uKGxvY2F0aW9uKXtcbiAgICAgICAgICAgICAgICBkcmF3QW5kU2V0UGxhY2UobG9jYXRpb24pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ2RyYXdDdXJyTG9jYXRpb25NYXJrZXInLCBmdW5jdGlvbihsb2NhdGlvbil7XG4gICAgICAgICAgICAgICAgZHJhd0Ryb3BEb3duKGxvY2F0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXAsICd1cGRhdGVBbmREcmF3UG9zdHMnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ2RyYXdSZXNwb25zZXMnLCBmdW5jdGlvbihwb3N0KXtcbiAgICAgICAgICAgICAgICBkcmF3UmVzcG9uc2VzKHBvc3QpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ3VuRHJhd1Bvc3QnLCBmdW5jdGlvbihwb3N0aWQpe1xuICAgICAgICAgICAgICAgIHVuRHJhd1Bvc3QocG9zdGlkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0U3R5bGVGb3JNYXAoKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyDquZTrgZTsnbQgXG4gICAgICAgICAgICAvL3ZhciBmZWF0dXJlT3B0cyA9IFt7XCJmZWF0dXJlVHlwZVwiOlwiYWRtaW5pc3RyYXRpdmVcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMudGV4dC5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjNjE5NWEwXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2YyZjJmMlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmZmZmZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLnBhcmtcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZTZmM2Q2XCJ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjQ1fSx7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmNGQyYzVcIn0se1widmlzaWJpbGl0eVwiOlwic2ltcGxpZmllZFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMudGV4dFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzRlNGU0ZVwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2Y0ZjRmNFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLnRleHQuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzc4Nzg3OFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLmljb25cIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInRyYW5zaXRcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZWFmNmY4XCJ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2VhZjZmOFwifV19XTtcbiAgICAgICAgICAgIC8vIOyDge2BvOydtFxuICAgICAgICAgICAgLy92YXIgZmVhdHVyZU9wdHMgPSBbe1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZS5tYW5fbWFkZVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjdmMWRmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZS5uYXR1cmFsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNkMGUzYjRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlLm5hdHVyYWwudGVycmFpblwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2lcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5idXNpbmVzc1wiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLm1lZGljYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZiZDNkYVwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kucGFya1wiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjYmRlNmFiXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5zdHJva2VcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmZmUxNWZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuc3Ryb2tlXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZWZkMTUxXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmZmZmZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQubG9jYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCJibGFja1wifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ0cmFuc2l0LnN0YXRpb24uYWlycG9ydFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNjZmIyZGJcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2EyZGFmMlwifV19XTtcbiAgICAgICAgICAgIC8vIOuYkeuYkeydtFxuICAgICAgICAgICAgdmFyIGZlYXR1cmVPcHRzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM3ZmM4ZWRcIn0se1wic2F0dXJhdGlvblwiOjU1fSx7XCJsaWdodG5lc3NcIjotNn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHNcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjN2ZjOGVkXCJ9LHtcInNhdHVyYXRpb25cIjo1NX0se1wibGlnaHRuZXNzXCI6LTZ9LHtcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kucGFya1wiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzgzY2VhZFwifSx7XCJzYXR1cmF0aW9uXCI6MX0se1wibGlnaHRuZXNzXCI6LTE1fSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmM2Y0ZjRcIn0se1wic2F0dXJhdGlvblwiOi04NH0se1wibGlnaHRuZXNzXCI6NTl9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmZmZmZmZcIn0se1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjEwMH0se1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWRcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmZmZmZmZcIn0se1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjEwMH0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNiYmJiYmJcIn0se1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjI2fSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZmZjYzAwXCJ9LHtcInNhdHVyYXRpb25cIjoxMDB9LHtcImxpZ2h0bmVzc1wiOi0zNX0se1widmlzaWJpbGl0eVwiOlwic2ltcGxpZmllZFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmZmNjMDBcIn0se1wic2F0dXJhdGlvblwiOjEwMH0se1wibGlnaHRuZXNzXCI6LTIyfSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kuc2Nob29sXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2Q3ZTRlNFwifSx7XCJzYXR1cmF0aW9uXCI6LTYwfSx7XCJsaWdodG5lc3NcIjoyM30se1widmlzaWJpbGl0eVwiOlwib25cIn1dfV07XG4gICAgICAgICAgICAvLyDstIjroZ3snbRcbiAgICAgICAgICAgIC8vdmFyIGZlYXR1cmVPcHRzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjRkZBODAwXCJ9LHtcInNhdHVyYXRpb25cIjowfSx7XCJsaWdodG5lc3NcIjowfSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM1M0ZGMDBcIn0se1wic2F0dXJhdGlvblwiOi03M30se1wibGlnaHRuZXNzXCI6NDB9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNGQkZGMDBcIn0se1wic2F0dXJhdGlvblwiOjB9LHtcImxpZ2h0bmVzc1wiOjB9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5sb2NhbFwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiMwMEZGRkRcIn0se1wic2F0dXJhdGlvblwiOjB9LHtcImxpZ2h0bmVzc1wiOjMwfSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzAwQkZGRlwifSx7XCJzYXR1cmF0aW9uXCI6Nn0se1wibGlnaHRuZXNzXCI6OH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2lcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjNjc5NzE0XCJ9LHtcInNhdHVyYXRpb25cIjozMy40fSx7XCJsaWdodG5lc3NcIjotMjUuNH0se1wiZ2FtbWFcIjoxfV19XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHN0eWxlZE1hcE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ0N1c3RvbSBTdHlsZSdcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGN1c3RvbU1hcFR5cGUgPSBuZXcgZ29vZ2xlLm1hcHMuU3R5bGVkTWFwVHlwZShmZWF0dXJlT3B0cywgc3R5bGVkTWFwT3B0aW9ucyk7XG4gICAgICAgICAgICBtYXAubWFwVHlwZXMuc2V0KENMT1VEX01BUF9JRCwgY3VzdG9tTWFwVHlwZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpbml0IHRoZSBtYXBcbiAgICAgICAgZnVuY3Rpb24gaW5pdE1hcCgpIHtcbiAgICAgICAgICAgIGlmIChtYXAgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIGluaXRpYWxNYXBEYXRhKCk7XG5cbiAgICAgICAgICAgICAgICBzZXRNYW51YWxFdmVudHMoKTtcblxuICAgICAgICAgICAgICAgIHNldFN0eWxlRm9yTWFwKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGJyb2FkY2FzdCB0byBzZW5kIG1hcCB0byBhcHBsaWNhdGlvbiBjdHJsXG4gICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0Om1hcCcsIG1hcCk7XG5cbiAgICAgICAgICAgIC8vIGFkZCBVSSBlbGVtZW50cyB0byBtYXBcbiAgICAgICAgICAgIHNldFVJU2VhcmNoTG9jYXRpb25Ub2dnbGUoKTtcbiAgICAgICAgICAgIHNldFVJU2VhcmNoQm94KCk7XG4gICAgICAgICAgICBzZXRVSU1vdmVUb0N1cnJMb2NCdG4oKTtcbiAgICAgICAgICAgIHNldFVJUG9zdEZvcm0oKTtcbiAgICAgICAgICAgIHNldFVJUG9zdEJ0bigpO1xuICAgICAgICAgICAgc2V0VUlUaW1lU2xpZGVyKCk7XG5cbiAgICAgICAgICAgIC8vIGFkZCBvcmlnaW4gbmF0aXZlIEV2ZW50IGhhbmRsZXJzIHRvIG1hcFxuICAgICAgICAgICAgc2V0RXZlbnRDbGljaygpO1xuICAgICAgICAgICAgc2V0RXZlbnRDZW50ZXJDaGFuZ2VkKCk7XG4gICAgICAgICAgICBzZXRFdmVudERyYWdFbmQoKTtcbiAgICAgICAgICAgIHNldEV2ZW50UmVzaXplKCk7XG4gICAgICAgICAgICBzZXRFdmVudFpvb21DaGFuZ2VkKCk7XG4gICAgICAgICAgICBzZXRFdmVudEJvdW5kc0NoYW5nZWQoKTtcblxuICAgICAgICAgICAgLy8gdXBkYXRlIHZlcnkgZmlyc3QgdGltZSBmb3IgYXBwXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHVwZGF0ZURlZmF1bHRMb2NhdGlvbigpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVdhdGNoTG9jYXRpb24oKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVBbmREcmF3UG9zdHMoKTtcbiAgICAgICAgICAgIH0sIDgwMCk7XG4gICAgICAgIH0gXG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gRVhFQ1VURVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBpbml0TWFwKCk7XG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgaWQ9XCJtYXAtY2FudmFzXCI+PC9kaXY+JyxcbiAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgbGluazogbGlua1xuICAgIH07XG59KTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZGlyZWN0aXZlKCdtYXBNc2cnLCBmdW5jdGlvbiAoJHRpbWVvdXQsIFNlc3Npb25TdmMsIFBvc3RzU3ZjKSB7XG5cbiAgICB2YXIgbGluayA9IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykgeyAgICAgICAgXG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gQ09VUExJTkcgQ0xBU1NcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLyogY291cGxpbmcgc3RhdHVzXG4gICAgICAgICAgMCAtIG5vIHN0YXR1c1xuICAgICAgICAgIDEgLSBpIGxpa2UgeW91XG4gICAgICAgICAgMiAtIHlvdSBsaWtlIGlcbiAgICAgICAgICA0IC0gd2UgbGlrZSBlYWNoIG90aGVyXG4gICAgICAgICovXG4gICAgICAgIHNjb3BlLmdldF9jb3VwbGluZyA9IGZ1bmN0aW9uKGNvdXBsaW5nX3N0YXR1cyl7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGNvdXBsaW5nX3N0YXR1cyA9PSA0KXtcbiAgICAgICAgICAgIHJldHVybiBcImNvdXBsaW5nIGNvdXBsaW5nLWNvdXBsZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChjb3VwbGluZ19zdGF0dXMgPT0gMSl7XG4gICAgICAgICAgICByZXR1cm4gXCJjb3VwbGluZyBjb3VwbGluZy1pbGlrZXlvdVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChjb3VwbGluZ19zdGF0dXMgPT0gMil7XG4gICAgICAgICAgICByZXR1cm4gXCJjb3VwbGluZyBjb3VwbGluZy15b3VsaWtlaVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcImNvdXBsaW5nIGNvdXBsaW5nLW5vbmVcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gRE9DVU1FTlQgUkVBRFlcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuICAgICAgICAgICR0aW1lb3V0KHVwZGF0ZUd1aWRUYXJnZXQsIDEwMCk7XG5cbiAgICAgICAgICAkdGltZW91dCh1cGRhdGVQb3N0VGltZXIsIDEwKTtcblxuICAgICAgICAgICR0aW1lb3V0KGN1c3RvbWl6ZUluZm9XaW5kb3csIDEwKTtcblxuICAgICAgICAgICR0aW1lb3V0KGN1c3RvbWl6ZUNsb3NlQnRuLCAxMCk7XG5cbiAgICAgICAgICAvL2NvbnNvbGUubG9nKFwicG9zdCBsb2NhbCBzdGF0dXM6XCIsIHNjb3BlLnBvc3Rsb2NhbHN0YXR1cyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUd1aWRUYXJnZXQoKXtcbiAgICAgICAgICAvLyB1cGRhdGUgc3RhdHVzIGZvciBndWlkIHRhcmdldFxuICAgICAgICAgIHZhciBwb3N0Z3VpZCAgPSBzY29wZS5wb3N0Z3VpZDtcbiAgICAgICAgICB2YXIgbXlndWlkICAgID0gc2NvcGUuJHBhcmVudC5ndWlkO1xuICAgICAgICAgIHZhciBteWd1aWR0Z3QgPSBzY29wZS4kcGFyZW50Lmd1aWR0Z3Q7XG5cbiAgICAgICAgICBlbGVtZW50LmNoaWxkcmVuKCkub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICB2YXIgdXBkYXRlX2d1aWR0Z3QgPSBwb3N0Z3VpZDtcblxuICAgICAgICAgICAgLy8gY2xpY2tpbmcgbXkgbWVzc2FnZSB3aW5kb3dcbiAgICAgICAgICAgIC8vIGlmIGl0cyBvbiBjb3VwbGluZywgYnJlYWsgaXQhXG4gICAgICAgICAgICBpZiAocG9zdGd1aWQgPT0gbXlndWlkKXtcbiAgICAgICAgICAgICAgaWYgKHNjb3BlLiRwYXJlbnQuZ3VpZHRndCAhPSAnMCcpe1xuICAgICAgICAgICAgICAgIHVwZGF0ZV9ndWlkdGd0ID0gJzAnOyBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY2xpa2luZyB0aGUgb25lIHRoYXQgSSBsaWtlZFxuICAgICAgICAgICAgLy8gdG8gZGlzbGlrZSB0aGUgbWVzc2FnZSB3aW5kb3dcbiAgICAgICAgICAgIGlmIChwb3N0Z3VpZCA9PSBteWd1aWR0Z3QpIHtcbiAgICAgICAgICAgICAgdXBkYXRlX2d1aWR0Z3QgPSAnMCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHByb3BhZ2F0ZSB0byB1cHBlciBzY29wZSBmb3IgZ3VpZHRndCB1cGRhdGVcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdzZXQ6Z3VpZHRndCcsIHVwZGF0ZV9ndWlkdGd0KTsgXG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSBzZXNzaW9uIGluZm9ybWF0aW9uIG9mIG1pbmUgc28gbXkgc2Vzc2lvbiB0ZWxscyBtZSB0aGF0LFxuICAgICAgICAgICAgLy8gSSBsaWtlIHRoaXMgZ3VpZCBhdCB0aGlzIG1vbWVudCBpbiBzZXJ2ZXIgZGJcbiAgICAgICAgICAgIFNlc3Npb25TdmMudXBkYXRlQ291cGxpbmcobXlndWlkLCB1cGRhdGVfZ3VpZHRndClcbiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZG9jKXtcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJTdWNjZXNzZnVsbHkgdWRwYXRlZCBjb3VwbGluZ1wiLCBkb2MpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyB1cGRhdGUgbXkgcG9zdCdzIGd1aWR0Z3QgdG8gYmUgdGhpcyBwb3N0J3MgZ3VpZCBpbiBzZXJ2ZXIgZGJcbiAgICAgICAgICAgIC8vIHRoaXMgdXBkYXRlIGlzIGZvciB0aGUgcGVvcGxlIHdobyBhcmUgbG9va2luZyBhdCBteSBwb3N0c1xuICAgICAgICAgICAgdmFyIHVwZGF0ZXMgPSB7XG4gICAgICAgICAgICAgIGd1aWQgICAgOiBteWd1aWQsXG4gICAgICAgICAgICAgIGd1aWR0Z3QgOiB1cGRhdGVfZ3VpZHRndFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFBvc3RzU3ZjLnVwZGF0ZUd1aWR0Z3QodXBkYXRlcylcbiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZG9jKXtcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJTdWNjZXNzZnVsbHkgdWRwYXRlZCBwb3N0J3MgZ3VpZHRndFwiLCBkb2MpO1xuICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgY291cGxpbmcgdXBkYXRlLCBtYXAgaGFzIHRvIGJlIHVwZGF0ZXMgYXMgd2VsbFxuICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgLy8gTUlHSFQgSEFWRSBUTyBDT01FIEJBQ0sgRk9SIE9QVElNSVpBVElPTlxuICAgICAgICAgICAgLy8gdGhpcyBoYXZlIHRvIGJlIHVwZGF0ZSB0byBiZSBjb21tdW5pY2F0ZWQgdGhyb3VnaCB0aGUgc2VydmVyXG4gICAgICAgICAgICBpZiAoc2NvcGUuJHBhcmVudC5ndWlkdGd0ID09IDApe1xuICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0OmNvdXBsaW5nJywgMSk7IC8vIHByb3BhZ2F0ZSB0byB1cHBlciBzY29wZSBmb3IgY291cGxpbmcgdXBkYXRlXG4gICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpOyAvLyBmb3JjZSB0byB1cGRhdGUgRE9NXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZS5wb3N0Y291cGxlc3RhdHVzID09IDEgJiYgc2NvcGUuJHBhcmVudC5ndWlkdGd0ICE9IDApe1xuICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0OmNvdXBsaW5nJywgMCk7IC8vIHByb3BhZ2F0ZSB0byB1cHBlciBzY29wZSBmb3IgY291cGxpbmcgdXBkYXRlXG4gICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpOyAvLyBmb3JjZSB0byB1cGRhdGUgRE9NXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgXG5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBvc3RUaW1lcigpe1xuICAgICAgICAgIC8vY29uc29sZS5sb2coXCJMaWZlICU6XCIsIHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSk7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBzY29wZS5wb3N0bGlmZSArIFwibXNcIjtcblxuICAgICAgICAgICAgdmFyIHBvc3RiYXJsaWZlID0gZWxlbWVudC5jaGlsZHJlbigpLmNoaWxkcmVuKFwiLnBvc3RsaWZlYmFyXCIpO1xuXG4gICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbicsIGR1cmF0aW9uKTtcblxuICAgICAgICAgICAgaWYgKHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA+IDAuOTUpe1xuICAgICAgICAgICAgICAvKiBDaHJvbWUsIFNhZmFyaSwgT3BlcmEgKi9cbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnLXdlYmtpdC1hbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fYScpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2EnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA8PSAwLjk1ICYmIHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA+IDAuOSl7XG4gICAgICAgICAgICAgIC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqL1xuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9iJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCdhbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fYicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlIDw9IDAuOSAmJiBzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPiAwLjg1KXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2MnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9jJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPD0gMC44NSAmJiBzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPiAwLjc1KXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2QnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPD0gMC43NSAmJiBzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPiAwLjYpe1xuICAgICAgICAgICAgICAvKiBDaHJvbWUsIFNhZmFyaSwgT3BlcmEgKi9cbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnLXdlYmtpdC1hbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fZScpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA8PSAwLjYgJiYgc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID4gMC41KXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2YnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9mJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPD0gMC41ICYmIHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA+IDAuMyl7XG4gICAgICAgICAgICAgIC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqL1xuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9nJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCdhbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fZycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlIDw9IDAuMyAmJiBzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPiAwLjIpe1xuICAgICAgICAgICAgICAvKiBDaHJvbWUsIFNhZmFyaSwgT3BlcmEgKi9cbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnLXdlYmtpdC1hbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1faCcpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2gnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA8PSAwLjIgJiYgc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID4gMC4xKXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2knKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9pJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAvKiBDaHJvbWUsIFNhZmFyaSwgT3BlcmEgKi9cbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnLXdlYmtpdC1hbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1faicpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2onKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGN1c3RvbWl6ZUluZm9XaW5kb3coKXtcbiAgICAgICAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIERJViB0aGF0IHdyYXBzIHRoZSBib3R0b20gb2YgaW5mb3dpbmRvd1xuICAgICAgICAgIHZhciBpd091dGVyID0gJCgnLmdtLXN0eWxlLWl3Jyk7XG4gICAgICAgICAgXG4gICAgICAgICAgdmFyIGl3QmFja2dyb3VuZCA9IGl3T3V0ZXIucHJldigpO1xuXG4gICAgICAgICAgLy8gUmVtb3ZlIHRoZSBiYWNrZ3JvdW5kIHNoYWRvdyBESVZcbiAgICAgICAgICAgaXdCYWNrZ3JvdW5kLmNoaWxkcmVuKCc6bnRoLWNoaWxkKDIpJykuY3NzKHsnZGlzcGxheScgOiAnbm9uZSd9KTtcblxuICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHdoaXRlIGJhY2tncm91bmQgRElWXG4gICAgICAgICAgIGl3QmFja2dyb3VuZC5jaGlsZHJlbignOm50aC1jaGlsZCg0KScpLmNzcyh7J2Rpc3BsYXknIDogJ25vbmUnfSk7XG5cbiAgICAgICAgICAvLyBDaGFuZ2VzIHRoZSBkZXNpcmVkIHRhaWwgc2hhZG93IGNvbG9yLlxuICAgICAgICAgIGl3QmFja2dyb3VuZC5jaGlsZHJlbignOm50aC1jaGlsZCgzKScpLmZpbmQoJ2RpdicpLmNoaWxkcmVuKCkuY3NzKHtcbiAgICAgICAgICAgICdib3gtc2hhZG93JzogJzAgMXB4IDZweCByZ2JhKDE3OCwgMTc4LCAxNzgsIDAuNiknLCBcbiAgICAgICAgICAgICd6LWluZGV4JyA6ICcxJyxcbiAgICAgICAgICAgICdib3JkZXInOiAnMHB4J30pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY3VzdG9taXplQ2xvc2VCdG4oKXtcbiAgICAgICAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIERJViB0aGF0IHdyYXBzIHRoZSBib3R0b20gb2YgaW5mb3dpbmRvd1xuICAgICAgICAgIHZhciBpd091dGVyID0gJCgnLmdtLXN0eWxlLWl3Jyk7XG5cbiAgICAgICAgICB2YXIgaXdDbG9zZUJ0biA9IGl3T3V0ZXIubmV4dCgpO1xuXG4gICAgICAgICAgLypcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInBvc3Rsb2NhbCBsZWFudGg6XCIsIGl3T3V0ZXIucGFyZW50KCkuZmluZCgnI3Bvc3Rsb2NhbCcpLmxlbmd0aCk7XG4gICAgICAgICAgaWYgKHNjb3BlLnBvc3Rsb2NhbHN0YXR1cyA9PSBmYWxzZSAmJiAwID09IGl3T3V0ZXIucGFyZW50KCkuZmluZCgnI3Bvc3Rsb2NhbCcpLmxlbmd0aCl7XG4gICAgICAgICAgICBpd0Nsb3NlQnRuLmFmdGVyKFwiPGltZyBpZD0ncG9zdGxvY2FsJyBzcmM9J2h0dHA6Ly9jZG4taW1nLmVhc3lpY29uLm5ldC9wbmcvMjQvMjQ0MC5wbmcnIHdpZHRoPScyMCcsIGhlaWdodD0nMjAnLz5cIik7XG4gICAgICAgICAgfVxuICAgICAgICAgICovXG5cbiAgICAgICAgICAvLyBBcHBseSB0aGUgZGVzaXJlZCBlZmZlY3QgdG8gdGhlIGNsb3NlIGJ1dHRvblxuICAgICAgICAgIGl3Q2xvc2VCdG4uY3NzKHtcbiAgICAgICAgICAgIG9wYWNpdHk6ICcwLjgnLCAvLyBieSBkZWZhdWx0IHRoZSBjbG9zZSBidXR0b24gaGFzIGFuIG9wYWNpdHkgb2YgMC43XG4gICAgICAgICAgICByaWdodDogJzIwcHgnLCB0b3A6ICcyMHB4JywgLy8gYnV0dG9uIHJlcG9zaXRpb25pbmdcbiAgICAgICAgICB9KTsgXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy4vdGVtcGxhdGVzL3dpbmRvdy5odG1sJyxcbiAgICAgICAgbGluazogbGlua1xuICAgIH07XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcci5jb250cm9sbGVyKCdQb3N0c0N0cmwnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlLCBDb25maWdTdmMsIFBvc3RzU3ZjLCBVdGlsU3ZjLCAkd2luZG93LCAkZG9jdW1lbnQsICR0aW1lb3V0KXtcclxyXHQvKiBlbWl0IGJyb2FkY2FzdCBmb3IgY3VycmVudCBwYWdlSWQgKi9cclx0JHNjb3BlLiRlbWl0KCdzZXQ6cGFnZWNoYW5nZScsICRzY29wZS5wYWdlSWQucG9zdCk7XHJcclx0JHNjb3BlLnBvc3RzID0gW107XHJcclx0LyogYXMgc2VydmVyIHRlbGxzIHRoZXJlIHdhcyBuZXcgcG9zdCwgbGV0cyByZS1sb2FkIGxpc3QgZGF0YSAqL1xyXHQkc2NvcGUuJG9uKCd3czpuZXdfcG9zdCcsIGZ1bmN0aW9uKF8sIHBvc3Qpe1xyXHRcdCRzY29wZS5yZXF1ZXN0RmV0Y2goKTtcclx0fSk7XHJcclx0JHNjb3BlLmFkZFBvc3QgPSBmdW5jdGlvbigpIHtcclx0XHQvKiBjaGVjayBpZiB0aGUgcG9zdCBjb250ZW50IGlzIHRoZXJlIC0gb25seSBmb3IgV0VCIGZvciBlbnRlciBidXR0b24gdG8gcG9zdCAqL1xyXHRcdGlmICghJHNjb3BlLmNvbnRlbnQpe1xyXHRcdFx0Y29uc29sZS5sb2coXCJVc2VyIGF0dGVtcHRlZCB0byBwb3N0IHdpdGggMCB3b3Jkcy5cIilcclx0XHRcdHJldHVybjtcclx0XHR9XHJcclx0XHQvKiBnZXQgYXV0b2NvbXBsZXRlZCBwbGFjZSBhbmQgcmVzZXQoc2V0IHRvIHVuZGVmaW5lZCkgKi9cclx0XHR2YXIgcGxhY2UgICAgPSAkc2NvcGUucG9zdHBsYWNlO1xyXHRcdHZhciBsb2NhdGlvbiA9ICRzY29wZS5wb3N0TG9jYXRpb247XHJcclx0XHR2YXIgbG9jYWxfc3RhdHVzO1xyXHRcdHZhciBwb3N0TG9jYXRpb25Gcm9tVXNlckxvY2F0aW9uID0gVXRpbFN2Yy5nZXREaXN0YW5jZUZyb21MYXRMb25JbkttKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG9uLCAkc2NvcGUudXNlckxvY2F0aW9uLmxhdCwgJHNjb3BlLnVzZXJMb2NhdGlvbi5sb24pO1xyXHRcdGNvbnNvbGUubG9nKFwicG9zdCBsb2NhdGlvbiBmcm9tIHVzZXIgbG9jYXRpb24gOiBcIiwgcG9zdExvY2F0aW9uRnJvbVVzZXJMb2NhdGlvbik7XHJcdFx0LyogaWYgbGVzcyB0aGFuIDNrbSAqL1xyXHRcdGlmIChwb3N0TG9jYXRpb25Gcm9tVXNlckxvY2F0aW9uIDwgMyl7XHJcdFx0XHRjb25zb2xlLmxvZyhcInBvc3RMb2NhdGlvbkZyb21Vc2VyTG9jYXRpb24gPCAzXCIsIChwb3N0TG9jYXRpb25Gcm9tVXNlckxvY2F0aW9uIDwgMykpO1xyXHRcdFx0bG9jYWxfc3RhdHVzID0gdHJ1ZTtcclx0XHR9XHJcdFx0ZWxzZSB7XHJcdFx0XHRjb25zb2xlLmxvZyhcInBvc3RMb2NhdGlvbkZyb21Vc2VyTG9jYXRpb24gPCAzXCIsIChwb3N0TG9jYXRpb25Gcm9tVXNlckxvY2F0aW9uIDwgMykpO1xyXHRcdFx0bG9jYWxfc3RhdHVzID0gZmFsc2U7XHJcdFx0fVxyXHRcdFxyXHRcdHZhciBsb2NhdGlvbkpTT04gPSBKU09OLnN0cmluZ2lmeShsb2NhdGlvbik7XHJcclx0XHR2YXIgcmVsYXRpdmVMaWZlU3Bhbjtcclx0XHRpZiAoJHNjb3BlLnRpbWV2YWx1ZSA8PSBDb25maWdTdmMubWF4SW5zdGFudExpZmVTcGFuKXtcclx0XHRcdHZhciBjaGFyTGVuID0gJHNjb3BlLmNvbnRlbnQubGVuZ3RoO1xyXHRcdFx0aWYgKGNoYXJMZW4gPCA1KVxyXHRcdFx0e1xyXHRcdFx0XHRyZWxhdGl2ZUxpZmVTcGFuID0gNDAwMDtcclx0XHRcdH1cclx0XHRcdGVsc2Vcclx0XHRcdHtcclx0XHRcdFx0cmVsYXRpdmVMaWZlU3BhbiA9IGNoYXJMZW4gKiBVdGlsU3ZjLm1hcFJhbmdlKGNoYXJMZW4sIDUsIDIwLCA3MDAsIDQwMCk7XHJcdFx0XHR9XHJcdFx0fVxyXHRcdGVsc2Uge1xyXHRcdFx0cmVsYXRpdmVMaWZlU3BhbiA9ICRzY29wZS50aW1ldmFsdWU7XHJcdFx0fVxyXHJcdFx0UG9zdHNTdmMuY3JlYXRlKFxyXHRcdHtcclx0XHRcdGJvZHkgICAgOiAgJHNjb3BlLmNvbnRlbnQsXHJcdFx0XHRsb2NhdGlvbjogIGxvY2F0aW9uSlNPTixcclx0XHRcdHBsYWNlICAgOiAgcGxhY2UsXHJcdFx0XHRndWlkICAgIDogICRzY29wZS5ndWlkLFxyXHRcdFx0Z3VpZHRndCA6ICAkc2NvcGUuZ3VpZHRndCxcclx0XHRcdGxpZmVzcGFuOiAgcmVsYXRpdmVMaWZlU3Bhbixcclx0XHRcdGlzbG9jYWwgOiAgbG9jYWxfc3RhdHVzXHJcdFx0fSlcclx0XHQuc3VjY2VzcyhmdW5jdGlvbihwb3N0KXtcclx0XHRcdFx0XHRcclx0XHRcdC8qIHJlc2V0IGlucHV0IGZvcm1zICovXHJcdFx0XHQkc2NvcGUuY29udGVudCAgPSBudWxsO1xyXHRcdH0pXHJcdFx0LmVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cyl7XHJcdFx0XHRzd2FsKFwiUG9zdCBmYWlsZWRcIiwgXCJQbGVhc2UgY29tcGxldGUgdGhlIGZyb20gY29ycmVjdGx5XCIsIFwiZXJyb3JcIik7XHJcdFx0fSk7XHJcdH07XHJcclx0LyogYXMgc2VydmVyIHRlbGxzIHRoZXJlIHdhcyBuZXcgcG9zdCwgbGV0cyByZS1sb2FkIGxpc3QgZGF0YSAqL1xyXHQkc2NvcGUucmVxdWVzdEZldGNoID0gZnVuY3Rpb24oKSB7XHJcdFx0UG9zdHNTdmMuZmV0Y2goKVxyXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHBvc3RzKXtcclx0XHRcdCRzY29wZS5wb3N0cyA9IHBvc3RzO1xyXHRcdH0pO1xyXHR9O1xyXHJcdC8qIHVwZGF0ZSBndWlkIG9mIHBvc3QgKi9cclx0JHNjb3BlLnVwZGF0ZUd1aWR0Z3QgPSBmdW5jdGlvbihteWd1aWQsIGd1aWR0Z3QpIHtcclx0XHR2YXIgdXBkYXRlcyA9IHtcclx0XHRcdGd1aWQgICAgOiBteWd1aWQsXHJcdFx0XHRndWlkdGd0IDogZ3VpZHRndFxyXHRcdH07XHJcclx0XHRjb25zb2xlLmxvZyhcInVkcGF0ZSB0byBwb3N0IGd1aWR0Z3Q6XCIsIHVwZGF0ZXMpXHJcclx0XHRQb3N0c1N2Yy51cGRhdGVHdWlkdGd0KHVwZGF0ZXMpO1xyXHR9XHJcclx0Lyokc2NvcGUucmVxdWVzdEZldGNoKCk7Ki9ccn0pO1xyIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnUG9zdHNTdmMnLCBmdW5jdGlvbigkaHR0cCl7XG5cdHRoaXMuZmV0Y2ggPSBmdW5jdGlvbihndWlkT2JqKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Bvc3RzJywgZ3VpZE9iaik7XG5cdH07XG5cblx0dGhpcy5jcmVhdGUgPSBmdW5jdGlvbihwb3N0KXtcblx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wb3N0cycsIHBvc3QpO1xuXHR9O1xuXG5cdHRoaXMucmVtb3ZlID0gZnVuY3Rpb24ocG9zdCl7XG5cdFx0Ly9jb25zb2xlLmxvZyhcImRlbGV0aW5nIHBvc3RpbmdcIik7XG5cdFx0Ly9jb25zb2xlLmxvZygncG9zdC5faWQ6JywgcG9zdC5faWQpO1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Bvc3RzL3Bvc3RzX2RlbGV0ZScsIHBvc3QpO1xuXHR9O1xuXG5cdHRoaXMudXBkYXRlR3VpZHRndCA9IGZ1bmN0aW9uKHVwZGF0ZXMpe1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Bvc3RzL3VwZGF0ZV9ndWlkdGd0JywgdXBkYXRlcyk7XG5cdH1cbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1Nlc3Npb25TdmMnLCBmdW5jdGlvbigkaHR0cCl7XG5cdHRoaXMuZmV0Y2ggPSBmdW5jdGlvbigpe1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc2Vzc2lvbnMnKTtcblx0fTtcblxuXHR0aGlzLmVudGVyID0gZnVuY3Rpb24oc2Vzc2lvbil7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLCBzZXNzaW9uKTtcblx0fTtcblxuXHR0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKGd1aWQpe1xuXHRcdC8vY29uc29sZS5sb2coXCJkZWxldGluZyBzZXNzaW9uXCIpO1xuXHRcdC8vY29uc29sZS5sb2coJ3Nlc3Npb24uZ3VpZDonLCBndWlkKTtcblx0XHR2YXIgc2Vzc2lvbiA9IHtndWlkOiBndWlkfTtcblx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL3Nlc3Npb25zJywgc2Vzc2lvbik7XG5cdH07XG5cblx0dGhpcy51cGRhdGVXYXRjaExvY2F0aW9uID0gZnVuY3Rpb24oY3VycmVudF9tYXBfbncsIGN1cnJlbnRfbWFwX3NlLCBjdXJyZW50X21hcF9jZW50ZXIsIGd1aWQpe1xuXHRcdHZhciB3YXRjaGxvYyA9IHtcbiAgICAgICAgICAgIG53X2xhdCAgICAgOiBjdXJyZW50X21hcF9udy5sYXQsXG4gICAgICAgICAgICBud19sb24gICAgIDogY3VycmVudF9tYXBfbncubG9uLFxuICAgICAgICAgICAgc2VfbGF0ICAgICA6IGN1cnJlbnRfbWFwX3NlLmxhdCxcbiAgICAgICAgICAgIHNlX2xvblx0ICAgOiBjdXJyZW50X21hcF9zZS5sb24sXG4gICAgICAgICAgICBjZW50ZXJfbGF0IDogY3VycmVudF9tYXBfY2VudGVyLmxhdCxcbiAgICAgICAgICAgIGNlbnRlcl9sb24gOiBjdXJyZW50X21hcF9jZW50ZXIubG9uXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgd2F0Y2hsb2NKU09OID0gSlNPTi5zdHJpbmdpZnkod2F0Y2hsb2MpO1xuXG4gICAgICAgIHZhciB1cGRhdGVkc2Vzc2lvbiA9IHtcbiAgICAgICAgICAgIHdhdGNobG9jOiB3YXRjaGxvY0pTT04sXG4gICAgICAgICAgICBndWlkICAgIDogZ3VpZFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIHVwZGF0ZSB3YXRjaGxvYyB3aGVuIGNlbnRlciBjaGFuZ2VkLlxuICAgICAgICBjb25zb2xlLmxvZyhcInVwZGF0aW5nIHdhdGNoIGxvY2F0aW9uXCIpO1xuXG5cdFx0Ly9jb25zb2xlLmxvZyhcInVwZGF0ZWRzZXNzaW9uOlwiLCB1cGRhdGVkc2Vzc2lvbik7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMvdXBkYXRlX3Nlc3Npb24nLCB1cGRhdGVkc2Vzc2lvbik7XG5cdH07XG5cblx0dGhpcy51cGRhdGVDb3VwbGluZyA9IGZ1bmN0aW9uKGd1aWQsIGd1aWR0Z3Qpe1xuXHRcdFxuXHRcdHZhciB1cGRhdGVkZ3VpZHRndCA9IHtcblx0XHRcdGd1aWQgICA6IGd1aWQsXG5cdFx0XHRndWlkdGd0OiBndWlkdGd0XG5cdFx0fTtcblxuXHRcdC8vIHVwZGF0ZSB3YXRjaGxvYyB3aGVuIGNlbnRlciBjaGFuZ2VkLlxuICAgICAgICBjb25zb2xlLmxvZyhcInVwZGF0aW5nIGNvdXBsaW5nXCIpO1xuXG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMvdXBkYXRlX2NvdXBsaW5nJywgdXBkYXRlZGd1aWR0Z3QpXG5cdH07XG59KTtcbiIsIiIsIlxuYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcblx0J25nUm91dGUnLFxuXHQnbmdBbmltYXRlJyxcblx0J3VpLnNsaWRlcidcbl0pO1xuXG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ3RybCcsIGZ1bmN0aW9uKFNlc3Npb25TdmMsIFV0aWxTdmMsIENvbmZpZ1N2YywgJHJvb3RTY29wZSwgJHNjb3BlLCAkd2luZG93LCAkaHR0cCwgJHRpbWVvdXQpe1xuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBJTklUSUFMXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIC8vIGxvYWQgYW5kIHNldCBsYXRlc3QgZ3VpZFxuXHRpZiAod2luZG93LmxvY2FsU3RvcmFnZS5ndWlkID09ICd1bmRlZmluZWQnIHx8IFxuXHRcdHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ3VpZCA9PSAnbnVsbCcgfHxcblx0XHQhd2luZG93LmxvY2FsU3RvcmFnZS5ndWlkKVxuXHR7XG5cdFx0d2luZG93LmxvY2FsU3RvcmFnZS5ndWlkID0gVXRpbFN2Yy5nZXRHdWlkKCk7XG5cdH1cblx0JHNjb3BlLmd1aWQgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmd1aWQ7XG5cblx0Ly8gbG9hZCBhbmQgc2V0IGxhdGVzdCBndWlkdGd0XG5cdGlmICh3aW5kb3cubG9jYWxTdG9yYWdlLmd1aWR0Z3QgPT0gJ3VuZGVmaW5lZCcgfHwgXG5cdFx0d2luZG93LmxvY2FsU3RvcmFnZS5ndWlkdGd0ID09ICdudWxsJyB8fFxuXHRcdCF3aW5kb3cubG9jYWxTdG9yYWdlLmd1aWR0Z3QpXG5cdHtcblx0XHR3aW5kb3cubG9jYWxTdG9yYWdlLmd1aWR0Z3QgPSBcIjBcIjtcblx0fVxuXHQkc2NvcGUuZ3VpZHRndCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ3VpZHRndDsgLy8gaW50ZXJlc3RlZCBvcHBvbmVudCBndWlkIG51bWJlclxuXG5cdCRzY29wZS5wYWdlSWQgPSB7IFxuXHRcdHBvc3QgOiAwLFxuXHR9O1xuXG5cdCRzY29wZS5uYXZDb2xsYXBzZWQgPSB0cnVlO1xuXG5cdC8vIHZhbHVlIGZyb20gdGltZSBzbGlkZXIgaW4gVUlcblx0Ly8gZGVmYXVsdCBpcyBtYXggaW5zdGFudCBsaWZlIHNwYW5cbiAgICAkc2NvcGUudGltZXZhbHVlID0gQ29uZmlnU3ZjLm1heEluc3RhbnRMaWZlU3BhbjtcblxuXG5cdC8vIHVzZXIncyBjdXJyZW50IGxvY2F0aW9uIHN0b3JhZ2Vcblx0JHNjb3BlLnVzZXJMb2NhdGlvbiA9IHtcblx0XHRsYXQ6IDAuMCxcblx0XHRsb246IDAuMFxuXHR9O1xuXG5cdCRzY29wZS50b2dnbGVTZWFyY2hMb2NhdGlvbiA9IGZhbHNlO1xuXHQkc2NvcGUudG9nZ2xlVGltZVNsaWRlciA9IGZhbHNlO1xuXG5cdC8vIGV2ZW50IGhhbmRlciBmb3IgbWFwIFVJc1xuXHQkdGltZW91dChmdW5jdGlvbigpe1xuXHRcdC8vIGVuYWJsZXMgZW50ZXIga2V5IHRvIHN1Ym1pdCBwb3N0IGZvcm1cblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLXBvc3RpbmcnKS5vbmtleXByZXNzID0gZnVuY3Rpb24oZXZlbnQpe1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhcIkluc2lkZSBrZXlwcmVzc1wiLGV2ZW50LndoaWNoKTtcblx0XHRcdGlmIChldmVudC53aGljaCA9PSAnMTMnKXtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhcImVudGVyIHByZXNzZWRcIik7XG5cdFx0XHRcdCQoJ2Zvcm0jbWFwLXBvc3RpbmctZm9ybScpLnN1Ym1pdCgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtcG9zdGluZycpLm9uZm9jdXMgPSBmdW5jdGlvbihldmVudCl7XG5cdFx0XHRjb25zb2xlLmxvZyhcIm9uIGZvY3VzXCIpO1xuXHRcdFx0JHNjb3BlLnRvZ2dsZVRpbWVTbGlkZXIgPSB0cnVlO1xuXHRcdH1cblxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtcG9zdGluZycpLm9uYmx1ciA9IGZ1bmN0aW9uKGV2ZW50KXtcblx0XHRcdGNvbnNvbGUubG9nKFwib24gYmx1clwiKTtcblx0XHRcdCRzY29wZS50b2dnbGVUaW1lU2xpZGVyID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0JCgnLm5hdi1idXJnZXInKS5jbGljayhmdW5jdGlvbigpIHtcblx0XHQgICQoJy5uYXYtYnVyZ2VyJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdCAgLy8kKCcuY29udHJvbHMnKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG5cdFx0ICAkc2NvcGUudG9nZ2xlU2VhcmNoTG9jYXRpb24gPSAhJHNjb3BlLnRvZ2dsZVNlYXJjaExvY2F0aW9uO1xuXHRcdCAgJHNjb3BlLiRhcHBseSgpO1xuXHRcdH0pO1xuXG5cdH0pO1xuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBTT0NLRVRcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHR2YXIgdXJsO1xuXHR2YXIgaG9zdG5hbWUgPSBkb2N1bWVudC5sb2NhdGlvbi5ob3N0bmFtZTtcblxuXHRpZiAoaG9zdG5hbWUgPT0gQ29uZmlnU3ZjLmxvY2FsKXtcblx0XHR1cmwgPSBDb25maWdTdmMud2ViX3NvY2tldCArIENvbmZpZ1N2Yy5sb2NhbCArICc6JyArIENvbmZpZ1N2Yy5wb3J0O1xuXHR9XG5cdGVsc2UgaWYgKGhvc3RuYW1lID09IENvbmZpZ1N2Yy5sb2NhbF9pcCkge1xuXHRcdHVybCA9IENvbmZpZ1N2Yy53ZWJfc29ja2V0ICsgQ29uZmlnU3ZjLmxvY2FsX2lwICsgJzonICsgQ29uZmlnU3ZjLnBvcnQ7IC8vIGRldmVsb3BtZXQgb24gc29ja2V0IGxvY2FsbHkgXG5cdH1cblx0ZWxzZSB7XG5cdFx0dXJsID0gQ29uZmlnU3ZjLndlYl9zb2NrZXRfc2VjdXJlICsgQ29uZmlnU3ZjLmRlcGxveV9kbnM7IC8vIHByb2R1Y3Rpb24gZGVwbG95IHZlcnNpb24gLSBzdGlsbCBkZWJ1ZyBtb2RlXG5cdH1cblxuXHQvKiDqsJzrsJzqs7zsoJXsnbQg64Gd64KY6rOgIOuwsO2PrOyLnOyXkOuKlCDsnITrtoDrtoTsnYQg7KeA7Jqw6rOgIOyVhOuemCDsvZTrk5zrp4wg64Ko6rKo64+EIOuQnOuLpC5cblx0dXJsID0gJ3dzczovL2Zyb3plbi1iYWRsYW5kcy04NjQ5Lmhlcm9rdWFwcC5jb20nO1xuXHQqL1xuXHR2YXIgY29ubmVjdCA9IGZ1bmN0aW9uKCkge1xuXHRcdGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KHVybCk7XG5cblx0XHRjb25uZWN0aW9uLm9ub3BlbiA9IGZ1bmN0aW9uKCl7XG5cblx0XHRcdC8vIHNlbmQgZ3VpZCB0byBzZXJ2ZXIgZm9yIHdzIGlkZW50aWZpY2F0aW9uXG5cdFx0XHRjb25uZWN0aW9uLnNlbmQoJHNjb3BlLmd1aWQpO1xuXG5cdFx0XHRmdW5jdGlvbiBnZXRDdXJyTG9jU3VjY2Vzcyhwb3MpIHtcblx0XHRcdFx0XG5cdFx0XHRcdC8vLy8vLy8vLy8vLy8vLy8vLyBQSFlTSUNBTCBMT0NBVElPTlxuXHRcdFx0XHQvLyDrp6jsspjsnYzsl5DripQg7Jyg7KCA7J2YIOyLpOygnCDsnITsuZgo7JWx7JeQIOyeheyepe2WiOydhOuVjOydmCDsnITsuZgp7JmAIOyEvO2EsCDtj6zsp4DshZjsnYQg6rCZ7J20IOuztOuCtOqzoCxcblx0XHRcdFx0Ly8g7IS87YSwIO2PrOyngOyFmOydgCDqs4Tsho0g7JeF642w7J207Yq4IOuQmOyWtOyVvCDtlZzri6QuXG5cdCAgICAgICAgICAgIHZhciBjcmQgPSBwb3MuY29vcmRzO1xuXG5cdCAgICAgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGNyZC5sYXRpdHVkZSwgY3JkLmxvbmdpdHVkZSk7XG5cblx0ICAgICAgICAgICAgLy8gc2F2ZSB0aGUgdXNlciBsb2NhdGlvbiBpbnRvIGFwcGxpY2F0aW9uIHNjb3BlIHZhcmlhYmxlXG5cdCAgICAgICAgICAgICRzY29wZS51c2VyTG9jYXRpb24gPSB7XG5cdCAgICAgICAgICAgIFx0bGF0OiBjcmQubGF0aXR1ZGUsXG5cdCAgICAgICAgICAgIFx0bG9uOiBjcmQubG9uZ2l0dWRlXG5cdCAgICAgICAgICAgIH07XG5cblx0ICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0ge1xuXHQgICAgICAgIFx0XHRsYXQ6Z29vZ2xlTG9jLmxhdCgpLFxuXHQgICAgICAgIFx0XHRsb246Z29vZ2xlTG9jLmxuZygpXG5cdCAgICAgICAgXHR9O1xuXHQgICAgICAgIFx0dmFyIGxvY2F0aW9uSlNPTiA9IEpTT04uc3RyaW5naWZ5KGxvY2F0aW9uKTtcblx0ICAgICAgICBcdC8vY29uc29sZS5sb2coXCJzZXR0aW5nIGxvY2F0aW9uXCIsIGxvY2F0aW9uSlNPTik7XG5cblx0ICAgICAgICBcdC8vLy8vLy8vLy8vLy8vLy8vLyBXQVRDSCBMT0NBVElPTlxuXHQgICAgICAgIFx0dmFyIGJvdW5kcyA9ICRzY29wZS5tYXAuZ2V0Qm91bmRzKCk7XG5cdCAgICAgICAgICAgIHZhciBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBub3J0aC1lYXN0IGNvcm5lclxuXHQgICAgICAgICAgICB2YXIgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCk7IC8vIExhdExuZyBvZiB0aGUgc291dGgtd2VzdCBjb3JkZXJcblx0ICAgICAgICAgICAgLy9Zb3UgZ2V0IG5vcnRoLXdlc3QgYW5kIHNvdXRoLWVhc3QgY29ybmVycyBmcm9tIHRoZSB0d28gYWJvdmU6XG5cblx0ICAgICAgICAgICAgdmFyIGN1cnJlbnRfbWFwX253ID0geyBcblx0ICAgICAgICAgICAgICAgIGxhdDogbmUubGF0KCksIFxuXHQgICAgICAgICAgICAgICAgbG9uOiBzdy5sbmcoKVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICB2YXIgY3VycmVudF9tYXBfc2UgPSB7XG5cdCAgICAgICAgICAgICAgICBsYXQ6IHN3LmxhdCgpLCBcblx0ICAgICAgICAgICAgICAgIGxvbjogbmUubG5nKClcblx0ICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICB2YXIgY3VycmVudF9tYXBfY2VudGVyID0ge1xuXHQgICAgICAgICAgICBcdGxhdDp3aW5kb3cubG9jYWxTdG9yYWdlLmxhdGl0dWRlLFxuXHQgICAgICAgICAgICBcdGxvbjp3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZVxuXHQgICAgICAgIFx0fTtcblxuXHQgICAgICAgICAgICB2YXIgd2F0Y2hsb2MgPSB7XG5cdFx0ICAgICAgICAgICAgbndfbGF0ICAgIDogY3VycmVudF9tYXBfbncubGF0LFxuXHRcdCAgICAgICAgICAgIG53X2xvbiAgICA6IGN1cnJlbnRfbWFwX253Lmxvbixcblx0XHQgICAgICAgICAgICBzZV9sYXQgICAgOiBjdXJyZW50X21hcF9zZS5sYXQsXG5cdFx0ICAgICAgICAgICAgc2VfbG9uXHQgIDogY3VycmVudF9tYXBfc2UubG9uLFxuXHRcdCAgICAgICAgICAgIGNlbnRlcl9sYXQ6IGN1cnJlbnRfbWFwX2NlbnRlci5sYXQsXG5cdFx0ICAgICAgICAgICAgY2VudGVyX2xvbjogY3VycmVudF9tYXBfY2VudGVyLmxvblxuXHRcdCAgICAgICAgfVxuXG5cdCAgICAgICAgXHR2YXIgd2F0Y2hsb2NKU09OID0gSlNPTi5zdHJpbmdpZnkod2F0Y2hsb2MpO1xuXHQgICAgICAgIFx0Ly9jb25zb2xlLmxvZyhcInNldHRpbmcgd2F0Y2hsb2NcIiwgd2F0Y2hsb2NKU09OKTtcblx0ICAgICAgICAgICAgXG5cdCAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLyBMT0NBVElPTiBVUERBVEUgV0lUSCBTRVNTSU9OIEVOVEVSXG5cdCAgICAgICAgICAgIC8v7Jes6riw7IScIOu5hOuPmeq4sOyggeycvOuhnCDsnKDsoIDsnZgg66Gc7LyA7J207IWY7J2EIOyWu+qzoCDshLjshZjsnYQg67O064K87IiYIOyeiOuLpC5cblx0XHRcdFx0dmFyIHNlc3Npb24gPSB7XG5cdFx0XHRcdFx0Z3VpZHRndCA6ICRzY29wZS5ndWlkdGd0LFxuXHRcdFx0XHRcdGd1aWQgICAgOiAkc2NvcGUuZ3VpZCxcblx0XHRcdFx0XHRsb2NhdGlvbjogbG9jYXRpb25KU09OLFxuXHRcdFx0XHRcdHdhdGNobG9jOiB3YXRjaGxvY0pTT05cblx0XHRcdFx0fTtcblx0XHRcdFx0U2Vzc2lvblN2Yy5lbnRlcihzZXNzaW9uKTsgLy8g7ISc67KE7JeQ7IScIOycoOyggOqwgCDrk6TslrTsmLTsnYQg7JWM66aw64ukLlxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGZ1bmN0aW9uIGdldEN1cnJMb2NFcnJvcihlcnIpIHtcblx0ICAgICAgICBcdHN3YWwoXCJcIiwgXCJOZWVkIHRvIHR1cm4gb24gbG9jYXRpb24gc2VydmljZSBmb3IgcHJvcGVyIHVzZS5cIik7XG5cdCAgICAgICAgICAgIGNvbnNvbGUud2FybignRVJST1IoJyArIGVyci5jb2RlICsgJyk6ICcgKyBlcnIubWVzc2FnZSk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgLyogaW5pdCBtYXAgYW5kIHBsYWNlIHNvbWUgbWFya2Vycywgc28gZXZlcnl0aGluZyBzdGFydCB3aXRoIHRoaXMgZnVuY3Rpb24uICovXG5cdCAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihnZXRDdXJyTG9jU3VjY2VzcywgZ2V0Q3VyckxvY0Vycm9yKTtcblxuXHRcdFx0Y29uc29sZS5sb2coJ1dlYlNvY2tldCBjb25uZWN0ZWQnKTtcblx0XHR9O1xuXG5cdFx0Y29ubmVjdGlvbi5vbmNsb3NlID0gZnVuY3Rpb24oKXtcblxuXHRcdFx0Y29uc29sZS5sb2coJ1dlYlNvY2tldCBjbG9zZWQuIFJlY29uZWN0aW5nLi4uJyk7XG5cdFx0XHQkdGltZW91dChjb25uZWN0LCAyMDAwKTtcblx0XHR9O1xuXG5cdFx0Y29ubmVjdGlvbi5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKXtcblx0XHRcdC8vY29uc29sZS5sb2coJ2Jyb2FkY2FzdCBtc2cgZnJvbSBzZXJ2ZXI6JywgZSk7XG5cdFx0XHR2YXIgcGF5bG9hZCA9IEpTT04ucGFyc2UoZS5kYXRhKTtcblxuXHRcdFx0Lypcblx0XHRcdFx0d3M6bmV3X3Bvc3QgICAgLSDsg4jroZzsmrQg7Y+s7Iqk7Yq46rCAIOyYrOudvOyZlOydhOuVjCBmcm9udC1lbmTsl5DshJwg66e17J20IOuLpOyLnCDsl4XrjbDsnbTtirgg7ZW07JW8IOuQnOuLpOqzoCDslYzroKTspIDri6QhXG5cdFx0XHRcdHdzOm5ld19zZXNzaW9uIC0gc2Vzc2lvbuydtCDsg4jroZwg65Ok7Ja07Jik66m0IOuQnOuLpOqzoCDslYzroKTspIDri6QhXG5cdFx0XHRcdHdzOnJlbW92ZV9wb3N0IC0g7Y+s7Iqk7Yq46rCAIOyLnOqwhOydtCDri6Qg65CY7Ja07IScIOyCrOudvOyniOuVjCFcblx0XHRcdFx066ek7Jqw7KSR7JqUISBcblx0XHRcdCovXG5cdFx0XHRjb25zb2xlLmxvZygnd3M6JyArIHBheWxvYWQudHlwZSk7XG5cdFx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3dzOicgKyBwYXlsb2FkLnR5cGUsIHBheWxvYWQuZGF0YSk7XG5cdFx0fTtcblx0fTtcblx0Y29ubmVjdCgpO1xuXG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gU09DS0VUIEJST0FEQ0FTVCBSRUNFSVZFUlxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIGFzIHNlcnZlciBzb2NrZXQgc2VuZCAnd3M6bmV3X3Bvc3QnICwgd2UgY2FuIHVwZGF0ZSB0aGUgbWFwIVxuXHQkc2NvcGUuJG9uKCd3czpuZXdfcG9zdCcsIGZ1bmN0aW9uKF8sIHBvc3Qpe1xuXHRcdC8vIHVwZGF0ZSBwb3N0cyBvbiBtYXBcblx0XHQkc2NvcGUubWFwLnVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXG5cdFx0Ly8gc2hvdyByZXNwb25zaXZlIHVzZXJzIG9ubHkgdG8gdGhlIHVzZXIgd2hvIHdyb3RlIHRoaXMgcG9zdFxuXHRcdGlmIChwb3N0Lmd1aWQgPT0gJHNjb3BlLmd1aWQpXG5cdFx0e1xuXHRcdFx0Ly9jb25zb2xlLmxvZygnc3RhcnQgZHJhd2luZyByZXNwb25zZXMuLicpO1xuXHRcdFx0JHNjb3BlLm1hcC5kcmF3UmVzcG9uc2VzKHBvc3QpO1xuXHRcdH1cblx0fSk7XG5cblx0Ly8gYXMgc2VydmVyIHNvY2tldCBzZW5kICd3czpuZXdfcG9zdCcgLCB3ZSBjYW4gdXBkYXRlIHRoZSBtYXAhXG5cdCRzY29wZS4kb24oJ3dzOm5ld19zZXNzaW9uJywgZnVuY3Rpb24oXywgc2Vzc2lvbil7XG5cdFx0dmFyIGxvY2F0aW9uID0gYW5ndWxhci5mcm9tSnNvbihzZXNzaW9uLmxvY2F0aW9uKTtcblx0XHQkc2NvcGUubWFwLmRyYXdDdXJyTG9jYXRpb25NYXJrZXIobG9jYXRpb24pO1xuXG5cdH0pO1xuXG5cdC8vIHdoZW4gc2VydmVyIHJlbW92ZSB0aGUgcG9zdCBhZnRlciB0aW1lIGZvciBsb25nZXIgb25lcywgXG5cdC8vIHVwZGF0ZSBtYXAgd2l0aCBjb3Jlc3BvbmRpbmcgaW5mb1xuXHQkc2NvcGUuJG9uKCd3czpyZW1vdmVfcG9zdCcsIGZ1bmN0aW9uKF8sIHBvc3RpZCl7XG5cdFx0JHNjb3BlLm1hcC51bkRyYXdQb3N0KHBvc3RpZCk7XG5cdH0pO1xuXG5cdCRzY29wZS4kb24oJ3dzOnVwZGF0ZV9ndWlkdGd0JywgZnVuY3Rpb24oXywgdXBkYXRlZFNlc3Npb24pe1xuXHRcdC8vIHVwZGF0ZSBwb3N0cyBvbiBtYXBcblx0XHQkc2NvcGUubWFwLnVwZGF0ZUFuZERyYXdQb3N0cygpO1xuXHR9KTtcblxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIEFQUExJQ0FUSU9OIExFVkVMIEZVTkNUSU9OU1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdC8vIHNlZSBpZiBpdHMgbW9iaWxlIHBob25lXG5cdCRzY29wZS5pc01vYmlsZSA9IGZ1bmN0aW9uKCl7XG5cdFx0aWYoIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvd2ViT1MvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBob25lL2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQYWQvaSlcblx0XHQgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBvZC9pKVxuXHRcdCB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9CbGFja0JlcnJ5L2kpXG5cdFx0IHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1dpbmRvd3MgUGhvbmUvaSlcblx0XHQgKXtcblx0XHQgICAgcmV0dXJuIHRydWU7XG5cdFx0ICB9XG5cdFx0IGVsc2Uge1xuXHRcdCAgICByZXR1cm4gZmFsc2U7XG5cdFx0ICB9XG5cdH07XG5cblx0LyogbW92ZSB0byBjdXJyZW50IGxvY2F0aW9uICovXG5cdCRzY29wZS5tb3ZlVG9DdXJyZW50TG9jYXRpb24gPSBmdW5jdGlvbigpe1xuXHRcdGZ1bmN0aW9uIGdldEN1cnJMb2NTdWNjZXNzKHBvcykge1xuICAgICAgICAgICAgLyogbWFrZSBzdXJlIHRvIGNoZWNrIHdlIGFyZSBvbiBwb3N0IHBhZ2Ugd2l0aCBtYXAgZmlyc3QgKi9cbiAgICAgICAgICAgIGlmICgkc2NvcGUuY3VycmVudFBhZ2VJZCAhPSAkc2NvcGUucGFnZUlkLnBvc3QpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgY3JkID0gcG9zLmNvb3JkcztcblxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSA9IGNyZC5sYXRpdHVkZTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlID0gY3JkLmxvbmdpdHVkZTtcblxuICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0ge1xuICAgICAgICAgICAgXHRsYXQ6IGNyZC5sYXRpdHVkZSwgXG4gICAgICAgICAgICBcdGxvbjogY3JkLmxvbmdpdHVkZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gZHJhdyBkcm9wIGRvd24gdXNlciBwb3NpdGlvblxuICAgICAgICAgICBcdCRzY29wZS5tYXAuZHJhd0N1cnJMb2NhdGlvbk1hcmtlcihsb2NhdGlvbik7XG5cbiAgICAgICAgICAgXHQvLyBkcmF3IHggbWFya2VyXG5cdCAgICAgICAgJHNjb3BlLm1hcC5kcmF3WE1hcmtlcihsb2NhdGlvbik7XG5cblx0ICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XG5cblx0ICAgICAgICAvLyBtb3ZlIHRvIHRoZSBsb2NhdGlvbiBhbmQgem9vbSBpbnRvIHJpZ2h0IGFtb3VudFxuICAgICAgICAgICAgJHNjb3BlLm1hcC5wYW5Ubyhnb29nbGVMb2MpXG4gICAgICAgICAgICAkc2NvcGUubWFwLnNldFpvb20oMTUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q3VyckxvY0Vycm9yKGVycikge1xuICAgICAgICBcdHN3YWwoXCJcIiwgXCJOZWVkIHRvIHR1cm4gb24gbG9jYXRpb24gc2VydmljZSBmb3IgcHJvcGVyIHVzZS5cIik7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0VSUk9SKCcgKyBlcnIuY29kZSArICcpOiAnICsgZXJyLm1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogaW5pdCBtYXAgYW5kIHBsYWNlIHNvbWUgbWFya2Vycywgc28gZXZlcnl0aGluZyBzdGFydCB3aXRoIHRoaXMgZnVuY3Rpb24uICovXG4gICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZ2V0Q3VyckxvY1N1Y2Nlc3MsIGdldEN1cnJMb2NFcnJvcik7XG5cbiAgICAgICAgc3dhbCh7ICAgdGl0bGU6IFwiXCIsICAgdGV4dDogXCJNb3ZpbmcgdG8gY3VycmVudCBsb2NhdGlvbi4uXCIsICAgdGltZXI6IDE1MDAsICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlIH0pO1xuXHR9O1xuXG5cdCRzY29wZS5tb3ZlVG9Qb3N0TG9jYXRpb24gPSBmdW5jdGlvbigpe1xuXHRcdHZhciBsYXREZWx0YSA9IDAuMDtcblxuXHRcdGlmICgkc2NvcGUuaXNNb2JpbGUoKSl7XG5cdFx0XHR2YXIgYm91bmRzID0gJHNjb3BlLm1hcC5nZXRCb3VuZHMoKTtcblx0ICAgICAgICB2YXIgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7IC8vIExhdExuZyBvZiB0aGUgbm9ydGgtZWFzdCBjb3JuZXJcblx0ICAgICAgICB2YXIgc3cgPSBib3VuZHMuZ2V0U291dGhXZXN0KCk7IC8vIExhdExuZyBvZiB0aGUgc291dGgtd2VzdCBjb3JkZXJcblx0ICAgICAgICBjdXJyZW50X21hcF9udyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobmUubGF0KCksIHN3LmxuZygpKTtcblx0ICAgICAgICBjdXJyZW50X21hcF9zZSA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoc3cubGF0KCksIG5lLmxuZygpKTtcblxuXHQgICAgICAgIHZhciBsYXREZWx0YV9jZW50ZXIybm9ydGggPSAwLjUgKiBNYXRoLmFicygkc2NvcGUucG9zdExvY2F0aW9uLmxhdCAtIGN1cnJlbnRfbWFwX253LmxhdCgpKTtcblx0ICAgICAgICB2YXIgbGF0RGVsdGFfY2VudGVyMnNvdXRoID0gMC41ICogTWF0aC5hYnMoJHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQgLSBjdXJyZW50X21hcF9zZS5sYXQoKSk7XG5cblx0ICAgICAgICBpZiAobGF0RGVsdGFfY2VudGVyMm5vcnRoID4gbGF0RGVsdGFfY2VudGVyMnNvdXRoKXtcblx0ICAgICAgICBcdGxhdERlbHRhID0gbGF0RGVsdGFfY2VudGVyMnNvdXRoO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICBcdGxhdERlbHRhID0gbGF0RGVsdGFfY2VudGVyMm5vcnRoO1xuXHQgICAgICAgIH1cblx0XHR9XG5cblx0XHR2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZygkc2NvcGUucG9zdExvY2F0aW9uLmxhdCArIGxhdERlbHRhLCAkc2NvcGUucG9zdExvY2F0aW9uLmxvbik7XG5cdFx0JHNjb3BlLm1hcC5wYW5Ubyhnb29nbGVMb2MpO1xuXHR9O1xuXG5cdCRzY29wZS5jb2xsYXBzZSA9IGZ1bmN0aW9uKCl7XG5cdFx0JHNjb3BlLm5hdkNvbGxhcHNlZCA9IHRydWU7XG5cdH07XG5cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBHRU5FUkFMIEJST0FEQ0FTVCBSRUNFSVZFUlxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgJHNjb3BlLiRvbignc2V0Om1hcCcsIGZ1bmN0aW9uKF8sIG1hcCl7XG5cdFx0JHNjb3BlLm1hcCA9IG1hcDtcblx0fSk7XG5cbiAgICAkc2NvcGUuJG9uKCdzZXQ6Z3VpZHRndCcsIGZ1bmN0aW9uKF8sIGd1aWR0Z3Qpe1xuXHRcdCRzY29wZS5ndWlkdGd0ID0gZ3VpZHRndDtcblxuXHRcdC8vIGl0cyB2ZXJ5IGltcG9yYW50IHRvIHNldCBsb2NhbCBzdG9yYWdlIGd1aWR0Z3Rcblx0XHR3aW5kb3cubG9jYWxTdG9yYWdlLmd1aWR0Z3QgPSBndWlkdGd0O1xuXHR9KTtcblxuXHQkc2NvcGUuJG9uKCdzZXQ6cGFnZWNoYW5nZScsIGZ1bmN0aW9uKF8sIHBhZ2VJZCl7XG5cdFx0JHNjb3BlLmN1cnJlbnRQYWdlSWQgPSBwYWdlSWQ7XG5cdH0pO1xuXG5cdCRzY29wZS4kb24oJ3NldDpsb2MnLCBmdW5jdGlvbihfLCBsb2NhdGlvbil7XG5cdFx0dmFyIGxhdCA9IGxvY2F0aW9uLmxhdCgpO1xuXHRcdHZhciBsb24gPSBsb2NhdGlvbi5sbmcoKTtcblx0XHQkc2NvcGUucG9zdExvY2F0aW9uID0ge1xuXHRcdFx0bGF0OiBsYXQsXG5cdFx0XHRsb246IGxvblxuXHRcdH07XG5cdH0pO1xuXG5cdCRzY29wZS4kb24oJ3NldDpwbGFjZScsIGZ1bmN0aW9uKF8sIHBsYWNlKXtcblx0XHQvLyBGb3JjaW5nIHRoZSB1cGRhdGUgd2l0aCAkYXBwbHkoKSBtZXRob2Qgb24gJHNjb3BlXG5cdFx0Ly8gcHJvYmxlbSByZWxhdGVkIG5vdGU6IGh0dHA6Ly93d3cuamVmZnJ5aG91c2VyLmNvbS9pbmRleC5jZm0vMjAxNC82LzIvSG93LWRvLUktcnVuLWNvZGUtd2hlbi1hLXZhcmlhYmxlLWNoYW5nZXMtd2l0aC1Bbmd1bGFySlNcblx0XHQkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCRzY29wZS5wb3N0cGxhY2UgPSBwbGFjZTtcblx0XHRcdH1cblx0XHQpO1xuXHR9KTtcbn0pO1xuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29uc3RhbnQoJ0NvbmZpZ1N2YycsIHtcblx0XCJ3ZWJfc29ja2V0XCJcdFx0OiBcIndzOi8vXCIsXG5cdFwid2ViX3NvY2tldF9zZWN1cmVcIiA6IFwid3NzOi8vXCIsXG5cdFwibG9jYWxcIlx0XHRcdFx0OiBcImxvY2FsaG9zdFwiLFxuXHRcImxvY2FsX2lwXCJcdFx0XHQ6IFwiMTkyLjE2OC4wLjRcIixcblx0XCJkZXBsb3lfZG5zXCJcdFx0OiBcImNsb3VkdGFsay5oZXJva3VhcHAuY29tXCIsXG5cdFwicG9ydFwiXHRcdFx0XHQ6IFwiNTAwMFwiLFxuXHRcIm1heEluc3RhbnRMaWZlU3BhblwiOiA1MDAwLFxufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpe1xuXHQkcm91dGVQcm92aWRlclxuXHQud2hlbignLycsIFxuXHRcdHtcblx0XHRcdGNvbnRyb2xsZXI6ICdQb3N0c0N0cmwnLCBcblx0XHRcdHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9wb3N0cy5odG1sJ1xuXHRcdH0pXG5cdC8vIFJlZGlyZWN0IHRvIHRoZSByb290IHBhZ2UuXG5cdC5vdGhlcndpc2UoXG5cdFx0e1xuICAgXHRcdFx0cmVkaXJlY3RUbzogJy8nXG5cdFx0fSk7XG59KTtcblxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uc2VydmljZSgnVXRpbFN2YycsIGZ1bmN0aW9uKCl7XG5cdHZhciBzdmMgPSB0aGlzO1xuXG5cdHN2Yy5kZWcycmFkID0gZnVuY3Rpb24oZGVnKSB7XG5cdCAgcmV0dXJuIGRlZyAqIChNYXRoLlBJLzE4MCk7XG5cdH07XG5cblx0c3ZjLmdldERpc3RhbmNlRnJvbUxhdExvbkluS20gPSBmdW5jdGlvbiAobGF0MSxsb24xLGxhdDIsbG9uMikge1xuXHQgIHZhciBSID0gNjM3MTtcblx0ICB2YXIgZExhdCA9IHN2Yy5kZWcycmFkKGxhdDItbGF0MSk7XG5cdCAgdmFyIGRMb24gPSBzdmMuZGVnMnJhZChsb24yLWxvbjEpOyBcblx0ICB2YXIgYSA9IFxuXHQgICAgTWF0aC5zaW4oZExhdC8yKSAqIE1hdGguc2luKGRMYXQvMikgK1xuXHQgICAgTWF0aC5jb3Moc3ZjLmRlZzJyYWQobGF0MSkpICogTWF0aC5jb3Moc3ZjLmRlZzJyYWQobGF0MikpICogXG5cdCAgICBNYXRoLnNpbihkTG9uLzIpICogTWF0aC5zaW4oZExvbi8yKVxuXHQgICAgOyBcblx0ICB2YXIgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEtYSkpOyBcblx0ICB2YXIgZCA9IFIgKiBjO1xuXHQgIHJldHVybiBkO1xuXHR9O1xuXG5cdHN2Yy5tYXBSYW5nZSA9IGZ1bmN0aW9uICh2YWx1ZSwgbG93MSwgaGlnaDEsIGxvdzIsIGhpZ2gyKSB7XG5cdCAgICByZXR1cm4gbG93MiArIChoaWdoMiAtIGxvdzIpICogKHZhbHVlIC0gbG93MSkgLyAoaGlnaDEgLSBsb3cxKTtcblx0fTtcblxuXHRzdmMuZ2V0R3VpZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRmdW5jdGlvbiBzNCgpIHtcblx0XHQgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXG5cdFx0ICAgICAgLnRvU3RyaW5nKDE2KVxuXHRcdCAgICAgIC5zdWJzdHJpbmcoMSk7XG5cdFx0fVxuXHQgIFx0cmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpO1xuXHR9O1xufSk7XG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSwgJHRpbWVvdXQsIFNlc3Npb25TdmMpe1xuXG5cbn0pO1xuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uZGlyZWN0aXZlKCdhcHBNYXAnLCBmdW5jdGlvbihQb3N0c1N2YywgVXRpbFN2YywgQ29uZmlnU3ZjLCBTZXNzaW9uU3ZjLCAkY29tcGlsZSwgJHRpbWVvdXQpIHtcbiAgICAvLyBkaXJlY3RpdmUgbGluayBmdW5jdGlvblxuICAgIHZhciBsaW5rID0gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gR0xPQkFMIFZBUklBQkxFUyBJTiBMSU5LIEZVTkNUSU9OXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIHZhciBtYXA7IC8vIGV4cGFuZCBmcm9tIGdvb2dsZSBtYXAgZm9yIG1hbnVhbGx5IGNyZWF0ZWQgZXZlbnRzXG4gICAgICAgIHZhciBtYXBfb3JpZ2luOyAvLyBmb3Igb3JpZ2luYWwgZ29vZ2xlIG1hcCBldmVudCBmdW5jdGlvbiBsaW5rc1xuICAgICAgICB2YXIgY3VycmVudF9tYXBfbnc7XG4gICAgICAgIHZhciBjdXJyZW50X21hcF9zZTtcbiAgICAgICAgdmFyIG1hcE9wdGlvbnM7XG4gICAgICAgIHZhciBpbml0aWFsTWFwQ2VudGVyO1xuICAgICAgICB2YXIgQ0xPVURfTUFQX0lEID0gJ2N1c3RvbV9zdHlsZSc7IC8vIG1hcCBzdHlsZVxuICAgICAgICB2YXIgaGVscGVyTWFya2VycyA9IFtdO1xuICAgICAgICB2YXIgbWFya2Vyc09uTWFwID0gW107XG5cbiAgICAgICAgdmFyIHByZXZHdWlkdGd0ID0gJzAnO1xuICAgICAgICB2YXIgaXNHdWlkdGd0Q2hhbmdlZDtcblxuICAgICAgICB2YXIgaW1hZ2VQb3N0ID0ge1xuICAgICAgICAgICAgLy91cmw6ICdodHRwczovL2NhdGNobWUuaWZ5b3VjYW4uY29tL2ltYWdlcy9waWN0dXJlcy9JWUNfSWNvbnMvSVlDX0xvY2F0aW9uX0ljb25fU21hbGwucG5nJyxcbiAgICAgICAgICAgIHVybDogJ0RlZmF1bHRfTWFya2VyLnBuZycsXG4gICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICBvcmlnaW46IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDE3LCAzNCksXG4gICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxLCAxKVxuICAgICAgICB9O1xuICAgICAgICB2YXIgaW1hZ2VUYXJnZXQgPSB7XG4gICAgICAgICAgICAvL3VybDogJ2h0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzL1UvUC9qL00vSS9pL3gtbWFyay15ZWxsb3ctbWQucG5nJyxcbiAgICAgICAgICAgIHVybDogJ1hfTWFya2VyLnBuZycsXG4gICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgxMDAsIDEwMCksXG4gICAgICAgICAgICBvcmlnaW46IG5ldyBnb29nbGUubWFwcy5Qb2ludCgwLCAwKSxcbiAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDE3LCAzNCksXG4gICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgyNSwgMjUpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBpbWFnZVVzZXJMb2dpbiA9IHtcbiAgICAgICAgICAgIC8vdXJsOiAnaHR0cDovL3d3dy5jbGtlci5jb20vY2xpcGFydHMvcS9vLzIvSy9nL1YvbG9jYXRpb24tc3ltYm9sLW1hcC1tZC5wbmcnLFxuICAgICAgICAgICAgdXJsOiAnQ3VycmVudF9Mb2NhdGlvbl9NYXJrZXIucG5nJyxcbiAgICAgICAgICAgIHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDEwMCwgMTAwKSxcbiAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLFxuICAgICAgICAgICAgYW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTcsIDM0KSxcbiAgICAgICAgICAgIHNjYWxlZFNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDIwLCAzMylcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGltYWdlTGlzdGVuZXIgPSB7XG4gICAgICAgICAgICAvL3VybDogJ2h0dHA6Ly8yLmJwLmJsb2dzcG90LmNvbS8tZGpNYV9uNW5BRU0vVDFHdnhfLTctekkvQUFBQUFBQUFBUTQvLTFONmxsZVF2WmMvczE2MDAvYmxpbmtpbmdfZG90LmdpZicsXG4gICAgICAgICAgICB1cmw6ICdCbGluay5naWYnLFxuICAgICAgICAgICAgc2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTAwLCAxMDApLFxuICAgICAgICAgICAgb3JpZ2luOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMCwgMCksXG4gICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgxMCwgMTApLFxuICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMTcsIDE3KVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEVWRU5UIEhBTkRMRVJTIC0gVVBEQVRFXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZURlZmF1bHRMb2NhdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubGF0aXR1ZGUgPSBtYXAuZ2V0Q2VudGVyKCkubGF0KCk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSA9IG1hcC5nZXRDZW50ZXIoKS5sbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUJvdW5kcygpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSBtYXAuZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICB2YXIgbmUgPSBib3VuZHMuZ2V0Tm9ydGhFYXN0KCk7IC8vIExhdExuZyBvZiB0aGUgbm9ydGgtZWFzdCBjb3JuZXJcbiAgICAgICAgICAgIHZhciBzdyA9IGJvdW5kcy5nZXRTb3V0aFdlc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBzb3V0aC13ZXN0IGNvcmRlclxuICAgICAgICAgICAgLy9Zb3UgZ2V0IG5vcnRoLXdlc3QgYW5kIHNvdXRoLWVhc3QgY29ybmVycyBmcm9tIHRoZSB0d28gYWJvdmU6XG5cbiAgICAgICAgICAgIGN1cnJlbnRfbWFwX253ID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhuZS5sYXQoKSwgc3cubG5nKCkpO1xuICAgICAgICAgICAgY3VycmVudF9tYXBfc2UgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHN3LmxhdCgpLCBuZS5sbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVXYXRjaExvY2F0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG1hcC5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIHZhciBuZSA9IGJvdW5kcy5nZXROb3J0aEVhc3QoKTsgLy8gTGF0TG5nIG9mIHRoZSBub3J0aC1lYXN0IGNvcm5lclxuICAgICAgICAgICAgdmFyIHN3ID0gYm91bmRzLmdldFNvdXRoV2VzdCgpOyAvLyBMYXRMbmcgb2YgdGhlIHNvdXRoLXdlc3QgY29yZGVyXG4gICAgICAgICAgICAvL1lvdSBnZXQgbm9ydGgtd2VzdCBhbmQgc291dGgtZWFzdCBjb3JuZXJzIGZyb20gdGhlIHR3byBhYm92ZTpcblxuICAgICAgICAgICAgY3VycmVudF9tYXBfbncgPSB7IFxuICAgICAgICAgICAgICAgIGxhdDogbmUubGF0KCksIFxuICAgICAgICAgICAgICAgIGxvbjogc3cubG5nKClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjdXJyZW50X21hcF9zZSA9IHtcbiAgICAgICAgICAgICAgICBsYXQ6IHN3LmxhdCgpLCBcbiAgICAgICAgICAgICAgICBsb246IG5lLmxuZygpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgY3VycmVudF9tYXBfY2VudGVyIDtcblxuICAgICAgICAgICAgLy8gc2VlIGlmIHRoZSBsYXRlc3QgeCBtYXJrZXIgb3IgcG9zdCBsb2NhdGlvbiBpcyB3aXRoaW4gdXNlcidzIHZpZXdcbiAgICAgICAgICAgIGlmICghKHNjb3BlLnBvc3RMb2NhdGlvbi5sYXQgPCBjdXJyZW50X21hcF9udy5sYXQpIHx8XG4gICAgICAgICAgICAgICAgIShzY29wZS5wb3N0TG9jYXRpb24ubGF0ID4gY3VycmVudF9tYXBfc2UubGF0KSB8fFxuICAgICAgICAgICAgICAgICEoc2NvcGUucG9zdExvY2F0aW9uLmxvbiA8IGN1cnJlbnRfbWFwX3NlLmxvbikgfHxcbiAgICAgICAgICAgICAgICAhKHNjb3BlLnBvc3RMb2NhdGlvbi5sb24gPiBjdXJyZW50X21hcF9udy5sb24pIClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBpdCBpcyBub3Qgd2l0aGluIHVzZXIncyB2aWV3LCB0aGVuIGp1c3QgdXNlIG1hcCBjZW50ZXJcbiAgICAgICAgICAgICAgICBjdXJyZW50X21hcF9jZW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIGxhdDogbWFwLmdldENlbnRlcigpLmxhdCgpLFxuICAgICAgICAgICAgICAgICAgICBsb246IG1hcC5nZXRDZW50ZXIoKS5sbmcoKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gaWYgaXQgaXMgd2l0aGluIHVzZXIncyB2aWV3LCB1c2UgeCBtYXJrZXIgbG9jYXRpb24gYS5rLmEgcG9zdCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGN1cnJlbnRfbWFwX2NlbnRlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBzY29wZS5wb3N0TG9jYXRpb24ubGF0LFxuICAgICAgICAgICAgICAgICAgICBsb246IHNjb3BlLnBvc3RMb2NhdGlvbi5sb25cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgU2Vzc2lvblN2Yy51cGRhdGVXYXRjaExvY2F0aW9uKGN1cnJlbnRfbWFwX253LCBjdXJyZW50X21hcF9zZSwgY3VycmVudF9tYXBfY2VudGVyLCBzY29wZS5ndWlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEVWRU5UIEhBTkRMRVJTIC0gRFJBV1xuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyB1cGRhdGUgcmVzcG9uc2VzIHN1Y2ggYXMgdmlzdWFsaXphdGlvbiBvZiBsaXN0ZW5lcnNcbiAgICAgICAgZnVuY3Rpb24gZHJhd1Jlc3BvbnNlcyhwb3N0KXtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3JlZmVyZW5jZSBwb3N0OicsIHBvc3QpO1xuXG4gICAgICAgICAgICBTZXNzaW9uU3ZjLmZldGNoKClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHNlc3Npb25zKXtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2Vzc2lvbnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2Vzc2lvbiA9IHNlc3Npb25zW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNraXAgbXkgc2Vzc2lvbiAtIG5vIG5lZWQgdG8gZHJhdyDrgrQg7J6Q7Iug7J2YIOyEuOyFmOydgCDqt7jrprTtlYTsmpTqsIAg7JeG64ukLlxuICAgICAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5ndWlkID09IHNjb3BlLmd1aWQpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAgLy8gc2Vzc2lvbidzIHdhdGNoIGxvY2F0aW9uIHdpbGwgYmUgYm91bmNlZCFcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnc2Vzc2lvbiB3YXRjaCBsb2NhdGlvbjonLCBzZXNzaW9uLndhdGNobG9jKTtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygncG9zdCBsb2NhdGlvbjonLCBwb3N0LmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdhdGNoX2xvY2F0aW9uID0gYW5ndWxhci5mcm9tSnNvbihzZXNzaW9uLndhdGNobG9jKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc3RfbG9jYXRpb24gID0gYW5ndWxhci5mcm9tSnNvbihwb3N0LmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIOycoOyggOqwgCDrs7Tqs6Ag7J6I64qUIOuwlOyatOuNlOumrCDslYjsl5Ag6re4IHNlc3Npb24o64uk66W47Jyg7KCAKSDssrTtgoFcblxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGN1cnJlbnRfbWFwX3NlLCBjdXJyZW50X21hcF9udyk7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISh3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbGF0IDwgY3VycmVudF9tYXBfbncubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKHdhdGNoX2xvY2F0aW9uLmNlbnRlcl9sYXQgPiBjdXJyZW50X21hcF9zZS5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEod2F0Y2hfbG9jYXRpb24uY2VudGVyX2xvbiA8IGN1cnJlbnRfbWFwX3NlLmxuZygpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgISh3YXRjaF9sb2NhdGlvbi5jZW50ZXJfbG9uID4gY3VycmVudF9tYXBfbncubG5nKCkpIClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBzZXNzaW9uKOuLpOuluOycoOyggCnrk6TsnbQg6re4IO2PrOyKpO2KuOulvCDrs7Tqs6Ag7J6I7KeAIOyViuycvOuptCDsiqTtgrUuXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHBvc3RfbG9jYXRpb24ubGF0IDwgd2F0Y2hfbG9jYXRpb24ubndfbGF0KSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShwb3N0X2xvY2F0aW9uLmxhdCA+IHdhdGNoX2xvY2F0aW9uLnNlX2xhdCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEocG9zdF9sb2NhdGlvbi5sb24gPCB3YXRjaF9sb2NhdGlvbi5zZV9sb24pIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKHBvc3RfbG9jYXRpb24ubG9uID4gd2F0Y2hfbG9jYXRpb24ubndfbG9uKSApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHdhdGNoX2xvY2F0aW9uLmNlbnRlcl9sYXQsIHdhdGNoX2xvY2F0aW9uLmNlbnRlcl9sb24pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmtlciBvcHRpb24gc2V0dGluZ1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGVMb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uQk9VTkNFLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiVXNlclBpblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VMaXN0ZW5lcixcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGltaXplZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcihtYXJrZXJPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlcl9sb2NhdGlvbl9tYXJrZXJfbGlmZXNwYW4gPSAxODAwO1xuXG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKG9sZF9tYXJrZXIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRfbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfShtYXJrZXIpKSwgXG4gICAgICAgICAgICAgICAgICAgIHVzZXJfbG9jYXRpb25fbWFya2VyX2xpZmVzcGFuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFuZERyYXdQb3N0cygpe1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBmb3IgY2hlY2tpbmcgbG9jYWwgcG9zdHMgLSBpc1BvaW50aW5nWW91XG4gICAgICAgICAgICBpc0d1aWR0Z3RDaGFuZ2VkID0gcHJldkd1aWR0Z3QgIT0gc2NvcGUuZ3VpZHRndDsgLy8gc2VlIGlmIG15IGd1aWR0Z3QgaGFzIGNoYW5nZWQ7XG4gICAgICAgICAgICBwcmV2R3VpZHRndCA9IHNjb3BlLmd1aWR0Z3Q7IC8vIHVwZGF0ZSBwcmV2aW91cyBndWlkdGd0XG5cbiAgICAgICAgICAgIC8vdmFyIGd1aWRPYmogPSB7Z3VpZDogc2NvcGUuZ3VpZH0gLy8gZm9yIHNvY2tldCBmZXRjaCBvcHRpbWl6YXRpb24gVE9ET1xuICAgICAgICAgICAgUG9zdHNTdmMuZmV0Y2goKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocG9zdHMpe1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb3N0cy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3N0ID0gcG9zdHNbaV07XG5cbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBTVEFSVCAtIENIRUNLIElGIElUUyBXSVRISU4gVklFVyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGFuZ3VsYXIuZnJvbUpzb24ocG9zdC5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBnb29nbGVMb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG9uKTtcblxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZ29vZ2xlTG9jLmxhdCgpIDwgY3VycmVudF9tYXBfbncubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sYXQoKSA+IGN1cnJlbnRfbWFwX3NlLmxhdCgpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIShnb29nbGVMb2MubG5nKCkgPCBjdXJyZW50X21hcF9zZS5sbmcoKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxuZygpID4gY3VycmVudF9tYXBfbncubG5nKCkpIClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHNraXAgdGhpcyBwb3N0IC0gbm8gbmVlZCB0byBkcmF3XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBFTkQgLSBDSEVDSyBJRiBJVFMgV0lUSElOIFZJRVcgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5cbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBTVEFSVCAtIENIRUNLIFdFIEhBVkUgVE8gUkVEUkFXIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIG1hcmtlcnMgcG9zdCBpcyBleGlzaXRpbmcgb25lLCB3ZSBkb24ndCB3YW50IHRvIGRyYXcgaXQgYWdhaW4uXG4gICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgZHJhdyBuZXcgb25lcyFcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIG1hcmtlcjsgbWFya2VyID0gbWFya2Vyc09uTWFwW2pdOyBqKyspe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+ydtOu2gOu2hCDroZzsp4HsnYQg64uk7IucIOynnOyVvO2VqFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzQWxyZWFkeURyYXduID0gcG9zdC5faWQgPT0gbWFya2VyLnBvc3QuX2lkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWxyZWFkeURyYXduKSAvLyDsnbTrr7gg6re466Ck7KGM64qU7KeAIO2FjOyKpO2KuFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0d1aWR0Z3RDaGFuZ2VkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5EcmF3UG9zdChwb3N0Ll9pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWFya2VyLnBvc3QuZ3VpZHRndCA9PSBwb3N0Lmd1aWR0Z3QpeyAgLy8g7J2066+4IOq3uOugpOynhOqyg+ykkSwgZ3VpZHRndOydtCDrsJTrgIzsl4jripTqsIBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdCA9IG51bGw7IC8vIOydtOuvuCDqt7jroKTsp4Qg7Y+s7Iqk7Yq4652866m0LCBudWxs66GcLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8g7J20IGxvb3DsnYAgcG9zdC5faWTrp4wg6rKA7IKs7Jqp7J6E7Jy866GcLCDrp4zslb0g6rK57LmY66m0IOuwlOuhnCBsb29w7J2EIOupiOy2sOuPhCDqtJzssK7ri6QufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuRHJhd1Bvc3QocG9zdC5faWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zdCA9PSBudWxsKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBza2lwIHRoaXMgcG9zdCAtIG5vIG5lZWQgdG8gZHJhd1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRU5EIC0gQ0hFQ0sgV0UgSEFWRSBUTyBSRURSQVcgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5cbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBTVEFSVCAtIERSQVdJTkcgUE9TVCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmtlciBvcHRpb24gc2V0dGluZ1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBnb29nbGVMb2MsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkJ1YmJsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VQb3N0XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKG1hcmtlck9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgbWFya2VyIHRvIGFycmF5LCB0aGlzIG1lYW5zIHRoYXQgaXQgaGFzIGJlZW4gZHJhd24gdG8gbWFwXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcnNPbk1hcC5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcjogbWFya2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3QgIDogcG9zdFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBTVEFSVCAtIERSQVdJTkcgTUVTU0FHRSBXSU5ET1cgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgICAgICAgICB2YXIgY291cGxpbmdfc3RhdHVzID0gY2FsY3VsYXRlQ291cGxpbmcocG9zdC5ndWlkLCBwb3N0Lmd1aWR0Z3QpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJwb3N0LmlzTG9jYWxcIiwgcG9zdC5pc2xvY2FsKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2FsX3N0YXR1cyA9IHBvc3QuaXNsb2NhbDtcblxuICAgICAgICAgICAgICAgICAgICAvLyDsiqTsvZTtlITsl5DshJzrtoDthLAg7IOI66Gc7Jq0IOywqOydvOuTnCDsiqTsvZTtlITrpbwg66eM65Ok7Ja0IGVhY2ggZm9yIGxvb3Dsl5DshJwg7IKs7Jqp7ZWc64ukLlxuICAgICAgICAgICAgICAgICAgICAvLyAtLT4g7ZW07JW8LCDqsIEgRE9N7J20IOqwgeqwgeydmCBzY29wZeulvCDqsIDsoLjshJwgcG9zdCBtc2fqsIAg7JWIIOqyuey5nOuLpC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHNjb3BlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBwYXJlbnQuJG5ldyh0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgb3BlbkluZm9XaW5kb3cgPSAoZnVuY3Rpb24obWFya2VyLCBjaGlsZF9zY29wZSwgcG9zdCwgY291cGxpbmdfc3RhdHVzLCBsb2NhbF9zdGF0dXMpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgbmV3IHdpbmRvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmZvV2luZG93T3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGl4ZWxPZmZzZXQ6IG5ldyBnb29nbGUubWFwcy5TaXplKC0zOS41LCAxNi4wKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUF1dG9QYW46IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coaW5mb1dpbmRvd09wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGN1cnJlbnQgdGltZSBhbmQgc3VidHJhY3QgaXQgZnJvbSBwb3N0J3MgZW5kIHRpbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB3aWxsIGJlIGFjY3VyYXRlIHBvc3QgdGltZSBmb3IgaW5zdGFudCBwb3N0cyBhbmQgbG9uZyBwb3N0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudERhdGUgICAgICA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lTWlsbGkgPSBjdXJyZW50RGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlICAgICAgICAgPSAoKHBvc3QubGlmZWVuZCAtIGN1cnJlbnRUaW1lTWlsbGkpID49IDApID8gKHBvc3QubGlmZWVuZCAtIGN1cnJlbnRUaW1lTWlsbGkpIDogMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaWZlcGVyY2VudGFnZSA9IChwb3N0bGlmZSAvIHBvc3QubGlmZXNwYW4pLnRvRml4ZWQoMilcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdG8gbWFrZSBkYXRhIGF2YWlsYWJsZSB0byB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLm1zZyAgICAgICAgICAgICAgICA9IHBvc3QuYm9keTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0bGlmZSAgICAgICAgICAgPSBwb3N0bGlmZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0Z3VpZCAgICAgICAgICAgPSBwb3N0Lmd1aWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUucG9zdGd1aWR0Z3QgICAgICAgID0gcG9zdC5ndWlkdGd0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkX3Njb3BlLnBvc3Rjb3VwbGVzdGF0dXMgICA9IGNvdXBsaW5nX3N0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPSBsaWZlcGVyY2VudGFnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0bG9jYWxzdGF0dXMgICAgPSBsb2NhbF9zdGF0dXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgZW5hYmxlcyBjaGFuZ2luZyBjb3VwbGluZyB2YWx1ZSBpbnN0YW50bHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRfc2NvcGUuJG9uKCdzZXQ6Y291cGxpbmcnLCBmdW5jdGlvbihfLCBjb3VwbGluZ191cGRhdGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0Y291cGxlc3RhdHVzID0gY291cGxpbmdfdXBkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21waWxlIGl0IGJlZm9yZSBsb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudCAgPSAnPGRpdiBtYXAtbXNnPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBpbGVkID0gJGNvbXBpbGUoY29udGVudCkoY2hpbGRfc2NvcGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvdy5zZXRDb250ZW50KCBjb21waWxlZFswXSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIoaW5mb1dpbmRvdywnY2xvc2VjbGljaycsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3QuZ3VpZCA9PSBzY29wZS5ndWlkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dhbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJBcmUgeW91IHN1cmU/XCIsICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJZb3Ugd2lsbCBub3QgYmUgYWJsZSB0byByZWNvdmVyIHRoaXMgaW1hZ2luYXJ5IGZpbGUhXCIsICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ3YXJuaW5nXCIsICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6IFwiI0RENkI1NVwiLCAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBcIlllcywgZGVsZXRlIGl0IVwiLCAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oaXNDb25maXJtKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNDb25maXJtKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zdHNTdmMucmVtb3ZlKHBvc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2FsKFwiRGVsZXRlZCFcIiwgXCJZb3VyIGltYWdpbmFyeSBmaWxlIGhhcyBiZWVuIGRlbGV0ZWQuXCIsIFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudERhdGUgICAgICA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VGltZU1pbGxpID0gY3VycmVudERhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zdGxpZmUgICAgICAgICA9ICgocG9zdC5saWZlZW5kIC0gY3VycmVudFRpbWVNaWxsaSkgPj0gMCkgPyAocG9zdC5saWZlZW5kIC0gY3VycmVudFRpbWVNaWxsaSkgOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlmZXBlcmNlbnRhZ2UgPSAocG9zdGxpZmUgLyBwb3N0LmxpZmVzcGFuKS50b0ZpeGVkKDIpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpZmVwZXJjZW50YWdlID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZF9zY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPSBsaWZlcGVyY2VudGFnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9XaW5kb3cub3BlbihtYXAgLCBtYXJrZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvdy5vcGVuKG1hcCAsIG1hcmtlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KShtYXJrZXIsIGNoaWxkLCBwb3N0LCBjb3VwbGluZ19zdGF0dXMsIGxvY2FsX3N0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBvcGVuSW5mb1dpbmRvdygpO1xuICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEVORCAtIERSQVdJTkcgTUVTU0FHRSBXSU5ET1cgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRU5EIC0gRFJBV0lORyBQT1NUIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICAgICAgICAgIH0gLy8gZW5kIG9mIGZvci1sb29wXG4gICAgICAgICAgICB9KTsgLy8gZW5kIG9mIHBvc3QgZmV0Y2ggc3VjY2Vzc1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhd0Ryb3BEb3duKGxvY2F0aW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XG5cbiAgICAgICAgICAgIHVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgLy8g67CU7Jq0642U66asIOyViOyXkCDsnojripTsp4DrtoDthLAg7LK07YGs66W8IO2VmOyepVxuICAgICAgICAgICAgaWYgKCEoZ29vZ2xlTG9jLmxhdCgpIDwgY3VycmVudF9tYXBfbncubGF0KCkpIHx8XG4gICAgICAgICAgICAgICAgIShnb29nbGVMb2MubGF0KCkgPiBjdXJyZW50X21hcF9zZS5sYXQoKSkgfHxcbiAgICAgICAgICAgICAgICAhKGdvb2dsZUxvYy5sbmcoKSA8IGN1cnJlbnRfbWFwX3NlLmxuZygpKSB8fFxuICAgICAgICAgICAgICAgICEoZ29vZ2xlTG9jLmxuZygpID4gY3VycmVudF9tYXBfbncubG5nKCkpIClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIHNraXAgdGhpcyBwb3N0IC0gbm8gbmVlZCB0byBkcmF3XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG1hcmtlciBvcHRpb24gc2V0dGluZ1xuICAgICAgICAgICAgdmFyIG1hcmtlck9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGdvb2dsZUxvYyxcbiAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIlVzZXJQaW5cIixcbiAgICAgICAgICAgICAgICBpY29uOiBpbWFnZVVzZXJMb2dpblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIobWFya2VyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICR0aW1lb3V0KFxuICAgICAgICAgICAgICAgIChmdW5jdGlvbihvbGRfbWFya2VyKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRfbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KG1hcmtlcikpLCBcbiAgICAgICAgICAgIDIwMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdW5EcmF3UG9zdChwb3N0aWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJzdGFydGluZyByZW1vdmUgcG9zdFwiKTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwLCBtYXJrZXI7IG1hcmtlciA9IG1hcmtlcnNPbk1hcFtrXTsgaysrKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhwb3N0aWQpO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobWFya2VyLnBvc3QuX2lkKTtcbiAgICAgICAgICAgICAgICBpZiAocG9zdGlkID09IG1hcmtlci5wb3N0Ll9pZCkge1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXIubWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vyc09uTWFwLnNwbGljZShrLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhd0FuZFNldFBsYWNlKGxvY2F0aW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZ29vZ2xlTG9jID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsb2NhdGlvbi5sYXQsIGxvY2F0aW9uLmxvbik7XG4gICAgICAgICAgICBkcmF3SGVscGVyTWFya2VyKGdvb2dsZUxvYyk7XG4gICAgICAgICAgICBzZXRQbGFjZShnb29nbGVMb2MpO1xuXG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgc2VydmVyIGdldHMgdXBkYXRlZCB3aGVuZXZlciBzZXR0aW5nIG5ldyBwbGFjZSB3aXRoIG1hcmtlclxuICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZHJhdyBtYXAgd2l0aCBoZWxwZXIgbWFya2Vyc1xuICAgICAgICBmdW5jdGlvbiBkcmF3SGVscGVyTWFya2VyKGxvY2F0aW9uKXtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXJrZXI7IG1hcmtlciA9IGhlbHBlck1hcmtlcnNbaV07IGkrKykge1xuICAgICAgICAgICAgICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWxwZXJNYXJrZXJzID0gW107XG4gICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGxvY2F0aW9uLCBcbiAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICBpY29uOiBpbWFnZVRhcmdldFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoZWxwZXJNYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVuRHJhd0hlbHBlck1hcmtlcigpe1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG1hcmtlcjsgbWFya2VyID0gaGVscGVyTWFya2Vyc1tpXTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyLnNldE1hcChudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhlbHBlck1hcmtlcnMgPSBbXTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gVVRJTFxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBzZXRQbGFjZShsb2NhdGlvbilcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gYnJvYWRjYXN0IGxvY2F0aW9uIGluZm9yKGxvbixsYXQpXG4gICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0OmxvYycsIGxvY2F0aW9uKTtcblxuICAgICAgICAgICAgdmFyIGdlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XG5cbiAgICAgICAgICAgIC8vIGJyb2FkY2FzdCBwbGFjZSBmb3JtYXR0ZWRfYWRkcmVzcyBhbmQgZHJhdyBpY29uXG4gICAgICAgICAgICBnZW9jb2Rlci5nZW9jb2RlKCB7ICdsYXRMbmcnOiBsb2NhdGlvbiB9LCBmdW5jdGlvbihyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAvLyBhcyB1c2VyIGNsaWNrcyBvbiB0aGUgbWFwLFxuICAgICAgICAgICAgICAgIC8vIHdlIGhhdmUgdG8gc2F2ZSB0aGUgZm9ybWF0dGVkIGFkZHJlc3MgaW4gJHNjb3BlIGFuZFxuICAgICAgICAgICAgICAgIC8vIGl0IHdpbGwgYmUgdXNlZCB0aHJvdWdoIHBvc3RzLmN0cmxcbiAgICAgICAgICAgICAgICAvLyBlbWl0IGJyb2FkY2FzZSAncGxhY2UnIGFuZCBzZW5kIHRoaXMgdG8gYXBwbGljYXRpb24uY3RybFxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJyb2FkY2FzdCBmb3JtYXR0ZWRfYWRkcmVzc1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0OnBsYWNlJywgcmVzdWx0c1sxXS5mb3JtYXR0ZWRfYWRkcmVzcyk7IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgc3dhbChcIlwiLFwiTG9jYXRpb24gZG9lcyBub3QgZXhpc3RzXCIpO1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0OnBsYWNlJywgXCJMb2NhdGlvbiBkb2VzIG5vdCBleGlzdHNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVDb3VwbGluZyhwb3N0X2d1aWQsIHBvc3RfZ3VpZHRndClcbiAgICAgICAge1xuICAgICAgICAgICAgLyogY291cGxpbmcgc3RhdHVzXG4gICAgICAgICAgICAgICAgMCAtIG5vIHN0YXR1c1xuICAgICAgICAgICAgICAgIDEgLSBpIGxpa2UgeW91XG4gICAgICAgICAgICAgICAgMiAtIHlvdSBsaWtlIGlcbiAgICAgICAgICAgICAgICA0IC0gd2UgbGlrZSBlYWNoIG90aGVyIC8vIGRpc2FibGVkLlxuICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgdmFyIGlzUG9pbnRpbmdZb3UgICAgID0gc2NvcGUuZ3VpZHRndCA9PSBwb3N0X2d1aWQ7XG4gICAgICAgICAgICB2YXIgaXNQb2ludGluZ01lICAgICAgPSBzY29wZS5ndWlkICAgID09IHBvc3RfZ3VpZHRndDtcbiAgICAgICAgICAgIHZhciBpc015UG9zdCAgICAgICAgICA9IHNjb3BlLmd1aWQgICAgPT0gcG9zdF9ndWlkO1xuICAgICAgICAgICAgdmFyIGlzUG9pbnRpbmdTb21lb25lID0gc2NvcGUuZ3VpZHRndCAhPSAnMCc7XG5cbiAgICAgICAgICAgIGlmIChpc015UG9zdCAmJiBpc1BvaW50aW5nU29tZW9uZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMjsgLy8gZm9yIG15IHZpZXcncyBteSBwb3N0IHRvIGJlIFwiSSBsaWtlIHNvbWVvbmVcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNQb2ludGluZ1lvdSAmJiBpc1BvaW50aW5nTWUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1BvaW50aW5nWW91ICYmICFpc1BvaW50aW5nTWUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghaXNQb2ludGluZ1lvdSAmJiBpc1BvaW50aW5nTWUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBVSVxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBmdW5jdGlvbiBzZXRVSVNlYXJjaExvY2F0aW9uVG9nZ2xlKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIG1hcFNlYXJjaFRvZ2dsZSA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLXNlYXJjaC10b2dnbGUnKSk7XG4gICAgICAgICAgICBtYXAuY29udHJvbHNbZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLlRPUF9MRUZUXS5wdXNoKG1hcFNlYXJjaFRvZ2dsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSU1vdmVUb0N1cnJMb2NCdG4oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgY3VyckxvY0J0biA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLWJ0bi1jdXJyJykpOyBcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uVE9QX1JJR0hUXS5wdXNoKGN1cnJMb2NCdG4pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0VUlQb3N0Rm9ybSgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBwb3N0Rm9ybSA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLXBvc3RpbmcnKSk7IFxuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5CT1RUT01fQ0VOVEVSXS5wdXNoKHBvc3RGb3JtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJUG9zdEJ0bigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBwb3N0QnRuID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtYnRuLXN1Ym1pdCcpKTtcbiAgICAgICAgICAgIG1hcC5jb250cm9sc1tnb29nbGUubWFwcy5Db250cm9sUG9zaXRpb24uQk9UVE9NX0NFTlRFUl0ucHVzaChwb3N0QnRuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFVJVGltZVNsaWRlcigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciB0aW1lU2xpZGVyID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtdGltZS1zbGlkZXInKSk7XG4gICAgICAgICAgICBtYXAuY29udHJvbHNbZ29vZ2xlLm1hcHMuQ29udHJvbFBvc2l0aW9uLkJPVFRPTV9DRU5URVJdLnB1c2godGltZVNsaWRlcik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRVSVNlYXJjaEJveCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgc2VhcmNoIGJveCBhbmQgbGluayBpdCB0byB0aGUgVUkgZWxlbWVudC5cbiAgICAgICAgICAgIHZhciBpbnB1dCA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFjLWlucHV0JykpOyAvLyBAdHlwZSB7SFRNTElucHV0RWxlbWVudH0gIFxuICAgICAgICAgICAgbWFwLmNvbnRyb2xzW2dvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5UT1BfTEVGVF0ucHVzaChpbnB1dCk7XG5cbiAgICAgICAgICAgIHZhciBzZWFyY2hCb3ggPSBuZXcgZ29vZ2xlLm1hcHMucGxhY2VzLlNlYXJjaEJveCgoaW5wdXQpKTsgLy8gQHR5cGUge0hUTUxJbnB1dEVsZW1lbnR9IFxuXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIHRoZSBldmVudCBmaXJlZCB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYW4gaXRlbSBmcm9tIHRoZVxuICAgICAgICAgICAgLy8gcGljayBsaXN0LiBSZXRyaWV2ZSB0aGUgbWF0Y2hpbmcgcGxhY2VzIGZvciB0aGF0IGl0ZW0uXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihzZWFyY2hCb3gsICdwbGFjZXNfY2hhbmdlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBwbGFjZXMgPSBzZWFyY2hCb3guZ2V0UGxhY2VzKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGxhY2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gdGFrZSBvbmx5IDEgc3BvdFxuICAgICAgICAgICAgICAgIHZhciBwbGFjZSA9IHBsYWNlc1swXTtcblxuICAgICAgICAgICAgICAgIC8vIHdoZW4gc2VhcmNoIGhhcHBlbnMsIGxvY2F0aW9uIHdpbGwgYmUgdXBkYXRlZCBhcyB3ZWxsIGZvciBwb3N0XG4gICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBsYXQ6IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpLFxuICAgICAgICAgICAgICAgICAgICBsb246IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxuZygpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkcmF3QW5kU2V0UGxhY2UobG9jYXRpb24pO1xuXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSA9IHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxhdGl0dWRlO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlID0gcGxhY2UuZ2VvbWV0cnkubG9jYXRpb24ubG9uZ2l0dWRlO1xuXG4gICAgICAgICAgICAgICAgbWFwLnBhblRvKHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICBtYXAuc2V0Wm9vbSgxNik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEVWRU5UXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50Q2xpY2soKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBjbGljayBldmVudCBvbiBtYXAgdG8gZHJhdyBYIG1hcmtlciBhbmQgc2V0IFBvc3QgbG9jYXRpb25cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcF9vcmlnaW4sICdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBsYXQ6IGV2ZW50LmxhdExuZy5sYXQoKSxcbiAgICAgICAgICAgICAgICAgICAgbG9uOiBldmVudC5sYXRMbmcubG5nKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRyYXdBbmRTZXRQbGFjZShsb2NhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50Q2VudGVyQ2hhbmdlZCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcF9vcmlnaW4sICdjZW50ZXJfY2hhbmdlZCcsIGZ1bmN0aW9uKCl7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIHdoZW4gbWFwIGNlbnRlciBjaGFuZ2UsIHVwZGF0ZSBsYXN0IGxvY2F0aW9uIGluIG1lbW9yeSxcbiAgICAgICAgICAgICAgICAvLyBzbyBicm93c2VyIHdpbGwgcmVtZW1iZXIgaXQgbmV4dCB0aW1lIHlvdSBjb21lIVxuICAgICAgICAgICAgICAgIHVwZGF0ZURlZmF1bHRMb2NhdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRFdmVudEJvdW5kc0NoYW5nZWQoKVxuICAgICAgICB7XG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnYm91bmRzX2NoYW5nZWQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gbWFwIGNlbnRlciBjaGFuZ2UsIHVwZGF0ZSBib3VuZHMgaW5mbyBmb3IgbWFwXG4gICAgICAgICAgICAgICAgdXBkYXRlQm91bmRzKCk7ICBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0RXZlbnREcmFnRW5kKClcbiAgICAgICAge1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwX29yaWdpbiwgJ2RyYWdlbmQnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBtYXAgYXMgZHJhZyBlbmRcbiAgICAgICAgICAgICAgICB1cGRhdGVBbmREcmF3UG9zdHMoKTtcblxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB3YXRjaGxvYyB3aGVuIGNlbnRlciBjaGFuZ2VkLlxuICAgICAgICAgICAgICAgIHVwZGF0ZVdhdGNoTG9jYXRpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0RXZlbnRSZXNpemUoKVxuICAgICAgICB7XG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAncmVzaXplJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbWFwIGFzIGRyYWcgZW5kXG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICB1cGRhdGVXYXRjaExvY2F0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldEV2ZW50Wm9vbUNoYW5nZWQoKVxuICAgICAgICB7XG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXBfb3JpZ2luLCAnem9vbV9jaGFuZ2VkJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbWFwIGFzIGRyYWcgZW5kXG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICB1cGRhdGVXYXRjaExvY2F0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIFNFVFVQIEZPUiBNQVBcbiAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gbWFwIGluaXRpYWwgY29uZmlnc1xuICAgICAgICBmdW5jdGlvbiBpbml0aWFsTWFwRGF0YSgpe1xuICAgICAgICAgICAgaW5pdGlhbE1hcENlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoMzQuMDUsIC0xMTguMjQpO1xuICAgICAgICBcbiAgICAgICAgICAgIGlmICghaXNOYU4od2luZG93LmxvY2FsU3RvcmFnZS5sYXRpdHVkZSkgJiYgIWlzTmFOKHdpbmRvdy5sb2NhbFN0b3JhZ2UubG9uZ2l0dWRlKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsTWFwQ2VudGVyID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyh3aW5kb3cubG9jYWxTdG9yYWdlLmxhdGl0dWRlLCB3aW5kb3cubG9jYWxTdG9yYWdlLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldFBsYWNlKGluaXRpYWxNYXBDZW50ZXIpO1xuXG4gICAgICAgICAgICBtYXBPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXIgICAgICA6IGluaXRpYWxNYXBDZW50ZXIsXG4gICAgICAgICAgICAgICAgICAgIHpvb20gICAgICAgIDogMTUsXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbHdoZWVsIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3RyZWV0Vmlld0NvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlQ29udHJvbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHBhbkNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1hcFR5cGVDb250cm9sT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgIG1hcFR5cGVJZHM6IFtnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUCwgQ0xPVURfTUFQX0lEXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlSWQ6IENMT1VEX01BUF9JRFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldE1hbnVhbEV2ZW50cygpe1xuICAgICAgICAgICAgZnVuY3Rpb24gQ2xvdWRNYXAob3B0aW9ucyl7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJJbml0aWFsaXppbmcgbWFwXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpbnN0YW50aWF0ZSBnb29nbGUgbWFwXG4gICAgICAgICAgICBtYXBfb3JpZ2luID0gbmV3IGdvb2dsZS5tYXBzLk1hcChlbGVtZW50WzBdLCBtYXBPcHRpb25zKTtcblxuICAgICAgICAgICAgLy8gc2V0IHByb3RvdHlwZSBvZiBjdXN0b20gbWFwIHdpdGggb3JpZ2luIG1hcFxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlID0gbWFwX29yaWdpbjtcblxuICAgICAgICAgICAgLy8gZHJhdyB4IG1hcmtlclxuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlRHJhd1hNYXJrZXIobG9jYXRpb24pe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ2RyYXdYTWFya2VyJywgbG9jYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLmRyYXdYTWFya2VyID0gaGFuZGxlRHJhd1hNYXJrZXI7XG5cbiAgICAgICAgICAgIC8vIGRyYXcgY3VycmVudCBsb2NhdGlvbiBtYXJrZXJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZURyYXdDdXJyTG9jYXRpb25NYXJrZXIobG9jYXRpb24pe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ2RyYXdDdXJyTG9jYXRpb25NYXJrZXInLCBsb2NhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDbG91ZE1hcC5wcm90b3R5cGUuZHJhd0N1cnJMb2NhdGlvbk1hcmtlciA9IGhhbmRsZURyYXdDdXJyTG9jYXRpb25NYXJrZXI7XG5cbiAgICAgICAgICAgIC8vIGRyYXcgcG9zdHNcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZUFuZERyYXdQb3N0cygpe1xuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgJ3VwZGF0ZUFuZERyYXdQb3N0cycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLnVwZGF0ZUFuZERyYXdQb3N0cyA9IGhhbmRsZVVwZGF0ZUFuZERyYXdQb3N0cztcblxuICAgICAgICAgICAgLy8gZHJhdyByZXNwb25zZXNcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZURyYXdSZXNwb25zZXMocG9zdCl7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCAnZHJhd1Jlc3BvbnNlcycsIHBvc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ2xvdWRNYXAucHJvdG90eXBlLmRyYXdSZXNwb25zZXMgPSBoYW5kbGVEcmF3UmVzcG9uc2VzO1xuXG4gICAgICAgICAgICAvLyB1bmRyYXcgcG9zdHNcbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVVuRHJhd1Bvc3QocG9zdGlkKXtcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsICd1bkRyYXdQb3N0JywgcG9zdGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENsb3VkTWFwLnByb3RvdHlwZS51bkRyYXdQb3N0ID0gaGFuZGxlVW5EcmF3UG9zdDtcblxuICAgICAgICAgICAgLy8gY3JlYXRlIGN1c3RvbSBtYXAgZm9yIGFwcFxuICAgICAgICAgICAgbWFwID0gbmV3IENsb3VkTWFwKCk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ2RyYXdYTWFya2VyJywgZnVuY3Rpb24obG9jYXRpb24pe1xuICAgICAgICAgICAgICAgIGRyYXdBbmRTZXRQbGFjZShsb2NhdGlvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnZHJhd0N1cnJMb2NhdGlvbk1hcmtlcicsIGZ1bmN0aW9uKGxvY2F0aW9uKXtcbiAgICAgICAgICAgICAgICBkcmF3RHJvcERvd24obG9jYXRpb24pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ3VwZGF0ZUFuZERyYXdQb3N0cycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdXBkYXRlQW5kRHJhd1Bvc3RzKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAnZHJhd1Jlc3BvbnNlcycsIGZ1bmN0aW9uKHBvc3Qpe1xuICAgICAgICAgICAgICAgIGRyYXdSZXNwb25zZXMocG9zdCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFwLCAndW5EcmF3UG9zdCcsIGZ1bmN0aW9uKHBvc3RpZCl7XG4gICAgICAgICAgICAgICAgdW5EcmF3UG9zdChwb3N0aWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRTdHlsZUZvck1hcCgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIOq5lOuBlOydtCBcbiAgICAgICAgICAgIC8vdmFyIGZlYXR1cmVPcHRzID0gW3tcImZlYXR1cmVUeXBlXCI6XCJhZG1pbmlzdHJhdGl2ZVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy50ZXh0LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiM2MTk1YTBcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjJmMmYyXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmZmZmZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kucGFya1wiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNlNmYzZDZcIn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6NDV9LHtcInZpc2liaWxpdHlcIjpcInNpbXBsaWZpZWRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcInNpbXBsaWZpZWRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2Y0ZDJjNVwifSx7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy50ZXh0XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjNGU0ZTRlXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZjRmNGY0XCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMudGV4dC5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjNzg3ODc4XCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMuaWNvblwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwidHJhbnNpdFwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNlYWY2ZjhcIn0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZWFmNmY4XCJ9XX1dO1xuICAgICAgICAgICAgLy8g7IOB7YG87J20XG4gICAgICAgICAgICAvL3ZhciBmZWF0dXJlT3B0cyA9IFt7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlLm1hbl9tYWRlXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmN2YxZGZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlLm5hdHVyYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2QwZTNiNFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGUubmF0dXJhbC50ZXJyYWluXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLmJ1c2luZXNzXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2kubWVkaWNhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmJkM2RhXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5wYXJrXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNiZGU2YWJcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LnN0cm9rZVwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZmZTE1ZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5zdHJva2VcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNlZmQxNTFcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5hcnRlcmlhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmZmZmZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5sb2NhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcImJsYWNrXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInRyYW5zaXQuc3RhdGlvbi5haXJwb3J0XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2NmYjJkYlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjYTJkYWYyXCJ9XX1dO1xuICAgICAgICAgICAgLy8g65iR65iR7J20XG4gICAgICAgICAgICB2YXIgZmVhdHVyZU9wdHMgPSBbe1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzdmYzhlZFwifSx7XCJzYXR1cmF0aW9uXCI6NTV9LHtcImxpZ2h0bmVzc1wiOi02fSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVsc1wiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM3ZmM4ZWRcIn0se1wic2F0dXJhdGlvblwiOjU1fSx7XCJsaWdodG5lc3NcIjotNn0se1widmlzaWJpbGl0eVwiOlwib2ZmXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5wYXJrXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjODNjZWFkXCJ9LHtcInNhdHVyYXRpb25cIjoxfSx7XCJsaWdodG5lc3NcIjotMTV9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2YzZjRmNFwifSx7XCJzYXR1cmF0aW9uXCI6LTg0fSx7XCJsaWdodG5lc3NcIjo1OX0se1widmlzaWJpbGl0eVwiOlwib25cIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2ZmZmZmZlwifSx7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6MTAwfSx7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2ZmZmZmZlwifSx7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6MTAwfSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2JiYmJiYlwifSx7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6MjZ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNmZmNjMDBcIn0se1wic2F0dXJhdGlvblwiOjEwMH0se1wibGlnaHRuZXNzXCI6LTM1fSx7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI2ZmY2MwMFwifSx7XCJzYXR1cmF0aW9uXCI6MTAwfSx7XCJsaWdodG5lc3NcIjotMjJ9LHtcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaS5zY2hvb2xcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjZDdlNGU0XCJ9LHtcInNhdHVyYXRpb25cIjotNjB9LHtcImxpZ2h0bmVzc1wiOjIzfSx7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19XTtcbiAgICAgICAgICAgIC8vIOy0iOuhneydtFxuICAgICAgICAgICAgLy92YXIgZmVhdHVyZU9wdHMgPSBbe1wiZmVhdHVyZVR5cGVcIjpcImxhbmRzY2FwZVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNGRkE4MDBcIn0se1wic2F0dXJhdGlvblwiOjB9LHtcImxpZ2h0bmVzc1wiOjB9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzUzRkYwMFwifSx7XCJzYXR1cmF0aW9uXCI6LTczfSx7XCJsaWdodG5lc3NcIjo0MH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI0ZCRkYwMFwifSx7XCJzYXR1cmF0aW9uXCI6MH0se1wibGlnaHRuZXNzXCI6MH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmxvY2FsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzAwRkZGRFwifSx7XCJzYXR1cmF0aW9uXCI6MH0se1wibGlnaHRuZXNzXCI6MzB9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwid2F0ZXJcIixcInN0eWxlcnNcIjpbe1wiaHVlXCI6XCIjMDBCRkZGXCJ9LHtcInNhdHVyYXRpb25cIjo2fSx7XCJsaWdodG5lc3NcIjo4fSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiM2Nzk3MTRcIn0se1wic2F0dXJhdGlvblwiOjMzLjR9LHtcImxpZ2h0bmVzc1wiOi0yNS40fSx7XCJnYW1tYVwiOjF9XX1dO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgc3R5bGVkTWFwT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnQ3VzdG9tIFN0eWxlJ1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgY3VzdG9tTWFwVHlwZSA9IG5ldyBnb29nbGUubWFwcy5TdHlsZWRNYXBUeXBlKGZlYXR1cmVPcHRzLCBzdHlsZWRNYXBPcHRpb25zKTtcbiAgICAgICAgICAgIG1hcC5tYXBUeXBlcy5zZXQoQ0xPVURfTUFQX0lELCBjdXN0b21NYXBUeXBlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGluaXQgdGhlIG1hcFxuICAgICAgICBmdW5jdGlvbiBpbml0TWFwKCkge1xuICAgICAgICAgICAgaWYgKG1hcCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbE1hcERhdGEoKTtcblxuICAgICAgICAgICAgICAgIHNldE1hbnVhbEV2ZW50cygpO1xuXG4gICAgICAgICAgICAgICAgc2V0U3R5bGVGb3JNYXAoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYnJvYWRjYXN0IHRvIHNlbmQgbWFwIHRvIGFwcGxpY2F0aW9uIGN0cmxcbiAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdzZXQ6bWFwJywgbWFwKTtcblxuICAgICAgICAgICAgLy8gYWRkIFVJIGVsZW1lbnRzIHRvIG1hcFxuICAgICAgICAgICAgc2V0VUlTZWFyY2hMb2NhdGlvblRvZ2dsZSgpO1xuICAgICAgICAgICAgc2V0VUlTZWFyY2hCb3goKTtcbiAgICAgICAgICAgIHNldFVJTW92ZVRvQ3VyckxvY0J0bigpO1xuICAgICAgICAgICAgc2V0VUlQb3N0Rm9ybSgpO1xuICAgICAgICAgICAgc2V0VUlQb3N0QnRuKCk7XG4gICAgICAgICAgICBzZXRVSVRpbWVTbGlkZXIoKTtcblxuICAgICAgICAgICAgLy8gYWRkIG9yaWdpbiBuYXRpdmUgRXZlbnQgaGFuZGxlcnMgdG8gbWFwXG4gICAgICAgICAgICBzZXRFdmVudENsaWNrKCk7XG4gICAgICAgICAgICBzZXRFdmVudENlbnRlckNoYW5nZWQoKTtcbiAgICAgICAgICAgIHNldEV2ZW50RHJhZ0VuZCgpO1xuICAgICAgICAgICAgc2V0RXZlbnRSZXNpemUoKTtcbiAgICAgICAgICAgIHNldEV2ZW50Wm9vbUNoYW5nZWQoKTtcbiAgICAgICAgICAgIHNldEV2ZW50Qm91bmRzQ2hhbmdlZCgpO1xuXG4gICAgICAgICAgICAvLyB1cGRhdGUgdmVyeSBmaXJzdCB0aW1lIGZvciBhcHBcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGVmYXVsdExvY2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlQm91bmRzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlV2F0Y2hMb2NhdGlvbigpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZUFuZERyYXdQb3N0cygpO1xuICAgICAgICAgICAgfSwgODAwKTtcbiAgICAgICAgfSBcblxuICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBFWEVDVVRFXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGluaXRNYXAoKTtcbiAgICB9O1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHRlbXBsYXRlOiAnPGRpdiBpZD1cIm1hcC1jYW52YXNcIj48L2Rpdj4nLFxuICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICBsaW5rOiBsaW5rXG4gICAgfTtcbn0pO1xuXG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmRpcmVjdGl2ZSgnbWFwTXNnJywgZnVuY3Rpb24gKCR0aW1lb3V0LCBTZXNzaW9uU3ZjLCBQb3N0c1N2Yykge1xuXG4gICAgdmFyIGxpbmsgPSBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHsgICAgICAgIFxuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIENPVVBMSU5HIENMQVNTXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8qIGNvdXBsaW5nIHN0YXR1c1xuICAgICAgICAgIDAgLSBubyBzdGF0dXNcbiAgICAgICAgICAxIC0gaSBsaWtlIHlvdVxuICAgICAgICAgIDIgLSB5b3UgbGlrZSBpXG4gICAgICAgICAgNCAtIHdlIGxpa2UgZWFjaCBvdGhlclxuICAgICAgICAqL1xuICAgICAgICBzY29wZS5nZXRfY291cGxpbmcgPSBmdW5jdGlvbihjb3VwbGluZ19zdGF0dXMpe1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChjb3VwbGluZ19zdGF0dXMgPT0gNCl7XG4gICAgICAgICAgICByZXR1cm4gXCJjb3VwbGluZyBjb3VwbGluZy1jb3VwbGVcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoY291cGxpbmdfc3RhdHVzID09IDEpe1xuICAgICAgICAgICAgcmV0dXJuIFwiY291cGxpbmcgY291cGxpbmctaWxpa2V5b3VcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoY291cGxpbmdfc3RhdHVzID09IDIpe1xuICAgICAgICAgICAgcmV0dXJuIFwiY291cGxpbmcgY291cGxpbmcteW91bGlrZWlcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gXCJjb3VwbGluZyBjb3VwbGluZy1ub25lXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIERPQ1VNRU5UIFJFQURZXG4gICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAkdGltZW91dCh1cGRhdGVHdWlkVGFyZ2V0LCAxMDApO1xuXG4gICAgICAgICAgJHRpbWVvdXQodXBkYXRlUG9zdFRpbWVyLCAxMCk7XG5cbiAgICAgICAgICAkdGltZW91dChjdXN0b21pemVJbmZvV2luZG93LCAxMCk7XG5cbiAgICAgICAgICAkdGltZW91dChjdXN0b21pemVDbG9zZUJ0biwgMTApO1xuXG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhcInBvc3QgbG9jYWwgc3RhdHVzOlwiLCBzY29wZS5wb3N0bG9jYWxzdGF0dXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVHdWlkVGFyZ2V0KCl7XG4gICAgICAgICAgLy8gdXBkYXRlIHN0YXR1cyBmb3IgZ3VpZCB0YXJnZXRcbiAgICAgICAgICB2YXIgcG9zdGd1aWQgID0gc2NvcGUucG9zdGd1aWQ7XG4gICAgICAgICAgdmFyIG15Z3VpZCAgICA9IHNjb3BlLiRwYXJlbnQuZ3VpZDtcbiAgICAgICAgICB2YXIgbXlndWlkdGd0ID0gc2NvcGUuJHBhcmVudC5ndWlkdGd0O1xuXG4gICAgICAgICAgZWxlbWVudC5jaGlsZHJlbigpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgdmFyIHVwZGF0ZV9ndWlkdGd0ID0gcG9zdGd1aWQ7XG5cbiAgICAgICAgICAgIC8vIGNsaWNraW5nIG15IG1lc3NhZ2Ugd2luZG93XG4gICAgICAgICAgICAvLyBpZiBpdHMgb24gY291cGxpbmcsIGJyZWFrIGl0IVxuICAgICAgICAgICAgaWYgKHBvc3RndWlkID09IG15Z3VpZCl7XG4gICAgICAgICAgICAgIGlmIChzY29wZS4kcGFyZW50Lmd1aWR0Z3QgIT0gJzAnKXtcbiAgICAgICAgICAgICAgICB1cGRhdGVfZ3VpZHRndCA9ICcwJzsgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGNsaWtpbmcgdGhlIG9uZSB0aGF0IEkgbGlrZWRcbiAgICAgICAgICAgIC8vIHRvIGRpc2xpa2UgdGhlIG1lc3NhZ2Ugd2luZG93XG4gICAgICAgICAgICBpZiAocG9zdGd1aWQgPT0gbXlndWlkdGd0KSB7XG4gICAgICAgICAgICAgIHVwZGF0ZV9ndWlkdGd0ID0gJzAnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBwcm9wYWdhdGUgdG8gdXBwZXIgc2NvcGUgZm9yIGd1aWR0Z3QgdXBkYXRlXG4gICAgICAgICAgICBzY29wZS4kZW1pdCgnc2V0Omd1aWR0Z3QnLCB1cGRhdGVfZ3VpZHRndCk7IFxuXG4gICAgICAgICAgICAvLyB1cGRhdGUgc2Vzc2lvbiBpbmZvcm1hdGlvbiBvZiBtaW5lIHNvIG15IHNlc3Npb24gdGVsbHMgbWUgdGhhdCxcbiAgICAgICAgICAgIC8vIEkgbGlrZSB0aGlzIGd1aWQgYXQgdGhpcyBtb21lbnQgaW4gc2VydmVyIGRiXG4gICAgICAgICAgICBTZXNzaW9uU3ZjLnVwZGF0ZUNvdXBsaW5nKG15Z3VpZCwgdXBkYXRlX2d1aWR0Z3QpXG4gICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvYyl7XG4gICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiU3VjY2Vzc2Z1bGx5IHVkcGF0ZWQgY291cGxpbmdcIiwgZG9jKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gdXBkYXRlIG15IHBvc3QncyBndWlkdGd0IHRvIGJlIHRoaXMgcG9zdCdzIGd1aWQgaW4gc2VydmVyIGRiXG4gICAgICAgICAgICAvLyB0aGlzIHVwZGF0ZSBpcyBmb3IgdGhlIHBlb3BsZSB3aG8gYXJlIGxvb2tpbmcgYXQgbXkgcG9zdHNcbiAgICAgICAgICAgIHZhciB1cGRhdGVzID0ge1xuICAgICAgICAgICAgICBndWlkICAgIDogbXlndWlkLFxuICAgICAgICAgICAgICBndWlkdGd0IDogdXBkYXRlX2d1aWR0Z3RcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBQb3N0c1N2Yy51cGRhdGVHdWlkdGd0KHVwZGF0ZXMpXG4gICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRvYyl7XG4gICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiU3VjY2Vzc2Z1bGx5IHVkcGF0ZWQgcG9zdCdzIGd1aWR0Z3RcIiwgZG9jKTtcbiAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIGNvdXBsaW5nIHVwZGF0ZSwgbWFwIGhhcyB0byBiZSB1cGRhdGVzIGFzIHdlbGxcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIC8vIE1JR0hUIEhBVkUgVE8gQ09NRSBCQUNLIEZPUiBPUFRJTUlaQVRJT05cbiAgICAgICAgICAgIC8vIHRoaXMgaGF2ZSB0byBiZSB1cGRhdGUgdG8gYmUgY29tbXVuaWNhdGVkIHRocm91Z2ggdGhlIHNlcnZlclxuICAgICAgICAgICAgaWYgKHNjb3BlLiRwYXJlbnQuZ3VpZHRndCA9PSAwKXtcbiAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3NldDpjb3VwbGluZycsIDEpOyAvLyBwcm9wYWdhdGUgdG8gdXBwZXIgc2NvcGUgZm9yIGNvdXBsaW5nIHVwZGF0ZVxuICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTsgLy8gZm9yY2UgdG8gdXBkYXRlIERPTVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcGUucG9zdGNvdXBsZXN0YXR1cyA9PSAxICYmIHNjb3BlLiRwYXJlbnQuZ3VpZHRndCAhPSAwKXtcbiAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3NldDpjb3VwbGluZycsIDApOyAvLyBwcm9wYWdhdGUgdG8gdXBwZXIgc2NvcGUgZm9yIGNvdXBsaW5nIHVwZGF0ZVxuICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTsgLy8gZm9yY2UgdG8gdXBkYXRlIERPTVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVQb3N0VGltZXIoKXtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiTGlmZSAlOlwiLCBzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UpO1xuICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gc2NvcGUucG9zdGxpZmUgKyBcIm1zXCI7XG5cbiAgICAgICAgICAgIHZhciBwb3N0YmFybGlmZSA9IGVsZW1lbnQuY2hpbGRyZW4oKS5jaGlsZHJlbihcIi5wb3N0bGlmZWJhclwiKTtcblxuICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb24nLCBkdXJhdGlvbik7XG5cbiAgICAgICAgICAgIGlmIChzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPiAwLjk1KXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2EnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9hJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPD0gMC45NSAmJiBzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPiAwLjkpe1xuICAgICAgICAgICAgICAvKiBDaHJvbWUsIFNhZmFyaSwgT3BlcmEgKi9cbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnLXdlYmtpdC1hbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fYicpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA8PSAwLjkgJiYgc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID4gMC44NSl7XG4gICAgICAgICAgICAgIC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqL1xuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9jJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCdhbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fYycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlIDw9IDAuODUgJiYgc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID4gMC43NSl7XG4gICAgICAgICAgICAgIC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqL1xuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9kJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCdhbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlIDw9IDAuNzUgJiYgc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID4gMC42KXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2UnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9lJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPD0gMC42ICYmIHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA+IDAuNSl7XG4gICAgICAgICAgICAgIC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqL1xuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9mJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCdhbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fZicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlIDw9IDAuNSAmJiBzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPiAwLjMpe1xuICAgICAgICAgICAgICAvKiBDaHJvbWUsIFNhZmFyaSwgT3BlcmEgKi9cbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnLXdlYmtpdC1hbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1fZycpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIHBvc3RsaWZlYmFyX2NzcyA9IHBvc3RiYXJsaWZlLmNzcygnYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2cnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA8PSAwLjMgJiYgc2NvcGUucG9zdGxpZmVwZXJjZW50YWdlID4gMC4yKXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2gnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9oJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzY29wZS5wb3N0bGlmZXBlcmNlbnRhZ2UgPD0gMC4yICYmIHNjb3BlLnBvc3RsaWZlcGVyY2VudGFnZSA+IDAuMSl7XG4gICAgICAgICAgICAgIC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqL1xuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCctd2Via2l0LWFuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9pJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB2YXIgcG9zdGxpZmViYXJfY3NzID0gcG9zdGJhcmxpZmUuY3NzKCdhbmltYXRpb24tbmFtZScsICdwb3N0bGlmZWFuaW1faScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgLyogQ2hyb21lLCBTYWZhcmksIE9wZXJhICovXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJy13ZWJraXQtYW5pbWF0aW9uLW5hbWUnLCAncG9zdGxpZmVhbmltX2onKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBwb3N0bGlmZWJhcl9jc3MgPSBwb3N0YmFybGlmZS5jc3MoJ2FuaW1hdGlvbi1uYW1lJywgJ3Bvc3RsaWZlYW5pbV9qJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjdXN0b21pemVJbmZvV2luZG93KCl7XG4gICAgICAgICAgLy8gUmVmZXJlbmNlIHRvIHRoZSBESVYgdGhhdCB3cmFwcyB0aGUgYm90dG9tIG9mIGluZm93aW5kb3dcbiAgICAgICAgICB2YXIgaXdPdXRlciA9ICQoJy5nbS1zdHlsZS1pdycpO1xuICAgICAgICAgIFxuICAgICAgICAgIHZhciBpd0JhY2tncm91bmQgPSBpd091dGVyLnByZXYoKTtcblxuICAgICAgICAgIC8vIFJlbW92ZSB0aGUgYmFja2dyb3VuZCBzaGFkb3cgRElWXG4gICAgICAgICAgIGl3QmFja2dyb3VuZC5jaGlsZHJlbignOm50aC1jaGlsZCgyKScpLmNzcyh7J2Rpc3BsYXknIDogJ25vbmUnfSk7XG5cbiAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSB3aGl0ZSBiYWNrZ3JvdW5kIERJVlxuICAgICAgICAgICBpd0JhY2tncm91bmQuY2hpbGRyZW4oJzpudGgtY2hpbGQoNCknKS5jc3MoeydkaXNwbGF5JyA6ICdub25lJ30pO1xuXG4gICAgICAgICAgLy8gQ2hhbmdlcyB0aGUgZGVzaXJlZCB0YWlsIHNoYWRvdyBjb2xvci5cbiAgICAgICAgICBpd0JhY2tncm91bmQuY2hpbGRyZW4oJzpudGgtY2hpbGQoMyknKS5maW5kKCdkaXYnKS5jaGlsZHJlbigpLmNzcyh7XG4gICAgICAgICAgICAnYm94LXNoYWRvdyc6ICcwIDFweCA2cHggcmdiYSgxNzgsIDE3OCwgMTc4LCAwLjYpJywgXG4gICAgICAgICAgICAnei1pbmRleCcgOiAnMScsXG4gICAgICAgICAgICAnYm9yZGVyJzogJzBweCd9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGN1c3RvbWl6ZUNsb3NlQnRuKCl7XG4gICAgICAgICAgLy8gUmVmZXJlbmNlIHRvIHRoZSBESVYgdGhhdCB3cmFwcyB0aGUgYm90dG9tIG9mIGluZm93aW5kb3dcbiAgICAgICAgICB2YXIgaXdPdXRlciA9ICQoJy5nbS1zdHlsZS1pdycpO1xuXG4gICAgICAgICAgdmFyIGl3Q2xvc2VCdG4gPSBpd091dGVyLm5leHQoKTtcblxuICAgICAgICAgIC8qXG4gICAgICAgICAgY29uc29sZS5sb2coXCJwb3N0bG9jYWwgbGVhbnRoOlwiLCBpd091dGVyLnBhcmVudCgpLmZpbmQoJyNwb3N0bG9jYWwnKS5sZW5ndGgpO1xuICAgICAgICAgIGlmIChzY29wZS5wb3N0bG9jYWxzdGF0dXMgPT0gZmFsc2UgJiYgMCA9PSBpd091dGVyLnBhcmVudCgpLmZpbmQoJyNwb3N0bG9jYWwnKS5sZW5ndGgpe1xuICAgICAgICAgICAgaXdDbG9zZUJ0bi5hZnRlcihcIjxpbWcgaWQ9J3Bvc3Rsb2NhbCcgc3JjPSdodHRwOi8vY2RuLWltZy5lYXN5aWNvbi5uZXQvcG5nLzI0LzI0NDAucG5nJyB3aWR0aD0nMjAnLCBoZWlnaHQ9JzIwJy8+XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAqL1xuXG4gICAgICAgICAgLy8gQXBwbHkgdGhlIGRlc2lyZWQgZWZmZWN0IHRvIHRoZSBjbG9zZSBidXR0b25cbiAgICAgICAgICBpd0Nsb3NlQnRuLmNzcyh7XG4gICAgICAgICAgICBvcGFjaXR5OiAnMC44JywgLy8gYnkgZGVmYXVsdCB0aGUgY2xvc2UgYnV0dG9uIGhhcyBhbiBvcGFjaXR5IG9mIDAuN1xuICAgICAgICAgICAgcmlnaHQ6ICcyMHB4JywgdG9wOiAnMjBweCcsIC8vIGJ1dHRvbiByZXBvc2l0aW9uaW5nXG4gICAgICAgICAgfSk7IFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICcuL3RlbXBsYXRlcy93aW5kb3cuaHRtbCcsXG4gICAgICAgIGxpbms6IGxpbmtcbiAgICB9O1xufSk7XG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcci5jb250cm9sbGVyKCdQb3N0c0N0cmwnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlLCBDb25maWdTdmMsIFBvc3RzU3ZjLCBVdGlsU3ZjLCAkd2luZG93LCAkZG9jdW1lbnQsICR0aW1lb3V0KXtcclxyXHQvKiBlbWl0IGJyb2FkY2FzdCBmb3IgY3VycmVudCBwYWdlSWQgKi9cclx0JHNjb3BlLiRlbWl0KCdzZXQ6cGFnZWNoYW5nZScsICRzY29wZS5wYWdlSWQucG9zdCk7XHJcclx0JHNjb3BlLnBvc3RzID0gW107XHJcclx0LyogYXMgc2VydmVyIHRlbGxzIHRoZXJlIHdhcyBuZXcgcG9zdCwgbGV0cyByZS1sb2FkIGxpc3QgZGF0YSAqL1xyXHQkc2NvcGUuJG9uKCd3czpuZXdfcG9zdCcsIGZ1bmN0aW9uKF8sIHBvc3Qpe1xyXHRcdCRzY29wZS5yZXF1ZXN0RmV0Y2goKTtcclx0fSk7XHJcclx0JHNjb3BlLmFkZFBvc3QgPSBmdW5jdGlvbigpIHtcclx0XHQvKiBjaGVjayBpZiB0aGUgcG9zdCBjb250ZW50IGlzIHRoZXJlIC0gb25seSBmb3IgV0VCIGZvciBlbnRlciBidXR0b24gdG8gcG9zdCAqL1xyXHRcdGlmICghJHNjb3BlLmNvbnRlbnQpe1xyXHRcdFx0Y29uc29sZS5sb2coXCJVc2VyIGF0dGVtcHRlZCB0byBwb3N0IHdpdGggMCB3b3Jkcy5cIilcclx0XHRcdHJldHVybjtcclx0XHR9XHJcclx0XHQvKiBnZXQgYXV0b2NvbXBsZXRlZCBwbGFjZSBhbmQgcmVzZXQoc2V0IHRvIHVuZGVmaW5lZCkgKi9cclx0XHR2YXIgcGxhY2UgICAgPSAkc2NvcGUucG9zdHBsYWNlO1xyXHRcdHZhciBsb2NhdGlvbiA9ICRzY29wZS5wb3N0TG9jYXRpb247XHJcclx0XHR2YXIgbG9jYWxfc3RhdHVzO1xyXHRcdHZhciBwb3N0TG9jYXRpb25Gcm9tVXNlckxvY2F0aW9uID0gVXRpbFN2Yy5nZXREaXN0YW5jZUZyb21MYXRMb25JbkttKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG9uLCAkc2NvcGUudXNlckxvY2F0aW9uLmxhdCwgJHNjb3BlLnVzZXJMb2NhdGlvbi5sb24pO1xyXHRcdGNvbnNvbGUubG9nKFwicG9zdCBsb2NhdGlvbiBmcm9tIHVzZXIgbG9jYXRpb24gOiBcIiwgcG9zdExvY2F0aW9uRnJvbVVzZXJMb2NhdGlvbik7XHJcdFx0LyogaWYgbGVzcyB0aGFuIDNrbSAqL1xyXHRcdGlmIChwb3N0TG9jYXRpb25Gcm9tVXNlckxvY2F0aW9uIDwgMyl7XHJcdFx0XHRjb25zb2xlLmxvZyhcInBvc3RMb2NhdGlvbkZyb21Vc2VyTG9jYXRpb24gPCAzXCIsIChwb3N0TG9jYXRpb25Gcm9tVXNlckxvY2F0aW9uIDwgMykpO1xyXHRcdFx0bG9jYWxfc3RhdHVzID0gdHJ1ZTtcclx0XHR9XHJcdFx0ZWxzZSB7XHJcdFx0XHRjb25zb2xlLmxvZyhcInBvc3RMb2NhdGlvbkZyb21Vc2VyTG9jYXRpb24gPCAzXCIsIChwb3N0TG9jYXRpb25Gcm9tVXNlckxvY2F0aW9uIDwgMykpO1xyXHRcdFx0bG9jYWxfc3RhdHVzID0gZmFsc2U7XHJcdFx0fVxyXHRcdFxyXHRcdHZhciBsb2NhdGlvbkpTT04gPSBKU09OLnN0cmluZ2lmeShsb2NhdGlvbik7XHJcclx0XHR2YXIgcmVsYXRpdmVMaWZlU3Bhbjtcclx0XHRpZiAoJHNjb3BlLnRpbWV2YWx1ZSA8PSBDb25maWdTdmMubWF4SW5zdGFudExpZmVTcGFuKXtcclx0XHRcdHZhciBjaGFyTGVuID0gJHNjb3BlLmNvbnRlbnQubGVuZ3RoO1xyXHRcdFx0aWYgKGNoYXJMZW4gPCA1KVxyXHRcdFx0e1xyXHRcdFx0XHRyZWxhdGl2ZUxpZmVTcGFuID0gNDAwMDtcclx0XHRcdH1cclx0XHRcdGVsc2Vcclx0XHRcdHtcclx0XHRcdFx0cmVsYXRpdmVMaWZlU3BhbiA9IGNoYXJMZW4gKiBVdGlsU3ZjLm1hcFJhbmdlKGNoYXJMZW4sIDUsIDIwLCA3MDAsIDQwMCk7XHJcdFx0XHR9XHJcdFx0fVxyXHRcdGVsc2Uge1xyXHRcdFx0cmVsYXRpdmVMaWZlU3BhbiA9ICRzY29wZS50aW1ldmFsdWU7XHJcdFx0fVxyXHJcdFx0UG9zdHNTdmMuY3JlYXRlKFxyXHRcdHtcclx0XHRcdGJvZHkgICAgOiAgJHNjb3BlLmNvbnRlbnQsXHJcdFx0XHRsb2NhdGlvbjogIGxvY2F0aW9uSlNPTixcclx0XHRcdHBsYWNlICAgOiAgcGxhY2UsXHJcdFx0XHRndWlkICAgIDogICRzY29wZS5ndWlkLFxyXHRcdFx0Z3VpZHRndCA6ICAkc2NvcGUuZ3VpZHRndCxcclx0XHRcdGxpZmVzcGFuOiAgcmVsYXRpdmVMaWZlU3Bhbixcclx0XHRcdGlzbG9jYWwgOiAgbG9jYWxfc3RhdHVzXHJcdFx0fSlcclx0XHQuc3VjY2VzcyhmdW5jdGlvbihwb3N0KXtcclx0XHRcdFx0XHRcclx0XHRcdC8qIHJlc2V0IGlucHV0IGZvcm1zICovXHJcdFx0XHQkc2NvcGUuY29udGVudCAgPSBudWxsO1xyXHRcdH0pXHJcdFx0LmVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cyl7XHJcdFx0XHRzd2FsKFwiUG9zdCBmYWlsZWRcIiwgXCJQbGVhc2UgY29tcGxldGUgdGhlIGZyb20gY29ycmVjdGx5XCIsIFwiZXJyb3JcIik7XHJcdFx0fSk7XHJcdH07XHJcclx0LyogYXMgc2VydmVyIHRlbGxzIHRoZXJlIHdhcyBuZXcgcG9zdCwgbGV0cyByZS1sb2FkIGxpc3QgZGF0YSAqL1xyXHQkc2NvcGUucmVxdWVzdEZldGNoID0gZnVuY3Rpb24oKSB7XHJcdFx0UG9zdHNTdmMuZmV0Y2goKVxyXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHBvc3RzKXtcclx0XHRcdCRzY29wZS5wb3N0cyA9IHBvc3RzO1xyXHRcdH0pO1xyXHR9O1xyXHJcdC8qIHVwZGF0ZSBndWlkIG9mIHBvc3QgKi9cclx0JHNjb3BlLnVwZGF0ZUd1aWR0Z3QgPSBmdW5jdGlvbihteWd1aWQsIGd1aWR0Z3QpIHtcclx0XHR2YXIgdXBkYXRlcyA9IHtcclx0XHRcdGd1aWQgICAgOiBteWd1aWQsXHJcdFx0XHRndWlkdGd0IDogZ3VpZHRndFxyXHRcdH07XHJcclx0XHRjb25zb2xlLmxvZyhcInVkcGF0ZSB0byBwb3N0IGd1aWR0Z3Q6XCIsIHVwZGF0ZXMpXHJcclx0XHRQb3N0c1N2Yy51cGRhdGVHdWlkdGd0KHVwZGF0ZXMpO1xyXHR9XHJcclx0Lyokc2NvcGUucmVxdWVzdEZldGNoKCk7Ki9ccn0pO1xyXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdQb3N0c1N2YycsIGZ1bmN0aW9uKCRodHRwKXtcblx0dGhpcy5mZXRjaCA9IGZ1bmN0aW9uKGd1aWRPYmope1xuXHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnLCBndWlkT2JqKTtcblx0fTtcblxuXHR0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKHBvc3Qpe1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Bvc3RzJywgcG9zdCk7XG5cdH07XG5cblx0dGhpcy5yZW1vdmUgPSBmdW5jdGlvbihwb3N0KXtcblx0XHQvL2NvbnNvbGUubG9nKFwiZGVsZXRpbmcgcG9zdGluZ1wiKTtcblx0XHQvL2NvbnNvbGUubG9nKCdwb3N0Ll9pZDonLCBwb3N0Ll9pZCk7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcG9zdHMvcG9zdHNfZGVsZXRlJywgcG9zdCk7XG5cdH07XG5cblx0dGhpcy51cGRhdGVHdWlkdGd0ID0gZnVuY3Rpb24odXBkYXRlcyl7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcG9zdHMvdXBkYXRlX2d1aWR0Z3QnLCB1cGRhdGVzKTtcblx0fVxufSk7XG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdTZXNzaW9uU3ZjJywgZnVuY3Rpb24oJGh0dHApe1xuXHR0aGlzLmZldGNoID0gZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Nlc3Npb25zJyk7XG5cdH07XG5cblx0dGhpcy5lbnRlciA9IGZ1bmN0aW9uKHNlc3Npb24pe1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zJywgc2Vzc2lvbik7XG5cdH07XG5cblx0dGhpcy5yZW1vdmUgPSBmdW5jdGlvbihndWlkKXtcblx0XHQvL2NvbnNvbGUubG9nKFwiZGVsZXRpbmcgc2Vzc2lvblwiKTtcblx0XHQvL2NvbnNvbGUubG9nKCdzZXNzaW9uLmd1aWQ6JywgZ3VpZCk7XG5cdFx0dmFyIHNlc3Npb24gPSB7Z3VpZDogZ3VpZH07XG5cdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9zZXNzaW9ucycsIHNlc3Npb24pO1xuXHR9O1xuXG5cdHRoaXMudXBkYXRlV2F0Y2hMb2NhdGlvbiA9IGZ1bmN0aW9uKGN1cnJlbnRfbWFwX253LCBjdXJyZW50X21hcF9zZSwgY3VycmVudF9tYXBfY2VudGVyLCBndWlkKXtcblx0XHR2YXIgd2F0Y2hsb2MgPSB7XG4gICAgICAgICAgICBud19sYXQgICAgIDogY3VycmVudF9tYXBfbncubGF0LFxuICAgICAgICAgICAgbndfbG9uICAgICA6IGN1cnJlbnRfbWFwX253LmxvbixcbiAgICAgICAgICAgIHNlX2xhdCAgICAgOiBjdXJyZW50X21hcF9zZS5sYXQsXG4gICAgICAgICAgICBzZV9sb25cdCAgIDogY3VycmVudF9tYXBfc2UubG9uLFxuICAgICAgICAgICAgY2VudGVyX2xhdCA6IGN1cnJlbnRfbWFwX2NlbnRlci5sYXQsXG4gICAgICAgICAgICBjZW50ZXJfbG9uIDogY3VycmVudF9tYXBfY2VudGVyLmxvblxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHdhdGNobG9jSlNPTiA9IEpTT04uc3RyaW5naWZ5KHdhdGNobG9jKTtcblxuICAgICAgICB2YXIgdXBkYXRlZHNlc3Npb24gPSB7XG4gICAgICAgICAgICB3YXRjaGxvYzogd2F0Y2hsb2NKU09OLFxuICAgICAgICAgICAgZ3VpZCAgICA6IGd1aWRcbiAgICAgICAgfTtcblxuICAgICAgICAvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgY29uc29sZS5sb2coXCJ1cGRhdGluZyB3YXRjaCBsb2NhdGlvblwiKTtcblxuXHRcdC8vY29uc29sZS5sb2coXCJ1cGRhdGVkc2Vzc2lvbjpcIiwgdXBkYXRlZHNlc3Npb24pO1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zL3VwZGF0ZV9zZXNzaW9uJywgdXBkYXRlZHNlc3Npb24pO1xuXHR9O1xuXG5cdHRoaXMudXBkYXRlQ291cGxpbmcgPSBmdW5jdGlvbihndWlkLCBndWlkdGd0KXtcblx0XHRcblx0XHR2YXIgdXBkYXRlZGd1aWR0Z3QgPSB7XG5cdFx0XHRndWlkICAgOiBndWlkLFxuXHRcdFx0Z3VpZHRndDogZ3VpZHRndFxuXHRcdH07XG5cblx0XHQvLyB1cGRhdGUgd2F0Y2hsb2Mgd2hlbiBjZW50ZXIgY2hhbmdlZC5cbiAgICAgICAgY29uc29sZS5sb2coXCJ1cGRhdGluZyBjb3VwbGluZ1wiKTtcblxuXHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zL3VwZGF0ZV9jb3VwbGluZycsIHVwZGF0ZWRndWlkdGd0KVxuXHR9O1xufSk7XG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==